/**
 * D·List v0.9.11
 * Copyright (C) 2014-2023 Dataludi Inc.
 * All Rights Reserved.
 */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).DList=e()}(this,function(){"use strict";let e=0;class a{constructor(t){this.$_destroyed=!1,this.$_destroying=!1,t||(this.$_hash=String(e++))}static destroy(t){return t&&t.destroy()}destroy(){return this.$_destroyed||this.$_destroying||(this.$_destroyed=!0,this.$_destroying=!0,this._doDestory()),null}_doDestory(){}get destroying(){return this.$_destroying}get hash(){return this.$_hash}isMe(t){return t===this.$_hash}_doAssignProps(t){return!1}assignProps(e){if(!0===this._doAssignProps(e))return this;if(e){var i,s=Object.getPrototypeOf(this);for(i in e){var r=e[i];let t=Object.getOwnPropertyDescriptor(s,i);if(t){if(t.set)t.set.call(this,r);else if(t.get){const n=t.get.call(this);n instanceof a&&n.assignProps(r)}}else{let e=Object.getPrototypeOf(s);for(;e;){let t=Object.getOwnPropertyDescriptor(e,i);if(t){if(t.set)t.set.call(this,r);else if(t.get){const o=t.get.call(this);o instanceof a&&o.assignProps(r)}break}e=Object.getPrototypeOf(e)}}}}return this}toString(){return this.constructor.name}toBool(t){return"string"==typeof t?"true"===t:t}toNum(t,e=NaN){return t=parseFloat(t),isNaN(t)?e:t}}class t extends a{wrapper(){return this._wrapper}wrapperOrThis(){return this._wrapper||this}createWrapper(t){const e=this._wrapper=new t;return e.$_c=this,e}setWrapper(t){return(this._wrapper=t).$_c=this,t}isWrapper(t){return t===this._wrapper}}class i extends a{_doDestory(){this.$_c=null}}class s extends a{constructor(){super(...arguments),this._listeners=[]}addListener(t){t&&this._listeners.indexOf(t)<0&&this._listeners.push(t)}removeListener(t){t=this._listeners.indexOf(t);0<=t&&this._listeners.splice(t,1)}_fireEvent(t){const e=Array.prototype.slice.call(arguments,0);for(const s of(e[0]=this)._listeners){const r=s[t];if(r){var i=r.apply(s,e);if(void 0!==i)return i}}}}const r=(new Date).getTime();Element.prototype.animate||(Element.prototype.animate=function(t){});var u,n,o,c,g,h,p,f,l,d,_,w,m,v,y,b,S,C,x,R,E,V,$,A,L,D,k,T,P,M=!!window.opera||0<=navigator.userAgent.indexOf(" OPR/"),I=!!window.chrome&&!M;const N=0<Object.prototype.toString.call(HTMLElement).indexOf("Constructor")||!I&&!M&&0<=navigator.userAgent.indexOf("Safari"),O=/\r\n|\n/g,B=/,(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)(?=(?:[^\']*\'[^\']*\')*[^\']*$)/,F=/\t/g,z=/\t+/g,H=/"([^"]*(?="))"/,W=/'([^']*(?='))'/,G='"'.charCodeAt(0),U="'".charCodeAt(0);class q{static now(){return+new Date}static stopEvent(t,e=!1){t.preventDefault?(t.preventDefault(),t.stopPropagation()):t.returnValue=!1,e&&t.stopImmediatePropagation()}static getErrorStack(t){const e=t.stack;return e?e.split("\n").map(t=>t+"<br/>"):""}static getBaseClassName(t){return Object.getPrototypeOf(t.constructor).name}static isObject(t){return t&&"object"==typeof t&&!Array.isArray(t)}static assign(t,e){this.isObject(e)&&Object.assign(t,e)}static isValidObject(t){if(this.isObject(t))for(var e in t)if(t.hasOwnProperty(e))return!0}static copyObject(t){if(t&&"object"==typeof t&&!Array.isArray(t))return Object.assign({},t)}static checkArray(t){return Array.isArray(t)?t:void 0}static makeArray(t,e=!1){return null!=t?Array.isArray(t)?t:[t]:e?[]:void 0}static makeNumArray(t){return Array.isArray(t)?t.map(t=>+t):null!=t?[+t]:[]}static getIntArray(i,s=0){const r=[];for(let t=s,e=s+i;t<e;t++)r.push(t);return r}static isValueArray(e){if(Array.isArray(e)){for(let t=e.length-1;0<=t;t--)if(null!=e[t]&&"object"==typeof e[t])return!1;return!0}return!1}static toArray(t){return Array.isArray(t)?t:null!=t?[t]:null}static copyArray(t){return Array.isArray(t)?t.slice(0):null!=t?[t]:void 0}static push(i,s){if(s&&0<s.length)for(let t=0,e=s.length;t<e;t++)i.push(s[t])}static isDefined(t){return null!=t}static isNotDefined(t){return null==t}static isNumber(t){return"number"==typeof t}static isValidNumber(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)}static toNumber(t,e=0){return isNaN(t)||null===t||""===t?e:+t}static getEnumValues(e){return Object.keys(e).map(t=>e[t])}static compareText(t,e,i=!1){return t=t||"",e=e||"",i&&(t=t.toLocaleLowerCase(),e=e.toLocaleLowerCase()),e<t?1:t<e?-1:0}static getTimeF(){return(new Date).getTime()/1e3}static getTimer(){return(new Date).getTime()-r}static isWhiteSpace(t){return!t||!t.trim()}static pad(t,e,i){return e=Math.max(e||2,1),i=i||"0",new Array(e-String(t).length+1).join(i)+t}static pad16(t,e,i){return e=Math.max(e||2,1),i=i||"0",new Array(e-t.toString(16).length+1).join(i)+t.toString(16)}static pick(...e){var i,s=e.length;for(let t=0;t<s;t++)if(null!=(i=e[t]))return i}static pickNum(...e){var i=e.length;for(let t=0;t<i;t++)if(!isNaN(e[t])&&null!==e[t])return e[t];return NaN}static included(e,...i){var s=i.length;for(let t=0;t<s;t++)if(i[t]==e)return!0;return!1}static compareTextValue(t,e,i,s){if(t===e)return!0;let r=String(t),n=null==e?void 0:String(e);return!r&&!n||!(!r||!n)&&(i||(r=r.toLowerCase(),n=n.toLowerCase()),s?0<=n.indexOf(r):r==n)}static cast(t,e){return t instanceof e?t:null}static irandom(t,e){if(void 0!==e){var i=t>>0,e=e>>0;return Math.random()*(e-i)+i>>>0}t>>=0;return Math.random()*t>>0}static irandomExcept(t,e,i){if(0===t&&1===e&&isNaN(i))throw new Error("Invalid irandom2");for(;;){var s=this.irandom(e,i);if(s!==t)return s}}static brandom(){return.5<Math.random()}static srandom(t,e){let i="";var s=this.irandom(t,e);for(let t=0;t<s;t++)i+=String.fromCharCode(this.irandom(97,123));return i}static erandom(t){t=Object.values(t);return t[this.irandom(t.length)]}static arandom(t){return t[Math.random()*t.length>>0]}static iarandom(e,i,t){const s=new Array;for(let t=e;t<i;t++)s.push(t);for(;s.length>t;)s.splice(q.irandom(s.length),1);return s}static alert(t){window.alert(t)}static toInt(t,e){e=parseInt(t,e||10);return isNaN(e)?0:e}static toFloat(t){t=parseFloat(t);return isNaN(t)?0:t}static toEven(t){return 1&t?t+1:t}static hex(t,e=2,i="0"){e=Math.max(e||2,1);t=t.toString(16);return i=i||"0",new Array(e-t.length+1).join(i)+t}static toStr(t){return Number.isNaN(t)||null==t?"":String(t)}static extend(t,e){for(var i in t=t||{},e)t[i]=e[i];return t}static equalNumbers(t,e){return isNaN(t)==isNaN(e)&&!isNaN(t)&&t==e}static equalArrays(e,i){if(e===i)return!0;if(null==e||null==i)return!1;var s=e.length;if(s!=i.length)return!1;for(let t=0;t<s;++t)if(e[t]!==i[t])return!1;return!0}static equalObjects(t,e){if(t===e)return!0;if(!t&&!e)return!0;if(!t||!e)return!1;for(var i in t)if(t.hasOwnProperty(i)&&t[i]!==e[i])return!1;for(var i in e)if(e.hasOwnProperty(i)&&t[i]!==e[i])return!1;return!0}static parseDate(t,e){const i=new Date(t);return isNaN(i.getTime())?e||new Date:i}static isLeapYear(t){return t%4==0&&t%100!=0||t%400==0}static incMonth(t,e){var i=t.getDate();return t.setDate(1),t.setMonth(t.getMonth()+e),t.setDate(Math.min(i,q.month_days[q.isLeapYear(t.getFullYear())?1:0][t.getMonth()])),t}static minDate(t,e){return null!==t||null===e&&t.getTime()<e.getTime()?t:e}static maxDate(t,e){return null===t&&(null!==e||t.getTime()>e.getTime())?t:e}static getTextLength2(t){let e=0,i=0,s;for(;s=t.charCodeAt(i++);e+=s>>7?2:1);return e}static getClassName(t){if(t&&t.constructor)return t.constructor.name||function(t){let e=t.toString();return e=e.substring("function ".length),e=e.substring(0,e.indexOf("(")),e}(t.constructor)}static isInteger(t){return Number.isInteger?Number.isInteger(t):"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}static isEmpty(t){if(t)for(var e in t)return!1;return!0}static isNotEmpty(t){if(t)for(var e in t)return!0;return!1}static capitalize(t){if("string"!=typeof t)return"";const e=t.charAt(0);return"A"<=e&&e<="Z"?t:e.toUpperCase()+t.slice(1)}static uncapitalize(t){if("string"!=typeof t)return"";const e=t.charAt(0);return"a"<=e&&e<="z"?t:e.toLowerCase()+t.slice(1)}static labelize(e){if("string"!=typeof e)return"";const i=e.charAt(0);let s=(e="A"<=i&&i<="Z"?e:i.toUpperCase()+e.slice(1)).charAt(0);for(let t=1;t<e.length;t++){const i=e.charAt(t);"A"<=i&&i<="Z"&&(s+=" "),s+=i}return s}static deepClone(t){if(null===t||"object"!=typeof t)return t;const e=Array.isArray(t)?[]:{};for(var i of Object.keys(t))e[i]=q.deepClone(t[i]);return e}static getArray(e,i){const s=[];for(let t=0;t<e;t++)s.push(i);return s}static getNumArray(e,i=0){const s=[];for(let t=0;t<e;t++)s.push(i);return s}static hasSetter(t,e){for(;t;){var i=Reflect.getOwnPropertyDescriptor(t,e);if(i)return i.writable||!!i.set;t=Object.getPrototypeOf(t)}return!1}static dataUriToBinary(t){var e=";base64,",e=t.indexOf(e)+e.length,e=t.substring(e);const i=window.atob(e);var s=i.length;const r=new Uint8Array(new ArrayBuffer(s));for(let t=0;t<s;t++)r[t]=i.charCodeAt(t);return r}static assignProps(t,e){let i=!1;if(e)for(var s in e)e[s]!==t[s]&&(t[s]=e[s],i=!0);return i}static assignStyleAndProps(t,e){let i=!1;if(e)for(var s in e)("style"===s||t.hasOwnProperty(s))&&(t[s]=e[s],i=!0);return i}static dedupe(e,i){for(let t=(e=e.sort(i||((t,e)=>e<t?1:t<e?-1:0))).length-1;0<t;t--)e[t]===e[t-1]&&e.splice(t,1);return e}static isUnique(e,i){for(let t=(e=e.sort(i||((t,e)=>e<t?1:t<e?-1:0))).length-1;0<t;t--)if(e[t]===e[t-1])return!1;return!0}static sortNum(t){return t.sort((t,e)=>t-e)}static logElapsed(t,e){var i=+new Date;e(),console.log(t,+new Date-i+"ms")}static clamp(t,e,i){return isNaN(i)||(t=Math.min(t,i)),t=!isNaN(e)?Math.max(t,e):t}static splice(t,e,i,s){s=[e,i].concat(s);Array.prototype.splice.apply(t,s)}static makeIntArray(e,i){const s=new Array(Math.max(0,i-e));for(let t=e;t<i;t++)s[t-e]=t;return s}static setInterval(t,e){return setInterval(t,e)}static clearInterval(t){clearInterval(t)}static isStringArray(t){return Array.isArray(t)&&t.every(t=>"string"==typeof t)}static isNumberArray(t){return Array.isArray(t)&&t.every(t=>"number"==typeof t)}static makeLineSeparator(s){if(Array.isArray(s)){if(0<s.length){let i=s[0];for(let t=1,e=s.length;t<e;t++)i+="|"+s[t];return new RegExp(i,"g")}}else if(s)return new RegExp(s,"g")}static stripQuotes(t){var e=t.charCodeAt(0);return e===G?t=t.replace(H,"$1"):e===U&&(t=t.replace(W,"$1")),t}static isDate(t){return"[object Date]"===Object.prototype.toString.call(t)}static isValidDate(t){return t.getTime()===t.getTime()}static asFunction(t){return"function"==typeof t?t:void 0}static getFieldProp(t){var e=t.indexOf(".");if(0<=e)return{field:t.substring(0,e),props:t.substring(e+1).split(".")}}static watch(){return new j}}q.week_days=["일","월","화","수","목","금","토"],q.month_days=[[31,28,31,30,31,30,31,31,30,31,30,31],[31,29,31,30,31,30,31,31,30,31,30,31]];class j{constructor(){this._started=+new Date}elapsed(t=!1){var e=+new Date-this._started;return t&&(this._started=+new Date),e}elapsedText(t=!1,e="ms."){return this.elapsed(t)+e}}const Y={ko:{dateFormat:"yyyy.MM.dd",am:"오전",pm:"오후",notExistsDataField:"존재하지 않는 필드입니다: %1",notSpecifiedDataField:"하나 이상의 데이터필드가 설정돼야 합니다.",invalidFieldName:"잘못된 데이터필드 이름입니다: %1",invalidFieldIndex:"잘못된 데이터필드 index입니다: %1",invalidRowIndex:"잘못된 데이터행 index입니다: %1",canNotModifyData:"읽기 전용 데이터를 변경할 수 없습니다.",canNotModifyDeleted:"삭제 상태 행을 변경할 수 없습니다: %1",requiredField:"반드시 값을 지정해야 하는 필드입니다: %1",invalidValueInDomain:"값이 필드 값 도메인에 포함되지 않습니다: %1",invalidValueInRange:"값이 필드 값 범위에 포함되지 않습니다: %1",invalidToIndex:"잘못된 'to' index입니다.: %1",requireSourceData:"원본 data가 반드시 지정돼야 합니다.",requireFilterName:"필터 이름이 반드시 지정돼야 합니다.",invalidDateFormat:"잘못된 시간 날짜 형식입니다: %1",invalidSizeValue:"잘못된 Size 값입니다: %1",invalidOuterDiv:"잘못된 외부 div 입니다: %1",canNotHorzGrouping:"수평 모드일 때 그룹핑할 수 없습니다.",dataMustSet:"데이터가 먼저 설정돼야 합니다.",requireGroupingInfos:"하나 이상의 행 그룹핑 정보가 설정돼야 합니다.",canNotRowGrouping:"데이터링크 view에 대해 행그룹핑 할 수 없습니다. dataGroupBy()를 사용하세요.",canNotDataGrouping:"데이터링크 view가 아니면 데이터그룹핑할 수 없습니다. rowGroupBy()를 사용하세요.",canNotHorzInGrouping:"그룹핑 상태일 때 수평모드로 변경할 수 없습니다.",unknownLayoutType:"잘못된 layout 종류입니다: %1",layoutMustSet:"레이아웃 모델이 반드시 설정돼야 합니다.",unknownItemViewType:"잘못된 item view 종류입니다: %1",requireCommandName:"Command 이름이 지정돼야 합니다.",commandNameDuplicated:"이미 존재하는 command 이름입니다: %1",requireDataOrGroup:"데이터소스나 그룹 모델이 반드시 지정돼야 합니다."},en:{dateFormat:"M/d/yyyy",am:"AM",pm:"PM",notExistsDataField:"A data field is not exists: %1",notSpecifiedDataField:"At least one datafield must be set.",invalidFieldName:"Invalid field name: %1",invalidFieldIndex:"Invalid field index: %1",invalidRowIndex:"Invalid row index: %1",canNotModifyData:"Can not modify a readonly data.",canNotModifyDeleted:"Can not modify a deleted row: %1",requiredField:"Required field: %1",invalidValueInDomain:"The value is not int the domain: %1",invalidValueInRange:"The value is not int the range: %1",invalidToIndex:"Invalid 'to' index: %1",requireSourceData:"A source data must be set.",requireFilterName:"A filter name must be set.",invalidDateFormat:"Invalid datetime format: %1",invalidSizeValue:"Invalid size value: %1",invalidOuterDiv:"Invalid outer div element: %1",canNotHorzGrouping:"Can not row grouping in horz mode.",dataMustSet:"A data must be set first.",requireGroupingInfos:"At least one grouping info must be set.",canNotRowGrouping:"Can not row grouping by data link view. use dataGroupBy().",canNotDataGrouping:"Can not data grouping without data link view. rowGroupBy()를 사용하세요.",canNotHorzInGrouping:"Can not change to horz mode while grouping",unknownLayoutType:"Invalid layout: %1",layoutMustSet:"A layout model must be set.",unknownItemViewType:"Unknow item view type: %1",requireCommandName:"Command name must be supplied.",commandNameDuplicated:"Command name is already exists: %1",requireDataOrGroup:"A data or group view must be set."}};let Q,Z=Y.ko;const X=(t,e)=>{if(t&&q.isObject(e)&&(Z=Y[t]=e,"en"!==t)){var i=Y.en;for(const s in i)Z[s]=Z[s]||i[s]}},K=(t,e)=>t.replace("%1",e);class J{static setLogging(t=!0){this._logging=t}static log(...t){this._logging&&console.log.apply(console,t)}}J._logging=!1;const tt=new Error("Not Implemented."),et="%".charCodeAt(0);function it(t,e){let i,s;if(null==t||Number.isNaN(t)){if(e)return null;s=0,i=!0}else if(!(i=!isNaN(s=+t))){const r=t.trim();if(r.charCodeAt(r.length-1)===et&&(s=1===r.length?NaN:parseFloat(r)),isNaN(s)){if(e)return null;dt(Z.invalidSizeValue,t)}}return{size:s,fixed:i}}function st(t){return t&&!t.fixed?t.size:NaN}function rt(t,e){return t?t.fixed?t.size:t.size*e/100:NaN}function nt(t){if(t){if(t.rated)return{size:t.size,rated:!0};if(!t.fixed)return{size:t.size,rated:!1}}return null}class ot extends Error{}function at(t,e){if(!t)throw new ot(e)}class ht extends a{constructor(){super(...arguments),this._items={}}_doDestory(){this.clear()}get(t){return this._items[t]}clear(){for(var t in this._items)this._items[t].destroy();this._items={}}add(t,e){t&&e&&(this._items[t]=e)}remove(t){delete this._items[t]}removeAll(t){if(Array.isArray(t)){const i=this._items;t.forEach(t=>{const e=i[t];e&&(e.destroy(),delete i[t])})}}}(M=u=u||{}).UP="up",M.DOWN="down",M.LEFT="left",M.RIGHT="right";const lt=t=>{throw new Error(t)},dt=(t,e)=>{throw new Error(K(t,e))},_t=/[;\:]/;class ct{constructor(t){this.$_parse(this._format=t)}static getFormatter(t){let e=ct.Formatters[t];return e||(ct.Formatters[t]=e=new ct(t)),e}get format(){return this._format}toStr(t){return!0===t?this._trueText:this._falseText}$_parse(t){this._falseText=this._trueText=null,t&&(t=t.split(_t),this._falseText=t[0],0<t.length&&(this._trueText=t[1]))}}ct.Formatters={};function ut(t){return t<10?"0"+t:String(t)}const gt=["yy","yyyy","M","MM","d","dd","a","H","HH","h","hh","m","mm","s","ss","S","SS","SSS"],pt=[".","/","-",":"],ft="Z".charCodeAt(0),wt="z".charCodeAt(0),mt="A".charCodeAt(0),vt="a".charCodeAt(0),yt="y".charCodeAt(0),bt="M".charCodeAt(0),St="m".charCodeAt(0),Ct="d".charCodeAt(0),xt="H".charCodeAt(0),Rt="h".charCodeAt(0),Et="S".charCodeAt(0),Vt="s".charCodeAt(0);class $t{constructor(t){this._baseYear=2e3,this._preserveTime=!1,this._hasAmPm=!1,this._formatString="",this.formatString=t}static getFormatter(t){let e=$t.Formatters[t];return e||($t.Formatters[t]=e=new $t(t)),e}static get Default(){return $t.getFormatter(Z.dateFormat)}get format(){return this._format}get formatString(){return this._formatString}set formatString(t){(t=t||Z.dateFormat)!=this._formatString&&(this._tokens=[],this.parse(t),this._formatString=t)}toStr(e){if(!this._tokens)return"";var t=this._tokens;let i="";for(var s,r=0,n=t.length;r<n;r++){var o=t[r],a=o.length;switch(o.charCodeAt(0)){case yt:i+=2<a?e.getFullYear():ut(e.getFullYear()%100);break;case bt:i+=1<a?ut(e.getMonth()+1):e.getMonth()+1;break;case Ct:i+=1<a?ut(e.getDate()):e.getDate();break;case xt:i+=1<a?ut(e.getHours()):e.getHours();break;case Rt:if(this._hasAmPm){let t=e.getHours();0==t?t=12:12<t&&(t-=12),i+=1<a?ut(t):t}else i+=1<a?ut(e.getHours()):e.getHours();break;case St:i+=1<a?ut(e.getMinutes()):e.getMinutes();break;case Vt:i+=1<a?ut(e.getSeconds()):e.getSeconds();break;case vt:case mt:e.getHours()<12?i+=Z.am:i+=Z.pm;break;case Et:let t=e.getMilliseconds();i+=3==a?(s=t)<10?"00"+s:s<100?"0":String(s):2==a?ut(t):t.toString().substr(0,a);break;default:i+=o}}return i}parseDateFormatTokens(i){var s=[];if(i){const o=i.trim();var r=o.length;let e=0;for(;e<r;){let t=o.charAt(e);if(0<=pt.indexOf(t))s.push(t),e++;else{for(var n=e++;e<r&&o.charAt(e)==t;)e++;t=o.substring(n,e),gt.indexOf(t)<0&&(((n=t.charCodeAt(0))>=mt&&n<=ft||n>=vt&&n<=wt)&&dt(Z.invalidDateFormat,i)),s.push(t)}if(e<r&&q.isWhiteSpace(t=o.charAt(e)))for(s.push(t);e<r&&q.isWhiteSpace(o.charAt(e));)e++}}return s}parse(t){t&&(this._format=t||Z.dateFormat,this._tokens=this.parseDateFormatTokens(this._format),this._hasAmPm=0<=this._tokens.indexOf("a")||0<=this._tokens.indexOf("A"))}}$t.Formatters={};const At="0".charCodeAt(0),Lt="#".charCodeAt(0),Dt=",".charCodeAt(0),kt="s".charCodeAt(0),Tt="a".charCodeAt(0);class Pt{constructor(t){t=t.trim(),this._options=t?this.$_parse(this._format=t):{useGrouping:!1}}static getFormatter(t){let e=Pt.Formatters[t];return e||(Pt.Formatters[t]=e=new Pt(t)),e}static get Default(){return Pt.getFormatter(Pt.DEFAULT_FORMAT)}toStr(t){return t.toLocaleString(void 0,this._options)}$_parse(i){var s=i.length;if(0<s){const r={useGrouping:!1,minimumIntegerDigits:0,minimumFractionDigits:0,maximumFractionDigits:0};let e=i.indexOf(".");if(0<=e){let t=e+1;for(;t<s&&i.charCodeAt(t)===At;)r.minimumFractionDigits++,t++;for(r.maximumFractionDigits=r.minimumFractionDigits;t<s&&i.charCodeAt(t)===Lt;)r.maximumFractionDigits++,t++;e-=1}else e=s-1;let t=e;for(;0<=t&&i.charCodeAt(t)===At;)r.minimumIntegerDigits++,t--;for(;0<=t;)if(i.charCodeAt(t--)===Dt){r.useGrouping=!0;break}for(t=e;0<=t;)if(i.charCodeAt(t--)===kt){r.signDisplay="always";break}if(!r.signDisplay)for(t=e;0<=t;)if(i.charCodeAt(t--)===Tt){r.signDisplay="never";break}return r.minimumIntegerDigits=Math.max(1,r.minimumIntegerDigits),r}}}Pt.DEFAULT_FORMAT="",Pt.Formatters={};const Mt=/(.*)/,It=new RegExp(';(?=(?:[^"]*"[^"]*")*(?![^"]*"))');class Nt{constructor(t){this._pattern=Mt,this._replace="$1",this.$_parse(this._format=t)}static getFormatter(t){let e=Nt.Formatters[t];return e||(Nt.Formatters[t]=e=new Nt(t)),e}get format(){return this._format}toStr(t){return t&&t.replace(this._pattern,this._replace)}$_parse(t){if(t){const i=t.trim().split(It);if(1<i.length){let t=i[0].trim(),e=i[1].trim();t&&e&&('"'==t.charAt(0)&&(t=t.substr(1,t.length-2)),t&&('"'==e.charAt(0)&&(e=t.substr(1,e.length-2)),e&&(this._pattern=new RegExp(t,i[2]||""),this._replace=e)))}}}}Nt.Formatters={};const Ot="_rnd_",Bt="_fld_",Ft="_url_",zt="_width_",Ht="_height_",Wt="_name_",Gt="_span",Ut="_img",qt="_btn",jt="_box",Yt="_group",Qt="_bar",Zt="_shape",Xt="_svg",Kt="_clkable",Jt=/(\$|%)\{[^(\$|%)\{\}\;\|]+[\;\|]*[\w\s\-#@,\.\:가-힇ㄱ-ㅎㅏ-ㅣぁ-ゔァ-ヴー々〆〤一-龥]*[\;\|]*[\w\s\-#@,\.\:가-힇ㄱ-ㅎㅏ-ㅣぁ-ゔァ-ヴー々〆〤一-龥]*\}/g,te="@".charCodeAt(0);class ee{constructor(t,e,i,s){this.source=t,this.stock=e.charCodeAt(0)===te,this.name=this.stock?e.substring(1):e,this.default=i,this.format=s}static create(t,e,i){return new ee(void 0,t,e,i)}}class ie{constructor(t,e){function s(t,e){var i=t.indexOf("|",e),e=t.indexOf(";",e);return 0<=i&&0<=e?Math.min(i,e):0<=i?i:e}this._params=[],this._args={context:void 0,field:void 0};const r=this._params;let n=0;for(var o of e){var a=t.indexOf(o,n);const d=o.substring(2,o.length-1);var h=s(d);let i;if(a>n&&(r.push(t.substring(n,a)),n=a),0<=h){var l=d.substring(0,h),a=s(d,h+1);let t,e;0<=a?(t=d.substring(h+1,a),e=d.substring(a+1)):t=d.substring(h+1),i=new ee(o,l,t,e)}else i=new ee(o,d,void 0,void 0);r.push(i),n+=o.length}n<t.length&&r.push(t.substring(n))}static parse(t){if("string"==typeof t){var e=t.match(Jt);if(e)return new ie(t,e)}return t}static load(t){const e={};for(const s in t){var i=t[s];e[s]="string"==typeof i?ie.parse(i):i}return e}get count(){return this._params.length}get(t){return this._params[t]}inflate(t,i,s,r){const n=this._args;var o=this._params;let a="";n.context=t,n.field=s;for(let t=0,e=o.length;t<e;t++){var h=o[t];if(h instanceof ee){let t;if(r.inflateParam)if(h.stock){if(t=r.inflateStock(i,s,h),h.format){var l=typeof t;if(("number"==l||"bigint"==l)&&!Number.isNaN(t)){const d=Pt.getFormatter(h.format);d&&(t=d.toStr(t))}}}else t=r.inflateParam(i,s,h);else t=r[h.name];if("function"==typeof t&&(t=t(n)),1===e)return null!=t?t:h.default;a+=null!=t?t:h.default||""}else a+=h}return a}}(M=n=n||{}).HORIZONTAL="horizontal",M.VERTICAL="vertical",(M=o=o||{}).PORTRAIT="portrait",M.LANDSCAPE="landscape",(h=h=h||{}).START="start",h.CENTER="center",h.END="end",(h=c=c||{}).LEFT="left",h.CENTER="center",h.RIGHT="right",(h=g=g||{}).TOP="top",h.MIDDLE="middle",h.BOTTOM="bottom",(l=l=l||{}).DEFAULT="default",l.ROW="row",l.PIXEL="pixel",(l=p=p||{}).START="start",l.END="end",l.CENTER="center",l.SPACE_BETWEEN="spaceBetween",l.SPACE_AROUND="spaceAround";class se extends a{constructor(t){super(),this._icons={},q.isObject(t)&&(this._width=+t.width,this._height=+t.height,this._root=t.root,Object.assign(this._icons,t.icons))}get width(){return this._width}get height(){return this._height}getUrl(t){let e=this._icons[t];if(e)return this._root&&(e=this._root+e),e}get(t){return this._icons[t]}set(t,e){this._icons[t]=e}}(l=f=f||{}).ASCENDING="ascending",l.DESCENDING="descending";function re(t){return t&&"object"==typeof t&&!Array.isArray(t)}function ne(t,e){return void 0===t?e:t}function oe(t,e,i){return void 0===t?void 0===e?i:e:t}function ae(t,e){return t=parseFloat(t),isNaN(t)?e:t}function he(t,e){return t=parseFloat(t),isNaN(t)?parseFloat(e):t}function le(t,e,i){return isNaN(t)?isNaN(e)?i:e:t}function de(t){return t+"px"}const _e="0px",ce="가나다라마바사아자차카타파하힣";class ue{}(y=y=y||{}).DEFAULT="default",y.CARD="card",(y=d=d||{}).DEFAULT="default",y.PRE="pre",y.FULL="full";function ge(t){let e=me[t];if(e)return e;if(t){const i=Nt.getFormatter(t);return me[t]=e=t=>i.toStr(t),e}return null}function pe(t){let e=ve[t];if(e)return e;if(t){const i=ct.getFormatter(t);return ve[t]=e=t=>i.toStr(t),e}return null}function fe(t){let e=ye[t];if(e)return e;if(t){const i=Pt.getFormatter(t);return ye[t]=e=t=>i.toStr(t),e}return null}function we(t){let e=ye[t];if(e)return e;if(t){const i=$t.getFormatter(t);return be[t]=e=t=>i.toStr(t),e}return null}const me={},ve={},ye={},be={};(y=_=_||{}).NONE="none",y.CHECK="check",y.COMMAND="command",y.EXPAND="expand",y.DETAIL="detail",y.DETAILEX="detailex",y.INFO="info",y.EDIT="edit",y.LINK="link",y.MOVE="move",(y=w=w||{}).NONE="none",y.BALLOON="balloon",y.BOUNCE="bounce",(y=m=m||{}).NONE="none",y.COMMAND="command",y.PAGE="page",y.TAP="tap",y.INFO="info",y.EDIT="edit",y.ROW_BAR="rowBar",y.EDIT_BAR="editBar",(y=v=v||{}).DEFAULT="default",y.HORIZONTAL="horizontal",y.VERTICAL="vertical",y.BOTH="both",(x=x=x||{}).FORM="form",x.BUTTON="button",x.SEARCH="search",(x=b=b||{}).NONE="none",x.LEFT="left",x.RIGHT="right",x.TOP="top",x.BOTTOM="bottom",(x=S=S||{}).AFTER="after",x.BEFORE="before";class Se extends t{constructor(t,e){super(),this._owner=t,this._defs=e||void 0,e||this._doInitDefaults()}owner(){return this._owner}_changed(){this._owner&&this._owner.optionItemChanged(this)}}(x=C=C||{}).DEFAULT="default",x.RANDOM="random",x.LEFT="left",x.RIGHT="right",x.UP="up",x.DOWN="down",($=$=$||{}).GRID="grid",$.LIST="list",$.MENU="menu",($=R=R||{}).ROW="row",$.BODY="body",($=E=E||{}).NONE="none",$.PARENT="parent",$.INNER="inner";let Ce=651212;const xe={t:"borderTop",b:"borderBottom",l:"borderLeft",r:"borderRight"};class Re{static getWin(t){return t.defaultView||t.parentWindow}static isVisible(t){return t&&"none"!==t.style.display}static setVisible(t,e,i=""){return t.style.display=e?i||"":"none",e}static hide(t){t.style.display="none"}static show(t,e=""){t.style.display=e}static addClass(t,e){e&&t.classList.add(e)}static getImageUrl(t){const e=t.backgroundImage;if(e&&e.startsWith('url("'))return e.substring(5,e.length-2)}static getFocused(){let t=document.getSelection().focusNode;for(;t;){if(t instanceof HTMLElement)return t;t=t.parentElement}}static isAncestorOf(t,e){let i=e;for(;i;){if(i==t)return!0;i=i.parentElement}return!1}static getOffset(t){var e=t.ownerDocument,i=e.defaultView,s=t.getBoundingClientRect(),r=e.body,n=e.documentElement,t=i.pageYOffset||n.scrollTop||r.scrollTop,e=i.pageXOffset||n.scrollLeft||r.scrollLeft,i=n.clientTop||r.clientTop||0,r=n.clientLeft||r.clientLeft||0,r=s.left+e-r,i=s.top+t-i;return{x:Math.round(r),y:Math.round(i)}}static getSize(t){t=t.getBoundingClientRect();return{width:t.width,height:t.height}}static moveX(t,e){t.style.left=e+"px"}static moveY(t,e){t.style.top=e+"px"}static move(t,e,i){t.style.left=e+"px",t.style.top=i+"px"}static moveI(t,e,i){t.style.left=(e>>>0)+"px",t.style.top=(i>>>0)+"px"}static resize(t,e,i){t.style.width=e+"px",t.style.height=i+"px"}static resizeSVG(t,e,i){t.setAttribute("viewBox",`0 0 ${e} `+i)}static setWidth(t,e){t.style.width=e+"px"}static setHeight(t,e){t.style.height=e+"px"}static getBrowserSize(t){var e=t?t.ownerDocument:document,t=e.defaultView;return{width:t.innerWidth||e.documentElement.clientWidth||e.body.clientWidth,height:t.innerHeight||e.documentElement.clientHeight||e.body.clientHeight}}static setRect(t,e){const i=t.style;i.left=e.x+"px",i.top=e.y+"px",i.width=e.width+"px",i.height=e.height+"px"}static setBounds(t,e,i,s,r){const n=t.style;n.left=e+"px",n.top=i+"px",n.width=s+"px",n.height=r+"px"}static setBoundsEx(t,e,i,s,r){const n=t.style;isNaN(e)||(n.left=e+"px"),isNaN(i)||(n.top=i+"px"),isNaN(e)||(n.width=s+"px"),isNaN(e)||(n.height=r+"px")}static getClientRect(t){const e=t.getBoundingClientRect();return e.cx=t.offsetLeft,e.cy=t.offsetTop,e}static getChildIndex(e){if(e){var t=e.parentNode;if(t){var i=t.children;for(let t=i.length;t--;)if(i[t]===e)return t}}return-1}static clearChildren(t){for(var e;e=t.lastChild;)t.removeChild(e)}static clearElements(t){for(var e;e=t.lastChild;)Re.clearElements(e),t.removeChild(e)}static append(t,e){e.parentNode!==t&&t.appendChild(e)}static addChild(t,e){return!(!t||!e||e.parentNode===t)&&(t.appendChild(e),!0)}static removeChild(t,e){return!(!t||!e||e.parentNode!==t)&&(t.removeChild(e),!0)}static removeChildren(e,t){t.forEach(t=>{t instanceof Element?t.parentNode===e&&e.removeChild(t):t&&t.dom().parentNode==e&&e.removeChild(t.dom())})}static remove(t){const e=t&&t.parentElement;return e&&e.removeChild(t),null}static clearStyle(t){t.style.cssText=""}static setStyle(t,e){e&&Object.assign(t.style,e)}static resetClassList(t,e){const i=t.classList;for(;0<i.length;)i.remove(i.item(0));e&&i.add(e)}static createElement(t,e,i){e=t.createElement(e);return i&&Object.assign(e.style,i),e}static htmlEncode(t){return document.createElement("a").appendChild(document.createTextNode(t)).parentNode.innerHTML}static setData(t,e,i){null==i||""===i?delete t.dataset[e]:t.dataset[e]=i}static getData(t,e){return t.dataset[e]}static hasData(t,e){return void 0!==t.dataset[e]}static animate(t,e,i,s,r=150,n="none"){const o={},a={};return o[e]=i,a[e]=s,t.animate([o,a],{duration:r,fill:n})}static setAttr(t,e,i){null!=i&&""!==i?t.setAttribute(e,i):t.removeAttribute(e)}static setAttrs(t,e){for(const i in e)t.setAttribute(i,e[i])}static getDomId(){return"-dlist-"+Ce++}static createBR(t,e){const i=t.createElement("br");return i.className=e,i}static createSpan(t,e){t=t.createElement("span");return e&&Object.assign(t.style,e),t}static createCheckBox(t,e){const i=t.createElement("input");return i.type="checkbox",e&&Object.assign(i.style,e),i}static createRadio(t,e){const i=t.createElement("input");return i.type="radio",e&&Object.assign(i.style,e),i}static getPadding(t){t=getComputedStyle(t);return{left:parseFloat(t.paddingLeft)||0,right:parseFloat(t.paddingRight)||0,top:parseFloat(t.paddingTop)||0,bottom:parseFloat(t.paddingBottom)||0}}static getPadding2(t){t=getComputedStyle(t);return{left:parseFloat(t.paddingLeft)||0,right:parseFloat(t.paddingRight)||0,top:parseFloat(t.paddingTop)||0,bottom:parseFloat(t.paddingBottom)||0,borderLeft:parseFloat(t.borderLeftWidth)||0,borderRight:parseFloat(t.borderRightWidth)||0,borderTop:parseFloat(t.borderTopWidth)||0,borderBottom:parseFloat(t.borderBottomWidth)||0}}static stopAnimation(t){if(t)try{t.finish()}catch(t){console.error(t)}return null}static childByPath(t,e){let i=t;if(e){let t=0;for(;t<e.length;)i=i.childNodes[e[t++]]}return i}static childByClass(t,e){return t.getElementsByClassName(e)[0]}static setDisabled(t,e){this.setAttr(t,"disabled",!!e||void 0)}static setImportantStyle(t,e,i){t.setProperty(e,i,"important")}}class Ee extends t{constructor(t,e,i){super(),this._syncOrientation=!0,this._syncScreenOrientation=!1,this.longPressDelay=1e3,this._inited=!1,this._testing=!1,this._dirty=!0,this._invalidElements=[],this._toAnimation=0,this._invalidateLock=!1,this._lockDirty=!1,this._cssVars={},this._screenOrientationChangeHandler=t=>{this._screenOrientation=this.$_getScreenOrientation(),this.$_checkOrientation()},this._windowResizeHandler=t=>{this.$_checkOrientation(),this._windowResized(),this.doc().getElementById(Ee.currentInput),Ee.currentInput=null},this._clickHandler=t=>{this._doClick(t),this._tool.click(t)},this._touchStartHandler=t=>{(this._doTouchStart(t)||this._tool.touchStart(t))&&t.preventDefault()},this.m=0,this._touchMoveHandler=t=>{this._doTouchMove(t),this._tool.touchMove(t)},this._touchEndHandler=t=>{this._doTouchEnd(t),this._tool.touchEnd(t)},this._touchCancelHandler=t=>{this._doTouchCancel(t),this._tool.touchCancel(t)},this._touchLeaveHandler=t=>{this._doTouchLeave(t),this._tool.touchLeave(t)},this._keyPressHandler=t=>{this._doKeyPress(t),this._tool.keyPress(t)},!t&&e instanceof HTMLDivElement&&(t=e.ownerDocument),this.$_initControl(t||document,e,i),this._resigterEventHandlers(this._dom),this._inited=!0,this.invalidate(!0)}_doDestory(){this._unresigterEventHandlers(this._dom),Re.remove(this._dom),this._dom=null,this._container=null}isInited(){return this._inited}isTesting(){return this._testing}doc(){return this._dom.ownerDocument}dom(){return this._dom}width(){return this._container.offsetWidth}height(){return this._container.offsetHeight}activeTool(){return this._activeTool||this._tool}setSctiveTool(t){t!==this._activeTool&&(this._activeTool=t,this._tool=t||this._defaultTool)}orientation(){return this._orientation}setOrientation(t){t!==this._orientation&&(this._orientation=t,this.$_orientationChanged(t))}isPortrait(){return this._orientation!==o.LANDSCAPE}isLandscape(){return this._orientation===o.LANDSCAPE}syncOrientation(){return this._syncOrientation}setSyncOrientation(t){this._syncOrientation=t}screenOrientation(){return this._screenOrientation}syncScreenOrientation(){return this._syncScreenOrientation}setScreenSyncOrientation(t){this._syncScreenOrientation=t}addElement(t){t&&this._root.addChild(t)}removeElement(t){this._root.removeChild(t)}invalidate(t=!1){t||!this._invalidateLock&&!this._dirty&&this._inited?(this._dirty=!0,this._requestTimer||this._testing||this.$_requestRender()):this._invalidateLock&&(this._lockDirty=!0)}invalidateLayout(t=!1){this.invalidate(t)}setLock(){this._invalidateLock=!0}releaseLock(t=!0){this._invalidateLock&&(this._invalidateLock=!1),this._lockDirty&&t&&this.invalidate(),this._lockDirty=!1}lock(t){this.setLock();try{t(this)}finally{this.releaseLock()}}elementOfDom(t){return this._root.childOfDom(t)}getBounds(){return this._dom.getBoundingClientRect()}toElement(t,e,i){var s=this.getBounds(),t=t.getClientRect();return{x:e-=t.left-s.left,y:i-=t.top-s.top}}setAnimation(t){this._toAnimation=t||0}fling(t,e){}getCssVar(t){let e=this._cssVars[t];return t in this._cssVars?this._cssVars[t]:(e=getComputedStyle(this._root.dom).getPropertyValue(t),this._cssVars[t]=e,e)}_setTesting(){this._testing=!0,Ve.TESTING=!0}_setSize(t,e){isNaN(t)||(this._container.style.width=t+"px"),isNaN(e)||(this._container.style.height=e+"px")}$_getScreenOrientation(){return window.screen.orientation?window.screen.orientation.type.startsWith("landscape")?o.LANDSCAPE:o.PORTRAIT:"orientation"in window?90===Math.abs(+window.orientation)?o.LANDSCAPE:o.PORTRAIT:window.innerWidth>window.innerHeight?o.LANDSCAPE:o.PORTRAIT}$_getOrientation(){return this._dom.clientWidth>this._dom.clientHeight?o.LANDSCAPE:o.PORTRAIT}$_checkOrientation(){this._syncOrientation&&(this._syncScreenOrientation?this.setOrientation(this._screenOrientation):this.setOrientation(this.$_getOrientation()))}$_addListener(t,e,i){t.addEventListener(e,i)}_resigterEventHandlers(t){window.screen&&window.screen.orientation&&window.screen.orientation.addEventListener("change",this._screenOrientationChangeHandler),window.addEventListener("resize",this._windowResizeHandler),this.$_addListener(t,"click",this._clickHandler),this.$_addListener(t,"touchstart",this._touchStartHandler),this.$_addListener(t,"touchmove",this._touchMoveHandler),this.$_addListener(t,"touchend",this._touchEndHandler),this.$_addListener(t,"touchcancel",this._touchCancelHandler),this.$_addListener(t,"touchleave",this._touchLeaveHandler),this.$_addListener(t,"keypress",this._keyPressHandler)}_unresigterEventHandlers(t){window.screen&&window.screen.orientation&&window.screen.orientation.removeEventListener("change",this._screenOrientationChangeHandler),window.removeEventListener("resize",this._windowResizeHandler),t.removeEventListener("click",this._clickHandler),t.removeEventListener("touchstart",this._touchStartHandler),t.removeEventListener("touchmove",this._touchMoveHandler),t.removeEventListener("touchend",this._touchEndHandler),t.removeEventListener("touchcancel",this._touchCancelHandler),t.removeEventListener("touchleave",this._touchLeaveHandler),t.removeEventListener("keypress",this._keyPressHandler)}$_orientationChanged(t){this._doOrientationChanged(t);const e=this.onOrientationChanged;e&&e(t)}_doOrientationChanged(t){}_prepareRenderers(t){}$_initControl(t,e,i){if(!this._inited){e instanceof HTMLDivElement?this._container=e:this._container=t.getElementById(e),this._container instanceof HTMLDivElement||dt(Z.invalidOuterDiv,e);const s=this._container.getElementsByClassName("dlist-renderers")[0];s&&(this._prepareRenderers(s),s.remove());const r=this._dom=t.createElement("div");Object.assign(r.style,{position:"relative",width:"100%",height:"100%",boxSizing:"border-box",overflow:"hidden"}),r.className=i,this._container.appendChild(r),this._screenOrientation=this.$_getScreenOrientation(),this._orientation=this.$_getOrientation(),this._root=new Ae(t,this),r.appendChild(this._root._dom),this._defaultTool=this._tool=this._creatDefaultTool(),this._doInitModel(),this._doInitView(t),void 0===Ve.ANIMATABLE&&(t=r.animate&&r.animate([{left:0},{left:0}],{duration:0,fill:"none"}),Ve.ANIMATABLE=!!t)}}_render(){this.$_render()}$_invalidateElement(t){this._invalidElements.push(t),this.invalidate()}$_requestRender(){window.requestAnimationFrame?this._requestTimer=requestAnimationFrame(()=>this.$_render()):setTimeout(()=>{this.$_render()},0)}updateNow(){this.$_render()}$_render(){var t=+new Date;if(t<=this._toAnimation)this.$_requestRender();else{try{this._doBeforeRender();var e=this._dom.clientWidth,i=this._dom.clientHeight;this._doRender({x:0,y:0,width:e,height:i})}finally{this._dirty=!1,this._requestTimer=null,this._invalidElements.forEach(t=>t.validate()),this._invalidElements=[],this._doAfterRender()}J.log("render in "+(+new Date-t)+"ms.")}}_doBeforeRender(){}_doAfterRender(){}_doControlObjectChanged(t,e){}_doClick(t){}_doTouchStart(t){return!1}_doTouchMove(t){}_doTouchEnd(t){}_doTouchCancel(t){}_doTouchLeave(t){}_doKeyPress(t){}_windowResized(){this.invalidateLayout()}}class Ve extends a{constructor(t,e,i,s="div"){super(),this._visible=!0,this._dirty=!1;const r=this._dom=t.createElement(s);i&&(r.className=i),Object.assign(r.style,{display:this._getDisplayStyle(),position:this._getPositionStyle(),boxSizing:"border-box",overflow:this._getOverflow()}),e&&(r.appendChild(this._content=t.createElement("div")),this._content.className="dlist-view-content",this._content.style.position=this._getContentPosition()),this._doInitDom(t,r),this._content&&this._doInitContent(t,this._content)}_doDestory(){this._dom=null}get doc(){return this._dom.ownerDocument}get win(){var t=this._dom.ownerDocument;return t.defaultView||t.parentWindow}get dom(){return this._dom}get content(){return this._content}get parent(){return this._parent}get childCount(){return this._children?this._children.length:0}get control(){return this._parent&&this._parent.control}get x(){return this._x}right(){return this._x+this._width}get y(){return this._y}bottom(){return this._y+this._height}get width(){return this._width}get height(){return this._height}get visible(){return this._visible}set visible(t){t!==this._visible&&(this._visible=t,this._dom&&(this._dom.style.display=this._visible?this._getDisplayStyle():"none"),this._changed())}setVisible(t){return t!==this._visible&&(this._visible=t,this._dom&&(this._dom.style.display=this._visible?this._getDisplayStyle():"none"),this._changed()),this._visible}_internalVisible(t){return this._visible=t,this._dom.style.display=this._visible?this._getDisplayStyle():"none",t}canAnimate(){return Ve.ANIMATABLE&&void 0!==Element.prototype.animate}setAnimating(t){this._dom.dataset.animating=t?"1":"0"}animating(){return"1"===this._dom.dataset.animating}get hidden(){return"hidden"===this._dom.style.visibility}set hidden(t){this._dom.style.visibility=t?"hidden":"visible"}setStyles(t){return Object.assign(this._dom.style,t),this}getClientSize(){return{width:this._dom.clientWidth,height:this._dom.clientHeight}}getOffsetSize(){return{width:this._dom.offsetWidth,height:this._dom.offsetHeight}}getOffsetBounds(){return{x:this._dom.offsetLeft,y:this._dom.offsetTop,width:this._dom.offsetWidth,height:this._dom.offsetHeight}}getClientRect(){return this._dom.getBoundingClientRect()}getBounds(){return{x:this._x,y:this._y,width:this._width,height:this._height}}validate(){this._dirty=!1}getLabel(){}getChildren(){return this._children&&this._children.slice(0)}getChild(t){return this._children&&this._children[t]}indexOf(t){return this._children?this._children.indexOf(t):-1}contains(t,e=!1){const i=this._children;if(i){if(0<=i.indexOf(t))return!0;if(e)for(const s of i)if(s.contains(t,!0))return!0}}insertChild(t,e){if(e&&!this.contains(e)){e._parent&&e._parent.removeChild(e),this._children||(this._children=[]);const s=this._children,r=this._content||this._dom;var i=e.getLabel();t<0||t>=s.length?(i&&r.appendChild(i),r.appendChild(e._dom),s.push(e)):(r.insertBefore(e._dom,s[t]._dom),i&&r.insertBefore(i,e._dom),s.splice(t,0,e)),e._parent=this,e.$_attached(),this._changed()}}insertBefore(t,e){this.insertChild(this.indexOf(e),t)}addChild(t){this.insertChild(-1,t)}remove(){this._parent&&this._parent.removeChild(this)}removeChildAt(t){if(this._children&&0<=t&&t<this._children.length){const i=this._children[t];var e=i.getLabel();return e&&(this._content||this._dom).removeChild(e),(this._content||this._dom).removeChild(i._dom),this._children.splice(t,1),this.$_removeChild(i),this._changed(),i}}removeChild(t){return this.removeChildAt(this.indexOf(t))}removeLast(){var t=this._children;return t&&this.removeChildAt(t.length-1)}clear(){var t,e=this._children;if(e&&0<e.length){for(var i of e)this.$_removeChild(i);this._children=[];const s=this._content||this._dom;for(;t=s.lastChild;)s.removeChild(t);return this._changed(),!0}return!1}moveIndex(t,e){const i=this._children;var s=i.indexOf(t);if(e=Math.max(0,Math.min(i.length-1)),0<=s&&s!==e){var r=i[s]._dom;return i.splice(s,1),i.splice(e,0,t),this._dom.insertBefore(r,t._dom),this._changed(),!0}}isDom(t){return this._dom===t||this._content&&this._content===t}containsDom(t){return(this._content||this._dom).contains(t)}isView(t){return this.isDom(t)||this.containsDom(t)}containsClass(t){return(this._content||this._dom).classList.contains(t)}domByClass(t,e){var i=this._dom.getElementsByClassName(t),s=i?i.length:0;if(0<s){if(!e)return i[0];for(let t=0;t<s;t++){var r=i[t];if(Array.isArray(e)){if(0<=e.indexOf(r.textContent))return r}else if(r.textContent===e)return r}}}childOfDom(t){var e=this._children;if(e&&0<e.length)for(const s of e){if(s.isDom(t))return s;var i=s.childOfDom(t);if(i)return i}}hasData(t){return!!this._dom.dataset[t]}setData(t,e){null==e||""===e?delete this._dom.dataset[t]:this._dom.dataset[t]=e}setBounds(t,e,i,s){return this.move(t,e).resize(i,s)}setRect(t){return this.move(t.x,t.y).resize(t.width,t.height)}moveX(t){return isNaN(t)?(this._x=t,this._dom.style.left=""):t!=this._x&&(this._x=t,this._dom.style.left=t+"px"),this}moveY(t){return isNaN(t)?(this._y=t,this._dom.style.top=""):t!==this._y&&(this._y=t,this._dom.style.top=t+"px"),this}move(t,e){return this.moveX(t).moveY(e)}center(t,e){return this.moveX((t-this.width)/2).moveY((e-this.height)/2)}moveI(t,e){return this.moveX(t>>0).moveY(e>>0)}resetPosition(){isNaN(this._x)&&(this._dom.style.left=this._x+"px"),isNaN(this._y)&&(this._dom.style.top=this._y+"px")}setWidth(t,e="px"){return t!==this._width&&(this._width=t,this._dom.style.width=isNaN(t)?"":t+e),this}setHeight(t,e="px"){return t!==this._height&&(this._height=t,this._dom.style.height=isNaN(t)?"":t+e),this}clearSize(){this._width=this._height=NaN,this._dom.style.width="",this._dom.style.height=""}resize(t,e,i="px"){return this.setWidth(t,i).setHeight(e,i)}internalClearSize(){this._dom.style.width="",this._dom.style.height=""}internalResize(t,e){return this._dom.style.width=t+"px",this._dom.style.height=e+"px",this}syncSize(){this.resize(Math.ceil(this._dom.offsetWidth),Math.ceil(this._dom.offsetHeight))}resizeContent(t,e,i="px"){this._content.style.width=isNaN(t)?"":t+i,this._content.style.height=isNaN(e)?"":e+i}setContentBounds(t,e,i,s){const r=this._content.style;r.left=t+"px",r.top=e+"px",r.width=i+"px",r.height=s+"px"}saveSize(){return this._width=this._dom.offsetWidth,this._height=this._dom.offsetHeight,this}forEach(i){var s=this._children;if(s)for(let t=0,e=s.length;t<e;t++)i(s[t],t,e)}some(i){var s=this._children;if(s)for(let t=0,e=s.length;t<e&&!0!==i(s[t],t,e);t++);}findChild(i){var s=this._children;if(s)for(let t=0,e=s.length;t<e;t++)if(1==i(s[t],t,e))return s[t]}findDescendant(i){const s=this._children;if(s)for(let t=0,e=s.length;t<e;t++){if(1==i(s[t]))return s[t];var r=s[t].findDescendant(i);if(r)return r}}findDescendants(t,e){var i=this._children;if(i)for(const s of i)1==t(s)&&e.push(s),s.findDescendants(t,e)}applyStyle(t){t&&Object.assign(this._dom.style,t)}setImportantStyle(t,e,i){return t.setProperty(e,i,"important"),this}getComputedStyle(){return getComputedStyle(this._dom)}getPadding(){return Re.getPadding(this._dom)}getPadding2(){return Re.getPadding2(this._dom)}setPressed(t){t?this._dom.dataset.pressed="1":delete this._dom.dataset.pressed}appendSpan(t,e){const i=(t||this.doc).createElement("span");return this._dom.appendChild(i),e&&(i.className=e),i}appendDom(t){return this._dom.appendChild(t),t}removeDom(t){this._dom.removeChild(t)}detachDom(){this._dom.remove()}createElement(t){return this._dom.ownerDocument.createElement(t)}setClassName(t){this._dom.className=t}_testing(){return Ve.TESTING}_doInitDom(t,e){}_doInitContent(t,e){}_getPositionStyle(){return"absolute"}_getDisplayStyle(){return"block"}_getContentPosition(){return"relative"}_getOverflow(){return""}$_attached(){this._doAttached()}_doAttached(){}$_detached(t){this._doDetached(t)}_doDetached(t){}$_removeChild(t){t.validate(),t._parent=null,t.$_detached(this)}_changed(){var t;this._dirty||(this._dirty=!0,null!==(t=this.control)&&void 0!==t&&t.$_invalidateElement(this))}}Ve.TESTING=!1,Ve.BOUNDING=!1,Ve.BOUNDING_BORDER="1px solid #ff000080",Ve.BOUNDING_BORDER_2="1px solid #0000ff40";class $e extends Ve{_doInitDom(t,e){e.style.pointerEvents="none"}}class Ae extends Ve{constructor(t,e){super(t,!1,"dlist-root"),this._control=e}get control(){return this._control}}class Le extends t{constructor(t){super(),this._control=t}control(){return this._control}_changed(t){var e;null!==(e=this._control)&&void 0!==e&&e._doControlObjectChanged(this,t)}}($=V=V||{}).NONE="none",$.EXPAND="expand",$.COMMAND="command";class De extends a{}class ke{constructor(t){this.index=-1,this.vindex=-1,this.group=t}row(){return-1}getParamValue(t){return this.group.getParamValue(t)}}class Te extends ke{constructor(t,e){super(t),this._row=e}isLeaf(){return!0}row(){return this._row}}class Pe extends ke{}class Me extends Pe{getStyle(){var t;return{itemDef:this.group.model().header().style,levelDef:null===(t=null===(t=this.group.info)||void 0===t?void 0:t.header)||void 0===t?void 0:t.style}}}class Ie extends Pe{getStyle(){var t;return{itemDef:this.group.model().footer().style,levelDef:null===(t=null===(t=this.group.info)||void 0===t?void 0:t.footer)||void 0===t?void 0:t.style}}}class Ne extends s{}class Oe extends t{constructor(t,e){super(),this._owner=t,(this._defs=e)||(this._visible=!0,this._collapsedVisible=!1,this._template=this._defTemplate(),this._clickAction=V.EXPAND)}_doDestory(){this._owner=this._defs=null}get visible(){return ne(this._visible,this._defs&&this._defs._visible)}setVisible(t){t!==this._visible&&(this._visible=t,this._changed())}get collapsedVisible(){return ne(this._collapsedVisible,this._defs&&this._defs._collapsedVisible)}setCollapsedVisible(t){t!==this._collapsedVisible&&(this._collapsedVisible=t,this._changed())}get template(){return ne(this._template,this._defs&&this._defs._template)}setTemplate(t){t!==this._template&&(this._template=t,this._changed())}clickAction(){return ne(this._clickAction,this._defs&&this._defs._clickAction)}setClickAction(t){t!==this._clickAction&&(this._clickAction=t,this._changed())}_defTemplate(){return"@it_group_header"}_changed(){var t;null!==(t=this._owner)&&void 0!==t&&t.groupSectionChanged(this)}}class Be extends Oe{_defTemplate(){return"@it_group_footer"}}class Fe extends De{constructor(t,e,i,s,r){super(),this._expanded=!0,this._checked=!1,this._summary={},this._parent=t,this.info=e,this._value=i,this._startRow=s,this._endRow=r}_doDestory(){}level(){return this._parent.level()+1}parent(){return this._parent}model(){return this._parent.model()}field(){return this.info.field}headerInfo(){return this.info.header}footerInfo(){return this.info.footer}value(){return this._value}startRow(){return this._startRow}endRow(){return this._endRow}rowCount(){return this._endRow-this._startRow+1}children(){var t;return null===(t=this._children)||void 0===t?void 0:t.slice()}count(){return this._children?this._children.length:0}isLeaf(){return!this._children||0===this._children.length}header(){return this._header}footer(){return this._footer}expanded(){return this._expanded}visible(){return this._parent._expanded&&this._parent.visible()}checked(){return this._checked}setChecked(t){(t=!!t)!=this._checked&&(this._checked=t,null!==(t=this.model())&&void 0!==t&&t.$_checkedChanged(this))}firstVis(){return this._firstVis}lastVis(){return this._lastVis}get(t){return this._children[t]}getItems(t=!1){const e=this.model();if(e)return t?e._items.slice(this._header.index,this._footer.index+1):e.getItemsOf(this)}getVisItems(t=!1){const e=this.model();if(e)return t?e._visItems.slice(this._firstVis.vindex,this._lastVis.vindex+1):e.getVisItemsOf(this)}isLast(t){return t===this._endRow}clear(){this._children=null,this.$_clearSummary()}visit(t,e){if(t&&this._children)for(var i of this._children){if(!0===t(i))return!0;if(e)if(!0===i.visit(t,!0))return!0}}visitItems(t,e){var i;t&&null!==(i=this.model())&&void 0!==i&&i.forEachVisItem(this._firstVis.index,this._lastVis.index,e)}visitVisItems(t,e){var i;t&&null!==(i=this.model())&&void 0!==i&&i.forEachVisItem(this._firstVis.vindex,this._lastVis.vindex,e)}getSummary(t){let e=this._summary[t];return e||(this._summary[t]=e=this.model().data().getSummary(t,this._startRow,this._endRow)),e}getParamValue(t){switch(t){case"group_field":return this.field();case"group_value":return this.value();case"group_level":return this.level();case"row_count":return this.rowCount();case"group_sum":return this.value()}}$_add(t){this._children||(this._children=[]),this._children.push(t)}$_setExpanded(t){if(t!=this._expanded)return this._expanded=t,!0}$_clearSummary(){this._summary={}}}class ze extends Fe{constructor(t){super(null,null,null,0,0),this._model=t}level(){return-1}model(){return this._model}headerInfo(){return ze.INFO}footerInfo(){return ze.INFO}isLeaf(){return!1}expanded(){return!0}visible(){return!0}firstVis(){return this._model.firstVisItem()}lastVis(){return this._model.lastVisItem()}}ze.INFO={visible:!1,collapsedVisible:!1};class He extends Ne{constructor(){super(),this._header={visible:!0,collapsedVisible:!0,template:He.HEADER_TEMPLATE,style:null},this._footer={visible:!0,collapsedVisible:!1,template:He.FOOTER_TEMPLATE,style:null},this._levels=0,this._descendants=0,this._items=[],this._vitems=[],this._root=new ze(this)}_doDestory(){}inflateParam(t,e,i){i.name}inflateStock(t,e,i){const s=t;i=i.name;return s.getParamValue(i)}onDataReset(t){this.$_refresh()}onDataValueUpdated(t,e,i,s,r){this.$_refresh()}onDataRowUpdated(t,e,i){this.$_refresh()}onDataRowsUpdated(t,e){this.$_refresh()}onDataRangeUpdated(t,e,i){this.$_refresh()}onDataRowAdded(t,e){this.$_refresh()}onDataRowsAdded(t,e,i){this.$_refresh()}onDataCleared(t,e){this.$_refresh()}onDataRowDeleted(t,e){this.$_refresh()}onDataRowsDeleted(t,e){this.$_refresh()}onDataRangeDeleted(t,e,i){this.$_refresh()}onDataViewFilterChanged(t){this.$_refresh()}onDataViewSortChanged(t){this.$_refresh()}data(){return this._data}root(){return this._root}header(){return Object.assign({},this._header)}setHeader(t){var e;q.isObject(t)&&(e=this._header,q.assignProps(e,t)&&this.$_resetVisibles())}footer(){return Object.assign({},this._footer)}setFooter(t){q.isObject(t)&&(this._footer,q.assignProps(this._footer,t)&&this.$_resetVisibles())}levels(){return this._levels}groupCount(){return this._root.count()}descendants(){return this._descendants}leafRowCount(){}itemCount(){return this._items.length}visItemCount(){return this._vitems.length}firstVisItem(){return this._vitems[0]}lastVisItem(){return this._vitems[this._vitems.length-1]}firstVisRow(){for(var t of this._vitems)if(t instanceof Te)return t}lastVisRow(){for(let t=this._vitems.length-1;0<=t;t--)if(this._vitems[t]instanceof Te)return this._vitems[t]}getGroup(t){return this._root.get(t)}getLevelGroupCount(e){let i=0;return 0===e?i=this._root.count():0<e&&e<this._levels&&this._root.visit(t=>(t.level()===e&&i++,!1),!0),i}getLevelGroups(e){if(0===e)return this._root.children();if(0<e&&e<this._levels){const i=[];return this._root.visit(t=>(t.level()===e&&i.push(t),!1),!0),i}return[]}getLevelGroup(e,i){let s;return 0===e?this._root.get(i):(0<=e&&e<this._levels&&0<=i&&this._root.visit(t=>{if(t.level()===e){if(0===i)return s=t,!0;i--}},!0),s)}getGroupRows(t){return q.getIntArray(t.endRow()-t.startRow()+1,t.startRow())}indexOfRow(t){t=this.itemOfRow(t,!1);return t?t.index:-1}visIndexOfRow(t){t=this.itemOfRow(t,!0);return t?t.index:-1}itemOfRow(e,i){if(0<=e&&e<this._data.rowCount()){var s=i?this._vitems:this._items,r=s.length;let t=e;for(;t<r;){const n=s[t++];if(n instanceof Te&&n.row()===e)return n}}}groupOfRow(t){t=this.itemOfRow(t,!1);return t&&t.group}getItem(t){return this._items[t]}getVisItem(t){return this._vitems[t]}getItems(t,e){return this._items.slice(t,e)}getVisItems(t,e){return this._vitems.slice(t,e)}getItemsOf(e){const i=[];var s=e?e.header().index:0,r=e?e.footer().index:this._items.length-1;for(let t=s;t<=r;t++){var n=this._items[t];n.group===e&&i.push(n)}return i}getVisItemsOf(e){const i=[];var s=e?e._firstVis.vindex:0,r=e?e._lastVis.vindex:this._vitems.length-1;for(let t=s;t<=r;t++){var n=this._vitems[t];n.group===e&&i.push(n)}return i}forEachItem(e,i,s){if(s&&e<i){var r=this._items;for(let t=e;t<i&&!1!==s(r[t]);t++);}}forEachVisItem(e,i,s){if(s&&e<i){var r=this._vitems;for(let t=e;t<i&&!1!==s(r[t]);t++);}}clear(){this._root.clear(),this._items=[],this._vitems=[]}build(t,e,i){return i.length<1&&lt(Z.requireGroupingInfos),this._infos=i.map(t=>function(t){return{field:t.field,ranges:t.ranges&&0<t.ranges.length?t.ranges.slice(0):null,comparer:t.comparer,header:Object.assign({},t.header),footer:Object.assign({},t.footer)}}(t)),this._data=t,this._options=e,this.$_refresh(),this}refresh(t){this._data=t,this.$_refresh(),J.log("Group items refreshed.")}collapse(t,e){if(t=t||this._root,this.$_collapse(t,e)){if(t===this._root){for(let t=this._root.count()-1;0<=t;t--)this._root.get(t).$_setExpanded(!1);this.$_expand(this._root,!1,!0)}this.$_resetVisIndices(),this.$_expandedChanged(t)}}collapseAll(){this.collapse(this._root,!0)}expand(t,e){t=t||this._root,this.$_expand(t,e,!1)&&(this.$_resetVisIndices(),this.$_expandedChanged(t))}expandAll(){this.expand(this._root,!0)}toggle(t,e){t.expanded()?this.collapse(t,e):this.expand(t,e)}visit(t,e){return(t||this._root).visit(e,!0)}getHeaderTemplate(t){return this._header.template||He.HEADER_TEMPLATE}getFooterTemplate(t){return this._footer.template||He.FOOTER_TEMPLATE}isLastDataRow(t){return t===this._lastRow}$_refresh(){const t=this._data;var e,i;this.clear(),this._data?(0<(e=t.rowCount())&&((i=this._infos)&&(this._descendants=this.$_buildGroups(this._root,i,t,0,e-1),this._levels=i.length+1,this.$_buildItems(this._root,this._items=[]),this.$_resetIndices())),this._root._endRow=e-1):this._root._endRow=-1,this.$_resetVisibles()}$_buildGroups(o,a,h,l,d){function _(t,e,i,s,r){const n=new Fe(o,e,r,i,s);o.$_add(n),a.length>n.level()+1&&(p+=t.$_buildGroups(n,a,h,n._startRow,n._endRow)),p++}var c=a[o.level()+1],u=c.field,g=c.ranges;let p=0;if(g){var f=1<g.length&&g[0]>g[1];let t=l,e=h.getValue(t,u,!0),i=e,s=0,r=g[s++],n=!1;for(;t<=d;)if(n&&(e=h.getValue(t,u,!0),n=!1),f&&e<r||!f&&e>=r){if(t>l){if(_(this,c,l,t-1,i),l=t,s===g.length)break}else t++,n=!0;i=r,r=g[s++]}else t++,n=!0;l<=d&&_(this,c,l,d,r)}else{const r=c.comparer;var i=h.rowCount();let e=h.getValue(l,u,!0);for(let t=l+1;t<=d;t++){var s=h.getValue(t,u,!0);(r?r(s,e,t,i):s===e)||(_(this,c,l,t-1,e),e=s,l=t)}_(this,c,l,d,e)}return p}getHeaderVisible(t,e){return e?q.pick(null===(e=t.headerInfo())||void 0===e?void 0:e.visible,this._header.visible,!0):q.pick(null===(t=t.headerInfo())||void 0===t?void 0:t.collapsedVisible,this._header.collapsedVisible,!0)}getFooterVisible(t,e){return e?q.pick(null===(e=t.footerInfo())||void 0===e?void 0:e.visible,this._footer.visible,!0):q.pick(null===(t=t.footerInfo())||void 0===t?void 0:t.collapsedVisible,this._footer.collapsedVisible,!1)}$_buildItems(e,i){var s=e.count();if(0<s)for(let t=0;t<s;t++){const r=e.get(t);i.push(r._header=new Me(r)),this.$_buildItems(r,i),i.push(r._footer=new Ie(r))}else{i.length;for(let t=e.startRow();t<=e.endRow();t++)i.push(new Te(e,t))}}$_collectVisibles(i,s){var t=i===this._root;const r=this._items;var e,n=i.expanded(),o=this.getHeaderVisible(i,n),a=this.getFooterVisible(i,n),h=s.length,l=i.count();if(t||(e=i.header(),o||!a?(s.push(e),i._firstVis=e):i._firstVis=null),n){if(0<l)for(let t=0;t<l;t++){var d=i.get(t);this.$_collectVisibles(d,s)}else if(0<r.length){let e=0;for(let t=i.header().index+1;t<i.footer().index;t++)r[t].no=e++,s.push(r[t])}i._firstVis||(i._firstVis=s[h])}h=i.footer();a&&s.push(h),i._lastVis=s[s.length-1],t||i._firstVis||(i._firstVis=i._lastVis)}$_expand(t,e,i){let s=!1;if(e&&t.visit(t=>(t.$_setExpanded(!0)&&(s=!0),!1),!0),i||s||!t.expanded()){const a=this._vitems;var r=t===this._root,n=r?0:t._firstVis.vindex,o=r?a.length-1:t._lastVis.vindex,e=[],i=t.visible();i&&(r?a.length=0:a.splice(n,o-n+1)),s=t.$_setExpanded(!0)||s,this.$_collectVisibles(t,e),i&&q.splice(a,n,0,e)}return s}$_collapse(t,e){var i=t===this._root,s=this._vitems.slice(0),r=this._vitems.length;let n=!1;if((e||i)&&t.visit(t=>(t.$_setExpanded(!1)&&(n=!0),!1),e),n||t.expanded()){const l=this._vitems;var o=i?0:t._firstVis.vindex,a=i?l.length-1:t._lastVis.vindex,h=[],e=t.visible();n=t.$_setExpanded(!1)||n,e&&l.splice(o,a-o+1),this.$_collectVisibles(t,h),!i&&e&&(t.lastVis().vindex<0||t.firstVis().vindex),e&&q.splice(l,o,0,h),l.length>r&&console.log(s),!i&&e&&(t.lastVis().vindex<0||t.firstVis().vindex)}return n}$_resetVisibles(){var e=this._vitems=[];const t=this._root;if(this._lastRow=null,0<t.count()){this.$_collectVisibles(t,e),this.$_resetVisIndices();for(let t=e.length-1;0<=t;t--)if(e[t]instanceof Te){this._lastRow=e[t];break}}}$_resetIndices(){const i=this._items;for(let t=0,e=i.length;t<e;t++)i[t].index=t}$_resetVisIndices(){let i=this._items;for(let t=i.length-1;0<=t;t--)i[t].vindex=-1;i=this._vitems;for(let t=0,e=i.length;t<e;t++)i[t].vindex=t}$_expandedChanged(t){this._fireEvent("onGroupExpanded",t,t.expanded())}$_checkedChanged(t){this._fireEvent("onGroupChecked",t,t.checked())}}He.HEADER_TEMPLATE="@it_group_header",He.FOOTER_TEMPLATE="@it_group_footer";class We{constructor(t){const e=this._vars={};for(var i in t)e["--"+i]=t[i]}out(t){return t in this._vars?this._vars[t]:t}assign(t){var e,i=this._vars;const s={};for(e in t){var r=t[e];r in i?s[e]=i[r]:s[e]=r}return s}}let Ge=1;class Ue{constructor(t,e,i){this.tid=Ge++,this._parent=t,e&&(this.tag=null!=e.tag?String(e.tag):void 0,this._doLoad(e,i))}_loadProps(t,e){return ie.load(e?e.assign(t):t)}_loadStyle(t,e){return q.isObject(t)?ie.load(e?e.assign(t):t):t?(e&&(t=e.out(t)),ie.parse(t)):void 0}_loadRenderer(t,e,i){if(q.isObject(t)){const n=ie.load(i?i.assign(t):t);for(var s in n){var r=n[s];s.endsWith("Style")&&(e[s]=n[s]=this._loadStyle(r,i))}return t.style&&(e.style=this._loadStyle(t.style,i)),n.type=t.type,n}if("string"==typeof t)return t}}class qe extends Ue{_doLoad(t,e){if("string"==typeof t)this.field=ie.parse(t);else{const i=Object.assign({},t);this.id=t.id,delete i.id,Array.isArray(t.fields)&&(this.fields=ie.parse(t.fields),delete i.fields),t.field&&(this.field=ie.parse(t.field),delete i.field),t.value&&(this.value=ie.parse(t.value),delete i.value),this.renderer=this._loadRenderer(t.renderer,this.rendererStyles={},e),delete i.renderer,t.style&&(this.style=this._loadStyle(t.style,e),delete i.style),t.classCallback&&(this.classCallback=t.classCallback,delete i.classCallback),t.styleCallback&&(this.styleCallback=t.styleCallback,delete i.styleCallback),this.props=this._loadProps(i,e)}}}class je extends Ue{count(){return this.children.length}get(t){return this.children[t]}tagBy(e){return this.children.find(t=>t.tag===e)}fieldBy(e){return this.children.find(t=>t.tag===e&&t instanceof qe)}_doLoad(t,e){const i=Object.assign({},t);if(this.layout=i.layout,delete i.layout,this.id=i.id,delete i.id,i.style&&(this.style=this._loadStyle(i.style,e),delete i.style),Array.isArray(t.children)){const r=this.children=[];for(var s of t.children){let t;null!=s&&(t="layout"===s.type||s.layout?new je(this,s,e):void 0!==s.space?"*"===s.space?new qe(this,Object.assign({width:0,height:0,grow:1,renderer:{type:"spacer",space:0}},s),e):new qe(this,Object.assign({width:s.space,height:s.space,renderer:{type:"spacer",space:0}},s),e):new qe(this,s,e)),t&&(t.tag=s.tag,r.push(t))}delete i.children}else this.children=[];this.props=this._loadProps(i,e)}_getFields(e){this.children.forEach(t=>{t instanceof je?t._getFields(e):"string"==typeof t.field&&e.push(t.field)})}}class Ye extends Ue{constructor(t,e){super(null,null,null),this.tokens=[],this.$_parseParams(this.dom=t,[])}_doLoad(t,e){}$_parseParams(e,i){let s;const t=e.getAttributeNames();t&&t.forEach(t=>{s=ie.parse(e.getAttribute(t)),s instanceof ie&&this.tokens.push({node:i,attr:t,param:s})});var r=e.childNodes;for(let t=0;t<r.length;t++){var n,o=r[t],a=i.concat(t);o.nodeType===Node.TEXT_NODE&&(n=o.nodeValue,s=ie.parse(n),s instanceof ie&&this.tokens.push({node:a,param:s})),o instanceof HTMLElement&&this.$_parseParams(o,a)}}}let Qe=1e6;class Ze extends a{constructor(t,e){var i;super(),this.id=Qe++,this.detailId=Qe++,this.collapsedId=Qe++,e&&(e.template?(i=q.isValidObject(e.vars)?new We(e.vars):null,this.description=e.description,this.rowProps=q.copyObject(e.rowProps),this.rowStyle=function(t){const e=q.copyObject(t);let i;return e&&(i=new ue,e.alternate&&(i.alternate=Object.assign({},e.alternate),delete e.alternate),e.updated&&(i.updated=Object.assign({},e.updated),delete e.updated),e.deleted&&(i.deleted=Object.assign({},e.deleted),delete e.deleted),e.selected&&(i.selected=Object.assign({},e.selected),delete e.selected),e.checked&&(i.checked=Object.assign({},e.checked),delete e.checked),e.searched&&(i.searched=Object.assign({},e.searched),delete e.searched),(t=e.default)&&delete e.default,i.default=e,t&&Object.assign(i.default,t)),i}(e.rowStyle),this.layout=this.$_createLayout(t,e.template,i),this.detailed=e.detailed&&this.$_createLayout(t,e.detailed,i),this.extra=e.extra&&this.$_createLayout(t,e.extra,i),this.collapsed=e.collapsed&&this.$_createLayout(t,e.collapsed,i),this.brief=e.brief&&this.$_createLayout(t,e.brief,i),this.params=q.copyObject(e.params)):e.layout&&(this.layout=this.$_createLayout(t,e,null)))}_doDestory(){}getFields(){var t=[];return this.layout._getFields(t),t}$_createLayout(e,i,s){if("html"!==i.type&&"string"!=typeof i.html)return new je(null,i,s);{let t;return"string"==typeof i.html?(t=e.doc().createElement("div"),t.innerHTML=i.html,t=t.firstElementChild):i.domid&&(t=e.getTemplateHtml(i.domid)),t=t||e.doc().createElement("div"),new Ye(t,s)}}}const Xe=new Ze(null,{template:{layout:"frame",children:[{value:"[ Dummy Template ]",style:{color:"#aaa",fontWeight:"bold"}}]}}),Ke=new je(null,{layout:"frame",children:[{width:"35%",height:25,left:0},{width:"10%",height:18,right:"50%"},{width:"15%",height:18,right:"30%"},{width:"25%",height:21,right:"0"}]},null);class Je extends Te{constructor(t,e){super(t,e)}dataLevel(){return this.group.dataLevel()}isLeaf(){return this.group instanceof ii}}class ti extends De{constructor(t){super(),this._expanded=!0,this.parent=t}count(){return this._children?this._children.length:0}level(){return this.parent.level()+1}model(){return this.parent.model()}expanded(){return this._expanded}visible(){return this.parent._expanded&&this.parent.visible()}isLeaf(){return!this._children}rowCount(){if(this._children){let e=0;return this._children.forEach(t=>e+=t.rowCount()),e}return 0}get(t){return this._children[t]}isLast(t){return t===this.end}contains(t){let e=t;for(;e;){if(e===this)return!0;e=e.parent}return!1}visit(t,e){if(t&&this._children)for(var i of this._children){if(!0===t(i))return!0;if(e)if(!0===i.visit(t,!0))return!0}}clear(){this._children=[]}getParamValue(t){if("row_count"===t)return this.rowCount()}$_add(t){this._children||(this._children=[]),this._children.push(t)}$_setExpanded(t){if(t!=this._expanded)return this._expanded=t,!0}}class ei extends ti{dataLevel(){return this.parent.dataLevel()}rowCount(){return this.isLeaf()?1:super.rowCount()}}class ii extends ti{dataLevel(){return this.parent.dataLevel()+1}rowCount(){return this.isLeaf()?this.rows.length:super.rowCount()}}class si extends ii{constructor(t){super(null),this._model=t,this.start=0}level(){return-1}dataLevel(){return 0}model(){return this._model}expanded(){return!0}visible(){return!0}isLeaf(){return!1}}class ri extends Ne{constructor(){super(),this._header={visible:!0,collapsedVisible:!0,template:ri.HEADER_TEMPLATE,style:null},this._footer={visible:!0,collapsedVisible:!1,template:ri.FOOTER_TEMPLATE,style:null},this._levels=0,this._rowLevels=0,this._descendants=0,this._items=[],this._vitems=[],this._leafCount=0,this._root=new si(this)}_doDestory(){}inflateParam(t,e,i){i.name}inflateStock(t,e,i){const s=t;i=i.name;return s.getParamValue(i)}onDataValueUpdated(t,e,i,s,r){this.$_refresh()}onDataRowUpdated(t,e,i){this.$_refresh()}onDataRowsUpdated(t,e){this.$_refresh()}onDataRangeUpdated(t,e,i){this.$_refresh()}onDataRowAdded(t,e){this.$_refresh()}onDataRowsAdded(t,e,i){this.$_refresh()}onDataCleared(t,e){this.$_refresh()}onDataRowDeleted(t,e){this.$_refresh()}onDataRowsDeleted(t,e){this.$_refresh()}onDataRangeDeleted(t,e,i){this.$_refresh()}onDataViewFilterChanged(t){this.$_refresh()}onDataViewSortChanged(t){this.$_refresh()}data(){return this._data}header(){return this._header}footer(){return this._footer}root(){return this._root}levels(){return this._levels}rowLevels(){return this._data.levels()}groupCount(){return this._root.count()}descendants(){return this._descendants}leafRowCount(){return this._leafCount}itemCount(){return this._items.length}visItemCount(){return this._vitems.length}firstVisItem(){return this._vitems[0]}lastVisItem(){return this._vitems[this._vitems.length-1]}firstVisRow(){for(var t of this._vitems)if(t instanceof Je)return t}lastVisRow(){for(let t=this._vitems.length-1;0<=t;t--)if(this._vitems[t]instanceof Je)return this._vitems[t]}clear(){this._root.clear(),this._items=[],this._vitems=[]}build(t,e,i){const s=this._infoMap={};for(const r in i)s[r]=function(t){if(t){const e=Object.assign({},t);return e.header=Object.assign({},t.header),e.footer=Object.assign({},t.footer),e}}(i[r]);return this._options=e,this._data=t,this.$_refresh(),this}refresh(t){this._data=t,this.$_refresh()}containsData(t){return t in this._infoMap}itemOfRow(t,e){for(const i of e?this._vitems:this._items)if(i instanceof Je&&i.row()===t)return i}indexOfRow(t){t=this.itemOfRow(t,!1);return t?t.index:-1}visIndexOfRow(t){t=this.itemOfRow(t,!0);return t?t.index:-1}getItem(t){return this._items[t]}getVisItem(t){return this._vitems[t]}expand(t,e){t=t||this._root,this.$_expand(t,e,!1)&&(this.$_resetVisIndices(0),this.$_expandedChanged(t))}expandAll(){this.expand(this._root,!0)}collapse(t,e){if(t=t||this._root,this.$_collapse(t,e)){if(t===this._root){for(let t=this._root.count()-1;0<=t;t--)this._root.get(t).$_setExpanded(!1);this.$_expand(this._root,!1,!0)}this.$_resetVisIndices(0),this.$_expandedChanged(t)}}collapseAll(){this.collapse(this._root,!0)}toggle(t,e){t.expanded()?this.collapse(t,e):this.expand(t,e)}isLastDataRow(t){return t===this._lastRow}visit(t,e){return(t||this._root).visit(e,!0)}getHeaderTemplate(t){return ri.HEADER_TEMPLATE}getFooterTemplate(t){return ri.FOOTER_TEMPLATE}getLevelGroupCount(e){let i=0;return 0===e?i=this._root.count():0<e&&e<this._levels&&this._root.visit(t=>(t.level()===e&&i++,!1),!0),i}getPageGroupCount(e){let i=0;return 0<=e&&e<this._rowLevels-1&&this._root.visit(t=>(t instanceof ei&&t.dataLevel()===e&&i++,!1),!0),i}getPageGroup(e,i){let s,r=0;return this._root.visit(t=>{if(t instanceof ei&&t.dataLevel()===e){if(r===i)return s=t,!0;r++}return!1},!0),s}getPageRows(t){t.level();var e=this._items,i=e.length;const s=[];let r=t.row.index;for(;r<i;){var n=e[r++];if(!(n instanceof Je&&t.contains(n.group)))break;s.push(n)}return s}$_refresh(){var t=+new Date;this.clear();var e=this._data?this._data.rowCount():0;0<e&&(this._levels=0,this._rowLevels=this._data.levels(),this._descendants=this.$_buildGroups(this._root,0,e),this._root.end=e-1,this.$_buildItems(this._root,this._items=[]),this.$_resetIndices(),this.$_resetVisibles()),console.log("DATA GROUP BUILD: "+(+new Date-t)+"ms.")}$_buildGroups(t,e,i){function n(t,e,i){const s=new ei(t);s.row=new Je(s,e),s.start=e,s.end=i,t.$_add(s),d++,a._levels=Math.max(a._levels,s.level()+1),e<i&&function(t){let e=t.start+1,i=e,s=h.getSource(e),r=h.getLevel(e);for(;e<t.end;)h.getSource(e)!==s&&h.getLevel(e)===r&&(o(t,i,e-1),i=e),e++;o(t,i,e)}(s)}function r(e,i,s){var r=h.getSource(i);for(let t=i+1;t<=s;t++)h.getSource(t)===r&&(n(e,i,t-1),i=t);n(e,i,s)}function o(t,e,i){const s=new ii(t);if(s.start=e,s.end=i,t.$_add(s),d++,a._levels=Math.max(a._levels,s.level()+1),h.getLevel(s.start)<l-1)r(s,e,i);else{s.rows=[];for(let t=s.start;t<=s.end;t++)s.rows.push(new Je(s,t))}}const a=this,h=this._data,l=h.levels();let d=0;return e<i&&r(t,e,i-1),d}$_buildItems(t,i){const e=this._options;var s=t._children,r=s?s.length:0;if(t instanceof ei){if(e.addMasterHeader()&&(0<r||e.addEmptyMasterHeader())&&i.push(t.header=new Me(t)),i.push(t.row),0<r)for(let t=0;t<r;t++){const n=s[t];e.addDetailHeader()&&(1<r||e.addSingleDetailHeader()),n.rows?n.rows.forEach((t,e)=>{t.no=e,i.push(t)}):this.$_buildItems(s[t],i),e.addDetailFooter()&&(1<r||e.addSingleDetailFooter())}e.addMasterFooter()&&(0<r||e.addEmptyMasterFooter())&&i.push(t.footer=new Ie(t))}else for(let t=0;t<r;t++)this.$_buildItems(s[t],i)}$_collectVisibles(e,i){var t,s=e===this._root,r=this._items,n=e.expanded(),o=i.length,a=e.count();if(s||(e instanceof ii?(t=e.header)&&(0<=t.index?(i.push(t),e._firstVis=t):e._firstVis=null):i.push(e.row)),n){if(0<a)for(let t=0;t<a;t++){var h=e.get(t);this.$_collectVisibles(h,i)}else if(0<r.length)if(e instanceof ii){var l=e.rows;for(let t=l[0].index;t<=l[l.length-1].index;t++)i.push(r[t])}else ei;e._firstVis||(e._firstVis=i[o])}s||((s=e.footer)&&0<=s.index&&i.push(s),e._lastVis=i[i.length-1],e._firstVis||(e._firstVis=e._lastVis))}$_resetVisibles(){var e=this._vitems=[];const t=this._root;if(this._lastRow=null,0<t.count()){this.$_collectVisibles(t,e),this.$_resetVisIndices(0);for(let t=e.length-1;0<=t;t--)if(e[t]instanceof Je){this._lastRow=e[t];break}}}$_resetIndices(){const i=this._items;for(let t=0,e=i.length;t<e;t++)i[t].index=t}$_resetVisIndices(e){let i=this._items;for(let t=0,e=i.length;t<e;t++)i[t].vindex=-1;i=this._vitems;for(let t=i.length-1;t>=e;t--)i[t].vindex=t}$_expand(t,e,i){let s=!1;if(e&&t.visit(t=>(t.$_setExpanded(!0)&&(s=!0),!1),!0),i||s||!t.expanded()){const a=this._vitems;var r=t===this._root,n=r?0:t._firstVis.vindex,o=r?a.length-1:t._lastVis.vindex,e=[],i=t.visible();i&&(r?a.length=0:a.splice(n,o-n+1)),s=t.$_setExpanded(!0)||s,this.$_collectVisibles(t,e),i&&q.splice(a,n,0,e)}return s}$_collapse(t,e){var i=t===this._root,s=this._vitems.slice(0),r=this._vitems.length;let n=!1;if((e||i)&&t.visit(t=>(t.$_setExpanded(!1)&&(n=!0),!1),e),n||t.expanded()){const l=this._vitems;var o=i?0:t._firstVis.vindex,a=i?l.length-1:t._lastVis.vindex,h=[],e=t.visible();n=t.$_setExpanded(!1)||n,e&&l.splice(o,a-o+1),this.$_collectVisibles(t,h),!i&&e&&(t._lastVis.vindex<0||t._firstVis.vindex),e&&q.splice(l,o,0,h),l.length>r&&console.log(s),!i&&e&&(t._lastVis.vindex<0||t._firstVis.vindex)}return n}$_expandedChanged(t){this._fireEvent("onGroupExpanded",t,t.expanded())}}ri.HEADER_TEMPLATE="@it_datagroup_header",ri.FOOTER_TEMPLATE="@it_datagroup_footer";class ni extends s{constructor(t,e){super(),this._page=0,this._level=0,this._size=1,this._headerLevel=0,this._footerLevel=0,t||lt(Z.requireDataOrGroup);let i;t instanceof Ne?(this._data=t.data(),i=this._group=t):this._data=t,e&&(this._size=he(+e.size,this._size),this._level=he(+e.level,this._level),this._headerLevel=he(+e.headerLevel,this._headerLevel),this._footerLevel=he(+e.footerLevel,this._footerLevel)),i instanceof He?(this._groupLevel=Math.max(0,i.levels()-2+he(this._level,0)),this._getRows=this.$_getRowGroupPageRows.bind(this)):i instanceof ri?(this._groupLevel=Math.max(0,i.rowLevels()-2+he(this._level,0)),this._getRows=this.$_getDataGroupPageRows.bind(this)):this._getRows=this.$_getPageRows.bind(this)}isGrouped(){return!!this._group}size(){return this._size}level(){return this._level}page(){return this._page}setPage(t){var e;(t=Math.floor(q.toNumber(t)))!==this._page&&(e=this._page,this._page=t,this.$_reset(),this._fireEvent("onPageChanged",t,e))}pageCount(){if(isNaN(this._pageCount)){let t=0;this._data&&(t=this._group instanceof He||this._group instanceof ri?this._group.getLevelGroupCount(this._groupLevel):(this._data.rowCount()+this._size-1)/this.size()>>>0),this._pageCount=t}return this._pageCount}rows(){return!this._rows&&this._data&&(this._rows=this._getRows(this._page)),this._rows=this._rows||[],this._rows}rowCount(){return this.rows().length}startRow(){return this.rows()[0]}endRow(){var t=this.rows();return t[t.length-1]}getRow(t){return this.rows()[t]}getPageRows(t){return this._getRows(t)}incPage(t){this.setPage(this._page+t)}getGroupItems(){return this._group instanceof He?this.$_getRowGroupItems(this._group):this.$_getDataGroupItems(this._group)}$_reset(){this._pageCount=NaN,this._page=Math.max(0,Math.min(this.pageCount()-1,this._page)),this._rows=null}$_getPageRows(i){var s=this._data.rowCount();const r=[];for(let t=this._size*i,e=0;t<s&&e<this._size;t++,e++)r.push(t);return r}$_getRowGroupPageRows(t){const e=this._group;t=e.getLevelGroup(this._groupLevel,t);return e.getGroupRows(t)}$_getDataGroupPageRows(t){const e=this._group;t=e.getPageGroup(this._groupLevel,t);const i=e.getPageRows(t);return i.map(t=>t.row())}$_getRowGroupItems(r){if(r){const a=r.getLevelGroup(this._groupLevel,this._page);var t=a.level(),n=t+this._headerLevel,o=t+this._footerLevel;const h=[];let i=a.header().index,s=a.footer().index;if(this._headerLevel<0){let t=-this._headerLevel,e=a.parent();for(;0<t&&e!==r.root();)h.push(e.header()),e=e.parent(),t--}else if(0<this._headerLevel){let t=0;for(;t<this._headerLevel&&r.getItem(i+1)instanceof Me;)i++,t++}if(0<this._footerLevel){let t=0;for(;t<this._footerLevel&&r.getItem(s-1)instanceof Ie;)s--,t++}for(let e=i;e<=s;e++){let t=r.getItem(e);0<=t.vindex&&((t instanceof Me&&t.group.level()<n||t instanceof Ie&&t.group.level()<o)&&(t=null),t&&h.push(t))}if(this._footerLevel<0){let t=-this._footerLevel,e=a.parent();for(;0<t&&e!==r.root();)h.push(e.footer()),e=e.parent(),t--}return h}return[]}$_getDataGroupItems(i){if(i){const _=i.getPageGroup(this._groupLevel,this._page);var t=_._children[0].rows,s=_.level(),r=s+this._headerLevel,s=s+this._footerLevel,n=t[0].index,o=t[t.length-1].index;let e=[];if(!(r<0||0<r)){e.push(_.row);let t=_.row.index+1;for(;t<n;){var a=i.getItem(t++);0<=a.vindex&&e.push(a)}}for(let t=n;t<=o;t++){var h=i.getItem(t);0<=h.vindex&&h&&e.push(h)}if(!(0<s)&&!(s<0)&&_.footer){var l=_.footer.index;let t=e[e.length-1].index+1;for(;t<=l;){var d=i.getItem(t++);0<=d.vindex&&e.push(d)}}return e}return[]}}let oi=0;class ai extends a{constructor(){super(),this._clickable=!1,this._id=this.type()+oi++}get id(){return this._id}set id(t){this._id=t}get hint(){return this._hint}set hint(t){this._hint=t}get style(){return this._style}set style(t){this._style=t}get styleCallback(){return this._styleCallback}set styleCallback(t){this._styleCallback=t}get clickable(){return this._clickable}set clickable(t){this._clickable=t}get onClick(){return this._onClick}set onClick(t){this._onClick=t}getProxy(){return{type:this.type(),id:this._id}}clicked(t,e,i){return this._doClicked(t,e,i)}longPressed(t,e,i){return this._doLongPressed(t,e,i)}_doClicked(t,e,i){if(this.clickable&&this._onClick)return this._clickArgs||(this._clickArgs={control:t.wrapperOrThis(),renderer:this.getProxy()}),this._clickArgs.row=e,this._clickArgs.field=i,this._onClick(this._clickArgs)}_doLongPressed(t,e,i){return!1}}class hi extends ai{get value(){return this._value}set value(t){this._value=t}}class li extends hi{constructor(){super(...arguments),this._fitWidth=1,this._fitHeight=1}get fitWidth(){return this._fitWidth}set fitWidth(t){this._fitWidth=t}get fitHeight(){return this._fitHeight}set fitHeight(t){this._fitHeight=t}getFitWidth(){return isNaN(this._fitWidth)?1:this._fitWidth}getFitHeight(){return isNaN(this._fitHeight)?1:this._fitHeight}}class di extends hi{constructor(){super(...arguments),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=t}get trueValues(){return this._trueValues&&this._trueValues.slice(0)}set trueValues(t){this._trueValues=t&&t.slice(0)}get trueValue(){return this._trueValue}set trueValue(t){this._trueValue=t}get falseValue(){return this._falseValue}set falseValue(t){this._falseValue=t}isTrue(t){return!0===t||!!this._trueValues&&0<=this._trueValues.indexOf(t)}getValueOf(t){return t?ne(this._trueValue,!(this._trueValues&&0<this._trueValues.length)||this._trueValues[0]):ne(this._falseValue,!1)}}class _i extends ai{constructor(){super(),this._disabled=!1,this._borderless=!1,this._labelPosition=b.BOTTOM,this.clickable=!0}get disabled(){return this._disabled}set disabled(t){this._disabled=t}get buttonWidth(){return this._buttonWidth}set buttonWidth(t){this._buttonWidth=+t}get buttonHeight(){return this._buttonHeight}set buttonHeight(t){this._buttonHeight=+t}get borderless(){return this._borderless}set borderless(t){this._borderless=!0}get label(){return this._label}set label(t){this._label=t}get labelPosition(){return this._labelPosition}set labelPosition(t){this._labelPosition=t}get imageUrl(){return this._imageUrl}set imageUrl(t){this._imageUrl=t}get imageWidth(){return this._imageWidth}set imageWidth(t){this._imageWidth=+t}get imageHeight(){return this._imageHeight}set imageHeight(t){this._imageHeight=+t}get shape(){return this._shape}set shape(t){this._shape=t}get shapeWidth(){return this._shapeWidth}set shapeWidth(t){this._shapeWidth=t}get shapeHeight(){return this._shapeHeight}set shapeHeight(t){this._shapeHeight=t}getShapeSize(){let t=Math.max(0,this._shapeHeight);var e=Math.max(0,this._shapeWidth)||t||_i.SHAPE_SIZE;return t=t||e,{width:e,height:t}}type(){return _i.TYPE}getProxy(){const t=super.getProxy();return t.label=this._label,t}}_i.TYPE="button",_i.SHAPE_SIZE=20;class ci extends di{constructor(){super(...arguments),this._labelWrap=!0}get boxSize(){return this._boxSize}set boxSize(t){this._boxSize=+t}get boxWidth(){return this._boxWidth}set boxWidth(t){this._boxWidth=+t}get boxHeight(){return this._boxHeight}set boxHeight(t){this._boxHeight=+t}get label(){return this._label}set label(t){this._label=t}get checkedLabel(){return this._checkedLabel}set checkedLabel(t){this._checkedLabel=t}get uncheckedLabel(){return this._uncheckedLabel}set uncheckedLabel(t){this._uncheckedLabel=t}get labelWrap(){return this._labelWrap}set labelWrap(t){this._labelWrap=t}get checkedStyle(){return this._checkedStyle}set checkedStyle(t){this._checkedStyle=t}get uncheckedStyle(){return this._uncheckedStyle}set uncheckedStyle(t){this._uncheckedStyle=t}getBoxWidth(){return he(this._boxWidth,this._boxSize)}getBoxHeight(){return he(this._boxHeight,this._boxSize)}getLabel(t){return t?this._checkedLabel||this._label:this._uncheckedLabel||this._label}type(){return ci.TYPE}_doClicked(t,e,i){if(super._doClicked(t,e,i)||!i)return!0;{const s=t.data();if(!s.readOnly()){let t=s.getValue(e,i,!0);return t=this.isTrue(t)?this.getValueOf(!1):this.getValueOf(!0),s.updateValue(e,i,t),!0}}}}ci.TYPE="check";class ui extends hi{get gaugeSize(){return this._gaugeSize}set gaugeSize(t){this._gaugeSize=+t}get gaugeWidth(){return this._gaugeWidth}set gaugeWidth(t){this._gaugeWidth=+t}get gaugeHeight(){return this._gaugeHeight}set gaugeHeight(t){this._gaugeHeight=+t}getGaugeWidth(){return le(this._gaugeWidth,this._gaugeSize,ui.SIZE)}getGaugeHeight(){return le(this._gaugeHeight,this._gaugeSize,ui.SIZE)}}ui.SIZE=200;class gi extends ui{constructor(){super(...arguments),this._startAngle=0,this._endAngle=360,this._clockwise=!0,this._minValue=0,this._maxValue=100}get centerX(){return this._centerX}set centerX(t){this._centerX=q.toNumber(t)}get centerY(){return this._centerY}set centerY(t){this._centerY=q.toNumber(t)}get radiusX(){return this._radiusX}set radiusX(t){this._radiusX=q.toNumber(t)}get radiusY(){return this._radiusY}set radiusY(t){this._radiusY=q.toNumber(t)}get startAngle(){return this._startAngle}set startAngle(t){this._startAngle=q.toNumber(t)}get endAngle(){return this._endAngle}set endAngle(t){this._endAngle=q.toNumber(t)}get clockwise(){return!1!==this._clockwise}set clockwise(t){this._clockwise=t}get minValue(){return this._minValue}set minValue(t){this._minValue=t}get maxValue(){return this._maxValue}set maxValue(t){this._maxValue=this.toNum(t)}get valueStyle(){return this._valueStyle}set valueStyle(t){this._valueStyle=t}getExtents(t,e){t=he(this._centerX,t/2),e=he(this._centerY,e/2);return{cx:t,cy:e,rx:he(this._radiusX,t),ry:he(this._radiusY,e)}}getStyle(){return this._gaugeStyle||(this._gaugeStyle=Object.assign(Object.assign({},gi.STYLE),this.style),this._gaugeStyle.fill="none"),this._gaugeStyle}getValueStyle(){return this._activeStyle||(this._activeStyle=Object.assign(Object.assign({},gi.VALUE_STYLE),this.valueStyle),this._activeStyle.fill="none"),this._activeStyle}getValueRate(t){return(t-this._minValue)/(this._maxValue-this._minValue)}type(){return gi.TYPE}}gi.TYPE="gauge",gi.STYLE={stroke:"#eee",strokeWidth:"10px"},gi.VALUE_STYLE={stroke:"#00c",strokeWidth:"10px"};class pi extends ai{get iconSet(){return this._iconSet}set iconSet(t){this._iconSet=t}get iconName(){return this._iconName}set iconName(t){this._iconName=t}type(){return pi.TYPE}}pi.TYPE="icon";class fi extends hi{constructor(){super(...arguments),this._decorative=!1,this._nullWidth=100}get imageWidth(){return this._imageWidth}set imageWidth(t){this._imageWidth=+t}get imageHeight(){return this._imageHeight}set imageHeight(t){this._imageHeight=+t}get root(){return this._root}set root(t){this._root=t||""}get url(){return this._url}set url(t){this._url=t}get urlCallback(){return this._urlCallback}set urlCallback(t){this._urlCallback=t}get alt(){return this._alt}set alt(t){this._alt=t}get decorative(){return this._decorative}set decorative(t){this._decorative=t}get nullUrl(){return this._nullUrl}set nullUrl(t){this._nullUrl=t}get nullWidth(){return this._nullWidth}set nullWidth(t){this._nullWidth=t}get nullHeight(){return this._nullHeight}set nullHeight(t){this._nullHeight=t}getUrl(t){var e,i=this._root||"";const s=this._urlCallback;let r=!1,n;return!s||void 0!==(e=s({value:t}))&&(n=e),n=n||(this._url||t),n||(n=this._nullUrl||"",r=!0),n=n&&i+n,{url:n,isNull:r}}type(){return fi.TYPE}$_inflateUrl(t){}}fi.TYPE="image";class wi extends li{constructor(){super(...arguments),this._autoHide=!1}get boxWidth(){return this._boxWidth}set boxWidth(t){this._boxWidth=+t}get boxHeight(){return this._boxHeight}set boxHeight(t){this._boxHeight=+t}get autoHide(){return this._autoHide}set autoHide(t){this._autoHide=t}}class mi extends wi{get placeholder(){return this._placeholder}set placeholder(t){this._placeholder=t}type(){return mi.TYPE}}mi.TYPE="input";class vi extends wi{type(){return vi.TYPE}}vi.TYPE="number";class yi extends hi{constructor(){super(...arguments),this._hiddenChar="*"}get textFormatter(){return this._textFormatter}set textFormatter(t){this._textFormatter=t}get boolFormatter(){return this._boolFormatter}set boolFormatter(t){this._boolFormatter=t}get numberFormatter(){return this._numberFormatter}set numberFormatter(t){this._numberFormatter=t}get dateFormatter(){return this._dateFormatter}set dateFormatter(t){this._dateFormatter=t}get textFormat(){return this._textFormat}set textFormat(t){this._textFormat=t}get boolFormat(){return this._boolFormat}set boolFormat(t){this._boolFormat=t}get numberFormat(){return this._numberFormat}set numberFormat(t){this._numberFormat=t}get dateFormat(){return this._dateFormat}set dateFormat(t){this._dateFormat=t}get prefix(){return this._prefix}set prefix(t){this._prefix=t}get suffix(){return this._suffix}set suffix(t){this._suffix=t}get maxLength(){return this._maxLength}set maxLength(t){this._maxLength=t=+t}getText(e,i,t){const s=void 0!==this._text?this._text:i;if(null==s)return this._getAltText(e)||"";i=typeof s;let r;if("string"==i){if(s){const n=this._textFormatter||ge(this._textFormat)||e.textFormatter();n&&(r=n(s))}}else if("number"==i||"bigint"==i)if(Number.isNaN(s))"string"==typeof this._nanText&&(r=this._nanText);else{const o=this._numberFormatter||fe(this._numberFormat)||e.numberFormatter();o&&(r=o(s))}else if(s instanceof Date){const a=this._dateFormatter||we(this._dateFormat)||e.dateFormatter();r=a?a(s):s.toLocaleDateString()}else if("boolean"==i){const h=this._boolFormatter||pe(this._boolFormat)||e.boolFormatter();h&&(r=h(s))}if(void 0===r&&(r=String(s)||""),r){if(this._hiddenRange&&this._hiddenChar){i=this._hiddenRange[0];if(0<=i){e=r.length;let t=he(this._hiddenRange[1],e);t<0&&(t=r.length+t),t>i&&(t=Math.min(t,e),r=r.substring(0,i)+this._hiddenChar.repeat(t-i)+r.substring(t))}}t=this._sepReg||t;t&&(r=r.replace(t,"\n")),0<=this._maxLength&&(r=r.substring(0,this._maxLength))}return this._prefix&&(r=this._prefix+r),this._suffix&&(r+=this._suffix),r}_getAltText(t){return""}}class bi extends yi{constructor(){super(...arguments),this._wrap=!1,this._singleLine=!1}get wrap(){return this._wrap}set wrap(t){t=this.toBool(t),this._wrap=t}get lineSeparator(){return Array.isArray(this._lineSeparator)?this._lineSeparator.slice(0):this._lineSeparator}set lineSeparator(t){t!==this._lineSeparator&&(this._lineSeparator=Array.isArray(t)?t.slice(0):t,this._sepReg=q.makeLineSeparator(this._lineSeparator))}get singleLine(){return this._singleLine}set singleLine(t){this._singleLine=t}get text(){return this._text}set text(t){this._text=t}get hiddenChar(){return this._hiddenChar}set hiddenChar(t){this._hiddenChar=t}get hiddenRange(){return this._hiddenRange?this._hiddenRange.slice(0):void 0}set hiddenRange(t){this._hiddenRange=t?t.slice(0):void 0}get nanText(){return this._nanText}set nanText(t){this._nanText=t}type(){return bi.TYPE}}bi.TYPE="text";class Si extends bi{get root(){return this._root}set root(t){this._root=t||""}get linkField(){return this._linkField}set linkField(t){this._linkField=t}get link(){return this._link}set link(t){this._link=t}getLink(t){let e=this._link;return!e&&this._linkField&&(e=t.getValue(this._linkField)),this._root&&(e=this._root+e),e||""}type(){return Si.TYPE}_getAltText(t){return this.getLink(t)}}Si.TYPE="link";class Ci extends li{constructor(){super(...arguments),this._minValue=0,this._maxValue=100}get barWidth(){return this._barWidth}set barWidth(t){this._barWidth=this.toNum(t)}get barHeight(){return this._barHeight}set barHeight(t){this._barHeight=this.toNum(t)}get minValue(){return this._minValue}set minValue(t){this._minValue=+t}get maxValue(){return this._maxValue}set maxValue(t){this._maxValue=+t}type(){return Ci.TYPE}}Ci.TYPE="progress";class xi extends Ci{get lowValue(){return this._lowValue}set lowValue(t){this._lowValue=+t}get highValue(){return this._highValue}set highValue(t){this._highValue=+t}get optimumValue(){return this._optimumValue}set optimumValue(t){this._optimumValue=+t}type(){return xi.TYPE}_checkMax(t){}}xi.TYPE="meter",(T=T=T||{}).CANVAS="canvas",T.SVG="svg",(T=A=A||{}).L="L",T.M="M",T.Q="Q",T.H="H";class Ri extends hi{constructor(){super(...arguments),this._qrcodeSize=Ri.DEF_SIZE,this._correctionLevel=A.Q}get output(){return this._output}set output(t){this._output=t}get qrcodeWidth(){return this._qrcodeWidth}set qrcodeWidth(t){this._qrcodeWidth=Math.max(+t,Ri.MIN_SIZE)}get qrcodeHeight(){return this._qrcodeHeight}set qrcodeHeight(t){this._qrcodeHeight=Math.max(+t,Ri.MIN_SIZE)}get qrcodeSize(){return this._qrcodeSize}set qrcodeSize(t){this._qrcodeSize=Math.max(+t,Ri.MIN_SIZE)}get correctionLevel(){return this._correctionLevel}set correctionLevel(t){this._correctionLevel=t}getQrcodeSize(){return{w:le(this._qrcodeWidth,this._qrcodeSize,Ri.DEF_SIZE),h:le(this._qrcodeHeight,this._qrcodeSize,Ri.DEF_SIZE)}}type(){return Ri.TYPE}}Ri.TYPE="qrcode",Ri.DEF_SIZE=100,Ri.MIN_SIZE=76;class Ei extends ai{constructor(){super(...arguments),this._boxGap=5,this._itemGap=10,this._labelWrap=!0}get labels(){return this._labels&&this._labels.slice(0)}set labels(t){q.equalArrays(t,this._labels)||(this._labels=t&&t.slice(0))}get values(){return this._values&&this._values.slice(0)}set values(t){q.equalArrays(t,this._values)||(this._values=t&&t.slice(0))}get valueCount(){return this._values?this._values.length:0}get boxSize(){return this._boxSize}set boxSize(t){this._boxSize=+t}get boxWidth(){return this._boxWidth}set boxWidth(t){this._boxWidth=+t}get boxHeight(){return this._boxHeight}set boxHeight(t){this._boxHeight=+t}get boxGap(){return this._boxGap}set boxGap(t){this._boxGap=this.toNum(t,0)}get itemGap(){return this._itemGap}set itemGap(t){this._itemGap=this.toNum(t,0)}get labelWrap(){return this._labelWrap}set labelWrap(t){this._labelWrap=t}type(){return Ei.TYPE}_doClicked(t,e,i){return super._doClicked(t,e,i)}}Ei.TYPE="radiogroup";class Vi extends ci{get group(){return this._group}set group(t){this._group=t}type(){return Vi.TYPE}}Vi.TYPE="radio";class $i extends ai{constructor(){super(...arguments),this._shape=$i.DEF_SHAPE,this._shapeSize=$i.DEF_SIZE,this._decorative=!1}get shape(){return this._shape}set shape(t){this._shape=t}get shapeWidth(){return this._shapeWidth}set shapeWidth(t){this._shapeWidth=+t}get shapeHeight(){return this._shapeHeight}set shapeHeight(t){this._shapeHeight=+t}get shapeSize(){return this._shapeSize}set shapeSize(t){this._shapeSize=+t}get decorative(){return this._decorative}set decorative(t){this._decorative=t}getShapeName(){return this._shape||$i.DEF_SHAPE}getShapeWidth(){return le(this._shapeWidth,this._shapeSize,this._shapeHeight)}getShapeHeight(){return le(this._shapeHeight,this._shapeSize,this._shapeWidth)}type(){return $i.TYPE}}$i.TYPE="shape",$i.DEF_SHAPE="@star",$i.DEF_SIZE=20;class Ai extends $i{constructor(){super(...arguments),this._shapeCount=Ai.SHAPE_COUNT,this._minValue=0,this._maxValue=Ai.SHAPE_COUNT,this._integral=!0,this._editable=!1}get shapeCount(){return this._shapeCount}set shapeCount(t){this._shapeCount=Math.max(this.toNum(+t,0))}get minValue(){return this._minValue}set minValue(t){this._minValue=this.toNum(+t,0)}get maxValue(){return this._maxValue}set maxValue(t){this._maxValue=this.toNum(+t,0)}get integral(){return this._integral}set integral(t){this._integral=t}get editable(){return this._editable}set editable(t){this._editable=t}get valueStyle(){return this._valueStyle}set valueStyle(t){this._valueStyle=t}getStyle(){return this._shapeStyle||(this._shapeStyle=Object.assign(Object.assign({},Ai.STYLE),this.style)),this._shapeStyle}getValueStyle(){return this._activeStyle||(this._activeStyle=Object.assign(Object.assign({},Ai.VALUE_STYLE),this.valueStyle)),this._activeStyle}getValueRate(t){return(t-this._minValue)/(this._maxValue-this._minValue)}type(){return Ai.TYPE}}Ai.TYPE="rating",Ai.SHAPE_COUNT=3,Ai.STYLE={stroke:"#0088ff",strokeWidth:"2px"},Ai.VALUE_STYLE={fill:"#0088ff",strokeWidth:"0px"},(T=L=L||{}).NONE="none",T.GROUP="group",T.LABEL="label",T.ALL="all";class Li extends li{constructor(){super(...arguments),this._sortMode=L.NONE,this._sortDirection=f.ASCENDING,this._itemsChanged=!0}get boxWidth(){return this._boxWidth}set boxWidth(t){this._boxWidth=+t}get labels(){return this._labels?this._labels.slice(0):null}set labels(t){q.equalArrays(t,this._labels)||(this._labels=t?t.slice(0):null,this._itemsChanged=!0)}get values(){return this._values?this._values.slice(0):null}set values(t){q.equalArrays(t,this._values)||(this._values=t?t.slice(0):null,this._itemsChanged=!0)}get groups(){return this._groups?this._groups.slice(0):null}set groups(t){if(!q.equalArrays(t,this._groups)){if(this._groups=t?t.slice(0):null,this._groupValues=[],this._groupLabels=[],t)for(var e of t){var i=e.values,s=e.labels;if(i)for(let t=0;t<i.length;t++)this._groupValues.push(i[t]),this._groupLabels.push(s[t])}this._itemsChanged=!0}}get isGrouped(){return this._groups&&0<this._groups.length}get itemsChanged(){return this._itemsChanged}get sortMode(){return this._sortMode}set sortMode(t){this._sortMode=t}get sortDirection(){return this._sortDirection}set sortDirection(t){t!==this._sortDirection&&(this._sortDirection=t,this._itemsChanged=!0)}type(){return Li.TYPE}}Li.TYPE="select";class Di extends ai{constructor(){super(...arguments),this._space=Di.SPACE}get space(){return this._space}set space(t){this._space=+t||0}type(){return Di.TYPE}}Di.TYPE="spacer",Di.SPACE=10;class ki extends hi{constructor(){super(...arguments),this._pointWidth=10,this._minPadding=.1}get chartWidth(){return this._chartWidth}set chartWidth(t){this._chartWidth=t}get chartHeight(){return this._chartHeight}set chartHeight(t){this._chartHeight=t}get pointWidth(){return this._pointWidth}set pointWidth(t){this._pointWidth=Math.max(1,+t,0)}get baseValue(){return this._baseValue}set baseValue(t){this._baseValue=this.toNum(t)}get minValue(){return this._minValue}set minValue(t){this._minValue=+t}get maxValue(){return this._maxValue}set maxValue(t){this._maxValue=+t}get minPadding(){return this._minPadding}set minPadding(t){this._minPadding=this.toNum(t)}get firstStyle(){return this._firstStyle}set firstStyle(t){this._firstStyle=t}get lastStyle(){return this._lastStyle}set lastStyle(t){this._lastStyle=t}get minStyle(){return this._minStyle}set minStyle(t){this._minStyle=t}get maxStyle(){return this._maxStyle}set maxStyle(t){this._maxStyle=t}get pointStyle(){return this._pointStyle}set pointStyle(t){this._pointStyle=t}}class Ti extends ki{type(){return Ti.TYPE}}Ti.TYPE="sparkline";class Pi extends ki{constructor(){super(...arguments),this._pointSize=.7,this._belowSize=.4}get pointSize(){return this._pointSize}set pointSize(t){this._pointSize=+t||.1}get belowSize(){return this._belowSize}set belowSize(t){this._belowSize=this.toNum(t)}get belowStyle(){return this._belowStyle}set belowStyle(t){this._belowStyle=t}type(){return Pi.TYPE}}Pi.TYPE="sparkbar";class Mi extends hi{constructor(){super(...arguments),this._svgWidth=Mi.DEF_SIZE,this._svgHeight=Mi.DEF_SIZE,this._vboxWidth=NaN,this._vboxHeight=NaN,this._decorative=!1}get shapes(){return Array.isArray(this._shapes)?this._shapes.slice(0):this._shapes}set shapes(t){this._shapes=t}get svgWidth(){return this._svgWidth}set svgWidth(t){this._svgWidth=t}get svgHeight(){return this._svgHeight}set svgHeight(t){this._svgHeight=t}get vboxWidth(){return this._vboxWidth}set vboxWidth(t){this._vboxWidth=t}get vboxHeight(){return this._vboxHeight}set vboxHeight(t){this._vboxHeight=t}get decorative(){return this._decorative}set decorative(t){this._decorative=t}getVboxWidth(){return he(this._vboxWidth,this._vboxHeight)}getVboxHeight(){return he(this._vboxHeight,this._vboxWidth)}getSvgWidth(){return he(this._svgWidth,this._svgHeight)}getSvgHeight(){return he(this._svgHeight,this._svgWidth)}type(){return Mi.TYPE}}Mi.TYPE="svg",Mi.DEF_SIZE=24;class Ii extends di{get boxSize(){return this._boxSize}set boxSize(t){this._boxSize=+t}type(){return Ii.TYPE}_doClicked(t,e,i){return super._doClicked(t,e,i)}}Ii.TYPE="switch";class Ni extends bi{get target(){return this._target}set target(t){this._target=t}type(){return Ni.TYPE}}Ni.TYPE="label";class Oi extends ai{constructor(){super(...arguments),this._letter=Oi.DEF_LETTER,this._offsetX=0,this._offsetY=.1,this._decorative=!1}get letter(){return this._letter}set letter(t){this._letter=t?t.charAt(0):""}get offsetX(){return this._offsetX}set offsetX(t){this._offsetX=this.toNum(t,0)}get offsetY(){return this._offsetY}set offsetY(t){this._offsetY=this.toNum(t,0)}get decorative(){return this._decorative}set decorative(t){this._decorative=t}getChar(){return this._letter||Oi.DEF_LETTER}type(){return Oi.TYPE}}Oi.TYPE="letter",Oi.DEF_LETTER="♥";class Bi extends ai{constructor(){super(...arguments),this._thickness=1}get dir(){return this._dir}set dir(t){this._dir=t}get thickness(){return this._thickness}set thickness(t){this._thickness=this.toNum(t,0)}get lineColor(){return this._lineColor}set lineColor(t){this._lineColor=t}get lineStyle(){return this._lineStyle}set lineStyle(t){this._lineStyle=t}type(){return Bi.TYPE}}Bi.TYPE="line";const Fi="http://www.w3.org/2000/svg";class zi extends a{constructor(t,e){super(),t instanceof Document?this.svg=t.createElementNS(Fi,"svg"):this.svg=t,e&&this.svg.classList.add(e)}static create(t){return t.createElementNS(Fi,"svg")}_doDestory(){this.svg=null}attach(t){return t.appendChild(this.svg),this}detach(){this.svg.parentElement&&this.svg.remove()}setClass(t){this.svg.setAttribute("class",""),t&&this.svg.classList.add(t)}addClass(t){t&&this.svg.classList.add(t)}setStyle(t){t&&Object.assign(this.svg.style,t)}setViewSize(t,e){isNaN(t)||(e=e||t,Re.resizeSVG(this.svg,t,e))}clearViewSize(){this.svg.removeAttribute("viewBox")}setSize(t,e){this.svg.style.width=isNaN(t)?"":t+"px",this.svg.style.height=isNaN(e)?"":e+"px"}fillSize(){this.svg.style.width="100%",this.svg.style.height="100%"}makeBackground(t,e){return this.svg.style.pointerEvents="none",this.svg.style.verticalAlign="middle",isNaN(t)||Re.resize(this.svg,t,e||t),this}clear(){Re.clearChildren(this.svg)}rect(t,e,i,s,r){const n=this.svg.ownerDocument.createElementNS(Fi,"rect");return n.x.baseVal.value=t,n.y.baseVal.value=e,n.width.baseVal.value=i,n.height.baseVal.value=s,r&&Object.assign(n.style,r),this.svg.appendChild(n),n}circle(t,e,i,s){const r=this.svg,n=r.ownerDocument,o=n.createElementNS(Fi,"circle");return o.cx.baseVal.value=t,o.cy.baseVal.value=e,o.r.baseVal.value=i,s&&Object.assign(o.style,s),r.appendChild(o),o}line(t,e,i,s,r){s=this._createPath(`M ${t} ${e} L ${i} `+s);return r&&Object.assign(s.style,r),s}polyline(i,t){let s=`M ${i[0]} ${i[1]} L`;for(let t=1,e=i.length/2>>0;t<e;t++)s+=` ${i[2*t]} `+i[2*t+1];const e=this._createPath(s);return t&&Object.assign(e.style,t),e.style.fill="none",e}polylgon(i,t){let s=`M ${i[0]} ${i[1]} L`;for(let t=1,e=i.length/2>>0;t<e;t++)s+=` ${i[2*t]} `+i[2*t+1];s+="z";var e=this._createPath(s);return t&&Object.assign(e.style,t),e}quadratic(t,e,i,s,r,n,o){n=this._createPath(`M ${t} ${e} Q ${i} ${s} ${r} ${n} z`);return o&&Object.assign(n.style,o),n}arc(t,e,i,s,r,n,o,a){n=Math.min(359.99999,n);var h=o?r+n:r-n,n=this.$_angleToPos(t,e,i,s,r,o),e=this.$_angleToPos(t,e,i,s,h,o),e=`M${n.x},${n.y} A${i},${s},0,${o?180<=h-r?1:0:h-r<=180?1:0},${o?1:0},${e.x},`+e.y,e=this._createPath(e);return a&&Object.assign(e.style,a),e}path(t){return this._createPath(t)}setShape(t,e=!1){return e&&this.clear(),this.setViewSize(t.width,t.height),this._createPath(t.path),this}_createPath(t){const e=this.svg.ownerDocument.createElementNS(Fi,"path");return e.setAttribute("d",t),this.svg.appendChild(e),e}$_angleToPos(t,e,i,s,r,n){return r=r*Math.PI/180,{x:t+i*Math.cos(r),y:e+s*Math.sin(r)}}_animateRevert(t,e,i,s){const r=this.svg.ownerDocument.createElementNS(Fi,"animate");r.setAttribute("attributeName","d"),r.setAttribute("dur",s+"ms"),r.setAttribute("values",e+";"+i+";"+e),t.appendChild(r)}}(T=D=D||{}).DEFAULT="default",T.SPOKES="spokes";class Hi{static render(t,e,i){i.type===D.SPOKES?Hi.spoke(t,e,i):(D.DEFAULT,Hi.default(t,e,i))}static default(e,i,t){var s=getComputedStyle(i),r=t.width/2,n=t.height/2,o=2*Math.min(r,n)/3,a=t.width<=30,h=a?2:5;const l="#f0f0f0",d=s.fill||"#404040";var _=[l,l,d,l,l].join(";"),c=he(t.itemCount,12),u=he(t.duration,1e3)+"ms";for(let t=0;t<c;t++){const p=e.createElementNS(Fi,"circle");var g=t/c*Math.PI*2;p.cx.baseVal.value=r+o*Math.cos(g),p.cy.baseVal.value=n+o*Math.sin(g),p.r.baseVal.value=h;g=e.createElementNS(Fi,"animate");Re.setAttrs(g,Object.assign({},a?this.DEFAULT_SMALL:this.DEFAULT_ANI,{dur:u,begin:-(c-1-t)/c+"s"})),p.appendChild(g),g=e.createElementNS(Fi,"animate"),Re.setAttrs(g,Object.assign({},this.DEFAULT_FILL,{values:_,dur:u,begin:-(c-1-t)/c+"s"})),p.appendChild(g),i.appendChild(p)}}static spoke(e,i,t){var s=getComputedStyle(i),r=t.width/2,n=t.height/2,o=2*Math.min(r,n)/5,a=2*Math.min(r,n)/3;const h="#f0f0f0",l=s.stroke||"#404040";var d=[h,h,l,h,h].join(";"),_=he(t.itemCount,10),c=he(t.duration,1e3)+"ms";for(let t=0;t<_;t++){var u=t/_*Math.PI*2,g=r+o*Math.cos(u),p=r+o*Math.sin(u),f=r+a*Math.cos(u),w=r+a*Math.sin(u);const m=e.createElementNS(Fi,"path");u=e.createElementNS(Fi,"animate");m.setAttribute("d",`M ${g} ${p} L ${f} `+w),m.style.stroke=h,Re.setAttrs(u,Object.assign({},this.SPOKE_ANI,{values:d,begin:-(_-1-t)/_+"s",dur:c})),m.appendChild(u),i.appendChild(m)}}static arc(t,e,i){}}Hi.DEFAULT_ANI={attributeName:"r",times:"0;0.1;0.2;0.3;1",repeatCount:"indefinite",values:"2;3;5;3;2"},Hi.DEFAULT_SMALL={attributeName:"r",times:"0;0.1;0.2;0.3;1",repeatCount:"indefinite",values:"0.5;1;2;1;0.5"},Hi.DEFAULT_FILL={attributeName:"fill",times:"0;0.1;0.2;0.3;1",repeatCount:"indefinite"},Hi.SPOKE_ANI={attributeName:"stroke",times:"0;0.1;0.2;0.3;1",repeatCount:"indefinite"};class Wi extends ai{constructor(){super(...arguments),this._spinnerType=D.DEFAULT,this._spinnerSize=Wi.SPINNER_SIZE,this._duration=1e3}get spinnerType(){return this._spinnerType}set spinnerType(t){this._spinnerType=t}get spinnerWidth(){return this._spinnerWidth}set spinnerWidth(t){this._spinnerWidth=+t}get spinnerHeight(){return this._spinnerHeight}set spinnerHeight(t){this._spinnerHeight=+t}get spinnerSize(){return this._spinnerSize}set spinnerSize(t){this._spinnerSize=+t}get itemCount(){return this._wheelCount}set itemCount(t){this._wheelCount=t}get duration(){return this._duration}set duration(t){this._duration=t}getSpinnerWidth(){return he(this._spinnerWidth,this._spinnerSize)}getSpinnerHeight(){return he(this._spinnerHeight,this._spinnerSize)}type(){return Wi.TYPE}}Wi.TYPE="spinner",Wi.SPINNER_SIZE=120,(T=k=k||{}).DEFAULT="default",T.VISIBLE="visible",T.HIDDEN="hidden";class Gi extends hi{constructor(){super(...arguments),this._orderVisibility=k.DEFAULT}get field(){return this._field}set field(t){this._field=t}get label(){return this._label}set label(t){this._label=t}get orderVisibility(){return this._orderVisibility}set orderVisibility(t){this._orderVisibility=t}type(){return Gi.TYPE}}Gi.TYPE="field";class Ui extends ai{get placeholders(){return this._placeholders&&this._placeholders.slice(0)}set placeholders(t){this._placeholders=t&&t.slice(0)}type(){return Ui.TYPE}}Ui.TYPE="dummy";class qi extends yi{constructor(){super(...arguments),this._useInner=!1}get domid(){return this._domid}set domid(t){this._domid=t}get useInner(){return this._useInner}set useInner(t){this._useInner=t}get html(){return this._html}set html(t){this._html=t}type(){return qi.TYPE}}qi.TYPE="html";class ji extends wi{type(){return ji.TYPE}}ji.TYPE="date";class Yi extends wi{type(){return Yi.TYPE}}Yi.TYPE="time";class Qi extends wi{type(){return Qi.TYPE}}Qi.TYPE="datetime";const Zi={button:_i,check:ci,date:ji,datetime:Qi,dummy:Ui,field:Gi,gauge:gi,html:qi,icon:pi,image:fi,input:mi,label:Ni,letter:Oi,line:Bi,link:Si,meter:xi,number:vi,progress:Ci,qrcode:Ri,radio:Vi,radiogroup:Ei,rating:Ai,select:Li,shape:$i,spacer:Di,sparkbar:Pi,sparkline:Ti,spinner:Wi,svg:Mi,switch:Ii,text:bi,time:Yi};class Xi{static getRenderer(t,e){if(q.isObject(t)){var i=("string"==typeof t.type?t.type:null)||e;if(i in Zi)return(new Zi[i]).assignProps(t)}else{if("string"!=typeof t){const s=Zi[e];return s?new s:void 0}if((t=t.toLowerCase())in Zi)return new Zi[t]}}static createRenderer(t){return new Zi[t]}}class Ki{constructor(t){q.isObject(t)&&Object.assign(this,t)}}class Ji extends a{constructor(t,e){super(),this._visible=!0,this._id=t,this._childProps=e||{}}loadProps(t){return q.isObject(t)&&this._doLoadProps(t),this}id(){return this._id}getChildProp(t){return this._childProps[t]}get visible(){return this._visible}set visible(t){(t=this.toBool(t))!==this._visible&&(this._visible=t,this._changed())}get width(){return this._width}set width(t){"*"===t?(this.width=0,this._childProps.grow=1):t!=this._width&&(this._width=t,this._widthDim=it(t,!0),this._changed())}get height(){return this._height}set height(t){"*"===t?(this.height=0,this._childProps.grow=1):t!=this._height&&(this._height=t,this._heightDim=it(t,!0),this._changed())}getLeft(){return this._leftDim&&this._leftDim.fixed?this._leftDim.size:NaN}getRight(){return this._rightDim&&this._rightDim.fixed?this._rightDim.size:NaN}getTop(){return this._topDim&&this._topDim.fixed?this._topDim.size:NaN}getBottom(){return this._bottomDim&&this._bottomDim.fixed?this._bottomDim.size:NaN}getRelativeLeft(){return this._leftDim&&!this._leftDim.fixed?this._leftDim.size:NaN}getRelativeRight(){return this._rightDim&&!this._rightDim.fixed?this._rightDim.size:NaN}getRelativeTop(){return this._topDim&&!this._topDim.fixed?this._topDim.size:NaN}getRelativeBottom(){return this._bottomDim&&!this._bottomDim.fixed?this._bottomDim.size:NaN}getLeftIn(t){return rt(this._leftDim,t)}getRightIn(t){return rt(this._rightDim,t)}getTopIn(t){return rt(this._topDim,t)}getBottomIn(t){return rt(this._bottomDim,t)}_changed(){}_doLoadProps(t){this.assignProps(t);const e=this._childProps;for(var i in this._childProps)t.hasOwnProperty(i)&&void 0!==t[i]&&(e[i]=t[i]);this._leftDim=it(e.left,!0),this._rightDim=it(e.right,!0),this._topDim=it(e.top,!0),this._bottomDim=it(e.bottom,!0)}}class ts extends Ji{constructor(t,e,i,s,r){super(t,r),this._valign=g.MIDDLE,this._style=i,this.renderer=s,t&&s&&(s.id=t),this.value=e}get align(){return this._align}set align(t){t===c.RIGHT||c.CENTER?this._align=t:c.LEFT}get valign(){return this._valign}set valign(t){t===g.TOP||t===g.BOTTOM?this._valign=t:this._valign=g.MIDDLE}get class(){return this._class}set class(t){this._class=t}get style(){return this._style}get styleObj(){return"string"!=typeof this._style&&this._style}setRow(t,e,i){this.dv=t,this.row=e,this.gindex=i}getField(){}getValue(){return this.value}}class es extends ts{constructor(t,e,i,s,r,n,o){super(t,s,r,n,o),e&&((o=q.getFieldProp(e))?(this.field=o.field,this.fprop=o.props):this.field=e),this.fields=i}getField(){return this.field}getValue(){if(void 0===this.value&&0<=this.row)return this.fprop?this.dv.getProp(this.row,this.field,this.fprop,!0):this.dv.getValue(this.row,this.field,!0)}}class is extends ts{constructor(t,e,i,s,r){super(t,e,i,s,r)}}(bs=bs=bs||{}).SHRINK="shrink",bs.WRAP="wrap",bs.OVERFLOW="overflow";class ss extends Ji{constructor(t,e,i,s){super(t,s),this._noShrink=!1,this._style=i,(this._children=e)&&e.forEach(t=>t._parent=this)}get style(){return this._style}childCount(){return this._children?this._children.length:0}children(){return this._children?this._children.slice(0):[]}getChild(t){return this._children[t]}tagBy(r){return function t(e){for(const s of e._children){if(s.tag===r)return s;if(s instanceof ss){var i=t(s);if(i)return i}}}(this)}literalBy(t){t=this.tagBy(t);return t instanceof is&&t}fieldBy(r){return function t(e){for(const s of e._children){if(s instanceof es&&s.field===r)return s;if(s instanceof ss){var i=t(s);if(i)return i}}}(this)}setNoShrink(t){this._noShrink=t}canShrink(){return!this._noShrink}canGrow(){return!0}canContainHspace(){return!1}canContainVspace(){return!1}setRow(e,i,s){this.row=i,this._children.forEach(t=>t.setRow(e,i,s))}getOrderedChildren(){return this._children}getSimples(){let e=[];return this.getOrderedChildren().forEach(t=>{t instanceof ts?e.push(t):t instanceof ss&&(e=e.concat(t.getSimples()))}),e}}ss.CHILD_PROPS=Ki;class rs extends a{constructor(t){super(),this._dom=t.dom,this._tokens=t.tokens,this.tid=t.tid}clone(){return this._dom.cloneNode(!0)}setRow(t,e,i){}inflate(e){this._tokens.forEach(t=>{t.value=t.param.inflate(null,null,null,e)})}apply(i){this._tokens.forEach(t=>{const e=Re.childByPath(i,t.node);t.attr?e.setAttribute(t.attr,t.value):e.nodeValue=t.value})}}class ns extends Ki{constructor(){super(...arguments),this.left=void 0,this.right=void 0,this.top=void 0,this.bottom=void 0}}class os extends ss{}(class extends(os.CHILD_PROPS=ns){});class as extends os{get type(){return as.TYPE}}as.TYPE="frame",as.CHILD_PROPS=class extends ns{};class hs extends Ki{constructor(){super(...arguments),this.shrink=1,this.grow=0}}class ls extends ss{constructor(){super(...arguments),this._itemsArrange=p.START,this._itemGap=ls.DEF_ITEM_GAP,this._reversed=!1}get itemsArrange(){return this._itemsArrange}set itemsArrange(t){t!==this._itemsArrange&&(this._itemsArrange=t,this._changed())}get itemGap(){return this._itemGap}set itemGap(t){isNaN(t)||t===this._itemGap||(this._itemGap=t,this._changed())}get reversed(){return this._reversed}set reversed(t){t!==this._reversed&&(this._reversed=t,this._changed())}}ls.DEF_ITEM_GAP=4;class ds extends ls{constructor(){super(...arguments),this._itemsAlign=c.CENTER}get itemsAlign(){return this._itemsAlign}set itemsAlign(t){t!==this._itemsAlign&&(this._itemsAlign=t,this._changed())}get type(){return ds.TYPE}canContainVspace(){return!0}}ds.TYPE="vlinear",ds.CHILD_PROPS=class extends hs{constructor(){super(...arguments),this.left=void 0,this.right=void 0}};class _s extends ls{constructor(){super(...arguments),this._itemsAlign=g.MIDDLE}get itemsAlign(){return this._itemsAlign}set itemsAlign(t){t!==this._itemsAlign&&(this._itemsAlign=t,this._changed())}get type(){return _s.TYPE}canContainHspace(){return!0}}_s.TYPE="hlinear",_s.CHILD_PROPS=class extends hs{constructor(){super(...arguments),this.top=void 0,this.bottom=void 0}};class cs extends os{get activeChild(){return this._activeChild}set activeChild(t){this._activeChild=t}get activeField(){return this._activeField}set activeField(t){this._activeField=t}get activeCallback(){return this._activeCallback}set activeCallback(t){this._activeCallback=t}getActiveChild(t,e){return oe(this._activeCallback&&this._activeCallback({ctx:t,row:e}),this._activeChild,this._idValue)}get type(){return cs.TYPE}setRow(t,e,i){super.setRow(t,e,i),this._activeField&&(this._idValue=t.getValue(e,this._activeField,!0))}}cs.TYPE="stack",cs.CHILD_PROPS=class extends ns{},(bs=P=P||{}).NONE="none",bs.HEAD="head",bs.LEFT="left",bs.TOP="top";class us extends ss{constructor(){super(...arguments),this._labelPosition=P.LEFT,this._syncLabelWidth=!0,this._labelGap=10,this._itemGap=12}get labelPosition(){return this._labelPosition}set labelPosition(t){t!==this._labelPosition&&(this._labelPosition=t,this._changed())}get labelWidth(){return this._labelWidth}set labelWidth(t){t!==this._labelWidth&&(this._labelWidth=t,this._labelWidthDim=it(t,!0),this._changed())}get minLabelWidth(){return this._minLabelWidth}set minLabelWidth(t){t!==this._minLabelWidth&&(this._minLabelWidth=t,this._minLabelWidthDim=it(t,!0),this._changed())}get maxLabelWidth(){return this._maxLabelWidth}set maxLabelWidth(t){t!==this._maxLabelWidth&&(this._maxLabelWidth=t,this._maxLabelWidthDim=it(t,!0),this._changed())}get syncLabelWidth(){return this._syncLabelWidth}set syncLabelWidth(t){t!==this._syncLabelWidth&&(this._syncLabelWidth=t,this._changed())}get labelGap(){return this._labelGap}set labelGap(t){(t=he(t,0))!==this._labelGap&&(this._labelGap=t,this._changed())}get labelStyle(){return this._labelStyle}set labelStyle(t){t!==this._labelStyle&&(this._labelStyle=t,this._changed())}get itemGap(){return this._itemGap}set itemGap(t){(t=he(t,0))!==this._itemGap&&(this._itemGap=t,this._changed())}getLabelWidth(t){var e=rt(this._minLabelWidthDim,t),i=rt(this._maxLabelWidthDim,t);return{szLabel:rt(this._labelWidthDim,t),szMin:e,szMax:i}}get type(){return us.TYPE}canContainVspace(){return!0}}us.TYPE="form",us.CHILD_PROPS=class extends Ki{constructor(){super(...arguments),this.label=void 0,this.labelWidth=void 0,this.imageUrl=void 0,this.imageWidth=void 0,this.imageHeight=void 0}};class gs extends ss{constructor(){super(...arguments),this._cols=1,this._rows=1}get cols(){return this._cols}set cols(t){0<(t=q.toNumber(t,1)>>>0)&&t!==this._cols&&(this._cols=t,this._changed())}get rows(){return this._rows}set rows(t){0<(t=q.toNumber(t,1)>>>0)&&t!==this._rows&&(this._rows=t,this._changed())}get type(){return gs.TYPE}loadProps(t){return super.loadProps(t)}}gs.TYPE="grid",gs.CHILD_PROPS=class extends Ki{constructor(){super(...arguments),this.col=0,this.row=0,this.colspan=1,this.rowspan=1}};class ps extends ss{constructor(t,e,i,s){super(t,e,i,s),1<this._children.length&&(this._children.length=1)}get type(){return ps.TYPE}}ps.TYPE="scroll",ps.CHILD_PROPS=class extends Ki{};const fs={vlinear:ds,hlinear:_s,frame:as,stack:cs,scroll:ps,form:us,grid:gs},ws={defRender:"dummy"};class ms{constructor(){}layoutFromTemplate(i,s,r,n,o,t){this._target=s,this._inflater=t,this._inflater.templateParams=o.params,o.target=s;try{let t,e;var a,h,l,d,_,c;return i===ws?t=this.$_loadLayout(o.id,i,o.skeleton||Ke,null,ws.defRender):(a=s.defRenderer||"text",h=r&&o.collapsed,l=o.detailed,d=o.extra,_=h||n&&l||o.layout,e=h?o.collapsedId:n&&l?o.detailId:o.id,t=this.$_loadLayout(e,i,_,null,a),!n||(c=!l&&d&&this.$_loadLayout(d.id,i,d,null,a))&&(t._extra=c)),t.tid=e,t}finally{this._inflater=void 0,this._target=void 0}}$_inflate(t,e,i){return i instanceof ie?i.inflate(t,this._target,e,this._inflater):i}$_loadLayout(t,i,s,r,n){if(s instanceof je){const p=fs[s.layout];var o=this.$_loadParams(i,null,s.style);let e;if(p||dt(Z.unknownLayoutType,s.layout),s.children){e=[];for(var a of s.children){var h=a.props,l=new p.CHILD_PROPS;let t;if(a instanceof qe){var d=a.fields&&q.checkArray(this.$_inflate(i,null,a.fields)),_=a.field?this.$_inflate(i,null,a.field):null,c=this.$_loadParams(i,_,a.style);const f=a.renderer?Xi.getRenderer(this.$_loadParams(i,_,a.renderer),n):Xi.createRenderer(n);if(f){for(const w in a.rendererStyles)f[w]=this.$_loadParams(i,_,a.rendererStyles[w]);f.tid=a.tid}var u=this.$_inflate(i,_,a.value);t=_||d?new es(a.id,_,d,u,c,f,l):new is(a.id,u,c,f,l),t&&(t.classCallback=a.classCallback,t.styleCallback=a.styleCallback,h&&t.loadProps(this.$_loadParams(i,_,h)))}else a instanceof je&&(t=this.$_loadLayout(a.id,i,a,l,n).loadProps(h));t&&(t.tid=a.tid,t.tag=a.tag,e.push(t))}}var g=this.$_loadParams(i,null,s.props);return new p(t,e,o,r).loadProps(g)}if(s instanceof Ye){const e=new rs(s);return e.inflate(this._inflater),e}}$_loadParams(t,e,i){if(i instanceof ie)return i.inflate(t,this._target,e,this._inflater);if(q.isObject(i)){const r={};for(var s in i)r[s]=this.$_inflate(t,e,i[s]);return r}return i}}ms.Instance=new ms;var vs,ys,bs,Ss;let Cs=0;function xs(t,e,i,s){if((i=i||s.name)&&s){if(s instanceof Ze||q.isObject(s.template)&&(s=new Ze(t,s)),s instanceof Ze)return e.add(i,s),s}else i&&e.remove(i)}function Rs(){return"template_"+Cs++}const Es=new ht,Vs=new ht;[{name:"@it_list_header",description:"List header template",props:{},template:{layout:"hlinear",style:"${@style}",children:[{value:"${@caption;Header}",tag:"caption",width:"*",style:{textAlign:"${@caption-align}",fontWeight:"bold",color:"${@caption-color;#333}"}}]}},{name:"@it_list_footer",description:"List footer template",props:{},template:{layout:"hlinear",children:[{value:"Σ",style:{fontSize:"19px"},tag:"sigma"},{width:"*",renderer:"spacer",tag:"spacer"},{value:"${@row_count}",tag:"count"},{value:" rows.",tag:"rows"}]}},{name:"@it_name_value",description:"왼쪽 끝에 이름, 오른쪽 끝에 값을 표시하는 단순 템플릿",props:{},rowStyle:{},template:{layout:"frame",props:{},children:[{field:"${name_field;name}",left:0,width:"${name_width}",height:"${name_height}",style:{fontSize:"${name_font_size;medium}"},tag:"name"},{field:"${value_field;value}",right:0,width:"${value_width}",height:"${value_height}",style:{fontSize:"${value_font_size;medium}"},tag:"value"}]}},{name:"@it_detail_value",description:"왼쪽 끝에 이름과 그 아래 설명, 오른쪽 끝에 값을 표시하는 단순 템플릿",props:{},template:{layout:"frame",props:{},children:[{field:"${name_field;name}",width:"${name_width}",height:"${name_height}",left:0,style:{fontSize:"${name_font_size;medium}"},tag:"name"},{field:"${value_field;value}",width:"${value_width}",height:"${value_height}",right:0,style:{fontSize:"${value_font_size;medium}"},tag:"value"}]}},{name:"@it_group_header",description:"Group header template",props:{},template:{layout:"hlinear",children:[{value:"${@group_field;Group value}",tag:"field"},{value:": ",tag:"colon"},{value:"${@group_value}",style:{fontWeight:"bold"},tag:"value"}]},collapsed:{layout:"hlinear",children:[{value:"${@group_field;Group value}",tag:"field"},{value:": ",tag:"colon"},{value:"${@group_value}",style:{fontWeight:"bold"},tag:"value"},{space:"*"},{value:"${@row_count}",tag:"count"},{value:" rows.",tag:"rows"}]}},{name:"@it_group_footer",description:"Group footer template",props:{},template:{layout:"hlinear",children:[{space:"*"},{value:"${@row_count}",tag:"count"},{value:" rows.",tag:"rows"}]}},{name:"@it_datagroup_header",description:"Group header template",props:{},template:{layout:"hlinear",children:[{value:"${@group_field;Group value}",tag:"field"},{value:": ",tag:"colon"},{value:"${@group_value}",style:{fontWeight:"bold"},tag:"value"}]}},{name:"@it_datagroup_footer",description:"Group footer template",props:{},template:{layout:"hlinear",style:{fontSize:"14px "},children:[{space:"*"},{value:"${@row_count}",tag:"count"},{value:"${rows_suffix;rows.}",tag:"rows"}]}},{name:"@it_loading_page",description:"Loading page template",template:{layout:"vlinear",itemsArrange:"center",children:[{value:"${message;Data Loading...}",style:{fontFamily:"Courier New",fontSize:"16px",fontWeight:"bold",color:"#777"}},{space:"30"},{renderer:{type:"spinner"}}],style:{backgroundColor:"#f8f8f8",padding:"10px"}}},{name:"@it_empty_page",description:"Empty page template",template:{layout:"vlinear",itemsArrange:"center",itemGap:20,children:[{visible:"${@message_visible;true}",value:"${@message;표시할 데이터가 없습니다.}",style:{fontFamily:"Courier New",fontSize:"16px",fontWeight:"bold",color:"#555"}},{visible:"${@load_visible;true}",renderer:{type:"button",label:"${@load_label;Load Data}",onClick:"${@load_callback}"}}],style:{backgroundColor:"#f8f8f8",padding:"10px"}}}].forEach(t=>Es.add(t.name,new Ze(null,t)));class $s extends Le{constructor(t,e){super(t),this._defs=e||void 0,e||this._doInitDefaults()}_doInitDefaults(){this._visible=!0}initLandscape(){}rowCellObjectChanged(t){this._changed()}visible(){return ne(this._visible,this._defs&&this._defs._visible)}setVisible(t){t!==this._visible&&(this._visible=t,this._changed("visible"))}style(){return ne(this._style,this._defs&&this._defs._style)}setStyle(t){t!==this._style&&(this._style=t,this._changed("style"))}prepareRender(){this._doPrepareRender()}unprepareRender(){this._doUnprepareRender()}_doUnprepareRender(){}}(bs=vs=vs||{}).DEFAULT="default",bs.NEAR="near",bs.FAR="far",bs.TOP="top",bs.BOTTOM="bottom",bs.LEFT="left",bs.RIGHT="right";const As=vs;class Ls extends $s{_doInitDefaults(){super._doInitDefaults(),this._position=vs.NEAR}position(){return ne(this._position,this._defs&&this._defs._position)}setPosition(t){t!==this._position&&(this._position=t,this._changed())}getPosition(t){var e=this.position();if(e===As.TOP||e===As.BOTTOM||e===As.LEFT||e===As.RIGHT)return e;switch(e){case As.NEAR:return t?As.LEFT:As.TOP;case As.FAR:return t?As.RIGHT:As.BOTTOM;default:return As.BOTTOM}}}(bs=ys=ys||{}).NEAR="near",bs.FAR="far",(bs=ir=ir||{}).BAR="bar",bs.BAR_PUSH="barPush",bs.ROW="row",bs.ROW_PUSH="rowPush";class Ds extends $s{_doInitDefaults(){super._doInitDefaults(),this._mode=Ds.MODE,this._position=ys.NEAR,this._gapLeft=4,this._gapRight=8,this._gapTop=0,this._gapBottom=8}_doDestory(){this._rowInfos=null}mode(){return ne(this._mode,this._defs&&this._defs._mode)}setMode(t){t!==this._mode&&(this._mode=t,this._changed())}position(){return ne(this._position,this._defs&&this._defs._position)}setPosition(t){t!==this._position&&(this._position=t,this._changed())}gapLeft(){return ne(this._gapLeft,this._defs&&this._defs._gapLeft)}setGapLeft(t){(t=ae(t))!==this._gapLeft&&(this._gapLeft=t,this._changed())}size(){return ne(this._size,this._defs&&this._defs._size)}setSize(t){(t=ae(t))!==this._size&&(this._size=t,this._changed())}gapRight(){return ne(this._gapRight,this._defs&&this._defs._gapRight)}setGapRight(t){(t=ae(t))!==this._gapRight&&(this._gapRight=t,this._changed())}gapTop(){return ne(this._gapTop,this._defs&&this._defs._gapTop)}setGapTop(t){(t=ae(t))!==this._gapTop&&(this._gapTop=t,this._changed())}gapBottom(){return ne(this._gapBottom,this._defs&&this._defs._gapBottom)}setGapBottom(t){(t=ae(t))!==this._gapBottom&&(this._gapBottom=t,this._changed())}gapHorz(){return this._gapHorz}gapVert(){return this._gapVert}_doPrepareRender(){this._gapHorz=this.gapLeft()+this.gapRight(),this._gapVert=this.gapTop()+this.gapBottom()}_doUnprepareRender(){}}Ds.MODE=ir.BAR;const ks={margin:0,whiteSpace:"nowrap",overflow:"hidden",verticalAlign:"middle"};class Ts extends a{constructor(t,e,i){if(super(),t instanceof Document){const s=this._svg=new zi(t,e);s.setStyle(i),this._doInit(s)}else t instanceof Ts?(this._svg=new zi(t._svg.svg.cloneNode(!0),e),this._doClone(t)):this._svg=new zi(t,e);Re.setAttr(this._svg.svg,"role","image")}static clone(t,e){return new e(t)}_doDestory(){Re.remove(this._svg.svg),this._svg=null}name(){return this.constructor.NAME}dom(){return this._svg.svg}attached(){return!!this._svg.svg.parentElement}isDom(t){return this._svg.svg===t}containsDom(t){return this._svg.svg.contains(t)}setVisible(t){Re.setVisible(this._svg.svg,t)}styleTarget(){return this._svg.svg.style}resize(t,e=NaN){if(t=t||e,e=e||t,t!==this._width||e!==this._height)return this._width=t,this._height=e,this._svg.setSize(t,e),!0}setClass(t){this._svg.setClass(t)}setStyle(t){this._svg.setStyle(t)}appendTo(t){(t=t instanceof Ve?t.dom:t).appendChild(this._svg.svg)}remove(){Re.remove(this._svg.svg)}makeBackground(t,e){return this._svg.makeBackground(t,e),this}_doClone(t){this._width=t._width,this._height=t._height}_doInit(t){}}class Ps extends ht{createShape(t,e){return this.createStock(t,e)||this.createCustom(e,void 0,void 0)}}class Ms extends Ts{constructor(t,e,i){super(t,e,i)}setShape(t){return t&&(this._svg.setViewSize(t.w,t.h),this._path?this._path.setAttribute("d",t.d):this._path=this._svg._createPath(t.d),this._path.style.cssText=""),this}_doClone(t){super._doClone(t),t._path&&(this._path=this._svg.svg.firstElementChild)}}Ms.NAME="@custom";class Is extends Ts{constructor(t,e,i){super(t,e,i)}_doInit(t){t.setViewSize(Is.SIZE),t.polyline([5.9,12.5,9.7,16.3,18.5,7.5])}}Is.NAME="@checkmark",Is.SIZE=24;class Ns extends Ts{constructor(t,e,i){super(t,e,i)}_doInit(t){t.setViewSize(Ns.SIZE)}}Ns.NAME="@delete",Ns.SIZE=26;class Os extends Ts{_doInit(t){t.setViewSize(Os.SIZE);var e=Os.SIZE/2,i=Os.SIZE/2,t=Math.min(e,i);this._svg.circle(e,i,t,null)}resize(t,e){if(super.resize(t,e)){this._svg.setViewSize(this._width,this._height);const r=this._svg.svg.firstElementChild;var i=this._width/2,s=this._height/2,t=Math.min(i,s),e=getComputedStyle(this._svg.svg),e=(parseFloat(e.strokeWidth)||0)/2;return r.setAttribute("cx",i),r.setAttribute("cy",s),r.setAttribute("r",t-e),!0}}}Os.NAME="@circle",Os.SIZE=20;class Bs extends Ts{_doInit(t){const e=this._svg._createPath("M 0 0");e.style.pointerEvents="none",this._svg.svg.appendChild(e)}resize(t,e){if(super.resize(t,e)){this._svg.setViewSize(this._width,this._height);e=this.$_getPath(this._width,this._height);const i=this._svg.svg.firstElementChild;return i.setAttribute("d",e),!0}}$_getPath(i,s){const r=this._getPoints();for(let t=0,e=r.length/2>>0;t<e;t++)r[2*t]*=i,r[2*t+1]*=s;var t=`M ${r[0]} ${r[1]} L`;return t+=r.slice(2).join(" ")+" z"}}Bs.SIZE=1;class Fs extends Bs{_getPoints(){return[.5,0,.6122,.3454,.9755,.3454,.6816,.559,.7938,.9045,.5,.691,.2061,.9045,.3183,.559,.02447,.3454,.3877,.3454]}}Fs.NAME="@star";class zs extends Ts{constructor(t,e,i,s,r){super(t,r),this._svg.setViewSize(e,i),this._svg.svg.firstElementChild||this._svg.path(s)}}class Hs extends Ve{clickable(){return!1}click(t,e,i){}measure(t,e,i,s){var r=this.dom.style;this.mw=this.mh=NaN,this._doPrepareRender(t,e),this._doApplyStyles(r),this._doApplyImportantStyles(r);s=this._doMeasure(t,i,s);return this.mw=s.width,this.mh=s.height,s}render(t){var{width:e,height:i}=this.getOffsetSize();this._doRender(t,e,i),this._doAfterRender()}resizeByMeasure(){return this.resize(this.mw,this.mh),this}applyMeasuredBounds(){return this.move(this.mx,this.my),this.resize(this.mw,this.mh),this}_doPrepareRender(t,e){}_doApplyStyles(t){}_doApplyImportantStyles(t){}_doAfterRender(){}}Hs.PANEL_ORDER="100";class Ws extends Hs{constructor(t,e,i,s){super(t,i,s),this._model=e}model(){return this._model}setModel(t){this._model=t}listOwner(){return this.control}}class Gs extends Ws{setPosition(t){t=this._model.getPosition(this.landscape=t);this.position=t||vs.BOTTOM,this.vertical=this.position===vs.LEFT||this.position===vs.RIGHT}}const Us="4px";class qs extends Ve{constructor(t,e){super(t,!1,e,"button")}enabled(){return!this.dom.disabled}setEnabled(t){Re.setDisabled(this.dom,!t)}_doInitDom(t,e){if(Object.assign(e.style,ks),N){const i=t.createElement("div");i.style.display="flex",i.style.alignItems="center",i.style.justifyContent="center",i.style.boxSizing="border-box",i.style.pointerEvents="none",e.appendChild(i)}Ve.BOUNDING&&(e.style.border=Ve.BOUNDING_BORDER)}_setModel(t,e){var i=t.doc();const s=this.dom,r=N?s.firstElementChild:s;var n=e.className,o=e.style;if(Re.setData(s,"image",1),n!==this._prevClass&&(this._prevClass&&s.classList.remove(this._prevClass),(this._prevClass=n)&&s.classList.add(n)),o!=this._prevStyles){const l=s.style;if(this._prevStyles)for(var a in this._prevStyles)l[a]="";o&&Object.assign(l,o),this._prevStyles=o}this.resize(NaN,NaN);let h;e.imageUrl?(this._shape&&(this._shape=this._shape.destroy()),h=this.$_setImage(t,r,e)):e.shape&&(this._img=Re.remove(this._img),h=this.$_setShape(t,r,e)),h?N?this.$_arrangeSafari(i,r,h,e):this.$_arrange(i,r,h,e):(this._shape&&(this._shape=this._shape.destroy()),this._img=Re.remove(this._img),this._br=Re.remove(this._br),(t=this._span)||(t=this._span=this.$_createSpan(i),r.appendChild(t)),this._span.textContent=e.label||e.name,Re.setData(r,"image",void 0)),this.setEnabled(!e.disabled)}$_createSpan(t){const e=t.createElement("span");return e.className=qs.LABEL_CLASS,e.style.pointerEvents="none",e.style.verticalAlign="middle",e}$_arrangeSafari(t,e,i,s){var r=s.label;let n=this._span;if(r&&s.labelPosition!==b.NONE)switch(n=n||(this._span=this.$_createSpan(t)),n.textContent=r,s.labelPosition){case b.LEFT:e.style.flexDirection="row",i.style.paddingLeft=Us,e.insertBefore(n,i);break;case b.RIGHT:e.style.flexDirection="row",i.style.paddingRight=Us,e.appendChild(n);break;case b.TOP:e.style.flexDirection="column",e.insertBefore(n,i),i.style.paddingTop=Us;break;default:e.style.flexDirection="column",i.style.paddingBottom=Us,e.appendChild(n)}else this._span=Re.remove(n)}$_arrange(t,e,i,s){var r=s.label;let n=this._span;if(r&&s.labelPosition!==b.NONE)switch(n=n||(this._span=this.$_createSpan(t)),n.textContent=r,s.labelPosition){case b.LEFT:this._br=Re.remove(this._br),i.style.paddingLeft=Us,e.insertBefore(n,i);break;case b.RIGHT:this._br=Re.remove(this._br),i.style.paddingRight=Us,e.appendChild(n);break;case b.TOP:this._br=this._br||Re.createBR(t,qs.BR_CLASS),e.insertBefore(n,i),e.insertBefore(this._br,i),i.style.paddingTop=Us;break;default:this._br=this._br||Re.createBR(t,qs.BR_CLASS),i.style.paddingBottom=Us,e.appendChild(n),e.insertBefore(this._br,n)}else n=n||(this._span=this.$_createSpan(t)),e.insertBefore(n,i),n.textContent=""}$_setImage(t,e,i){const s=t.doc();var r=i.imageUrl;let n=this._img,o=i.imageWidth,a=i.imageHeight;return i.style&&Object.assign(e.style,i.style),e.style.overflow="",e.textContent="",e.dataset.type="image",n?n.parentElement||e.appendChild(n):(n=this._img=s.createElement("img"),n.className=qs.IMAGE_CLASS,n.style.pointerEvents="none",n.style.verticalAlign="middle",Re.setAttr(n,"aria-hidden",!0),e.appendChild(n)),n.src=r,n.complete||t.useImage(r),isNaN(o)&&isNaN(a)&&(r=N&&t.getImageSize(r),a=r?(o=r.width,r.height):(o=n.naturalWidth,n.naturalHeight)),isNaN(o)||(n.width=o,isNaN(a)&&(n.height=o)),isNaN(a)||(n.height=a,isNaN(o)&&(n.width=a)),n}$_setShape(t,e,i){var s=i.shape;let r=this._shape,n=Math.max(0,i.shapeHeight);i=Math.max(0,i.shapeWidth)||n||qs.SHAPE_SIZE;return n=n||i,r&&s===r[Ft]?(r instanceof Ms&&r.setShape(this.control.shapes().getCustom(s)),r.attached()||r.appendTo(e)):(r=this._shape=this.control.shapes().createStock(e.ownerDocument,s)||this.control.shapes().createCustom(s,null,null),r.setClass(qs.SHAPE_CLASS),r.dom().style.pointerEvents="none",r.dom().style.verticalAlign="middle",r.appendTo(e)),r.resize(i,n),r[Ft]=s,r._svg.svg}}qs.LABEL_CLASS="dlist-button-label",qs.BR_CLASS="dlist-button-br",qs.IMAGE_CLASS="dlist-button-image",qs.SHAPE_CLASS="dlist-button-shape",qs.SHAPE_SIZE=20;class js extends Ve{constructor(t,e){super(t,!1,js.BUTTON_CLASS,"button"),this.dom.classList.add(e)}static createButton(t,e,i,s){const r=t.createElement("button");s&&(r.className=s);i=new zi(t).setShape(e).makeBackground(i);return r.appendChild(i.svg),r}size(){return this._size}enabled(){return!this.dom.disabled}setSize(t){t!==this._size&&(this._size=t,this.resize(t,t))}setDisabled(t){Re.setDisabled(this.dom,t)}measure(){var t;return isNaN(this._size)?(t=this.getPadding(),this.mw=js.DEF_SVG_SIZE+t.left+t.right,this.mh=js.DEF_SVG_SIZE+t.top+t.bottom):(this.mw=this._size,this.mh=this._size),{width:this.mw,height:this.mh}}click(){this._doClick()}isDom(t){return super.isDom(t)||t===this._svg.svg}_doInitDom(t,e){t=this._svg=new zi(t);Object.assign(e.style,{position:"absolute",border:"none"}),this._svg.svg.style.pointerEvents="none",this._svg.fillSize(),this._doInitSvg(t),e.appendChild(t.svg)}}js.BUTTON_CLASS="dlist-svg-button",js.DEF_SVG_SIZE=16;class Ys extends Ve{}(ir=Ss=Ss||{}).TEXT="text",ir.NUMBER="number",ir.BOOL="bool",ir.DATE="date",ir.BIGINT="bigint",ir.ANY="any";const Qs={text:t=>null==t?t:String(t),number:t=>Number(t),bool:t=>null==t?t:Boolean(t),date:t=>t instanceof Date?t:new Date(t),bigint:t=>BigInt(t),any:t=>t};var Zs,Xs,Ks,Js,tr,er,ir=(t,e)=>isNaN(t)?isNaN(e)?0:-1:isNaN(e)||e<t?1:t<e?-1:0;class sr{constructor(t,e=Ss.TEXT){t||ar.throw(null,"Data field name must be exist."),this._name=t,this._type=e||Ss.TEXT,this.readValue=Qs[e]||Qs.any,this.comparer=sr.comparers[e]}static create(t,e=Ss.TEXT){if("string"==typeof t)return new sr(t,e);if(q.isObject(t)&&t.name){const i=new sr(t.name,t.type);return i.label=t.label,i.default=t.default,i.sortable=!!t.sortable,i.required=!!t.required,i.minimum=t.minimum,i.maximum=t.maximum,i.domain=Array.isArray(t.domain)?t.domain.slice(0):void 0,i}}static createFields(t){return t.map(t=>this.create(t))}get name(){return this._name}get type(){return this._type}get label(){return this._label}set label(t){t!==this._label&&(this._label=t,this._changed())}displayText(){return this._label||this._name}proxy(){return{name:this._name,label:this._label,type:this._type,default:this.default,sortable:this.sortable}}_changed(){var t;null!==(t=this._owner)&&void 0!==t&&t.$_fieldChanged(this)}}sr.comparers={text:(t,e)=>null==t?null==e?0:-1:null==e||e<t?1:t<e?-1:0,number:ir,bool:(t,e)=>(t=t?1:0)-(e=e?1:0),date:(t,e)=>t-e,bigint:ir};class rr extends sr{constructor(t,e,i=Ss.TEXT){if(super(t,i),"function"!=typeof e)throw new ar(null,"Derive field's value extracter must be exists.");this._extracter=e}static createDerived(t,e,i=Ss.TEXT){return new rr(t,e,i)}extract(t){return this._extracter(t)}}(ir=Zs=Zs||{}).UPDATED="u",ir.DELETED="d";let nr=0;class or{constructor(){this.id=nr++,this.row=-1,this.values={}}static createRow(t,e,i,s){var r=new or;if(q.isObject(i)){const n=r.values;for(const o in t)n[o]=t[o].default;for(const a in i){const h=t[a];h&&(n[h.name]=h.readValue(s?s(a,i[a]):i[a]))}for(const l in e)n[l]=e[l].extract(n)}return r}static createRow2(t,e,i){var s=new or;if(q.isObject(i)){const n=s.values;for(const o in t)n[o]=t[o].default;for(var r in i){const a=t[r];a&&(n[a.name]=a.readValue(i[r]))}for(const h in e)n[h]=e[h].extract(n)}return s}static findRow(i,s,r,n){if(q.isObject(s)){n<0&&(n=i.length);for(let t=r,e=Math.min(n,i.length);t<e;t++)if(i[t].match(s))return t}return-1}static findRows(i,s,r,n){const o=[];if(q.isObject(s)){n<0&&(n=i.length);for(let t=r,e=Math.min(n,i.length);t<e;t++)i[t].match(s)&&o.push(i[t].row)}return o}static findDistinctRows(i,s,r,n){function o(t,e){for(var i of e)if(function(t,e){for(var i of s)if(t[i]!==e[i])return;return 1}(i,t))return 1}const a=[];if(Array.isArray(s)&&0<s.length){const l=[];n<0&&(n=i.length);for(let t=r,e=Math.min(n,i.length);t<e;t++){var h=i[t].getValues(s);o(h,l)||(a.push(i[t].row),l.push(h))}}return a}getValues(t){const e=this.values,i={};return t.forEach(t=>{t in e&&(i[t]=e[t])}),i}match(t){var e=this.values;for(const i in t){const s=t[i];if(!(i in e))return!1;if(s instanceof RegExp){if(!s.test(e[i]))return!1}else if(s!==e[i])return!1}return!0}getProp(t,e){let i=this.values[t],s=0;for(;null!=i&&s<e.length;)i=i[e[s++]];return i}}class ar extends Error{constructor(t,e){super(e),this.data=t}static throw(t,e){throw new ar(t,e)}static throwFormat(t,e,i){throw new ar(t,K(e,i))}static throwFormat2(t,e,i,s){throw new ar(t,(s=s,e.replace("%1",i).replace("%2",s)))}}class hr extends ar{constructor(t,e,i){super(t,i),this.field=e}}class lr extends ar{constructor(t,e){super(t,e.message||e),this.error=e}}class dr extends a{constructor(t){if(super(),this._checkedCount=0,this._data=t){var e=t.rowCount();const i=this._rows=new Array(e);for(let t=0;t<e;t++)i[t]=0}else this._rows=[]}static isCheckedFlag(t){return 1===t}static isCheckableFlag(t){return 2===t}static isDetailedFlag(t){return 8===t}static isUserFlag(t){return t>>16}_doDestory(){this._data=null}get count(){return this._rows.length}checkedCount(){return this._checkedCount}isChecked(t){return 0!=(1&this._rows[t])}setChecked(t,e){return this.$_changeFlag(t,1,e)}checkRows(t,e){return this.$_changeRows(t,1,e)}checkRange(t,e,i){return this.$_changeRange(t,e,1,i)}checkAll(t){return this.$_changeAll(1,t)}getCheckedRows(t){return this.$_getFlagged(1,t)}isCheckable(t){return 0==(2&this._rows[t])}setCheckable(t,e){return this.$_changeFlag(t,2,!e)}setCheckables(t,e){return this.$_changeRows(t,2,!e)}setCheckableRange(t,e,i){return this.$_changeRange(t,e,2,!i)}setCheckaleAll(t){return this.$_changeAll(2,t)}getCheckableRows(t){return this.$_getFlagged(2,!t)}getSearchedRows(){return this.$_getFlagged(4,!0)}isSearched(t){return 0!=(4&this._rows[t])}setSearched(t,e){return this.$_changeFlag(t,4,e)}clearSearched(){return this.$_changeAll(4,!1)}isDetailed(t){return 0!=(8&this._rows[t])}setDetailed(t,e,i){return i&&this.detailAll(!1),this.$_changeFlag(t,8,e)}detailRows(t,e){return this.$_changeRows(t,8,e)}detailRange(t,e,i){return this.$_changeRange(t,e,8,i)}detailAll(t){return this.$_changeAll(8,t)}getDetailedRows(t){return this.$_getFlagged(8,t)}hasUserFlag(t,e){return 0!=(this._rows[t]&(e=1<<16+e))}getUserFlaggedRows(t,e){return this.$_getFlagged(1<<16+t,e)}setUserFlag(t,e,i){return i!==this.hasUserFlag(t,e)&&(this.$_setFlag(t,1<<16+e,i),!0)}setUserFlags(t,e,i){return this.$_changeRows(t,1<<16+e,i)}setUserFlagRange(t,e,i,s){return this.$_changeRange(t,e,1<<16+i,s)}setUserFlagAll(t,e){return this.$_changeAll(1<<16+t,e)}hasUiFlag(t,e){return 0!=(this._rows[t]&(e=1<<15+e))}getUiFlaggedRows(t,e){return this.$_getFlagged(1<<15+t,e)}setUiFlag(t,e,i){return i!==this.hasUserFlag(t,e)&&(this.$_setFlag(t,1<<15+e,i),!0)}setUiFlags(t,e,i){return this.$_changeRows(t,1<<15+e,i)}setUiFlagRange(t,e,i,s){return this.$_changeRange(t,e,1<<15+i,s)}setUiFlagAll(t,e){return this.$_changeAll(1<<15+t,e)}$_setFlag(t,e,i){i?this._rows[t]|=e:this._rows[t]&=~e}$_changeFlag(t,e,i){if(0<=t&&t<this._rows.length&&0!=(this._rows[t]&e)!==i)return this.$_setFlag(t,e,i),1===e&&(this._checkedCount+=i?1:-1),this._data&&this._data._fireEvent("onDataFlagChanged",this,t,e),!0;return!1}$_changeRows(t,i,s){const r=[];if(Array.isArray(t)&&0<t.length){const n=this._rows;t.forEach(t=>{var e=0!=(n[t]&i);s!==e&&(this.$_setFlag(t,i,s),r.push(t))})}return this._data&&0<r.length&&(1===i&&(this._checkedCount+=s?r.length:-r.length),this._data._fireEvent("onDataFlagsChanged",this,r,i)),r}$_changeRange(i,s,r,n){var o=this._rows;const a=[];if(0<s&&0<=i&&i<o.length)for(let t=i,e=Math.min(o.length,i+s);t<e;t++)n!==(0!=(o[t]&r))&&(this.$_setFlag(t,r,n),a.push(t));return this._data&&0<a.length&&(1===r&&(this._checkedCount+=n?a.length:-a.length),this._data._fireEvent("onDataFlagsChanged",this,a,r)),a}$_changeAll(e,i){var s=this._rows;let r=!1;for(let t=s.length-1;0<=t;t--)i!==(0!=(s[t]&e))&&(this.$_setFlag(t,e,i),r=!0);return this._data&&r&&(1===e&&(this._checkedCount=i?s.length:0),this._data._fireEvent("onDataFlagAllChanged",this,e)),r}$_getFlagged(i,s){var r=this._rows;const n=[];for(let t=0,e=r.length;t<e;t++)s===(0!=(r[t]&i))&&n.push(t);return n}}dr.MAX_UI_FLAG=15,dr.MAX_USER_FLAG=16;class _r extends dr{checkedCount(){return 0}isChecked(t){return!1}setChecked(t,e){return!1}checkRows(t,e){return[]}checkRange(t,e,i){return[]}checkAll(t){return!1}getCheckedRows(t){return[]}isCheckable(t){return!1}setCheckable(t,e){return!1}setCheckables(t,e){return[]}setCheckableRange(t,e,i){return[]}setCheckaleAll(t){return!1}getCheckableRows(t){return[]}getSearchedRows(){return[]}isSearched(t){return!1}setSearched(t,e){return!1}clearSearched(){return!1}isDetailed(t){return!1}setDetailed(t,e,i){return!1}detailRows(t,e){return[]}detailRange(t,e,i){return[]}detailAll(t){return!1}getDetailedRows(t){return[]}hasUserFlag(t,e){return!1}getUserFlaggedRows(t,e){return[]}setUserFlag(t,e,i){return!1}setUserFlags(t,e,i){return[]}setUserFlagRange(t,e,i,s){return[]}setUserFlagAll(t,e){return!1}hasUiFlag(t,e){return!1}getUiFlaggedRows(t,e){return[]}setUiFlag(t,e,i){return!1}setUiFlags(t,e,i){return[]}setUiFlagRange(t,e,i,s){return[]}setUiFlagAll(t,e){return!1}}_r.Instance=new _r(null);class cr extends a{constructor(t){super(),this._flags={},this._data=t}_doDestory(){for(var t in this._flags)this._flags[t].destroy();this._data=null}isEmpty(){let t=!0;for(const e in this._flags){t=!1;break}return t}_rowAdded(t){const e=this._flags;for(var i in e)e[i]._rows.splice(t,0,0)}_rowsAdded(t){var e,i=this._flags;for(e in i){const s=i[e]._rows;t.forEach(t=>{s.splice(t,0,0)})}}_rowRangeAdded(e,i){var t,s=this._flags;for(t in s){const r=s[t]._rows;for(let t=0;t<i;t++)r.splice(e+t,0,0)}}_cleared(t){var e,i=this._flags;for(e in i){const s=i[e],r=s._rows;r.length=0,s._checkedCount=0}}_rowDeleted(t){var e,i=this._flags;for(e in i){const s=i[e],r=s._rows;0!=(1&r[t])&&s._checkedCount--,r.splice(t,1)}}_rowsDeleted(e){var t,i=this._flags;for(t in i){const s=i[t],r=s._rows;for(let t=e.length-1;0<=t;t--)0!=(1&r[e[t]])&&s._checkedCount--,r.splice(e[t],1)}}_rangeDeleted(e,i){var t,s=this._flags;for(t in s){const r=s[t],n=r._rows;for(let t=0;t<i;t++)0!=(1&n[e+t])&&r._checkedCount--;n.splice(e,i)}}_rowMoved(t,e){var i,s=this._flags;for(i in s){const n=s[i]._rows;var r=n.splice(t,1)[0];n.splice(e,0,r)}}_rowsMoved(t,e,i){var s,r=this._flags;for(s in r){const o=r[s]._rows;var n=o.splice(t,e)[0];o.splice.apply(o,[i,0].concat(n))}}_reset(t,e){var i,s=this._flags;for(i in s){const r=s[i],n=r._rows,o=new Array(e);t.forEach((t,e)=>o[t.newIdx]=n[e]),r._rows=o}}get(t){return this._flags[t.hash]}add(t){t=t.hash;let e=this._flags[t];return e=e||(this._flags[t]=new dr(this._data)),e}remove(t){this._flags[t.hash].destroy(),delete this._flags[t.hash]}}let ur=1e7*Math.random()>>0;class gr extends s{constructor(t){super(),this._name=t||"@_dlist_dv_"+ur++,this._flags=new cr(this)}static checkRow(t,e){(e<0||e>=t.rowCount())&&ar.throwFormat(t.wrapperOrThis(),Z.invalidRowIndex,e)}name(){return this._name}addFlags(t){return this._flags.add(t)}removeFlags(t){this._flags.remove(t)}getFlags(t){return this._flags.get(t)}flagChanged(t,e,i){this._fireEvent("onDataFlagChanged",t,e,i)}flagsChanged(t,e,i){this._fireEvent("onDataFlagsChanged",t,e,i)}flagAllChanged(t,e){this._fireEvent("onDataFlagAllChanged",t,e)}}class pr extends t{constructor(t,e){super(),this._styleArgs={context:void 0,row:-1},this._owner=t,(this._defs=e)||this._doInitDefaults()}_doInitDefaults(){}hint(){return ne(this._hint,this._defs&&this._defs._hint)}setHint(t){t!==this._hint&&(this._hint=t,this._changed())}cellStyle(){return ne(this._cellStyle,this._defs&&this._defs._cellStyle)}setCellStyle(t){t!==this._cellStyle&&(this._cellStyle=t,this._cellStyleChanged=!0,this._changed())}cellStyleCallback(){return ne(this._cellStyleCallback,this._defs&&this._defs._cellStyleCallback)}setCellStyleCallback(t){t!==this._cellStyleCallback&&(this._cellStyleCallback=t,this._changed())}style(){return ne(this._style,this._defs&&this._defs._style)}setStyle(t){t!==this._style&&(this._style=t,this._styleChanged=!0,this._changed())}styleCallback(){return ne(this._styleCallback,this._defs&&this._defs._styleCallback)}setStyleCallback(t){t!==this._styleCallback&&(this._styleCallback=t,this._changed())}runCellStyle(t){return(t||this._cellStyleChanged)&&this._runCellStyle}runStyle(t){return(t||this._styleChanged)&&this._runStyle}getCellStyle(t){const e=this._runCellStyleCallback;return e?(this._styleArgs.row=t,e(this._styleArgs)||this._runCellStyle):this._runCellStyle}getStyle(t){const e=this._runStyleCallback;return e?(this._styleArgs.row=t,e(this._styleArgs)||this._runStyle):this._runStyle}prepareRender(){this._cellStyleChanged=this._cellStyleChanged||this._defs&&this._defs._cellStyleChanged,this._runCellStyle=this.cellStyle(),this._runCellStyleCallback=this.cellStyleCallback(),this._styleChanged=this._styleChanged||this._defs&&this._defs._styleChanged,this._runStyle=this.style(),this._runStyleCallback=this.styleCallback(),this._styleArgs.context=this.wrapperOrThis(),this._doPrepareRender()}unprepareRender(){this._styleChanged=!1,this._cellStyleChanged=!1,this._doUnprepareRender()}_changed(){this._owner&&this._owner.rowCellObjectChanged(this)}_doPrepareRender(){}_doUnprepareRender(){}}class fr extends pr{_doInitDefaults(){super._doInitDefaults(),this._size=fr.SIZE}size(){return ne(this._size,this._defs&&this._defs._size)}setSize(t){t!==this._size&&(this._size=t,this._changed())}}fr.SIZE=24,(ir=Xs=Xs||{}).ROW="row",ir.LEVEL_ROW="levelRow";class wr extends pr{_doInitDefaults(){super._doInitDefaults(),this._display=Xs.ROW,this._minWidth=wr.MIN_WIDTH,this._fitWidth=!0,this._rowOffset=1}display(){return ne(this._display,this._defs&&this._defs._display)}setDisplay(t){this._display=t}minWidth(){return ne(this._minWidth,this._defs&&this._defs._minWidth)}setMinWidth(t){(t=he(t,NaN))!==this._minWidth&&(this._minWidth=t,this._changed())}fitWidth(){return ne(this._fitWidth,this._defs&&this._defs._fitWidth)}setFitWidth(t){t!==this._fitWidth&&(this._fitWidth=t,this._changed())}rowOffset(){return ne(this._rowOffset,this._defs&&this._defs._rowOffset)}setRowOffset(t){(t=he(t,0))!==this._rowOffset&&(this._rowOffset=t,this._changed())}prefix(){return ne(this._prefix,this._defs&&this._defs._prefix)}setPrefix(t){t!==this._prefix&&(this._prefix=t,this._changed())}suffix(){return ne(this._suffix,this._defs&&this._defs._suffix)}setSuffix(t){t!==this._suffix&&(this._suffix=t,this._changed())}getText(t,e){return this.runDisplay===Xs.LEVEL_ROW&&(e=t.levelRowOfRow(e)),this.runPrefix+(e+this.runOffset)+this.runSuffix}_doPrepareRender(){this.runDisplay=this.display(),this.runOffset=this.rowOffset(),this.runPrefix=this.prefix()||"",this.runSuffix=this.suffix()||""}}wr.MIN_WIDTH=20,(ir=Ks=Ks||{}).NONE="none",ir.TOGGLE="toggle",ir.CHECK="check",ir.UNCHECK="uncheck";class mr extends pr{_doInitDefaults(){super._doInitDefaults(),this._size=mr.SIZE,this._masterVisible=!1,this._dragMode=Ks.CHECK}size(){return ne(this._size,this._defs&&this._defs._size)}setSize(t){t!=this._size&&(this._size=t,this._changed())}masterVisible(){return ne(this._masterVisible,this._defs&&this._defs._masterVisible)}setMasterVisible(t){t!==this._masterVisible&&(this._masterVisible=t,this._changed())}dragMode(){return ne(this._dragMode,this._defs&&this._defs._dragMode)}setDragMode(t){this._dragMode=t}canDrag(){var t=this.dragMode();return t&&t!==Ks.NONE}}mr.SIZE=22;class vr extends pr{constructor(t,e,i){super(t,i),i||(this._label=this._label||e,this._doInitButton(t))}label(){return ne(this._label,this._defs&&this._defs._label)}setLabel(t){t!==this._label&&(this._label=t,this._changed())}imageUrl(){return ne(this._imageUrl,this._defs&&this._defs._imageUrl)}setImageUrl(t){t!==this._imageUrl&&(this._imageUrl=t,this._changed())}width(){return ne(this._width,this._defs&&this._defs._width)}setWidth(t){t!==this._width&&(this._width=t,this._changed())}height(){return ne(this._height,this._defs&&this._defs._height)}setHeight(t){t!==this._height&&(this._height=t,this._heightD=it(t,!1),this._changed())}isRelativeHeight(){return void 0!==this._height?this._heightD&&!this._heightD.fixed:this._defs?this._defs.isRelativeHeight():void 0}className(){return ne(this._className,this._defs&&this._defs._className)}setClassName(t){t!==this._className&&(this._className=t,this._changed())}letter(){return ne(this._letter,this._defs&&this._defs._letter)}setLetter(t){t!==this._letter&&(this._letter=q.copyObject(t),this._changed())}onClick(){return ne(this._onClick,this._defs&&this._defs._onClick)}setOnClick(t){this._onClick=t}click(t,e){const i=this.onClick();i&&i(this._getArgs(e))||this._doClick(t,e)}_doInitButton(t){}_getArgs(t){return{button:this.wrapperOrThis(),row:t}}_doClick(t,e){return!1}}class yr extends pr{_doInitDefaults(){super._doInitDefaults(),this._width=yr.DEF_SIZE,this._height=yr.DEF_SIZE,this._clickable=!1}imageUrl(){return ne(this._imageUrl,this._defs&&this._defs._imageUrl)}setImageUrl(t){t!==this._imageUrl&&(this._imageUrl=t,this._changed())}width(){return ne(this._width,this._defs&&this._defs._width)}setWidth(t){(t=he(t,0))!==this._width&&(this._width=t,this._changed())}height(){return ne(this._height,this._defs&&this._defs._height)}setHeight(t){(t=he(t,0))!==this._height&&(this._height=t,this._changed())}clickable(){return ne(this._clickable,this._defs&&this._defs._clickable)}setClickable(t){t!==this._clickable&&(this._clickable=t,this._changed())}urlCallback(){return ne(this._urlCallback,this._defs&&this._defs._urlCallback)}setUrlCallback(t){this._urlCallback=t}onClick(){return ne(this._onClick,this._defs&&this._defs._onClick)}setOnClick(t){this._onClick=t}getImageUrl(t){const e=this.urlCallback();return ne(e&&e({model:this.wrapperOrThis(),row:t}),this.imageUrl())}click(t,e){if(this._clickable){const i=this.onClick();i&&i({model:this.wrapperOrThis(),row:t,imageUrl:e})}}}yr.DEF_SIZE=24;class br extends pr{constructor(){super(...arguments),this._shapeArgs={model:void 0,row:-1},this._clickArgs={model:void 0,row:-1,shape:void 0}}_doInitDefaults(){super._doInitDefaults(),this._size=br.SIZE,this._shape=br.SHAPE,this._clickable=!1}size(){return ne(this._size,this._defs&&this._defs._size)}setSize(t){t!==this._size&&(this._size=t,this._changed())}shape(){return ne(this._shape,this._defs&&this._defs._shape)}setShape(t){t!==this._shape&&(this._shape=t,this._changed())}clickable(){return ne(this._clickable,this._defs&&this._defs._clickable)}setClickable(t){t!==this._clickable&&(this._clickable=t,this._changed())}shapeCallback(){return ne(this._shapeCallback,this._defs&&this._defs._shapeCallback)}setShapeCallback(t){this._shapeCallback=t}onClick(){return ne(this._onClick,this._defs&&this._defs._onClick)}setOnClick(t){this._onClick=t}getShape(t){const e=this.shapeCallback();if(e){const i=this._shapeArgs;i.model=this.wrapperOrThis(),i.row=t;t=e(i);return void 0!==t?t:this.shape()}return this.shape()}click(t,e){const i=this.clickable()&&this.onClick();if(i){const s=this._clickArgs;s.model=this.wrapperOrThis(),s.row=t,s.shape=e,i(s)}}}br.SIZE=20,br.SHAPE="@star";class Sr extends pr{_doInitDefaults(){super._doInitDefaults(),this._letter="Σ"}letter(){return ne(this._letter,this._defs&&this._defs._letter)}setLetter(t){t!==this._letter&&(this._letter=t,this._changed())}}(ir=Js=Js||{}).NONE="none",ir.HEAD="head",ir.FOOT="foot";class Cr extends vr{constructor(t,e){super(t,">",e)}_doInitDefaults(){this._position=Js.FOOT}position(){return ne(this._position,this._defs&&this._defs._position)}setPosition(t){t!==this._position&&(this._position=t,this._changed())}}(ir=tr=tr||{}).NONE="none",ir.MOVE="move",ir.INFO="info",ir.DELETE="delete",ir.ADD="add",ir.EDIT="edit",ir.LINK="link",ir.CUSTOM="custom";class xr extends vr{confirmMessage(){return ne(this._confirmMessage,this._defs&&this._defs._confirmMessage)}setConfirmMessage(t){this._confirmMessage=t}_doClick(t,e){var i=this.confirmMessage();return i&&!confirm(i)||t.owner().data().deleteRow(e,!1),!0}}class Rr extends vr{editHeader(){return ne(this._editHeader,this._defs&&this._defs._editHeader)}setEditHeader(t){t!==this._editHeader&&(this._editHeader=t,this._changed())}editTemplate(){return ne(this._editTemplate,this._defs&&this._defs._editTemplate)}setEditTemplate(t){t!==this._editTemplate&&(this._editTemplate=t,this._changed())}_doClick(t,e){var i={header:this.editHeader(),template:this.editTemplate()};return t.control().showEditPage(e,i,!0),!0}}class Er extends Rr{_doInitButton(t){this.appending=!1,this.setLetter({letter:"+",size:25})}_doClick(t,e){return super._doClick(t,-1)}}class Vr extends vr{infoHeader(){return ne(this._infoHeader,this._defs&&this._defs._infoHeader)}setInfoHeader(t){t!==this._infoHeader&&(this._infoHeader=t,this._changed())}infoTemplate(){return ne(this._infoTemplate,this._defs&&this._defs._infoTemplate)}setInfoTemplate(t){t!==this._infoTemplate&&(this._infoTemplate=t,this._changed())}_doInitButton(t){this.setLetter({letter:"ⓘ",transparent:!0}),this.setStyle({fontSize:"28px"})}_doClick(t,e){var i={header:this.infoHeader(),template:this.infoTemplate()};return t.control().showInfoPage(e,i,!0),!0}}class $r extends vr{_doInitDefaults(){this._target="_self",this.setLetter({letter:"→",transparent:!0})}target(){return ne(this._target,this._defs&&this._defs._target)}setTarget(t){this._target=t}url(){return ne(this._url,this._defs&&this._defs._url)}setUrl(t){this._url=t}urlCallback(){return ne(this._urlCallback,this._defs&&this._defs._urlCallback)}setUrlCallback(t){this._urlCallback=t}getUrl(t){const e=this.urlCallback();return ne(e&&e(this._getArgs(t)),this.url())}_doClick(t,e){e=this.getUrl(e);return e&&window.open(e,this._target),!0}}class Ar extends Ds{constructor(t,e,i){super(t,i),this._buttons={},this._handles={},this._owner=e,this._delete=new xr(this,Ar.DELETE_LABEL,i&&i._delete),this._add=new Er(this,Ar.ADD_LABEL,i&&i._add),this._edit=new Rr(this,Ar.EDIT_LABEL,i&&i._edit),this._info=new Vr(this,Ar.INFO_LABEL,i&&i._info),this._link=new $r(this,Ar.LINK_LABEL,i&&i._link),this._custom=new vr(this,Ar.CUSTOM_LABEL,i&&i._custom),this._move=new fr(this,i&&i._move),this._buttons[tr.DELETE]=this._delete,this._buttons[tr.ADD]=this._add,this._buttons[tr.EDIT]=this._edit,this._buttons[tr.INFO]=this._info,this._buttons[tr.LINK]=this._link,this._buttons[tr.CUSTOM]=this._custom,this._handles[tr.MOVE]=this._move}_doInitDefaults(){super._doInitDefaults(),this.setVisible(!1),this.setPosition(ys.FAR),this._action=tr.CUSTOM}owner(){return this._owner}action(){return ne(this._action,this._defs&&this._defs._action)}setAction(t){t!==this._action&&(this._action=t,this._changed())}delete(){return this._delete}add(){return this._add}edit(){return this._edit}info(){return this._info}link(){return this._link}custom(){return this._custom}move(){return this._move}getAction(t){return this._runAction}getButton(t){return this._buttons[t]}getHandle(t){return this._handles[t]}_doPrepareRender(){switch(super._doPrepareRender(),this._runAction=this.action()){case tr.INFO:this._info.prepareRender();break;case tr.DELETE:this._delete.prepareRender();break;case tr.ADD:this._add.prepareRender();break;case tr.EDIT:this._edit.prepareRender();break;case tr.LINK:this._link.prepareRender();break;case tr.CUSTOM:this._custom.prepareRender();break;case tr.MOVE:this._move.prepareRender()}}}Ar.DELETE_LABEL="Delete",Ar.DETAIL_LABEL="More",Ar.LINK_LABEL=">",Ar.ADD_LABEL="Add",Ar.EDIT_LABEL="Edit",Ar.INFO_LABEL="Info",Ar.CUSTOM_LABEL="?",(ir=er=er||{}).NONE="none",ir.ORDER="order",ir.CHECK="check",ir.SHAPE="shape",ir.LETTER="letter",ir.IMAGE="image",ir.BUTTON="button",ir.MOVE="move";class Lr extends vr{_doInitDefaults(){this.setLabel("...")}}class Dr extends Ds{constructor(t,e,i){super(t,i),this.minOrderWidth=0,this.needOrderWidth=!1,this.orderWidth=NaN,this._owner=e,this._order=new wr(this,i&&i._order),this._check=new mr(this,i&&i._check),this._shape=new br(this,i&&i._shape),this._letter=new Sr(this,i&&i._letter),this._image=new yr(this,i&&i._image),this._button=new Lr(this,void 0,i&&i._button),this._move=new fr(this,i&&i._move)}_doInitDefaults(){super._doInitDefaults(),this.setVisible(!1),this._display=Dr.DISPLAY}owner(){return this._owner}display(){return ne(this._display,this._defs&&this._defs._display)}setDisplay(t){t!==this._display&&(this._display=t,this._displayChanged=!0,this.needOrderWidth=!0,this._changed())}order(){return this._order}check(){return this._check}shape(){return this._shape}letter(){return this._letter}image(){return this._image}button(){return this._button}move(){return this._move}getDisplay(t){return this.disp}isMaster(t){return this._owner.isMaster(t)}_doPrepareRender(){switch(super._doPrepareRender(),this.disp=this.display()){case er.ORDER:this.minOrderWidth=he(this._order.minWidth(),0),this.needOrderWidth=this._order.fitWidth(),this.orderWidth=0,this._order.prepareRender();break;case er.CHECK:this._check.prepareRender();break;case er.SHAPE:this._shape.prepareRender();break;case er.LETTER:this._letter.prepareRender();break;case er.IMAGE:this._image.prepareRender();break;case er.BUTTON:this._button.prepareRender();break;case er.MOVE:this._move.prepareRender()}this._displayChanged=this._displayChanged||this._defs&&this._defs._displayChanged}_doUnprepareRender(){switch(super._doUnprepareRender(),this.disp=this.display()){case er.ORDER:this._order.unprepareRender();break;case er.CHECK:this._check.unprepareRender();break;case er.SHAPE:this._shape.unprepareRender();break;case er.LETTER:this._letter.unprepareRender();break;case er.IMAGE:this._image.unprepareRender();break;case er.BUTTON:this._button.unprepareRender();break;case er.MOVE:this._move.unprepareRender()}this._displayChanged=!1,this._defs&&this._defs.unprepareRender()}}Dr.DISPLAY=er.ORDER,Dr.TAG="rowBar";var kr=4,Tr=1e-7,Pr=10,Mr="function"==typeof Float32Array;function Ir(t,e){return 1-3*e+3*t}function Nr(t,e,i){return((Ir(e,i)*t+(3*i-6*e))*t+3*e)*t}function Or(t,e,i){return 3*Ir(e,i)*t*t+2*(3*i-6*e)*t+3*e}function Br(t){return t}var Fr,zr,Hr,Wr,Gr,Ur,qr,jr,Yr,Qr,Zr,Xr,Kr,Jr,tn,en,sn,rn,nn,on,an,hn,ln,dn,_n;function cn(t){var e=7.5625,i=2.75;return t<1/i?e*t*t:t<2/i?e*(t-=1.5/i)*t+.75:t<2.5/i?e*(t-=2.25/i)*t+.9375:e*(t-=2.625/i)*t+.984375}const un=Math.pow,gn=Math.sqrt,pn=Math.sin,fn=Math.cos,wn=Math.PI,mn=1.70158,vn=1.525*mn,yn=(mn,2*wn/3),bn=2*wn/4.5,Sn=function(n,e,o,i){if(!(0<=n&&n<=1&&0<=o&&o<=1))throw new Error("bezier x values must be in [0, 1] range");if(n===e&&o===i)return Br;for(var a=new(Mr?Float32Array:Array)(11),t=0;t<11;++t)a[t]=Nr(.1*t,n,o);function s(t){for(var e=0,i=1;10!==i&&a[i]<=t;++i)e+=.1;var s=e+.1*((t-a[--i])/(a[i+1]-a[i])),r=Or(s,n,o);return.001<=r?function(t,e,i,s){for(var r=0;r<kr;++r){var n=Or(e,i,s);if(0===n)return e;e-=(Nr(e,i,s)-t)/n}return e}(t,s,n,o):0===r?s:function(t,e,i,s,r){for(var n,o,a=0;0<(n=Nr(o=e+(i-e)/2,s,r)-t)?i=o:e=o,Math.abs(n)>Tr&&++a<Pr;);return o}(t,e,e+.1,n,o)}return function(t){return 0===t?0:1===t?1:Nr(s(t),e,i)}}(.01,.99,.01,.99),Cn={linear(t){return t},inQuad(t){return t*t},outQuad(t){return 1-(1-t)*(1-t)},inOutQuad(t){return t<.5?2*t*t:1-un(-2*t+2,2)/2},inCubic(t){return t*t*t},outCubic(t){return 1-un(1-t,3)},outCubic2(t){return 1-un(1-t,4)},inOutCubic(t){return t<.5?4*t*t*t:1-un(-2*t+2,3)/2},inQuart(t){return t*t*t*t},outQuart(t){return 1-un(1-t,4)},inOutQuart(t){return t<.5?8*t*t*t*t:1-un(-2*t+2,4)/2},inQuint(t){return t*t*t*t*t},outQuint(t){return 1-un(1-t,5)},inOutQuint(t){return t<.5?16*t*t*t*t*t:1-un(-2*t+2,5)/2},inSine(t){return 1-fn(t*wn/2)},outSine(t){return pn(t*wn/2)},inOutSine(t){return-(fn(wn*t)-1)/2},inExpo(t){return 0===t?0:un(2,10*t-10)},outExpo(t){return 1===t?1:1-un(2,-10*t)},outExpo2(t){return 1===t?1:1-un(2,-12*t)},inOutExpo(t){return 0===t?0:1===t?1:t<.5?un(2,20*t-10)/2:(2-un(2,-20*t+10))/2},inCirc(t){return 1-gn(1-un(t,2))},outCirc(t){return gn(1-un(t-1,2))},inOutCirc(t){return t<.5?(1-gn(1-un(2*t,2)))/2:(gn(1-un(-2*t+2,2))+1)/2},inBack(t){return 2.70158*t*t*t-mn*t*t},outBack(t){return 1+2.70158*un(t-1,3)+mn*un(t-1,2)},inOutBack(t){return t<.5?un(2*t,2)*(7.189819*t-vn)/2:(un(2*t-2,2)*((1+vn)*(2*t-2)+vn)+2)/2},inElastic(t){return 0===t?0:1===t?1:-un(2,10*t-10)*pn((10*t-10.75)*yn)},outElastic(t){return 0===t?0:1===t?1:un(2,-10*t)*pn((10*t-.75)*yn)+1},inOutElastic(t){return 0===t?0:1===t?1:t<.5?-(un(2,20*t-10)*pn((20*t-11.125)*bn))/2:un(2,-20*t+10)*pn((20*t-11.125)*bn)/2+1},inBounce(t){return 1-cn(1-t)},outBounce:cn,inOutBounce(t){return t<.5?(1-cn(1-2*t))/2:(1+cn(2*t-1))/2},cubicBezier(t){return e=t,((s=.99)-(i=.01)-(r=3*(s-i))-(s=3*(.01-s)-r))*Math.pow(e,3)+s*Math.pow(e,2)+r*e+i;var e,i,s,r},cubicBezier2(t){return Sn(t)}};class xn extends a{constructor(t,e){super(),this._duration=t,this._easing=e&&Cn[e]||Cn.linear}static create(t,e,i=1e3,s="linear"){return new Rn(t,e,i,s).start()}_doDestory(){this.stop()}isFinished(){return!this._timer}start(){return this.stop(),this._started=+new Date,this._timer=q.setInterval(()=>{var e=this.$_getStep();if(1<=e)this._doStep(1),this.$_stop(e);else try{this._doStep(e)}catch(t){throw this.$_stop(e),t}},20),this._doStep(0),this._timer.runner&&this._timer.runner(),this}stop(){this._timer&&this.$_stop(this.$_getStep())}$_getStep(){var t=isNaN(this._timer.step)?(+new Date-this._started)/this._duration:this._timer.step;return this._easing(t)}$_stop(t){q.clearInterval(this._timer),this._timer=void 0,this._doStop(t,t<1)}}class Rn extends xn{constructor(t,e,i,s){super(i,s),this.onstep=t,this.onfinish=e}_doStep(t){this.onstep(t)}_doStop(t,e){var i;null!==(i=this.onfinish)&&void 0!==i&&i.call(this,t,e)}}class En extends a{}class Vn extends a{constructor(t){super(),this._dragging=!1,this._control=t}get control(){return this._control}get dragging(){return this._dragging}get startWhenCreated(){return!1}get cursor(){}canSwipe(){return!1}start(t,e,i,s,r){return this.cancel(),!!this._doStart(t,e,i,s,r)&&(this._dragging=!0,this._showFeedback(s,r),!0)}drag(t,e,i,s,r){return!(!this._dragging||!this._doDrag(t,e,i,s,r))&&(this._moveFeedback(s,r),!0)}cancel(){if(this._dragging)try{this._dragging=!1,this._doCanceled()}finally{this.end()}}drop(t,e,i){if(this._dragging)try{this._dragging=!1,this._canAccept(t,e,i)?this._doCompleted(t,e,i):this._doCanceled()}finally{this.end()}}swipe(t){if(this._doSwipe(t))return this.end(),!0}end(){try{this._dragging=!1,this._hideFeedback()}finally{this._doEnded()}}_doSwipe(t){return!1}_showFeedback(t,e){}_moveFeedback(t,e){}_hideFeedback(){}_doStart(t,e,i,s,r){return!0}_doCanceled(){}_canAccept(t,e,i){return!0}_doCompleted(t,e,i){}_doEnded(){}}class $n extends a{constructor(t,e,i,s,r,n){super(),this.distance=t,this.duration=e,this.threshold=i,this.handler=s,this.endHandler=r,this.startHandler=n,this._easing=Cn.outExpo}_doDestory(){this.stop()}run(){var t;return this.stop(),this._started=+new Date,this._prev=0,this._timer=setInterval(()=>{try{var t,e,i,s=+new Date-this._started;s>this.duration?this.stop():(t=+new Date,e=this._easing((t-this._started)/this.duration),(i=this.distance*(e-this._prev))<this.threshold||!0===this.handler(i,s/this.duration)?this.stop():this._prev=e)}catch(t){throw this.stop(),t}},20),null!==(t=this.startHandler)&&void 0!==t&&t.call(this),this}stop(){var t;this._timer&&(clearInterval(this._timer),this._timer=void 0,null!==(t=this.endHandler)&&void 0!==t&&t.call(this))}}function An(t,e,i){const s=t.style;let r=t._sts_;if(t instanceof HTMLElement?t.className=e:Re.resetClassList(t,e),r)for(const n in r)s[n]="";r={},"string"==typeof i?t.classList.add(i):i&&(Object.assign(r,i),Object.assign(s,i)),t._sts_=r}class Ln extends Ve{constructor(){super(...arguments),this._prevStyle={}}static measureButton(t,e,i){const s=t.dom;var r=e.letter();let n=+e.width(),o=+e.height();return r?(n=r.size||n,o=r.size||o,i.dataset.type=r.transparent?"letter-transparent":"letter",i.textContent=r.letter):(delete i.dataset.type,i.textContent=e.label()),Re.setAttr(i,"aria-label",e.hint()),isNaN(n)?i.style.width="":i.style.width=n+"px",(t.hRelative=e.isRelativeHeight())?(i.style.height="100%",s.style.height=String(o)):(i.style.height=isNaN(o)?"":o+"px",s.style.height=""),{width:i.offsetWidth+1,height:s.offsetHeight}}getDragRequest(t,e){if(this._move&&this._move.dom().contains(t))return new kn(this.row)}_getOverflow(){return"hidden"}_doInitDom(t,e){const i=e.style;Ve.BOUNDING&&(i.border=Ve.BOUNDING_BORDER),i.display="flex",i.alignItems="center",i.justifyContent="center"}isDom(t){return this._move&&this._move.dom().contains(t)}$_prepareMove(t,e,i,s){var r=this.dom;let n=this._move;return n?n.attached()||n.appendTo(r):(n&&n.destroy(),n=this._move=this.control.shapes().createStock(r.ownerDocument,"@drag"),n.appendTo(r)),n.resize(t.size()),An(r,Pn.CLASS_NAME,i),An(n.dom(),Pn.MOVE_CLASS,s),n.dom()}}Ln.MOVE_CLASS="dlist-rowbar-move";const Dn={fill:"none",stroke:"white",strokeWidth:"1px",width:"100%",height:"100%",display:"block",position:"relative",boxSizing:"border-box",border:"1px solid #00000040",borderRadius:"50%"};class kn extends En{constructor(t){super(),this.row=t}}class Tn extends En{constructor(t){super(),this.row=t}}class Pn extends Ln{constructor(t){super(t,null,Pn.CLASS_NAME)}static none_measure(t,e,i,s,r){return t.$_prepareNone(),{width:0,height:0}}static order_measure(t,e,i,s,r){const n=i.order(),o=t.$_prepareOrder(n.getCellStyle(r),n.getStyle(r));return i.needOrderWidth&&(t=Math.log10(s.rowCount()+n.rowOffset()),o.textContent=(n.prefix()||"")+"8".repeat(t)+(n.suffix()||""),i.orderWidth=e.offsetWidth,i.needOrderWidth=!1),o.textContent=n.getText(s,r),{width:Math.max(i.minOrderWidth,i.orderWidth,e.offsetWidth),height:e.offsetHeight}}static check_measure(t,e,i,s,r){const n=i.check();if(i.isMaster(r)&&!n.masterVisible())return t.$_prepareCheck(0,n.runStyle(i._displayChanged),n.getStyle(r),!1),{width:0,height:0};i=n.size();return t.$_prepareCheck(i,n.getCellStyle(r),n.getStyle(r),!0),{width:e.offsetWidth,height:e.offsetHeight}}static letter_measure(t,e,i,s,r){const n=i.letter(),o=t.$_prepareLetter(n.getCellStyle(r),n.getStyle(r));return o.textContent=i.letter().letter(),{width:e.offsetWidth,height:e.offsetHeight}}static shape_measure(t,e,i,s,r){const n=i.shape();i=n.size();return t.$_prepareShape(n,r,n.getCellStyle(r),n.getStyle(r)),{width:i,height:i}}static image_measure(t,e,i,s,r){const n=i.image();var o=n.width(),i=n.height();return t.$_prepareImage(n,r,n.getCellStyle(r),n.getStyle(r),o,i),{width:o,height:i}}static button_measure(t,e,i,s,r){const n=i.button();return Ln.measureButton(t,n,t.$_prepareButton(n.getCellStyle(r),n.getStyle(r)))}static move_measure(t,e,i,s,r){const n=i.move();i=n.size();return t.$_prepareMove(n,r,n.getCellStyle(r),n.getStyle(r)),{width:i,height:i}}static none_render(t,e,i){}static order_render(t,e,i){}static check_render(t,e,i){if(t.visible){const s=t.dom;s.firstElementChild.lastElementChild.checked=t.checked,Re.setAttr(s.firstElementChild.lastElementChild,"aria-checked",t.checked),s.firstElementChild.firstElementChild.style.background=t.checked?"rgb(56, 128, 255)":"white"}}static letter_render(t,e,i){}static shape_render(t,e,i){}static image_render(t,e,i){}static button_render(t,e,i){}static move_render(t,e,i){}measure(t,e,i,s,r){const n=Pn.Measurers[this._display=t.getDisplay(i)],o=this.dom;this.dv=e,this.row=i,o.dataset.row=String(i),this.checked=t.owner().isRowChecked(i),this.hRelative=!1,this.internalClearSize();i=n?n(this,o,t,e,i):{width:0,height:0};return this.wMeasure=i.width,this.hMeasure=i.height,{width:i.width,height:i.height}}render(t,e,i){this.internalResize(e,i);const s=Pn.Renderrs[this._display];s&&s(this,this.wMeasure,this.hMeasure)}click(t,e){var i=this.row;this._check&&this._check.contains(e)?t.owner().toggleChecked(i):e===this._button?t.button().click(this,i):this._shape&&this._shape.containsDom(e)?t.shape().click(i,this._shape[Ft]):e===this._image&&t.image().click(i,this._image[Ft])}getCheck(){return this._check.lastElementChild}displayOfDom(t){if(this._check&&this._check.contains(t))return er.CHECK}isDom(t){return super.isDom(t)||this._check&&this._check.contains(t)||this._shape&&this._shape.dom().contains(t)||t===this._image||t===this._button||super.isDom(t)}getDragRequest(t,e){return this._check&&this._check.contains(t)&&e._rowBar.check().canDrag()?new Tn(this.row):super.getDragRequest(t,e)}$_prepareNone(){Re.removeChildren(this.dom,[this._order,this._check,this._image,this._letter,this._shape,this._button,this._move])}$_prepareOrder(t,e){const i=this.dom;let s=this._order;return Re.removeChildren(i,[this._check,this._image,this._letter,this._shape,this._button,this._move]),s?s.parentElement||i.appendChild(s):(s=this._order=i.ownerDocument.createElement("span"),s.style.whiteSpace="pre",i.appendChild(s)),An(i,Pn.CLASS_NAME,t),An(s,Pn.ORDER_CLASS,e),this._order}$_prepareCheck(s,r,n,t){if(this.visible=t){const o=this.dom,a=o.ownerDocument;let t=this._check,e,i;return Re.removeChildren(o,[this._order,this._image,this._letter,this._shape,this._button,this._move]),t?t.parentElement||o.appendChild(t):(t=this._check=a.createElement("div"),o.appendChild(t),i=this.control.shapes().create(Is,null),i.setStyle(Dn),i.resize(s),i.appendTo(t),e=a.createElement("input"),e.type="checkbox",Object.assign(e.style,{position:"absolute",left:"0",top:"0",opacity:"0",clipPath:"circle(0)",appearance:"none"}),t.appendChild(e)),An(o,Pn.CLASS_NAME,r),An(t,Pn.CHECK_CLASS,n),t}}$_prepareImage(t,e,i,s,r,n){const o=this.dom;let a=this._image;return Re.removeChildren(o,[this._order,this._check,this._letter,this._shape,this._button,this._move]),a?a.parentElement||o.appendChild(a):(a=this._image=o.ownerDocument.createElement("img"),o.appendChild(a)),An(o,Pn.CLASS_NAME,i),An(a,Pn.IMAGE_CLASS,s),a.width=r,a.height=n,a[Ft]=a.src=t.getImageUrl(e),a}$_prepareLetter(t,e){const i=this.dom;let s=this._letter;return Re.removeChildren(i,[this._order,this._check,this._image,this._shape,this._button,this._move]),s?s.parentElement||i.appendChild(s):(s=this._letter=i.ownerDocument.createElement("span"),s.style.whiteSpace="pre",i.appendChild(s)),An(i,Pn.CLASS_NAME,t),An(s,Pn.LETTER_CLASS,e),s}$_prepareShape(t,e,i,s){var r=this.dom,e=t.getShape(e);let n=this._shape;return Re.removeChildren(r,[this._order,this._check,this._image,this._letter,this._button,this._move]),n&&e===n[Ft]?(n instanceof Ms&&n.setShape(this.control.shapes().getCustom(e)),n.attached()||n.appendTo(r)):(n&&n.destroy(),n=this._shape=this.control.shapes().createStock(r.ownerDocument,e)||this.control.shapes().createCustom(e,null,null),n.appendTo(r)),n.resize(t.size()),n[Ft]=e,An(r,Pn.CLASS_NAME,i),An(n.dom(),Pn.SHAPE_CLASS,s),n.dom()}$_prepareButton(t,e){const i=this.dom;let s=this._button;return Re.removeChildren(i,[this._order,this._image,this._letter,this._check,this._shape,this._move]),s?s.parentElement||i.appendChild(s):(s=this._button=i.ownerDocument.createElement("button"),Object.assign(s.style,Pn.BUTTON_STYLE),i.appendChild(s)),An(i,Pn.CLASS_NAME,t),An(s,Pn.BUTTON_CLASS,e),s}$_prepareMove(t,e,i,s){return Re.removeChildren(this.dom,[this._order,this._check,this._image,this._letter,this._button,this._shape]),super.$_prepareMove(t,e,i,s)}}Pn.CLASS_NAME="dlist-rowbar-cell",Pn.ORDER_CLASS="dlist-rowbar-order",Pn.IMAGE_CLASS="dlist-rowbar-image",Pn.CHECK_CLASS="dlist-rowbar-check",Pn.SHAPE_CLASS="dlist-rowbar-shape",Pn.LETTER_CLASS="dlist-rowbar-letter",Pn.BUTTON_CLASS="dlist-row-button",Pn.BUTTON_STYLE={margin:0,whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},Pn.Measurers={none:Pn.none_measure,order:Pn.order_measure,check:Pn.check_measure,letter:Pn.letter_measure,shape:Pn.shape_measure,image:Pn.image_measure,button:Pn.button_measure,move:Pn.move_measure},Pn.Renderrs={none:Pn.none_render,order:Pn.order_render,check:Pn.check_render,letter:Pn.letter_render,shape:Pn.shape_render,image:Pn.image_render,button:Pn.button_render,move:Pn.move_render};class Mn extends Ln{constructor(t){super(t,null,Mn.CLASS_NAME)}static none_measure(t,e,i,s){return t.$_prepareNone(),{width:0,height:0}}static button_measure(t,e,i,s){return Ln.measureButton(t,e,t.$_prepareButton(e.getCellStyle(s),e.getStyle(s)))}static move_measure(t,e,i,s){var r=e.size();return t.$_prepareMove(e,s,e.getCellStyle(s),e.getStyle(s)),{width:r,height:r}}static handle_measure(t,e,i,s){return{width:0,height:0}}static button_render(t,e,i){}static move_render(t,e,i){}static handle_render(t,e,i){}_doDestory(){this._handle=this._handle.destroy()}measure(t,e,i,s,r){var n=this._action=t.getAction(i),o=t.getButton(n);let a;return this.dv=e,this.row=i,this.dom.dataset.row=String(i),this.hRelative=!1,this.dom.style.width="",a=o?Mn.ButtonMeasurers[n](this,o,e,i):n===tr.MOVE?Mn.move_measure(this,t.move(),e,i):(t=t.getHandle(n))?Mn.HandleMeasurers[n](this,t,e,i):Mn.none_measure(this,o,e,i),this.wMeasure=a.width,this.hMeasure=a.height,{width:a.width,height:a.height}}render(t,e,i){this.internalResize(e,i);e=this._action,i=t.getButton(e);i?Mn.ButtonRenderers[e](i,this.wMeasure,this.hMeasure):e===tr.MOVE?Mn.move_render(t.move(),this.wMeasure,this.hMeasure):(t=t.getHandle(e))&&Mn.HandleRenderers[e](t,this.wMeasure,this.hMeasure)}click(t,e){if(e===this._button){e=this.row;const i=t.getButton(t.getAction(e));i&&i.click(t,e)}}isDom(t){return t===this._button||super.isDom(t)}$_prepareNone(){this._button&&this._button.remove()}$_prepareButton(t,e){const i=this.dom;let s=this._button;return Re.removeChildren(i,[this._move]),s?s.parentElement||i.appendChild(s):(s=this._button=i.ownerDocument.createElement("button"),Object.assign(s.style,Pn.BUTTON_STYLE),i.appendChild(s)),An(i,Mn.CLASS_NAME,t),An(s,Pn.BUTTON_CLASS,e),this._button}$_prepareMove(t,e,i,s){return Re.removeChildren(this.dom,[this._button]),super.$_prepareMove(t,e,i,s)}}Mn.CLASS_NAME="dlist-editbar-cell",Mn.ButtonMeasurers={delete:Mn.button_measure,add:Mn.button_measure,edit:Mn.button_measure,info:Mn.button_measure,detail:Mn.button_measure,link:Mn.button_measure,custom:Mn.button_measure},Mn.HandleMeasurers={move:Mn.handle_measure},Mn.ButtonRenderers={delete:Mn.button_render,add:Mn.button_render,edit:Mn.button_render,info:Mn.button_render,detail:Mn.button_render,link:Mn.button_render,custom:Mn.button_render},Mn.HandleRenderers={move:Mn.handle_render};class In extends a{constructor(t){super(),this._styleArgs={row:-1,value:void 0},this._model=t}static getDomId(t,e,i){return isNaN(e)?`-dlist-${t}-`+i:`-dlist-g-${e}-`+i}_doDestory(){}model(){return this._model}setModel(t){t!==this._model&&(this._model=t)}prepare(t,e){e[Ot]!==this._model.type&&(e[Ot]&&this.$_clearContent(t,e),e[Ot]=this._model.type),this._value=this._getValue(t),this._doPrepare(t,e)}_setClass(t,e){const i=this._model._classCallback;let s;i&&(this._styleArgs.row=e,this._styleArgs.value=this._value,(e=i(this._styleArgs))&&(s=e)),s=s||this._model._class,s?t.classList.add(s):t.classList.remove(s)}_getStyleTarget(t){return t.style}getStyle(t){var e=this._model._style;const i=this._model._styleCallback;if(i){this._styleArgs.row=t,this._styleArgs.value=this._value;t=i(this._styleArgs);if(t){if(!e)return t;Object.assign(e,t)}}return e}applyStyle(t,e){const i=this._getStyleTarget(t);if(i){if(this._prevStyle)for(var s in this._prevStyle)i[s]="";e?(Object.assign(i,e),this._prevStyle=Object.assign({},e)):this._prevStyle=void 0}}measureLayout(t,e,i,s){return this._doMeasure(t,e,i,s)}renderLayout(t,e,i,s){this._doRender(t,e,i,s)}unprepare(t,e){this._doUnprepare(t,e)}needBounds(){return!1}$_clearContent(t,e){this._doDisposeContent(e),Re.clearChildren(e),e.style.display="block"}_doDisposeContent(t){}_setContext(t,e,i){e.id=In.getDomId(t.row,t.gindex,i.id),t.layout instanceof es&&t.layout.field&&(e[Bt]=t.layout.field),e._row_=t.row}_getValue(t){}_getValues(t,r){var n=this._getValue(t);let o;if(Array.isArray(n)&&(o=n.length)){const h=new Array(o);let t=n[0],e=n[0],i=!1,s=0;for(;isNaN(t)&&s<o;)t=e=+n[++s];for(;s<o;s++){var a=+n[s];h[s]=a,isNaN(a)||(a<t&&(t=a),a>e&&(e=a),a<r&&(i=!0))}return{min:t,max:e,values:h,hasBelow:i}}return{values:[]}}}class Nn extends In{_getValue(t){var e=this._model._value;return void 0!==e?e:t.value()}}class On extends Nn{}class Bn extends Nn{_getStyleTarget(t){return this._svg.svg.style}_doPrepare(t,e){e[Xt]=(this._svg=this.$_getSvg(t,e)).svg}_doUnprepare(t,e){this._svg=this._svg&&this._svg.destroy(),e[Xt]=null}$_getSvg(t,e){var i=this._getSvgClass();let s=e.getElementsByClassName(i)[0];return s?new zi(s,null):(s=zi.create(t.doc),e.appendChild(s),new zi(s,i))}}class Fn extends In{_doPrepare(t,e){}_getStyleTarget(t){return t.style}_doMeasure(t,e,i,s){const r=t.layout._parent;return{width:r.canContainHspace()?this.model().space:1,height:r.canContainVspace()?this.model().space:1}}_doRender(t,e,i,s){}_doUnprepare(t,e){}setValue(t,e){}}Fn.SPAN_CLASS="dlist-spacer-span";class zn extends Hs{constructor(t,e,i,s){super(t,i,s),this._model=e,this._relWidth=nt(e._widthDim),this._relHeight=nt(e._heightDim)}model(){return this._model}manager(){return this._manager}isSpacer(){return!1}setRelativePositions(){var t=this._model;this._relLeft=st(t._leftDim),this._relRight=st(t._rightDim),this._relTop=st(t._topDim),this._relBottom=st(t._bottomDim)}setRelativeHorz(){this._relLeft=st(this._model._leftDim),this._relRight=st(this._model._rightDim)}setRelativeVert(){this._relTop=st(this._model._topDim),this._relBottom=st(this._model._bottomDim)}prepareLayout(t,e){var i=this.dom.style;this._doPrepareRender(t,e),this._doApplyStyles(i),this._doApplyImportantStyles(i),this._prevMax={width:NaN,height:NaN},this.mw=this.mh=NaN;const s=this._padding=this.getPadding2();s.horz=s.left+s.right+s.borderLeft+s.borderRight,s.vert=s.top+s.bottom+s.borderTop+s.borderBottom}measureLayout(t,e,i,s){var r=this._padding;i-=r.horz,s-=r.vert;const n=this._doMeasureLayout(t,e,i,s);return this.mw=n.width+=r.horz,this.mh=n.height+=r.vert,n}getLabel(){return this._label}}class Hn extends zn{constructor(t,e){super(t,e,!0,Hn.CLASS_NAME),e||lt(Z.layoutMustSet),this._model=e}static isView(t){return t.classList.contains(this.CLASS_NAME)}tag(){return this._model.tag}isRoot(){return!(this.parent instanceof Hn)}scrollable(){return!1}build(t,e){for(const i of this._model.children())if(this._canContain(i))if(i instanceof es)this.addChild(new Gn(t,i));else if(i instanceof is)this.addChild(new Un(t,i));else if(i instanceof ss){const s=e.createLayoutView(t,i);s.build(t,e),this.addChild(s)}}refreshModels(i){this._model=i;for(let t=0,e=this.childCount;t<e;t++){const r=this.getChild(t);var s=i.getChild(t);r instanceof Wn?r._model=s:r instanceof Hn&&r.refreshModels(s)}}saveEditValues(i){for(let t=0,e=this.childCount;t<e;t++){const s=this.getChild(t);s instanceof Wn?s.saveEditValue(i):s instanceof Hn&&s.saveEditValues(i)}}fieldBy(e,t){return t?this.findDescendant(t=>t instanceof Gn&&t.model().field===e):this.findChild(t=>t instanceof Gn&&t.model().field===e)}childByTag(e,t=!1){return t&&this.findDescendant(t=>t.tag()===e),this.findChild(t=>t.tag()===e)}simpleById(e,t){return t?this.findDescendant(t=>t instanceof Wn&&t.model().id()===e):this.findChild(t=>t instanceof Wn&&t.model().id()===e)}simpleByModel(e,t){return t?this.findDescendant(t=>t instanceof Wn&&t.model().tid===e.tid):this.findChild(t=>t instanceof Wn&&t.model().id===e.id())}simpleByDom(e,t){return t?this.findDescendant(t=>t instanceof Wn&&t.containsDom(e)):this.findChild(t=>t instanceof Wn&&t.containsDom(e))}getRenderer(t){const e=this.simpleByDom(t,!0);return e&&e.renderer()}simpleBy(e,t){return t&&this.findDescendant(t=>t instanceof Wn&&t.layout.tag===e),this.findChild(t=>t instanceof Wn&&t.tag()===e)}literalBy(e,t){return t?this.findDescendant(t=>t instanceof Un&&t.tag()===e):this.findChild(t=>t instanceof Un&&t.tag()===e)}simplesByRenderer(e){var t=[];return this.findDescendants(t=>t instanceof Wn&&t.renderer().type()===e,t),t}getValues(t){var e={};return this._getValues(t,e),e}_getValues(i,s){this._visibles.forEach(t=>{var e;t instanceof Wn?(e=t.getEditValue(i))&&(s[e.field]=e.value):t instanceof Hn&&t._getValues(i,s)})}_doInitContent(t,e){Ve.BOUNDING&&(e.style.boxSizing="border-box",e.style.border=Ve.BOUNDING_BORDER_2)}prepareView(t){}_doPrepareRender(t,e){this._manager=e,this._visibles=[],this.forEach(t=>{t._internalVisible(t.model().visible)&&(this._visibles.push(t),t._explicitWidth=t._explicitHeight=t.mw=t.mh=NaN)})}_doApplyStyles(t){var e=this.model().style;e&&Object.assign(t,e)}_doApplyImportantStyles(t){this.setImportantStyle(t,"position","absolute")}_doMeasure(t,e,i){throw new Error("Not used override.")}prepareLayout(e,i){super.prepareLayout(e,i),this._visibles.forEach(t=>t.prepareLayout(e,i))}_doRender(e,t,i){const s=this._visibles;var r=this._padding;t-=r.horz,i-=r.vert,this.resizeContent(t,i),this._doLayoutContent(e,t,i),s.forEach(t=>{t.render(e)});for(let t=s.length-1;0<=t;t--)s[t]instanceof Wn&&s[t].freeRenderer()}_doAfterRender(){super._doAfterRender(),this._manager=null}_canContain(t){return!0}_getChildMaxWidth(t,e){return t._leftDim&&(e-=rt(t._leftDim,e)),t._rightDim&&(e-=rt(t._rightDim,e)),e}_getChildMaxHeight(t,e){return t._topDim&&(e-=rt(t._leftDim,e)),t._bottomDim&&(e-=rt(t._rightDim,e)),e}_defaultExplicitWidth(t){return NaN}_defaultExplicitHeight(t){return NaN}_measureChildren(t,e,i,s,r,n){let o,a;for(const d of t){var h=d.model(),l=h._widthDim,h=h._heightDim;d._explicitWidth=this._defaultExplicitWidth(s),d._explicitHeight=this._defaultExplicitHeight(r),l?l.fixed?d._explicitWidth=a=l.size:isNaN(this._explicitWidth)?a=s:d._explicitWidth=a=s*l.size/100:a=s,h?h.fixed?d._explicitHeight=o=h.size:isNaN(this._explicitHeight)?o=r:d._explicitHeight=o=r*h.size/100:o=r,d.measureLayout(e,i,a,o),isNaN(d._explicitHeight)||(d.mh=d._explicitHeight),isNaN(d._explicitWidth)||(d.mw=d._explicitWidth),n&&n(d)}}}Hn.CLASS_NAME="-dlist-layout-";class Wn extends zn{constructor(t,e){super(t,e,!1,null),this._selected=!1,this._focused=!1,this._ctx={row:-1,value:void 0}}get layout(){return this._model}model(){return this._model}value(){return this._value}renderer(){return this._model.renderer}rendererImpl(){return this._renderer}tag(){return this._model.tag}get selected(){return this._selected}get focused(){return this._focused}get row(){return this._model.row}get gindex(){return this._model.gindex}field(){return this._model.getField()}align(){return this._model.align}getValue(t){return this.layout.dv.getValue(this.layout.row,t,!0)}useImage(t){this._manager.useImage(t)}getImageSize(t){return this._manager.getImageSize(t)}getIcon(t,e){return this._manager.getIcon(t,e)}inflate(t){return this._manager.owner().inflateField(t,this.field())}textFormatter(){return this._manager.textFormatter}boolFormatter(){return this._manager.boolFormatter}numberFormatter(){return this._manager.numberFormatter}dateFormatter(){return this._manager.dateFormatter}getEditValue(t){var e=this.field();if(e){const i=t.borrowRenderer(this._model.renderer);try{if(i instanceof On)return{field:e,value:i.getValue(this.dom)}}finally{i&&t.freeRenderer(i)}}}setEditValue(t,e){if(this.field()){const i=t.borrowRenderer(this._model.renderer);try{i instanceof On&&i.setValue(this.dom,e)}finally{i&&t.freeRenderer(i)}}}saveEditValue(t){t=this.getEditValue(t);this._editValue=t&&t.value}isSpacer(){return this._spacer}_doInitDom(t,e){Ve.BOUNDING&&(e.style.border=Ve.BOUNDING_BORDER),e.style.overflow="hidden",this._table=t.createElement("div"),Object.assign(this._table.style,{display:"table",width:"100%",height:"100%"}),e.appendChild(this._table)}isDom(t){return super.isDom(t)||this.containsDom(t)}prepareView(t){this._renderer=t.borrowRenderer(this._model.renderer),this._spacer=this._renderer instanceof Fn}_doPrepareRender(t,e){const i=this._table;this._manager=e,this._renderer.prepare(this,i);const s=i.firstElementChild;e=this._model;s&&(s.style.display="table-cell",s.style.verticalAlign=e.valign),e.align&&(i.style.textAlign=e.align);const r=e.classCallback;let n;n=r?r(this):e.class,n?this.dom.className=n:delete this.dom.className}_doApplyStyles(t){const e=this._model.styleCallback;for(var i in this._prevStyles)t[i]="";var s=this._prevStyles={},r=this._model.style;r&&Object.assign(s,r),e&&(this._ctx.row=this._model.row,this._ctx.value=this._value,(r=e(this._ctx))&&Object.assign(s,r)),Object.assign(t,s);s=this._renderer.getStyle(this._model.row);this._renderer.applyStyle(this._table,s)}_doApplyImportantStyles(t){this.setImportantStyle(t,"position","absolute")}_doMeasure(t,e,i){var s=this._table;this.setWidth(this._renderer.needBounds()?e:NaN),this.setHeight(NaN);i=this._renderer.measureLayout(this,s,e,i);this._renderer.needBounds()&&this.setWidth(NaN);let r=this._explicitWidth,n=this._explicitHeight;return isNaN(r)?r=i?i.width:s.offsetWidth:r-=this._padding.horz,isNaN(n)?n=i?i.height:s.offsetHeight:n-=this._padding.vert,{width:r,height:n}}_doRender(t,e,i){var s=this._padding,r=this._table;e-=s.horz,i-=s.vert,this._renderer.renderLayout(this,r,e,i)}freeRenderer(){this._renderer.unprepare(this,this._table),this._manager.freeRenderer(this._renderer),this._manager=null,this._testing()||(this._renderer=null)}_doMeasureLayout(t,e,i,s){return this._doMeasure(t,i,s)}}class Gn extends Wn{field(){return this.layout.field}_doPrepareRender(t,e){this._value=void 0!==this._editValue?this._editValue:this.layout.getValue(),super._doPrepareRender(t,e)}}class Un extends Wn{_doPrepareRender(t,e){this._value=void 0!==this._editValue?this._editValue:this.layout.value,super._doPrepareRender(t,e)}}class qn extends Hn{_doMeasureLayout(t,e,i,s){const r=this._visibles;let n=this._explicitWidth,o=this._explicitHeight;if(this._measureChildren(this._visibles,t,e,i,s,null),isNaN(n)||this.model().canGrow()){let i=0;r.forEach(t=>{let e=t.mw;t=t.model()._leftDim||t.model()._rightDim;t&&(t.fixed?e+=t.size:e/=(100-t.size)/100),i=Math.max(i,e)}),n=isNaN(this.mw)?i:Math.max(this.mw,i)}if(isNaN(o)||this.model().canGrow()){let i=0;r.forEach(t=>{let e=t.mh;t=t.model()._topDim||t.model()._bottomDim;t&&(t.fixed?e+=t.size:e/=(100-t.size)/100),i=Math.max(e,i)}),o=isNaN(this.mh)?i:Math.max(this.mh,i)}return{width:n,height:o}}_doLayoutContent(t,i,s){for(var r of this._visibles){const h=r.model();var n,o=he(r._explicitLeft,h.getLeftIn(i)),a=he(r._explicitTop,h.getTopIn(s));let t=0,e=0;t=isNaN(o)?(n=isNaN(o)?he(r._explicitRight,h.getRightIn(i)):0,isNaN(n)?(i-r.mw)/2:i-r.mw-n):o,e=isNaN(a)?(o=isNaN(a)?he(r._explicitBottom,h.getBottomIn(s)):0,isNaN(o)?(s-r.mh)/2:s-r.mh-o):a,r.mx=t,r.my=e,r.applyMeasuredBounds()}}}(ir=Fr=Fr||{}).DEFAULT="default",ir.REPEAT="repeat",ir.LOOP="loop",ir.RANDOM="random";class jn extends Se{_doInitDefaults(){this._enabled=!1,this._mode=Fr.DEFAULT,this._backward=!1,this._duration=jn.DURATION,this._changeDuration=jn.CHANGE_DURATION}enabled(){return ne(this._enabled,this._defs&&this._defs._enabled)}setEnabled(t){t!==this._enabled&&(this._enabled=t,this.owner().autoScrollChanged(this))}mode(){return ne(this._mode,this._defs&&this._defs._mode)}setMode(t){this._mode=t}backward(){return ne(this._backward,this._defs&&this._defs._backward)}setBackward(t){this._backward=t}duration(){return le(this._duration,this._defs&&this._defs._duration,jn.DURATION)}setDuration(t){this._duration=t}changeDuration(){return le(this._changeDuration,this._defs&&this._defs._changeDuration,jn.CHANGE_DURATION)}setChangeDuration(t){this._changeDuration=t}}jn.DURATION=5e3,jn.CHANGE_DURATION=300;class Yn extends Se{_doInitDefaults(){this._target="_blank"}rootUrl(){return ne(this._rootUrl,this._defs&&this._defs._rootUrl)}setRootUrl(t){this._rootUrl=t}linkField(){return ne(this._linkField,this._defs&&this._defs._linkField)}setLinkField(t){this._linkField=t}linkCallback(){return ne(this._linkCallback,this._defs&&this._defs._linkCallback)}setLinkCallback(t){this._linkCallback=t}target(){return ne(this._target,this._defs&&this._defs._target)}setTarget(t){this._target=t}getLink(t,e,i){const s=this.linkCallback();let r;return s&&(r=s({control:t,row:i})),void 0!==r&&this.linkField&&(r=e.getValue(i,this.linkField(),!0)),(this.rootUrl()||"")+(r||"")}}(ir=zr=zr||{}).NONE="none",ir.PADDING="padding",ir.BAR="bar";class Qn extends Se{_doInitDefaults(){this._visible=!0,this._nearIndent=zr.BAR,this._farIndent=zr.NONE,this._skipLast=!1,this._skipGroupLast=!1,this._leafOnly=!1}visible(){return ne(this._visible,this._defs&&this._defs._visible)}setVisible(t){t!==this._visible&&(this._visible=t,this._changed())}style(){return ne(this._style,this._defs&&this._defs._style)}setStyle(t){t!==this._style&&(this._style=t,this._changed())}masterStyle(){return ne(this._masterStyle,this._defs&&this._defs._masterStyle)}setMasterStyle(t){t!==this._masterStyle&&(this._masterStyle=t,this._changed())}nearIndent(){return ne(this._nearIndent,this._defs&&this._defs._nearIndent)}setNearIndent(t){t!==this._nearIndent&&(this._nearIndent=t,this._changed())}farIndent(){return ne(this._farIndent,this._defs&&this._defs._farIndent)}setFarIndent(t){t!==this._farIndent&&(this._farIndent=t,this._changed())}skipLast(){return ne(this._skipLast,this._defs&&this._defs._skipLast)}setSkipLast(t){t!==this._skipLast&&(this._skipLast=t,this._changed())}skipGroupLast(){return ne(this._skipGroupLast,this._defs&&this._defs._skipGroupLast)}setSkipGroupLast(t){t!==this._skipGroupLast&&(this._skipGroupLast=t,this._changed())}leafOnly(){return ne(this._leafOnly,this._defs&&this._defs._leafOnly)}setLeafOnly(t){t!==this._leafOnly&&(this._leafOnly=t,this._changed())}}class Zn extends Se{_doInitDefaults(){this._visible=!0,this._nearIndent=zr.NONE,this._farIndent=zr.NONE}visible(){return ne(this._visible,this._defs&&this._defs._visible)}setVisible(t){t!==this._visible&&(this._visible=t,this._changed())}nearIndent(){return ne(this._nearIndent,this._defs&&this._defs._nearIndent)}setNearIndent(t){t!==this._nearIndent&&(this._nearIndent=t,this._changed())}farIndent(){return ne(this._farIndent,this._defs&&this._defs._farIndent)}setFarIndent(t){t!==this._farIndent&&(this._farIndent=t,this._changed())}}class Xn extends jn{_doInitDefaults(){super._doInitDefaults(),this._rowsPerScroll=1}rowsPerScroll(){return he(this._rowsPerScroll,this._defs&&this._defs._rowsPerScroll)}setRowsPerScroll(t){this._rowsPerScroll=t}}class Kn extends Se{constructor(t,e){super(t,e),this._link=new Yn(t,e&&e._link),this._borderLine=new Qn(t,e&&e._borderLine),this._focusMask=new Zn(t,e&&e._focusMask),this._autoScroll=new Xn(t,e&&e._autoScroll)}_doInitDefaults(){this._tempalte="row",this._clickAction=_.NONE,this._masterClickAction=_.EXPAND,this._pressAction=_.NONE,this._swipeAction=m.COMMAND,this._focusable=!1,this._touchEffect=!0,this._deleteAnimation=!0}template(){return ne(this._tempalte,this._defs&&this._defs._tempalte)}setTemplate(t){t!==this._tempalte&&(this._tempalte=t,this._changed())}largeTemplate(){return ne(this._largeTemplate,this._defs&&this._defs._largeTemplate)}setLargeTemplate(t){t!==this._largeTemplate&&(this._largeTemplate=t,this._changed())}templateCallback(){return ne(this._templateCallback,this._defs&&this._defs._templateCallback)}setTemplateCallback(t){t!==this._templateCallback&&(this._templateCallback=t,this._changed())}templateParams(){return Object.assign({},this.$_internalParams())}setTemplateParams(t){let e=!1;t?q.equalObjects(t,this._templateParams)||(this._templateParams=Object.assign({},t),e=!0):this._templateParams&&(this._templateParams=void 0,e=!0),e&&this._changed()}$_internalParams(){return ne(this._templateParams,this._defs&&this._defs._templateParams)}style(){return ne(this._style,this._defs&&this._defs._style)}setStyle(t){t=q.copyObject(t);t!==this._style&&(this._style=t,this._changed())}height(){return he(this._height,this._defs&&this._defs._height)}setHeight(t){t!==this._height&&(this._height=t,this._changed())}minHeight(){return he(this._minHeight,this._defs&&this._defs._minHeight)}setMinHeight(t){t!==this._minHeight&&(this._minHeight=t,this._changed())}maxHeight(){return he(this._maxHeight,this._defs&&this._defs._maxHeight)}setRowHeight(t){t!==this._maxHeight&&(this._maxHeight=t,this._changed())}clickAction(){return ne(this._clickAction,this._defs&&this._defs._clickAction)}setClickAction(t){t!==this._clickAction&&(this._clickAction=t,this._changed())}masterClickAction(){return ne(this._masterClickAction,this._defs&&this._defs._masterClickAction)}setMasterClickAction(t){t!==this._masterClickAction&&(this._masterClickAction=t,this._changed())}pressAction(){return ne(this._pressAction,this._defs&&this._defs._pressAction)}setPressAction(t){t!==this._pressAction&&(this._pressAction=t,this._changed())}masterPressAction(){return ne(this._masterPressAction,this._defs&&this._defs._masterPressAction)}setMasterPressAction(t){t!==this._masterPressAction&&(this._masterPressAction=t,this._changed())}swipeAction(){return ne(this._swipeAction,this._defs&&this._defs._swipeAction)}setSwipeAction(t){return this._swipeAction=t}commands(){const t=ne(this._commands,this._defs&&this._defs._commands);return t?t.slice(0):void 0}setCommands(t){q.equalArrays(t,this._commands)||(this._commands=t?t.slice(0):void 0,this._changed())}link(){return this._link}borderLine(){return this._borderLine}focusMask(){return this._focusMask}autoScroll(){return this._autoScroll}focusable(){return ne(this._focusable,this._defs&&this._defs._focusable)}setFocusable(t){return this._focusable=t}touchEffect(){return ne(this._touchEffect,this._defs&&this._defs._touchEffect)}setTouchEffect(t){this._touchEffect=t}deleteAnimation(){return ne(this._deleteAnimation,this._defs&&this._defs._deleteAnimation)}setDeleteAnimation(t){this._deleteAnimation=t}}class Jn extends Se{inflateParam(t,e,i){var s=this.templateParams2();if(s){i=i.name;const r=s[i];return"function"==typeof r?r({context:this,control:this.owner().wrapperOrThis(),param:i}):void 0!==r?r:void 0}}template(){return ne(this._template,this._defs&&this._defs._template)}setTemplate(t){this._template=t}templateParams2(){return ne(this._templateParams,this._defs&&this._defs._templateParams)}setTemplateParams2(t){this._templateParams=t}}class to extends Jn{_doInitDefaults(){}inflateParam(t,e,i){}inflateStock(t,e,i){switch(i.name){case"message_visible":return this.messageVisible();case"message":return this.message();case"load_visible":return this.loadVisible();case"load_label":return this.loadLabel();case"load_callback":return()=>this.onLoadClick()}}messageVisible(){return ne(this._messageVisible,this._defs&&this._defs._messageVisible)}setMessageVisible(t){this._messageVisible=t}message(){return ne(this._message,this._defs&&this._defs._message)}setMessage(t){t!==this._message&&(this._message=t,this._changed())}loadVisible(){return ne(this._loadVisible,this._defs&&this._defs._loadVisible)}setLoadVisible(t){this._loadVisible=t}loadLabel(){return ne(this._loadLabel,this._defs&&this._defs._loadLabel)}setLoadLabel(t){t!==this._loadLabel&&(this._loadLabel=t,this._changed())}onLoadClick(){return ne(this._onLoadClick,this._defs&&this._defs._onLoadClick)}setOnLoadClick(t){this._onLoadClick=t}}class eo extends Jn{_doInitDefaults(){}inflateStock(t,e,i){}}class io extends js{constructor(t){super(t,io.CLASS_NAME),this._expanded=!0}reset(t,e){this.setSize(t),e!==this._expanded&&(this._expanded=e,this._svg.clear(),this._svg.path(e?io.EXPANDED_PATH:io.COLLAPSED_PATH))}_doInitSvg(t){t.setViewSize(512),t.path(io.EXPANDED_PATH),t.setStyle({fill:"none",strokeWidth:48,strokeLinecap:"round",strokeLinejoin:"round"}),this.reset(18,!0)}_doClick(){}}io.CLASS_NAME="dlist-item-expander",io.EXPANDED_PATH="M 184 112 l 144 144 -144 144",io.COLLAPSED_PATH="M 112 184 l 144 144 144 -144";class so extends Hs{constructor(t){super(t,!0,"dlist-item-view"),this._prevStyles={},this._layoutChanged=!1,this.indent=0,this.bodyIndent=0,this.bodyMargin=0,this.detailed=!1,this.alternate=!1,this.checked=!1,this.selected=!1,this.searched=!1}layout(){return this._layout}layoutView(){return this._layoutView}isFixedHeight(){return!1}isFixedWidth(){return!1}setLayout(t){var e=t.layout,i=e._extra;this._layoutChanged=!this._layout||e.tid!==this._layout.tid||this._extra!=i||i&&i.tid!==this._extra.tid,this._layout=e,this._extra=i,this._rowStyle=t.rowStyle,this._rowProps=t.rowProps}simpleViewByModel(t,e){return this._layoutView instanceof Hn&&this._layoutView.simpleByModel(t,e)||this._extraView instanceof Hn&&this._extraView.simpleByModel(t,e)}simpleViewByDom(t,e){return this._layoutView instanceof Hn&&this._layoutView.simpleByDom(t,e)||this._extraView instanceof Hn&&this._extraView.simpleByDom(t,e)}simpleViewByTag(t,e){return this._layoutView instanceof Hn&&this._layoutView.simpleBy(t,e)||this._extraView instanceof Hn&&this._extraView.simpleBy(t,e)}fieldViewByField(t,e){return this._layoutView instanceof Hn&&this._layoutView.fieldBy(t,e)||this._extraView instanceof Hn&&this._extraView.fieldBy(t,e)}valueViewByTag(t,e){e=this._layoutView instanceof Hn&&this._layoutView.simpleBy(t,e)||this._extraView instanceof Hn&&this._extraView.simpleBy(t,e);return e instanceof Un?e:void 0}setTheme(t){Re.setData(this.dom,"theme",t)}setItemData(t,e){Re.setData(this.dom,t,e)}_getOverflow(){return"hidden"}_getContentPosition(){return"absolute"}_doPrepareExpander(t){var e=this._getExpander();e?(this._expanderPos=e.pos,this._expanderSize=e.size,this._expander?this._expander.setVisible(!0):(this._expander=new io(t),this.addChild(this._expander))):this._expander&&this._expander.setVisible(!1)}_doPrepareRender(t,e){const i=this._layout;this._owner=e,this._vertical=e.isVertical(),this._fullMode=e.owner().fullMode(),this.dom.dataset.dir=this._vertical?"v":"h",i.setRow(this.dv(),this.row(),this.gindex()),this._extra&&this._extra.setRow(this.dv(),this.row(),this.gindex()),this._doPrepareExpander(t),this._layoutChanged&&this._layoutView&&(this.removeChild(this._layoutView),this._layoutView=null,this._extraView&&(this.removeChild(this._extraView),this._extraView=null)),this._layoutView?(this._layoutView.refreshModels(i),this._extraView&&this._extraView.refreshModels(this._extra)):(this.addChild(this._layoutView=e.createLayoutView(t,i)),this._layoutView.dom.style.overflow="hidden",this._layoutView.build(t,e),this._extra&&(this.addChild(this._extraView=e.createLayoutView(t,this._extra)),this._extraView.dom.style.overflow="hidden",this._extraView.build(t,e))),this._layoutView.prepareLayout(t,this._owner),this._extraView&&this._extraView.prepareLayout(t,this._owner)}_doApplyStyles(t){function i(t){"string"==typeof t?e.classList.add(t):Object.assign(r,t)}const e=this.dom;for(var s in t=e.style,this._prevStyles)t[s]="";e.className=this.getItemClass();const r=this._prevStyles={};var n,o=this.getItemStyle(this._owner),a=this._rowStyle;for(n in o.itemDef&&i(o.itemDef),o.levelDef&&i(o.levelDef),a&&function(t,e){Object.assign(t,e.default),this.alternate&&e.alternate&&i(e.alternate),this.rowState===Zs.UPDATED?e.updated&&i(e.updated):this.rowState===Zs.DELETED&&e.deleted&&i(e.deleted),this.checked&&e.checked&&i(e.checked),this.selected&&e.selected&&i(e.selected),this.searched&&e.searched&&i(e.searched)}.call(this,r,a),o.dynamic&&i(o.dynamic),r)so.MANDATORY_STYLES.hasOwnProperty(n)||(t[n]=r[n])}_doMeasure(t,e,i){const s=this._layoutView;var r=this._vertical,n=e,o=i,a=this._padding=Re.getPadding(this.dom),h=a.left+a.right,a=a.top+a.bottom;this._szNear=this._doMeasureSide(ys.NEAR,r,e-=h,i-=a),this._szFar=this._doMeasureSide(ys.FAR,r,e,i),r?(e-=this.indent+this._szNear.width+this._szFar.width+this._owner.rightMargin,s._explicitWidth=e,s._explicitHeight=NaN,this.isFixedHeight()&&(s._explicitHeight=i)):(i-=this._szNear.height+this._szFar.height,s._explicitHeight=i,s._explicitWidth=NaN,this.isFixedWidth()&&(s._explicitWidth=e));const l=s.measureLayout(t,this._owner,e,i);return r?l.height=Math.max(l.height,this._szNear.height,this._szFar.height):l.width=Math.max(l.width,this._szNear.width,this._szFar.width),this._extraView&&(i=this._extraView.measureLayout(t,this._owner,e,i),l.width=Math.max(l.width,i.width),l.height+=i.height),r?(l.width=n,l.height+=a):(l.width+=h,l.height=o),l}_doRender(t,e,i){const s=this._layoutView,r=this._extraView;var n=this._padding;let o=this.indent,a=0;e-=this._owner.rightMargin+n.left+n.right,i-=n.top+n.bottom,this.setContentBounds(n.left,n.top,e,i),this._expander&&this._expander.visible&&(this._expanderPos===ys.NEAR?this._expander.move(this.indent,0):this._expander.move(e-this._expander.size()-2,0)),this._vertical?(0<this._szNear.width&&this._doRenderNear(!0,o,a,this._szNear.width,i),0<this._szFar.width&&this._doRenderFar(!0,e-this._szFar.width,a,this._szFar.width,i),o+=this._szNear.width,e-=this._szNear.width+this._szFar.width):(0<this._szNear.height&&this._doRenderNear(!1,o,a,e,this._szNear.height),0<this._szFar.height&&this._doRenderFar(!1,o,i-this._szFar.height,e,this._szFar.height),a+=this._szNear.height,i-=this._szNear.height+this._szFar.height);let h=i;r&&(h-=r.mh),s.resize(e,h).move(o,a),s.render(t),r&&(r.resize(e,r.mh).move(o,a+s.mh),r.render(t))}_doAfterRender(){this._layoutChanged=!1,this._owner=null}_getExpander(){}_isExpanded(){return!1}_doMeasureSide(t,e,i,s){return this._expander&&this._expander.visible&&t===this._expanderPos?(this._expander.reset(this._expanderSize,this._isExpanded()),{width:this._expander.size()+2,height:this._expander.size()+2}):{width:0,height:0}}_doRenderNear(t,e,i,s,r){}_doRenderFar(t,e,i,s,r){}$_borrowed(){if(!this._fullMode)for(let t=0;t<20;t++){const e=this.dom.getElementsByTagName("img");for(let t=0;t<e.length;t++)e[t].src=""}}}so.MANDATORY_STYLES={display:"block",position:"absolute",boxSizing:"content-box"};class ro extends so{static isRowView(t){return t.classList.contains(ro.ROW_CLASS)}dv(){return this._dv}row(){return this._row}model(){return this._model}group(){return this._model.group}gindex(){return this._gindex}vindex(){return isNaN(this._gindex)?this._row:this._gindex}get rowCell(){return this._rowCell}get editCell(){return this._editCell}getItemClass(){return ro.CLASS_NAME}isRow(t){return t===this._row}setRow(t,e,i,s){return this._dv=t,this.dom._row_=this._row=e,this._rowid=i,this._last=t.isLast(e),s?(this._model=s,this._groupLast=s.group.isLast(e),this._master=!s.isLeaf()):(this._model=void 0,this._groupLast=this._master=!1),this}setTouched(t){Re.setData(this.dom,"touched",t?"1":void 0)}getItemStyle(t){return t.owner().getRowStyle(this._row)}_getExpander(){if(this._model instanceof Je&&!this._model.isLeaf()){this.row();const i=this._owner.getExpander(this.row());if(i){var t=i.position(),e=t===Js.HEAD?ys.NEAR:t===Js.FOOT?ys.FAR:void 0;if(t)return{pos:e,size:18}}}}_isExpanded(){return this._model instanceof Je&&this._model.group.expanded()}_doPrepareRender(t,e){super._doPrepareRender(t,e);var i=e.rowBar,s=e.editBar,r=e.borderLine;let n=this._rowCell,o=this._editCell,a=this._line,h;this.searched&&(h=e.isVertical()?"vs":"hs"),h&&Re.setData(this.dom,"state",h),i?(n=n||(this._rowCell=new Pn(t)),n.parent||this.addChild(n)):n&&n.parent&&this.removeChild(n),s?(o=o||(this._editCell=new Mn(t)),o.parent||this.addChild(o)):o&&o.parent&&this.removeChild(o),r&&e.rowBorderVisible(this)?(a||(a=this._line=t.createElement("span"),a.className="dlist-row-border",Object.assign(a.style,ro.LINE_STYLES)),e=this._master?e.owner().rowBorder.masterStyle:e.owner().rowBorder.style,Object.assign(a.style,{width:"",height:"",borderBottom:this._vertical?e:"",borderRight:this._vertical?"":e}),a.parentElement||this.dom.appendChild(a)):a&&a.parentNode&&a.remove()}_doMeasureSide(t,e,i,s){const r=this._owner.rowBar,n=this._owner.editBar;let{width:o,height:a}=super._doMeasureSide(t,e,i,s);if(e){if(r&&r.position()===t){const _=this._rowCell;var h=_.measure(r,this._dv,this._row,i,s),e=he(r.size(),h.width);_.wCell=e,_.wMeasure=Math.min(h.width,e),o+=e+r.gapHorz(),a=h.height}if(n&&n.position()===t){const c=this._editCell;var l=c.measure(n,this._dv,this._row,i,s),d=he(n.size(),l.width);c.wCell=d,c.wMeasure=Math.min(l.width,d),o+=d+n.gapHorz(),a=Math.max(a,l.height)}}else{if(r&&r.position()===t){const u=this._rowCell;d=u.measure(r,this._dv,this._row,i,s),l=he(r.size(),d.height);u.hCell=l,u.hMeasure=Math.min(d.height,l),a+=l+r.gapVert(),o=d.width}if(n&&n.position()===t){const g=this._editCell;i=g.measure(n,this._dv,this._row,i,s),s=he(n.size(),i.height);g.wCell=s,g.wMeasure=Math.min(i.height,s),a+=s+n.gapVert(),o=Math.max(o,i.width)}}return{width:o,height:a}}_doMeasure(t,e,i){const s=super._doMeasure(t,e,i);return this._line&&this._line.parentNode?this._vertical?s.height+=this._szLine=this._line.offsetHeight:s.width+=this._szLine=this._line.offsetWidth:this._szLine=0,s}_doRenderNear(t,e,i,s,r){var n=this._owner;const o=n.rowBar,a=n.editBar;if(t){if(o&&o.position()===ys.NEAR){const h=this._rowCell;h.hRelative&&(h.hMeasure=h.dom.offsetHeight),h.resize(h.wCell,r),h.move(e,0),h.render(o,h.width,h.height),e+=h.wCell+o.gapRight()}if(a&&a.position()===ys.NEAR){const l=this._editCell;l.hRelative&&(l.hMeasure=l.dom.offsetHeight),l.resize(l.wCell,r),l.move(e,0),l.render(a,l.width,l.height)}}else{if(o&&o.position()===ys.NEAR){const d=this._rowCell;d.resize(s,d.wCell),d.move(0,i),d.render(o,d.width,d.height),i+=d.hCell+o.gapBottom()}if(a&&a.position()===ys.NEAR){const _=this._editCell;_.resize(s,_.wCell),_.move(0,i),_.render(a,_.width,_.height)}}}_doRenderFar(t,e,i,s,r){var n=this._owner;const o=n.rowBar,a=n.editBar;if(t){if(a&&a.position()===ys.FAR){const h=this._editCell;e+=a.gapRight(),h.hRelative&&(h.hMeasure=h.dom.offsetHeight),h.resize(h.wCell,r),h.move(e,0),h.render(a,h.width,h.height),e+=h.wCell+a.gapLeft()}if(o&&o.position()===ys.FAR){const l=this._rowCell;e+=o.gapRight(),l.hRelative&&(l.hMeasure=l.dom.offsetHeight),l.resize(l.wCell,r),l.move(e,0),l.render(o,l.width,l.height)}}else{if(a&&a.position()===ys.FAR){const d=this._editCell;i+=a.gapBottom(),d.resize(s,d.wCell),d.move(0,i),d.render(a,d.width,d.height),i+=d.hCell+a.gapTop()}if(o&&o.position()===ys.FAR){const _=this._rowCell;i+=o.gapBottom(),_.resize(s,_.wCell),_.move(0,i),_.render(o,_.width,_.height)}}}getNearIndent(t){switch(t){case zr.BAR:return(0<this._szNear.width?this._padding.left:0)+this._szNear.width;case zr.PADDING:return this._padding.left}return 0}getFarIndent(t){switch(t){case zr.BAR:return(0<this._szFar.width?this._padding.right:0)+this._szFar.width;case zr.PADDING:return this._padding.right}return 0}_doRender(t,e,i){var s;super._doRender(t,e,i),this._line&&this._line.parentNode&&(s=this._szLine,this._vertical?(e-=(t=this.getNearIndent(this._owner.borderLine.nearIndent()))+this.getFarIndent(this._owner.borderLine.farIndent()),Re.setBounds(this._line,t,i-s,e,s)):Re.setBounds(this._line,e-s,0,s,i))}}ro.ROW_CLASS="dlist-row",ro.CLASS_NAME="dlist-item "+ro.ROW_CLASS,ro.LINE_STYLES={position:"absolute",boxSizing:"border-box",margin:"0",padding:"0"},(ir=Hr=Hr||{}).SUBMIT="submit",ir.CANCEL="cancel";class no extends a{constructor(t){super(),this.visible=!0,this._setDefaults(),"string"==typeof t?this.name=t:t&&Object.assign(this,t)}get style(){return this._style&&Object.assign({},this._style)}set style(t){this._style=t&&Object.assign({},t)}isEnabled(t){return"function"==typeof this.enabled?this.enabled({control:t,button:this.getProxy()}):this.enabled}getStyle(){return this._style}update(t){t&&Object.assign(this,t)}click(t){var e;null!==(e=this.onClick)&&void 0!==e&&e.call(this,{control:t.wrapperOrThis(),button:this.getProxy()})}getProxy(){return{name:this.name,label:this.label,state:this.state}}_setDefaults(){this.enabled=!0}}(ir=Wr=Wr||{}).AUTO="auto",ir.TOP="top",ir.BOTTOM="bottom",ir.LEFT="left",ir.RIGHT="right",ir.CENTER="center",(ir=Gr=Gr||{}).POPUP="popup",ir.PUSH="push";class oo extends Le{constructor(t,e){super(t),(this._defs=e)||this._doInitDefaults()}_doInitDefaults(){this._position=Wr.AUTO,this._showMode=Gr.POPUP}owner(){return this.control()}isFullWidth(){var t=this.getPosition();return t===Wr.TOP||t===Wr.BOTTOM}isFullHeight(){var t=this.getPosition();return t===Wr.LEFT||t===Wr.RIGHT}position(){return ne(this._position,this._defs&&this._defs._position)}setPosition(t){this._position=t}showMode(){return ne(this._showMode,this._defs&&this._defs._showMode)}setShowMode(t){this._showMode=t}size(){return ne(this._size,this._defs&&this._defs._size)}setSize(t){t!==this._size&&(this._size=t,this._szSize=it(t,!1))}minSize(){return ne(this._minSize,this._defs&&this._defs._minSize)}setMinSize(t){t!==this._minSize&&(this._minSize=t,this._szMin=it(t,!1))}maxSize(){return ne(this._maxSize,this._defs&&this._defs._maxSize)}setMaxSize(t){t!==this._maxSize&&(this._maxSize=t,this._szMax=it(t,!1))}style(){return ne(this._style,this._defs&&this._defs._style)}setStyle(t){this._style=t}getPosition(){let t=this.position();return t&&t!==Wr.AUTO||(t=this._getAutoPosition()),t}getSize(t,e){var i=this._szSize||this._defs&&this._defs._szSize,s=this._szMin||this._defs&&this._defs._szMin,r=this._szMax||this._defs&&this._defs._szMax,i=rt(i,t),s=rt(s,t),t=rt(r,t);return isNaN(i)?isNaN(e)?s:q.clamp(e,s,t):q.clamp(i,s,t)}_getAutoPosition(){return Wr.TOP}}class ao extends oo{constructor(){super(...arguments),this._buttonGap=16}buttons(){return ne(this._buttons,this._defs&&this._defs._buttons)}setButtons(t){t!==this._buttons&&(this._buttons=t,this._buttonImpls=[],t&&t.forEach(t=>this._buttonImpls.push(new no(t))),this._changed())}buttonGap(){return ne(this._buttonGap,this._defs&&this._defs._buttonGap)}setButtonGap(t){(t=q.toNumber(t,0))!==this._buttonGap&&(this._buttonGap=t,this._changed())}getButtons(){return void 0!==this._buttonImpls?this._buttonImpls:this._defs&&this._defs._buttonImpls}getButton(e){return this.getButtons().find(t=>t.name===e)}}(ir=Ur=Ur||{}).AUTO="auto",ir.HIDDEN="hidden",ir.BOTTOM="bottom",ir.LEFT="left",ir.RIGHT="right";class ho extends ao{_doInitDefaults(){super._doInitDefaults(),this._buttonPosition=Ur.AUTO,this._cancelLabel="Cancel",this._okLabel="OK"}buttonPosition(){return ne(this._buttonPosition,this._defs&&this._defs._buttonPosition)}setButtonPosition(t){this._buttonPosition=t}cancelLabel(){return ne(this._cancelLabel,this._defs&&this._defs._cancelLabel)}setCancelLabel(t){this._cancelLabel=t}okLabel(){return ne(this._okLabel,this._defs&&this._defs._okLabel)}setOkLabel(t){this._okLabel=t}getButtons(){let t=super.getButtons();return(!t||t.length<1)&&(t=this._defButtons,t?(t[0].label=this.okLabel(),t[1].label=this.cancelLabel()):t=this._defButtons=[{name:ho.OK,type:Hr.SUBMIT,label:this.okLabel()},{name:ho.CANCEL,type:Hr.CANCEL,label:this.cancelLabel()}].map(t=>new no(t))),t}okButton(){return this.getButton(ho.OK)}cancelButton(){return this.getButton(ho.CANCEL)}}ho.OK="ok",ho.CANCEL="cancel",(ir=qr=qr||{}).AUTO="auto",ir.DEFAULT="default",ir.VERTICAL="vertical";class lo extends ao{constructor(t,e){super(t,e)}_doInitDefaults(){super._doInitDefaults(),this._arrange=qr.AUTO,this.setMinSize(lo.MIN_SIZE)}arrange(){return ne(this._arrange,this._defs&&this._defs._arrange)}setArrange(t){this._arrange=t}align(){return ne(this._align,this._defs&&this._defs._align)}setAlign(t){this._align=t}getDisplay(t){var e=this.arrange()||qr.AUTO,i=this.getPosition();return e!==qr.AUTO?e:!t&&(i===Wr.LEFT||i===Wr.RIGHT)?qr.VERTICAL:qr.DEFAULT}}lo.TYPE="button",lo.MIN_SIZE=30;class _o extends ho{constructor(t,e){super(t,e)}_doInitDefaults(){super._doInitDefaults(),this.setMinSize(_o.MIN_SIZE)}inflateParam(t,e,i){}inflateStock(t,e,i){}template(){return ne(this._template,this._defs&&this._defs._template)}setTemplate(t){this._template=t}getTemplate(){return this.owner().getTemplate(this._actionTemplate||this.template())}getLayout(){var t=this.getTemplate();return this._actionTemplate=null,ms.Instance.layoutFromTemplate(this.wrapperOrThis(),this,!1,!1,t,this)}_doPrepareRender(){}_setActionTemplate(t){this._actionTemplate=t}}_o.TYPE="form",_o.MIN_SIZE=20,(ir=jr=jr||{}).AUTO="auto",ir.DEFAULT="default",ir.LONG="long",ir.VERTICAL="vertical";class co extends ho{_doInitDefaults(){super._doInitDefaults(),this._display=jr.AUTO,this._matchCaseLabel="대소문자 구분",this._wholeWordLabel="전체 단어 일치",this._regExpLabel="정규식 사용",this._searchNextLabel="다음 찾기",this._searchAllLabel="모두 찾기",this._lineGap=12,this.setOkLabel("검 색"),this.setCancelLabel("취 소")}display(){return ne(this._display,this._defs&&this._defs._display)}setDisplay(t){this._display=t}matchCaseLabel(){return ne(this._matchCaseLabel,this._defs&&this._defs._matchCaseLabel)}setMatchCaseLabel(t){this._matchCaseLabel=t}wholeWordLabel(){return ne(this._wholeWordLabel,this._defs&&this._defs._wholeWordLabel)}setWholeWordLabel(t){this._wholeWordLabel=t}regExpLabel(){return ne(this._regExpLabel,this._defs&&this._defs._regExpLabel)}setRegExpLabel(t){this._regExpLabel=t}searchNextLabel(){return ne(this._searchNextLabel,this._defs&&this._defs._searchNextLabel)}setSearchNextLabel(t){this._searchNextLabel=t}searchAllLabel(){return ne(this._searchAllLabel,this._defs&&this._defs._searchAllLabel)}setSearchAllLabel(t){this._searchAllLabel=t}lineGap(){return ne(this._lineGap,this._defs&&this._defs._lineGap)}setLineGap(t){this._lineGap=ae(t,void 0)}alwaysResult(){return ne(this._alwaysResult,this._defs&&this._defs._alwaysResult)}setAlwaysResult(t){this._alwaysResult=t}getDisplay(t){var e=this.display()||jr.AUTO,i=this.getPosition();return e!==jr.AUTO?e:t?jr.LONG:i===Wr.LEFT||i===Wr.RIGHT?jr.VERTICAL:jr.DEFAULT}search(t,e){this.owner().search(e,t)}}co.TYPE="search";const uo={string:Ss.TEXT,number:Ss.NUMBER,boolean:Ss.BOOL,bigint:Ss.BIGINT};function go(t,e){const i=[];for(var s of e){var r=t.fieldByName(s);r||ar.throwFormat(t.wrapperOrThis(),Z.notExistsDataField,s),i.push(r)}return i}function po(t,s,r,n){const o={count:0,sum:0,min:NaN,max:NaN,avg:NaN,std:NaN,stdp:NaN,var:NaN,varp:NaN,ncount:0,nmin:NaN,nmax:NaN,navg:NaN,nstd:NaN,nstdp:NaN,nvar:NaN,nvarp:NaN};r=isNaN(r)?0:Math.max(0,r),n=isNaN(n)?s.length:Math.min(s.length,n)+1;var a=o.count=n-r;if(o.count<1)return o;var h=t.name;let l=0,d=0,_=NaN,c=NaN,e=r;for(;e<n;){var i=s[e++].values[h];if(!isNaN(i)){l++,d=_=c=i;break}}for(;e<n;){var u=s[e++].values[h];isNaN(u)||(l++,d+=u,u<_&&(_=u),u>c&&(c=u))}if(0<l){o.sum=d,o.min=_,o.max=c,o.avg=d/a,o.ncount=l,o.navg=d/l;var g=o.avg,p=o.navg;let t=0,e=0,i=r;for(;i<n;){var f=s[i++].values[h];isNaN(f)||(t+=Math.pow(f-g,2),e+=Math.pow(f-p,2))}o.varp=t/a,o.var=t/(a-1),o.stdp=Math.sqrt(o.varp),o.std=Math.sqrt(o.var),o.nvarp=e/l,o.nvar=e/(l-1),o.nstdp=Math.sqrt(o.nvarp),o.nstd=Math.sqrt(o.nvar)}return o}(ir=Yr=Yr||{}).JSON="json",ir.FIELD="field",ir.CSV="csv",ir.TSV="tsv";const fo="sv:lines";class wo extends gr{constructor(t,e,i,s){super(t),this._readOnly=!1,this._softDeleting=!1,this._restorable=!1,this._wrapper=s,Object.freeze(this._args={data:this}),this._title=(e="string"==typeof e?{name:e}:e||{}).title,this._readOnly=!!e.readOnly,this._restorable=!!e.restorable,this._softDeleting=!!e.softDeleting,this._validator=q.asFunction(e.validator),this._fields=this.$_buildFields(e,i),Array.isArray(this._fields)&&0!==this._fields.length||ar.throw(this.wrapperOrThis(),Z.notSpecifiedDataField),this._derivedFields=this.$_buildDerivedFields(e.derivedFields),this._fieldNames=this._fields.map(t=>t.name).concat(this._derivedFields.map(t=>t.name)),this._fieldMap={};for(var r of this._fields)this._fieldMap[r.name]=r;this._derivedMap={};for(var n of this._derivedFields)this._fieldMap[n.name]=n,this._derivedMap[n.name]=n;this.$_loadRows(i)}wrapper(){return this._wrapper}wrapperOrThis(){return this._wrapper||this}title(){return this._title}readOnly(){return this._readOnly}softDeleting(){return this._softDeleting}restorable(){return this._restorable}validator(){return this._validator}fieldCount(){return this._fields.length}rowCount(){return this._rows.length}setRowCount(t){var e,i;isNaN(t)||t===this._rows.length||(e=this.wrapperOrThis(),i=this._rows.length,function(e,i,s){if(s<(e.length=i))for(let t=s;t<i;t++)e[t]=void 0}(this._rows,t,i),this.onRowCountChange&&this.onRowCountChange({data:e,newCount:t,oldCount:i}),this.$_triggerDataChange(e))}visRowCount(){return this._rows.length}fields(){return this._fields.slice(0)}derivedFields(){return this._derivedFields.slice(0)}source(){return this}canSort(){return!1}canMove(){return!1}getRowId(t){return this._rows[t].id}levelRowOfRow(t){return t}getDataRow(t){return this._rows[t]}rowOfDataRow(t){return this._rows.indexOf(t)}isLast(t){return t===this._rows.length-1}isMaster(t){return!1}containsField(t){return t in this._fieldMap}getField(t){return(t<0||t>=this._fields.length)&&ar.throwFormat(this.wrapperOrThis(),Z.invalidFieldIndex,t),this._fields[t]}fieldByName(t){return this._fieldMap[t]}getFieldNames(){return this._fieldNames.slice(0)}isSortable(t){t=this._fieldMap[t];return t&&t.sortable}setSortable(t,e){if(Array.isArray(t))for(const i of t){const s=this._fieldMap[i];s&&(s.sortable=e)}else{const r=this._fieldMap[t];r&&(r.sortable=e)}}isEmpty(t){return!this._rows[t]}getRowValues(t){return gr.checkRow(this,t),Object.assign({},this._rows[t].values)}internalRowValues(t){return Object.assign({},this._rows[t].values)}getValue(t,e,i){gr.checkRow(this,t),i&&this.checkField(e);t=this._rows[t];return t?t.values[e]:void 0}getProp(t,e,i,s){return gr.checkRow(this,t),s&&this.checkField(e),this._rows[t].getProp(e,i)}getValueAt(t,e){gr.checkRow(this,t),(e<0||e>=this._fields.length)&&ar.throwFormat(this.wrapperOrThis(),Z.invalidFieldIndex,e);t=this._rows[t];return t?t.values[this._fields[e].name]:void 0}getValues(t,e,i){if(Array.isArray(e)){gr.checkRow(this,t);const r={};var s=this._rows[t];if(s){const n=s.values;e.forEach(t=>{i&&this.checkField(t),r[t]=n[t]})}return r}return this.getRowValues(t)}getFieldValues(t,e,i){this.checkField(t);var s=this._rows;isNaN(e)?e=0:this.$_checkRow(e,!1),isNaN(i)||i<0?i=s.length:this.$_checkRow(i,!0);const r=[];for(;e<i;){var n=s[e++];n&&r.push(n.values[t])}return r}$_loadRows(t){t?(this._rows=this.$_buildRows(t),this.$_resetIndices(0)):this._rows=[]}loadData(t){var e=this.wrapperOrThis(),i=this._rows.length;this.$_loadRows(t);t=this._rows.length;return this._fireEvent("onDataLoaded",i),t!==i?(this._fireEvent("onDataCountChanged",t,i),this._fireEvent("onDataChanged"),this.onRowCountChange&&this.onRowCountChange({data:e,newCount:t,oldCount:i}),this.$_triggerDataChange(e)):0<t&&(this._fireEvent("onDataChanged"),this.$_triggerDataChange(e)),this}updateValue(t,e,i){this.$_checkReadOnly(),this.$_checkRow(t,!1),this.checkField(e);var s=this._fieldMap;let r=this._rows[t];r=r||(this._rows[t]=or.createRow2(this._fieldMap,this._derivedMap,void 0));const n=r.values;var o=n[e];if(i===o)return!1;var a=this.wrapperOrThis();return this.$_validate(s[e],i),n[e]=i,this.$_clearDerived(n),r.state=Zs.UPDATED,this._fireEvent("onDataValueUpdated",t,e,i,o),this._fireEvent("onDataChanged"),this.onValueUpdate&&this.onValueUpdate({data:a,row:t,field:e,value:i,oldValue:o}),this.$_triggerDataChange(a),!0}$_updateRow(t,e,i,s){var r=this._fieldMap,n=t.values;let o=n?Object.assign({},n):void 0,a=!1;if(q.isObject(e))if(o)for(var h of this._fieldNames)(i||h in e)&&o[h]!==e[h]&&(this.$_validate(r[h],e[h]),o[h]=e[h],a=!0);else o=Object.assign({},e),a=!0;else o&&i&&(o={},a=!0);return a&&(this.$_validateRow(t.row,o),t.values=o,this.$_clearDerived(n),t.state!==Zs.UPDATED&&(this._restorable&&(t.save=n),t.state=Zs.UPDATED,s?s.push(t):this._fireEvent("onDataStateChanged",t.row))),a}updateRow(t,e,i){this.$_checkReadOnly(),this.$_checkRow(t,!1),this._rows[t]||(this._rows[t]=or.createRow2(this._fieldMap,this._derivedMap,void 0));var s=this.$_checkUpdate(this._rows[t]),r=s.values,e=this.$_updateRow(s,e,i,null);return e&&(this._fireEvent("onDataRowUpdated",t,r),this._fireEvent("onDataChanged"),i=this.wrapperOrThis(),this.onRowUpdate&&this.onRowUpdate({data:i,row:t,oldValues:r}),this.$_triggerDataChange(i)),e}updateRows(e,i,s){if(!Array.isArray(e))return[];if(1===e.length){if(this.updateRow(e[0],i[0],s))return[e[0]]}else{this.$_checkReadOnly(),this.$_checkRows(e,!1);var r=Math.min(e.length,i.length);const o=[];for(let t=0;t<r;t++){var n=e[t];this._rows[n]||(this._rows[n]=or.createRow2(this._fieldMap,this._derivedMap,void 0));n=this.$_checkUpdate(this._rows[n]);this.$_updateRow(n,i[t],s,o)}if(0<o.length){e=o.map(t=>t.row),this._fireEvent("onDataRowsUpdated",e),this._fireEvent("onDataChanged");var t=this.wrapperOrThis();return this.onRowsUpdate&&this.onRowsUpdate({data:t,rows:e}),this.$_triggerDataChange(t),e}}return[]}updateRange(e,i,s,r){if(i<1||!Array.isArray(s)||s.length<1)return!1;if(1===i)return this.updateRow(e,s[0],r);this.$_checkReadOnly(),this.$_checkRow(e,!1);const n=this._rows,o=[];var t;i=Math.min(i,s.length);for(let t=0;t<i;t++){var a=e+t;n[a]||(n[a]=or.createRow2(this._fieldMap,this._derivedMap,void 0));a=this.$_checkUpdate(n[a]);this.$_updateRow(a,s[t],r,o)}if(t=0<o.length){const n=o.map(t=>t.row);this._fireEvent("onDataRowsUpdated",n),this._fireEvent("onDataChanged");var h=this.wrapperOrThis();this.onRowsUpdate&&this.onRowsUpdate({data:h,rows:n}),this.$_triggerDataChange(h)}return t}deleteAll(t){var e=this._rows.length;if(0<e){this.$_checkReadOnly();var i=this.wrapperOrThis();if(this._softDeleting&&!t){const s=[],r=this._rows;for(let t=0;t<e;t++)r[t].state!==Zs.DELETED&&(r[t].state=Zs.DELETED,s.push(t));0<s.length&&(this._fireEvent("onDataStatesChanged",s),this.onRowStatesChange&&this.onRowStatesChange({data:i,rows:s}))}else this._rows=[],this._flags._cleared(e),this._fireEvent("onDataCleared",e),this._fireEvent("onDataCountChanged",0,e),this._fireEvent("onDataChanged"),this.onRowsClear&&this.onRowsClear({data:i,oldCount:e}),this.onRowCountChange&&this.onRowCountChange({data:i,newCount:0,oldCount:e});return this.$_triggerDataChange(i),!0}return!1}deleteRow(t,e){this.$_checkReadOnly(),this.$_checkRow(t,!1);var i=this.wrapperOrThis();const s=this._rows,r=s[t];var n=r.id;this._softDeleting&&!e?r.state!==Zs.DELETED&&(r.state=Zs.DELETED,this._fireEvent("onDataStateChanged",t),this.onRowStateChange&&this.onRowStateChange({data:i,row:t})):(s.splice(t,1),this.$_resetIndices(t),this._flags._rowDeleted(t),this._fireEvent("onDataRowDeleted",t,n),this._fireEvent("onDataCountChanged",s.length,s.length+1),this._fireEvent("onDataChanged"),n=s.length,this.onRowDelete&&this.onRowDelete({data:i,row:t,values:r.values}),this.onRowCountChange&&this.onRowCountChange({data:i,newCount:n,oldCount:n+1})),this.$_triggerDataChange(i)}deleteRows(s,e){if(Array.isArray(s)&&0<s.length){this.$_checkReadOnly(),this.$_checkRows(s,!1);const n=this._rows.length;if(1<(s=q.dedupe(s.filter(t=>0<=t&&t<n))).length){var r=this.wrapperOrThis();const o=[];let i,t=0;if(s=s.sort((t,e)=>t-e),this._softDeleting&&!e){i=[];for(let t=0,e=s.length;t<e;t++){const a=this._rows[s[t]];a.state!==Zs.DELETED&&(a.state=Zs.DELETED,i.push(s[t]))}0<i.length&&(t=i.length,this._fireEvent("onDataStatesChanged",i))}else{for(let t=s.length-1;0<=t;t--)o.push(this._rows[s[t]].id),this._rows.splice(s[t],1);this.$_resetIndices(0),this._flags._rowsDeleted(s),this._fireEvent("onDataRowsDeleted",s,o),this._fireEvent("onDataCountChanged",this._rows.length,n),this._fireEvent("onDataChanged"),t=s.length,this.onRowsDelete&&this.onRowsDelete({data:r,rows:s}),this.onRowCountChange&&this.onRowCountChange({data:r,newCount:n-t,oldCount:n}),i=s}return this.$_triggerDataChange(r),i}return this.deleteRow(s[0],e),[s[0]]}return[]}deleteRange(i,s,t){if(this.$_checkReadOnly(),this.$_checkRow(i,!1),isNaN(s)||s<=0)return 0;const r=this._rows;var e=r.length;if(0<(s=Math.min(e-i,s))){var n=this.wrapperOrThis();if(this._softDeleting&&!t){const o=[];for(let t=i,e=i+s;t<e;t++){const a=r[t];a.state!==Zs.DELETED&&(a.state=Zs.DELETED,o.push(t))}0<o.length&&this._fireEvent("onDataStatesChanged",o)}else r.splice(i,s),this.$_resetIndices(i),this._flags._rangeDeleted(i,s),this._fireEvent("onDataRangeDeleted",i,s),this._fireEvent("onDataCountChanged",this._rows.length,e),this._fireEvent("onDataChanged"),this.onRowRangeDelete&&this.onRowRangeDelete({data:n,row:i,count:s}),this.onRowCountChange&&this.onRowCountChange({data:n,newCount:e-s,oldCount:e});this.$_triggerDataChange(n)}return s}$_checkInsert(t,e){var i,s=this._fieldMap;const r={};for(i in this._fieldMap)!(i in e)||void 0===e[i]?void 0!==s[i].default&&(r[i]=s[i].default):r[i]=e[i],this.$_validate(s[i],r[i]);return this.$_validateRow(t,r),r}insertRow(t,e){if(this.$_checkReadOnly(),this.$_checkRow(t,!0),q.isObject(e)){const s=this._rows;var i=s.length,e=or.createRow2(this._fieldMap,this._derivedMap,e=this.$_checkInsert(-1,e));s.splice(t,0,e),this.$_resetIndices(t),this._flags._rowAdded(t),this._fireEvent("onDataRowAdded",t),this._fireEvent("onDataCountChanged",i,i-1),this._fireEvent("onDataChanged");e=this.wrapperOrThis();return this.onRowAdd&&this.onRowAdd({data:e,row:t}),this.onRowCountChange&&this.onRowCountChange({data:e,newCount:i-1,oldCount:i}),this.$_triggerDataChange(e),!0}return!1}appendRow(t){return this.insertRow(this._rows.length,t)}insertRows(e,i){this.$_checkReadOnly(),this.$_checkRow(e,!0);let s;if(q.isObject(i))s=this.$_buildRows(i);else if(Array.isArray(i)&&0<i.length){var r=this._fieldMap,n=this._derivedMap;s=[];for(let t=0;t<i.length;t++){var o=i[t];q.isObject(o)&&s.push(or.createRow2(r,n,this.$_checkInsert(-1,o)))}}const a=this._rows;var h=s?s.length:0;if(0<h){var t=a.length;if(e>=a.length)for(let t=0;t<h;t++)a.push(s[t]);else for(let t=0;t<h;t++)a.splice(e+t,0,s[t]);this.$_resetIndices(e),this._flags._rowRangeAdded(e,h),this._fireEvent("onDataRowsAdded",e,h),this._fireEvent("onDataCountChanged",t+h,t),this._fireEvent("onDataChanged");var l=this.wrapperOrThis();this.onRowsAdd&&this.onRowsAdd({data:l,row:e,count:h}),this.onRowCountChange&&this.onRowCountChange({data:l,newCount:t+h,oldCount:t}),this.$_triggerDataChange(l)}return a.length}appendRows(t){return this.insertRows(this._rows.length,t)}findRow(t,e=0,i=-1){return or.findRow(this._rows,t,e,i)}findRows(t,e=0,i=-1){return or.findRows(this._rows,t,e,i)}findDistinctRows(t,e=0,i=-1){return or.findDistinctRows(this._rows,t,e,i)}getSummary(t,e,i){t=this.fieldByName(t);return t&&po(t,this._rows,e,i)}getRowState(t){return this.$_checkRow(t,!1),this._rows[t].state}internalRowState(t){return this._rows[t].state}$_restore(t){return t.state===Zs.UPDATED&&this._restorable?(t.values=t.save,delete t.save,delete t.state,!0):t.state===Zs.DELETED&&(delete t.state,!0)}restoreRow(t){if(this.$_checkReadOnly(),this.$_checkRow(t,!1),this.$_restore(this._rows[t])){this._fireEvent("onDataStateChanged",t),this._fireEvent("onDataChanged");var e=this.wrapperOrThis();return this.onRowStateChange&&this.onRowStateChange({data:e,row:t}),this.$_triggerDataChange(e),!0}return!1}restoreRows(t){if(!Array.isArray(t))return[];this.$_checkReadOnly(),this.$_checkRows(t,!1);const e=this._rows,i=[];return t.forEach(t=>{this.$_restore(e[t])&&i.push(t)}),i}restoreAllRows(){let e=0;return this._rows.forEach(t=>{this.$_restore(t)&&e++}),e}restoreUpdatedRows(){let e=0;return this._rows.forEach(t=>{t.state===Zs.UPDATED&&this.$_restore(t)&&e++}),e}restoreDeletedRows(){let e=0;return this._rows.forEach(t=>{t.state===Zs.DELETED&&this.$_restore(t)&&e++}),e}moveRow(t,e){if(this.$_checkRow(t,!1),this.$_checkRow(e,!1),t===e)return!1;{var i=this.wrapperOrThis();const r=this._rows;var s=r.splice(t,1)[0];return r.splice(e,0,s),this.$_resetIndices(Math.min(t,e)),this._flags._rowMoved(t,e),this._fireEvent("onDataRowMoved",t,e),this._fireEvent("onDataChanged"),this.onRowMove&&this.onRowMove({data:i,from:t,to:e}),this.$_triggerDataChange(i),!0}}moveRows(t,e,i){const s=this._rows;if(e=Math.min(e,s.length-t),i>s.length-e&&ar.throwFormat(this.wrapperOrThis(),Z.invalidToIndex,i),1===e){if(this.moveRow(t,i))return 1}else if(t!==i&&1<e){this.$_checkRow(t,!1),this.$_checkRow(i,!0);var r=this.wrapperOrThis(),n=s.splice(t,e);return s.splice.apply(s,[i,0].concat(n)),this.$_resetIndices(Math.min(t,i)),this._flags._rowsMoved(t,e,i),this._fireEvent("onDataRowsMoved",t,e,i),this._fireEvent("onDataChanged"),this.onRowsMove&&this.onRowsMove({data:r,from:t,count:e,to:i}),this.$_triggerDataChange(r),e}return 0}$_triggerDataChange(t){this.onDataChange&&(this._args.data=t,this.onDataChange(this._args))}$_checkReadOnly(){this._readOnly&&ar.throw(this.wrapperOrThis(),Z.canNotModifyData)}$_checkRow(t,e){(t<0||t>=this._rows.length+(e?1:0))&&ar.throwFormat(this.wrapperOrThis(),Z.invalidRowIndex,t)}$_checkRows(t,e){const i=this._rows.length+(e?1:0);t.forEach(t=>{(t<0||t>=i)&&ar.throwFormat(this.wrapperOrThis(),Z.invalidRowIndex,t)})}$_checkUpdate(t){return t.state===Zs.DELETED&&ar.throwFormat(this.wrapperOrThis(),Z.canNotModifyDeleted,t.row),t}checkField(t){t in this._fieldMap||t in this._derivedMap||ar.throwFormat(this.wrapperOrThis(),Z.invalidFieldName,t)}$_validate(t,e){var i=this.wrapperOrThis();if((null==e||""===e)&&t.required)throw new hr(i,t,K(Z.requiredField,t.displayText()));if(t.domain&&t.domain.indexOf(e)<0)throw new hr(i,t,K(Z.invalidValueInDomain,t.displayText()));if(void 0!==t.minimum&&e<t.minimum||void 0!==t.maximum&&e>t.maximum)throw new hr(i,t,K(Z.invalidValueInRange,t.displayText()))}$_validateRow(t,e){if(this._validator){e=this._validator(this.wrapperOrThis(),t,e);if(e)throw new lr(this.wrapperOrThis(),e)}}$_buildFields(t,e){return Array.isArray(t.fields)?t.fields.map(t=>{let e;return e="string"==typeof t?sr.create(t,Ss.TEXT):sr.create(t),e&&(e._owner=this),e}).filter(t=>null!=t):e?this.$_extractFields(e):void 0}$_buildDerivedFields(t,e){const i=[];if(Array.isArray(t)){for(var s of t)if(q.isObject(s)&&s.name&&s.extractor){const r=rr.createDerived(s.name,s.extractor,s.type||Ss.TEXT);r._owner=this,i.push(r)}return i}return i}$_resetIndices(i){const s=this._rows;if(s)for(let t=i,e=s.length;t<e;t++)s[t].row=t}$_extractFields(r){const a=[];if(Array.isArray(r)){var t,e=r[0];for(t in e){var i=e[t],i=i instanceof Date?Ss.DATE:uo[typeof i]||Ss.ANY,i=sr.create(t,i);a.push(i)}}else if(q.isObject(r)&&r.values){const d=r.values;let t=!1,s;switch(r.type){case Yr.FIELD:if(q.isObject(d)){s={};for(const _ in d)s[_]=d[_][0]}break;case Yr.CSV:t=!0;case Yr.TSV:if("string"==typeof d&&0<d.length){const c=r[fo]=d.split(O);var n=r.fieldHeader;if(0<=n&&c.length>n){var o=r.startRow||0;r.reader;var h=r.quoted;if(c.length>o&&n<o){let e,i;if(t){if(e=c[n].split(r.quoted?B:","),h)for(let t=e.length-1;0<=t;t--)e[t]=q.stripQuotes(e[t]);if(i=c[o].split(r.quoted?B:","),h)for(let t=i.length-1;0<=t;t--)i[t]=q.stripQuotes(i[t])}else e=c[n].split(r.multiTabs?z:F),i=c[o].split(r.multiTabs?z:F);var l=Math.min(e.length,he(r.fieldCount,e.length));s={};for(let t=0;t<l;t++)s[e[t]]=i[t]}}}break;default:Array.isArray(d)&&0<d.length&&(s=d[0])}s&&function(t,e,i){for(var s in t){var r=e?e(s,t[s]):t[s],n=r instanceof Date?Ss.DATE:uo[typeof r]||Ss.ANY,r=i&&i[s]||s;const o=sr.create(r,n);o.sourceProp=s,a.push(o)}}(s,r.reader,r.fieldMap)}return a}$_buildRows(i){const s=this._fieldMap,r=this._derivedMap;if(Array.isArray(i)){const l=new Array;return i.forEach((t,e)=>l.push(or.createRow2(s,r,t))),l}if(q.isObject(i)&&i.values){var n=i.values,o=i.reader;let t=s;if(q.isObject(i.fieldMap)){const d={};for(var a in t){var h=t[a];h.sourceProp?d[h.sourceProp]=h:d[a]=h}t=d}let e=+i.rowCount;switch(e=isNaN(e)||e<0?Number.MAX_SAFE_INTEGER:e>>0,i.type){case Yr.FIELD:return this.$_loadFieldArray(n,i,t,o,e);case Yr.CSV:return this.$_loadCsv(n,i,t,o,e);case Yr.TSV:return this.$_loadTsv(n,i,t,o,e);default:return this.$_loadJson(n,i,t,o,e)}}else if(q.isObject(i))return[or.createRow2(s,r,i)]}$_loadJson(i,t,s,r,n){var o=this._derivedMap;if(Array.isArray(i)){const a=[];for(let t=0,e=Math.min(n,i.length);t<e;t++)a.push(or.createRow(s,o,i[t],r));return a}if(q.isObject(i))return[or.createRow(s,o,i,r)]}$_loadFieldArray(e,t,i,s,r){var n=this._derivedMap;const o=[],a={};for(const l in e)a[l]=Array.isArray(e[l])?e[l].length:0;let h=t.lengthField&&a[t.lengthField];if(isNaN(h)||h<1){h=0;for(const d in a)h=Math.max(a[d],h)}h=Math.min(r,h);for(let t=0;t<h;t++){const _={};for(const c in a)a[c]>t&&(_[c]=e[c][t]);o.push(or.createRow(i,n,_,s))}return o}$_trimLines(t,e){if(t.skipBlank)for(let t=e.length-1;0<=t;t--)e[t].trim()||e.splice(t,1);else if(!1!==t.trimLast)for(;0<e.length&&""===e[e.length-1].trim();)e.pop();return e}$_loadCsv(i,t,s,r,n){if("string"==typeof i&&0<i.length){var o=this._derivedMap;const c=this.$_trimLines(t,t[fo]||i.split(O));var a=c.length,e=t.fieldHeader;const u=this._fieldNames.slice(0),g=[];var h=u.length,i=t.startRow||0,l=t.quoted;if(0<=e&&e<a){var d=c[e].split(B);for(let t=0,e=Math.min(h,d.length);t<e;t++)u[t]=d[t]||u[t]}for(let t=i,e=Math.min(n+i,a);t<e;t++){var _=l?c[t].split(B):c[t].split(",");const p={};for(let t=0;t<h;t++)p[u[t]]=l?q.stripQuotes(_[t]):_[t];g.push(or.createRow(s,o,p,r))}return delete t[fo],g}}$_loadTsv(i,t,s,r,n){if("string"==typeof i&&0<i.length){var o=this._derivedMap;const c=this.$_trimLines(t,t[fo]||i.split(O));var a=c.length,e=t.fieldHeader;const u=this._fieldNames.slice(0),g=[];var h=u.length,i=t.startRow||0,l=t.multiTabs?z:F;if(0<=e&&e<a){var d=c[e].split(l);for(let t=0,e=Math.min(h,d.length);t<e;t++)u[t]=d[t]||u[t]}for(let t=i,e=Math.min(n+i,a);t<e;t++){var _=c[t].split(l);const p={};for(let t=0;t<h;t++)p[u[t]]=_[t];g.push(or.createRow(s,o,p,r))}return delete t[fo],g}}$_clearDerived(t){for(var e of this._derivedFields)delete t[e.name]}getRows(){return this._rows.slice(0)}internalValue(t,e){return this._rows[t]&&this._rows[t].values[e]}}(ir=Qr=Qr||{}).OR="or",ir.AND="and";class mo{constructor(t,e){this.name=t,this.label=e,this.enabled=!0}static saveOrders(t){t.forEach((t,e)=>t.newIdx=e)}static restoreOrders(t){return t.sort((t,e)=>t.newIdx-e.newIdx)}}class vo extends mo{constructor(t,e,i,s,r){super(t,e),this._filterMap={},i=Array.isArray(i)?i.slice(0):[],this.op=s||Qr.OR;const n=[];for(const o of i){let t;o.filters?t=new vo(o.name,o.label,o.op,o.filters,r):o.filter&&(t=this.$_createFilter(o.name,o.label,o.filter,r)),t&&(t.parent=this,t.enabled=ne(o.enabled,!0),this._filterMap[o.name]=t,n.push(t))}this.children=n}isNotEmpty(){return 0<this.children.length}add(t,e,i,s,r){if(e instanceof mo&&0<=this.children.indexOf(e))return e;const n=e instanceof mo?e:this.$_createFilter(t,i,e,r);return n&&(n.enabled=s,(n.parent=this).children.push(n),this._filterMap[t]=n),n}addSet(t,e,i,s,r,n){i=new vo(t,s,e,i,n);return i&&this.add(t,i,s,r,n),i}remove(t){if(t instanceof mo){var e=this.children.indexOf(t);if(0<=e)return this.children.splice(e,1),delete this._filterMap[t.name],!0}else{const i=this.getFilter(t);if(i&&i.parent)return i.parent.remove(i)}}getFilter(t){let e=this._filterMap[t];if(!e)for(var i of this.children)if(i instanceof vo&&(e=i.getFilter(t),e))break;return e}getAll(){const i=[];return function(t){for(var e of t.children)i.push(e)}(this),i}clear(){if(0<this.children.length)return this.children=[],this._filterMap={},!0}enabledAll(e){let i=!1;return this.enabled!=e&&(this.enabled=e,i=!0),this.children.forEach(t=>{t instanceof vo?i=i||t.enabledAll(e):t.enabled!=e&&(t.enabled=e,i=!0)}),i}select(s){if(0<s.length){let i=this.children.filter(t=>t.enabled);var r=i.length;if(0<r){let e;if(this.op===Qr.AND){e=i[0].select(s);for(let t=1;t<r;t++)e=i[t].select(e)}else{mo.saveOrders(s),e=[];for(let t=0;t<r;t++)e=e.concat(i[t].select(s));e=q.dedupe(e,(t,e)=>t.row-e.row),e=mo.restoreOrders(e)}return e}return s}return[]}$_createFilter(e,i,s,r){if(e||ar.throw(null,Z.requireFilterName),e){let t;return q.isNumberArray(s)?t=new So(e,void 0,s):"number"==typeof s?isNaN(s)||(t=new So(e,void 0,[0,s])):q.isStringArray(s)?t=new bo(e,void 0,s,r):"function"==typeof s&&(t=new yo(e,void 0,s)),t.label=i,t}}}class yo extends mo{constructor(t,e,i){super(t,e),this.selector=i}selectRow(t,e){return this.selector(t,e)}select(t){const i=this.selector;return t.filter((t,e)=>i(e,t.values))}}class bo extends mo{constructor(t,e,i,s){super(t,e),this.keyFields=[],this.comparers=[];for(var r of i){var n=s.fieldByName(r);n&&(this.keyFields.push(r),this.comparers.push(n.comparer))}this.keyFields=i.slice(0)}select(t){function i(e,i){for(let t=0;t<o;t++){var s=n[t],r=e[s],s=i[s],s=a[t](r,s);if(s)return s}return 0}const n=this.keyFields,o=n.length,a=this.comparers;mo.saveOrders(t);let e=(t=t.sort((t,e)=>i(t.values,e.values)))[0],s=[e],r=1;for(;r<t.length;){var h=t[r++];0!==i(e.values,h.values)&&s.push(e=h)}return s=mo.restoreOrders(s),s}}class So extends mo{constructor(t,e,i){super(t,e),this._ranges=this.$_buildRanges(i)}select(e){if(this._ranges){let t=[];for(var i of this._ranges)t=t.concat(e.slice(i.from,i.to));return t}return e}$_buildRanges(s){var r=s.length;const n=[];if(1===r&&0<=s[0])n.push({from:0,to:s[0]});else if(1<r){let i=-1;for(let t=0,e=Math.floor(r/2);t<e;t++){var o=s[2*t],a=s[2*t+1];o>i&&o<=a&&(n.push({from:o,to:a}),i=a)}}return 0<n.length?n:null}}class Co extends gr{constructor(t,e,i,s){super(t),this._dirty=!1,this._sortDirty=!1,this._defaultFilterOp=Qr.AND,this._filtered=!1,this._nextSorter=1,this._sortMap={},this._sorted=!1,this._autoSort=!0,this._wrapper=s,e instanceof wo||ar.throw(null,Z.requireSourceData),(this._data=e).addListener(this),this._fields=e.fields(),this.$_buildOptions(i),this._rows=this.$_buildRows()}_doDestory(){this._data&&(this._data.removeListener(this),this._data=this._fields=this._rows=null),this._wrapper=null}wrapper(){return this._wrapper}wrapperOrThis(){return this._wrapper||this}readOnly(){return this._data.readOnly()}fields(){return this._fields.slice(0)}rowCount(){return this._rows.length}visRowCount(){return this._rows.length}canSort(){return!0}canMove(){return!1}containsField(t){return this._data.containsField(t)}checkField(t){this._data.checkField(t)}fieldByName(t){return this._data.fieldByName(t)}filter(){return this._filter}postFilter(){return this._postFilter}hasFilter(){return this._filter.isNotEmpty()||this._postFilter.isNotEmpty()}filtered(){return this._filtered}sorted(){return this._sorted}getDataRow(t){return this._rows[t]}rowOfDataRow(e){var i=this._rows;for(let t=i.length-1;0<=t;t--)if(i[t]===e)return t;return-1}getRowId(t){return this._rows[t].id}isLast(t){return t===this._rows.length-1}isMaster(t){return!1}levelRowOfRow(t){return t}getRowValues(t){return gr.checkRow(this,t),Object.assign({},this._rows[t].values)}internalRowValues(t){return Object.assign({},this._rows[t].values)}getValues(e,t,i){if(Array.isArray(t)){gr.checkRow(this,e);const s=this._data,r={};return t.forEach(t=>{i&&s.checkField(t),r[t]=this.internalValue(e,t)}),r}return this.getRowValues(e)}getValue(t,e,i){return gr.checkRow(this,t),i&&this._data.checkField(e),this._rows[t].values[e]}internalValue(t,e){return this._rows[t].values[e]}getProp(t,e,i,s){return gr.checkRow(this,t),s&&this._data.checkField(e),this._rows[t].getProp(e,i)}getSummary(e,t,i){var s=this._fields.find(t=>t.name===e);return s&&po(s,this._rows,t,i)}updateValue(t,e,i){return this._data.updateValue(this._rows[t].row,e,i)}findRow(t,e=0,i=-1){return or.findRow(this._rows,t,e,i)}findRows(t,e=0,i=-1){return or.findRows(this._rows,t,e,i)}findDistinctRows(t,e,i){return or.findDistinctRows(this._rows,t,e,i)}deleteRow(t,e){wo.checkRow(this,t),this._data.deleteRow(this._rows[t].row,e)}deleteRows(t,e){Array.isArray(t)&&0<t.length&&(t.forEach(t=>gr.checkRow(this,t)),t=t.map(t=>this._rows[t].row),this._data.deleteRows(t,e))}updateRow(t,e,i=!1){return wo.checkRow(this,t),this._data.updateRow(this._rows[t].row,e,i)}appendRow(t){return this._data.appendRow(t)}getRowState(t){return wo.checkRow(this,t),this._data.internalRowState(this._rows[t].row)}internalRowState(t){return this._data.internalRowState(this._rows[t].row)}$_getRowsOfSourceIds(t){const e=[];return t.forEach(t=>{t=this.rowOfSourceId(t);0<=t&&e.push(t)}),e}$_getRowsOfData(t){const e=[];return t.forEach(t=>{t=this.rowOfSourceRow(t);0<=t&&e.push(t)}),e}$_getRowsOfDataRange(e,i){const s=[];for(let t=0;t<i;t++){var r=this.rowOfSourceRow(e+t);0<=r&&s.push(r)}return s}onDataValueUpdated(t,e,i,s,r){var n;this._sorted||this.hasFilter()?(n=this._rows.length,this.$_reset(),this._rows.length!==n&&this._fireEvent("onDataCountChanged",this._rows.length,n),this._fireEvent("onDataChanged")):0<=(e=this.rowOfSourceRow(e))&&(this._fireEvent("onDataValueUpdated",e,i,s,r),this._fireEvent("onDataChanged"))}onDataRowUpdated(t,e,i){var s;this._sorted||this.hasFilter()?(s=this._rows.length,this.$_reset(),this._rows.length!==s&&this._fireEvent("onDataCountChanged",this._rows.length,s),this._fireEvent("onDataChanged")):0<=(e=this.rowOfSourceRow(e))&&(this._fireEvent("onDataRowUpdated",e,i),this._fireEvent("onDataChanged"))}onDataRowsUpdated(t,e){0!==(e=this.$_getRowsOfData(e)).length&&(e=this._rows.length,this.$_reset(),this._rows.length!==e&&this._fireEvent("onDataCountChanged",this._rows.length,e),this._fireEvent("onDataChanged"))}onDataRangeUpdated(t,e,i){0!==this.$_getRowsOfDataRange(e,i).length&&(i=this._rows.length,this.$_reset(),this._rows.length!==i&&this._fireEvent("onDataCountChanged",this._rows.length,i),this._fireEvent("onDataChanged"))}onDataRowAdded(t,e){var i=this._rows.length;this.$_reset(),this._rows.length!==i&&(e=this.rowOfSourceRow(e),this._flags._rowAdded(e),this._fireEvent("onDataCountChanged",this._rows.length,i)),this._fireEvent("onDataChanged")}onDataRowsAdded(t,e,i){var s=this._rows.length;if(this.$_reset(),this._rows.length!==s){const n=[];for(let t=0;t<i;t++){var r=this.rowOfSourceRow(e+t);0<=r&&n.push(r)}0<n.length&&this._flags._rowsAdded(q.sortNum(n)),this._fireEvent("onDataCountChanged",this._rows.length,s)}this._fireEvent("onDataChanged")}onDataCleared(t,e){var i=this._rows.length;0<i&&(this._rows=[],this._flags._cleared(i),this._fireEvent("onDataCleared"),this._fireEvent("onDataCountChanged",0,i),this._fireEvent("onDataChanged"))}onDataRowDeleted(t,e,i){var s,r=this.rowOfSourceId(i);r<0||(s=this._rows.length,this._rows.splice(r,1),this._fireEvent("onDataRowDeleted",r,i),this._flags._rowDeleted(r),this._fireEvent("onDataCountChanged",this._rows.length,s),this._fireEvent("onDataChanged"))}onDataRowsDeleted(t,e,i){if(0!==(e=this.$_getRowsOfSourceIds(i)).length){var s=this._rows.length;for(let t=(e=q.sortNum(e)).length-1;0<=t;t--)this._rows.splice(e[t],1);this._fireEvent("onDataRowsDeleted",e,i),this._flags._rowsDeleted(e),this._fireEvent("onDataCountChanged",this._rows.length,s),this._fireEvent("onDataChanged")}}onDataRangeDeleted(t,e,i){e=this.$_getRowsOfDataRange(e,i);0!==e.length&&(i=this._rows.length,this.$_reset(),this._rows.length!==i&&(this._flags._rowsDeleted(q.sortNum(e)),this._fireEvent("onDataCountChanged",this._rows.length,i)),this._fireEvent("onDataChanged"))}onDataRowMoved(t,e,i){}onDataRowsMoved(t,e,i,s){}source(){return this._data}autoSort(){return this._autoSort}setAutoSort(t){this._autoSort=t}snapshot(e,t){const i={};let s;e&&(i.name=e.name,s=i.fields=Array.isArray(e.fields)?this._fields.filter(t=>0<=e.fields.indexOf(t.name)).map(t=>t.proxy()):null),i.fields||(i.fields=this._fields.map(t=>t.proxy()));var r=this._rows,n=r.length,o=Math.max(0,he(e&&e.start,0)),a=Math.max(0,he(e&&e.count,n)),h=Math.min(n,o+a),l=!e||!e.skipEmpty;e&&e.skipBlank;const d=[];if(s)for(let t=o;t<h;t++){var _=r[t];if(_){var c=_.values;const g={};for(const p in s)g[p]=c[p];d.push(g)}else l&&d.push(void 0)}else for(let t=o;t<h;t++){var u=r[t];u?d.push(Object.assign({},u.values)):l&&d.push(void 0)}return new wo(e?e.name:void 0,i,d,t)}build(t){return(t||this._dirty)&&(this._sortDirty=!0,this.$_reset(),this._dirty=!1),this}isSorted(t){t=this._sortMap[t.name];return t?{dir:t.dir,order:this._sorts.indexOf(t)}:null}getFilter(t,e){const i=e?this._postFilter:this._filter;return i.getFilter(t)}getFilters(){return this._filter.getAll().concat(this._postFilter.getAll())}addFilter(t,e,i){var s=ne(t.enabled,!0),s=(e?this._postFilter:this._filter).add(t.name,t.filter,t.label,s,this);return s&&this.$_filterChanged(i),s}addFilterSet(t,e,i){var s=ne(t.enabled,!0),s=(e?this._postFilter:this._filter).addSet(t.name,t.filters,t.op,t.label,s,this);return s&&this.$_filterChanged(i),s}removeFilter(t,e){(this._filter.remove(t)||this._postFilter.remove(t))&&this.$_filterChanged(e)}removeFilters(e,t){let i=!1;if(Array.isArray(e)){for(let t=e.length-1;0<=t;t--)i=i||(this._filter.remove(e[t])||this._postFilter.remove(e[t]));i&&this.$_filterChanged(t)}}clearFilters(t){(this._filter.clear()||this._postFilter.clear())&&this.$_filterChanged(t)}enableFilter(t,e,i){const s=t instanceof mo?t:this.$_getFilter(t);s&&s.enabled!=e&&(s.enabled=e,this.$_filterChanged(i))}toggleFilter(t,e){const i=t instanceof mo?t:this.$_getFilter(t);i&&(i.enabled=!i.enabled,this.$_filterChanged(!0))}enableFilters(t,i,e){let s=!1;Array.isArray(t)&&(t.forEach(t=>{const e=t instanceof mo?t:this.$_getFilter(t);e&&e.enabled!=i&&(e.enabled=i,s=!0)}),s&&this.$_filterChanged(e))}toggleFilters(t,e){let i=!1;Array.isArray(t)&&(t.forEach(t=>{const e=t instanceof mo?t:this.$_getFilter(t);e&&(e.enabled=!e.enabled,i=!0)}),i&&this.$_filterChanged(e))}enableAllFilters(t,e){(this._filter.enabledAll(t)||this._postFilter.enabledAll(t))&&this.$_filterChanged(e)}sort(t,e){let i;if("function"==typeof t)i=[{field:"_dl_sorter_"+this._nextSorter++,comparer:t}];else if(t){var s=Array.isArray(t)?t:[t];i=[];for(let t=0;t<s.length;t++){var r=s[t];"string"==typeof r?r&&i.push({field:r}):r.field&&i.push(r)}0===i.length&&(i=null)}const n=this._sortMap={};if(i!=this._sorts){var o=i?i.length:0,t=this._sorts?this._sorts.length:0;if(0<o&&o===t){let e=!1;for(let t=0;t<i.length;t++)if(i[t].field!=this._sorts[t].field||i[t].dir!=this._sorts[t].dir||i[t].comparer!=this._sorts[t].comparer){e=!0;break}if(!e)return}return i.forEach(t=>n[t.field]=t),this._sorts=i,this._dirty=this._sortDirty=!0,e&&this.build(!1),this.$_fireSortChanged(),this}}addSort(e,t,i,s){if(this._sortMap[e])return this;if(e){this._fields.find(t=>t.name===e)||ar.throwFormat(this,Z.invalidFieldName,e);const n=this._sorts=this._sorts||[];var r,t={field:e,dir:t};i&&0<n.length&&0<=(r=this.$_indexOfSort(i))?n.splice(r,0,t):n.push(t),this._sortMap[e]=t,this._dirty=this._sortDirty=!0,s&&this.build(!1),this.$_fireSortChanged()}return this}appendSort(t,e,i){return this.addSort(t,e,null,i)}addSorter(t,e,i,s){return this}appendSorter(t,e,i,s){return this.addSorter(t,e,null,s)}removeSort(t,e){let i=!1;if(Array.isArray(t))for(var s of t)s&&this.$_removeSort(s)&&(i=!0);else t&&this.$_removeSort(t)&&(i=!0);return i&&(this._dirty=this._sortDirty=!0,e&&this.build(!1),this.$_fireSortChanged()),this}toggleSort(t,e){var i;(t="string"==typeof t?this.fieldByName(t):t)instanceof sr&&((i=this.isSorted(t))?(this.removeSort(t.name,!1),i.dir===f.ASCENDING&&this.appendSort(t.name,f.DESCENDING,!1)):this.appendSort(t.name,f.ASCENDING,!1),e&&this.build(!1))}cleraSort(t){this.sort(null,t)}getSourceRow(t){return this._rows[t].row}rowOfSourceId(i){var s=this._rows;for(let t=0,e=s.length;t<e;t++)if(s[t].id===i)return t;return-1}rowOfSourceRow(i){var s=this._rows;for(let t=0,e=s.length;t<e;t++)if(s[t].row===i)return t;return-1}getSortOption(e){if(Array.isArray(this._sorts)){var t=this._sorts.find(t=>t.field==e);return t&&Object.assign({},t)}}setDataTags(t,e){for(const i of this._rows)i.tag=void 0;for(const s of t)this._rows[s].tag=e}getDataTag(t){return this._rows[t].tag}isDataTag(t,e){return this._rows[t].tag===e}getRows(){return this._rows.slice(0)}getFieldValues(t,e,i){}$_buildOptions(e){if(e){e.filterOp&&(this._defaultFilterOp=e.filterOp);let t=e.filter;q.isObject(t)&&(this._filter=new vo(t.name||"main_filter",t.label,Array.isArray(t.filters)?t.filters:[t],t.op||this._defaultFilterOp,this)),t=e.postFilter,q.isObject(t)&&(this._postFilter=new vo(t.name||"main_post_filter",t.label,Array.isArray(t.filters)?t.filters:[t],t.op||this._defaultFilterOp,this))}this._filter||(this._filter=new vo("main_filter",null,null,this._defaultFilterOp,this)),this._postFilter||(this._postFilter=new vo("main_post_filter",null,null,this._defaultFilterOp,this)),e&&e.sort&&this.sort(e.sort,!1)}$_sort(t,e){let o=this._sorts;if(this._sorted=Array.isArray(o))if(o=o.filter(e=>e.comparer||(e._f_=t.find(t=>t.name===e.field))),1===o.length&&o[0].comparer){const s=o[0].comparer;e=e.sort((t,e)=>{let i=s(t.row,t.values,e.row,e.values);return i=i||t.row-e.row,i})}else 0<o.length&&(e=e.sort((t,e)=>{let i=0;for(var s of o){var r,n;if(s.comparer?i=s.comparer(t.row,t.values,e.row,e.values):(r=t.values[s.field],n=e.values[s.field],i=s._f_.comparer(r,n),i&&s.dir===f.DESCENDING&&(i*=-1)),i)break}return i=i||t.row-e.row,i}),o.forEach(t=>delete t._f_));return e}$_buildRows(){var t=this._fields;let e=this._rows=this._data.getRows();var i=e.length;if(this._filter.isNotEmpty()&&(e=this._filter.select(e)),(this._sortDirty||this._autoSort)&&(e=this.$_sort(t,e),this._sortDirty=!1),this._postFilter.isNotEmpty()&&(e=this._postFilter.select(e)),this._filtered=e.length<i,!this._flags.isEmpty()){for(const s of this._rows)s.newIdx=-1;for(let t=e.length-1;0<=t;t--)e[t].newIdx=t;this._flags._reset(this._rows,e.length)}return e}$_isRowSelected(t,e,i){}$_indexOfSort(e){var i=this._sorts;if(i)for(let t=0;t<i.length;t++)if(i[t].field===e)return t;return-1}$_removeSort(t){var e=this.$_indexOfSort(t);if(0<=e)return this._sorts.splice(e,1),delete this._sortMap[t],!0}$_reset(){this._rows=this.$_buildRows(),this._fireEvent("onDataReset")}$_getFilter(t){return this._filter.getFilter(t)||this._postFilter.getFilter(t)}$_filterChanged(t){this._dirty=!0,ne(t,!0)&&this.build(!1),this.$_fireFilterChanged()}$_fireFilterChanged(){this._fireEvent("onDataViewFilterChanged"),this.onFilterChange&&this.onFilterChange({dv:this.wrapperOrThis()})}$_fireSortChanged(){this._fireEvent("onDataViewSortChanged"),this.onSortChange&&this.onSortChange({dv:this.wrapperOrThis()})}}class xo extends ho{_doInitDefaults(){super._doInitDefaults(),this._autoApply=!1,this.setOkLabel("Apply")}autoApply(){return ne(this._autoApply,this._defs&&this._defs._autoApply)}setAutoApply(t){this._autoApply=t}model(){return this._model}getItems(){return this._model&&this._model.filters||this.$_getFilters()}setModel(t){this._model=t}prepare(t){this._data=t}unprepare(){this._data=null}$_getFilters(){if(this._data instanceof Co){const t=this._data.filter().children,e=[];return t.forEach(t=>{e.push({filter:t,label:t.label||t.name})}),e}return[]}}xo.TYPE="filter";class Ro{constructor(t){this._owner=t}inflateStock(t){const e=t.name,i=this._owner,s=i.data();switch(e){case"row_count":return s?s.rowCount():0;case"leaf_count":return i.leafRowCount();case"check_count":return i.checkedRowCount();case"no":return isNaN(this.topRow)?"":this.topRow+1;case"is_landscape":return i.isLandscape();case"is_portrait":return i.isPortrait();default:if(e.endsWith("_sum")){if(s){var r=e.slice(0,-4);return s.getSummary(r).sum}}else if(e.endsWith("_avg")&&s){r=e.slice(0,-4);return s.getSummary(r).avg}}}}class Eo extends t{constructor(t,e){super(),this._owner=t,(this._defs=e)||this._doInitDefaults()}_doInitDefaults(){this._visible=!0}owner(){return this._owner}data(){return this._owner.data()}visible(){return ne(this._visible,this._defs&&this._defs._visible)}setVisible(t){t!==this._visible&&(this._visible=t,this._layoutChanged())}_changed(){this._owner&&this._owner.sectionChanged(this)}_layoutChanged(){this._owner&&this._owner.sectionLayoutChanged(this)}}Eo.BUTTON_CLASS="dlist-section-button";class Vo extends Eo{constructor(t,e){super(t,e),this._inflater=new Ro(t)}inflateParam(t,e,i){i=i.name;if(this.templateParams){var s=this.templateParams[i];if(void 0!==s)return s}s=this.layoutParams();return s&&s[i]}inflateStock(t,e,i){return this._inflater.inflateStock(i)}setTopRow(t){this._inflater.topRow=t}template(){return ne(this._template,this._defs&&this._defs._template)}setTemplate(t){t!==this._template&&(this._template=t,this._layoutChanged())}style(){return ne(this._style,this._defs&&this._defs._style)}setStyle(t){t!==this._style&&(this._style=t,this._changed())}layoutStyle(){return ne(this._layoutStyle,this._defs&&this._defs._layoutStyle)}setLayoutStyle(t){t!==this._layoutStyle&&(this._layoutStyle=t,this._changed())}layoutParams(){return ne(this._layoutParams,this._defs&&this._defs._layoutParams)}setLayoutParams(t){let e=!1;t?q.equalObjects(t,this._layoutParams)||(this._layoutParams=Object.assign({},t),e=!0):this._layoutParams&&(this._layoutParams=t,e=!0),e&&this._changed()}layout(){var t=this.getTemplate();return{layout:ms.Instance.layoutFromTemplate(this.wrapperOrThis(),this,!1,!1,t,this),rowStyle:this.style()||t.rowStyle&&t.rowStyle.default}}getTemplate(){return this.owner().getTemplate(this.template())||Es.get(this.defTemplate())||Xe}setLayoutItemProp(t,e,i){}setLayoutItemsProp(t,e,i){}click(){}}(ir=Zr=Zr||{}).HEAD="head",ir.FOOT="foot";class $o extends no{constructor(t){super(t)}getProxy(){const t=super.getProxy();return t.position=this.position,t.action=this.action,t}_setDefaults(){super._setDefaults(),this.position=Zr.FOOT}click(t){var e=this.action;e&&e!==Xr.NONE?Ao.perform(t,e):super.click(t)}}(ir=Xr=Xr||{}).NONE="none",ir.FORM="form",ir.BUTTON="button",ir.SEARCH="search",ir.SORT="sort",ir.FILTER="filter",ir.FIELD="field",ir.MENU="menu";class Ao extends Vo{static perform(t,e){switch(e){case Xr.FORM:t.togglePanel(_o.TYPE,!0);break;case Xr.BUTTON:t.togglePanel(lo.TYPE,!0);break;case Xr.SEARCH:t.togglePanel(co.TYPE,!0);break;case Xr.FILTER:t.togglePanel(xo.TYPE,!0);break;case Xr.FIELD:t.options().fieldBar().setVisible(!t.options().fieldBar().visible());break;case Xr.MENU:t.showMenu(null,!0)}}_doInitDefaults(){super._doInitDefaults(),this._buttonGap=5,this._headButtons=[],this._footButtons=[]}buttons(){const t=ne(this._buttons,this._defs&&this._defs._buttons);return t&&t.slice(0)}setButtons(t){t!==this._buttons&&(this._buttons=t,this._listButtons=[],t&&t.forEach(t=>this._listButtons.push(new $o(t))),this.$_resetButtons(),this._changed())}buttonGap(){return ne(this._buttonGap,this._defs._buttonGap)}setButtonGap(t){t!==this._buttonGap&&(this._buttonGap=t,this._changed())}clickAction(){return ne(this._clickAction,this._defs&&this._defs._clickAction)}setClickAction(t){t!==this._clickAction&&(this._clickAction=t,this._changed())}getButtonAt(t,e){var i=void 0!==this._buttons?this:this._defs;if(i)return(t===Zr.HEAD?i._headButtons:i._footButtons)[e]}getButton(t){const e=void 0!==this._buttons?this:this._defs;if(e){t=e.$_indexOfButton(t);return 0<=t?e._listButtons[t]:null}}getButtons(t){var e=void 0!==this._buttons?this:this._defs;if(e)return t===Zr.HEAD?e._headButtons:e._footButtons}setButton(t){var e;t&&t.name&&(0<=(e=this.$_indexOfButton(t.name))?this._listButtons[e].update(t):(t=new $o(t),this._listButtons.push(t)),this.$_resetButtons())}removeButton(t){t=this.$_indexOfButton(t);0<=t&&(this._listButtons.splice(t,1),this.$_resetButtons())}setButtonVisible(t,e){const i=this.$_getButton(t);i&&i.visible!==e&&(i.visible=e,this.$_resetButtons())}setButtonEnabled(t,e){const i=this.$_getButton(t);i&&i.enabled!==e&&(i.enabled=e,this.$_resetButtons())}getButtonState(t){const e=void 0!==this._buttons?this:this._defs;if(e){t=e.$_getButton(t);return t?t.state:void 0}}setButtonState(t,e){const i=this.$_getButton(t);i&&(i.state=e)}click(){Ao.perform(this.owner(),this.clickAction())}$_indexOfButton(e){return this._listButtons?this._listButtons.findIndex(t=>t.name===e):-1}$_getButton(e){return this._listButtons&&this._listButtons.find(t=>t.name===e)}$_resetButtons(){const t=this._listButtons;this._headButtons=[],this._footButtons=[],t&&(t.forEach(t=>{(t.position===Zr.HEAD?this._headButtons:this._footButtons).push(t)}),this._layoutChanged())}}class Lo extends Ao{constructor(){super(...arguments),this._checked=!1}_doInitDefaults(){super._doInitDefaults(),this._caption=Lo.CAPTION,this._showCheck=!1,this._autoCheck=!1,this.setVisible(!1)}caption(){return ne(this._caption,this._defs&&this._defs._caption)}setCaption(t){t!==this._caption&&(this._caption=t,this._changed())}captionAlign(){return ne(this._captionAlign,this._defs&&this._defs._captionAlign)}setCaptionAlign(t){t!==this._captionAlign&&(this._captionAlign=t,this._changed())}captionColor(){return ne(this._captionColor,this._defs&&this._defs._captionColor)}setCaptionColor(t){t!==this._captionColor&&(this._captionColor=t,this._changed())}showCheck(){return ne(this._showCheck,this._defs._showCheck)}setShowCheck(t){t!==this._showCheck&&(this._showCheck=t,this._changed())}autoCheck(){return ne(this._autoCheck,this._defs._autoCheck)}setAutoCheck(t){t!=this._autoCheck&&(this._autoCheck=t,this._changed())}isChecked(){return this._checked}setChecked(t=!0){t!==this._checked&&(this._checked=t,this._changed())}defTemplate(){return Lo.TEMPLATE}getStyle(){return this.style()}inflateStock(t,e,i){switch(i.name){case"caption":return this.caption();case"caption-align":return this.captionAlign();case"caption-color":return this.captionColor();case"style":return this.layoutStyle();default:return super.inflateStock(t,e,i)}}}Lo.CAPTION="Header",Lo.TEMPLATE="@it_list_header",Lo.ROW=-1;class Do extends Ao{_doInitDefaults(){super._doInitDefaults()}defTemplate(){return Do.TEMPLATE}}Do.TEMPLATE="@it_list_footer",Do.ROW=-2;class ko extends Hs{constructor(t,e){super(t,!0,e)}dv(){return null}row(){return-1}setLayout(t){this._layoutChanged=!this._layout||t.tid!==this._layout.tid,this._layout=t}getRenderer(t){return this._layoutView instanceof Hn&&this._layoutView.getRenderer(t)}simpleViewByDom(t,e){return this._layoutView instanceof Hn&&this._layoutView.simpleByDom(t,e)}_doPrepareRender(t,e){this._layout.setRow(this.dv(),this.row(),-1),this._layoutChanged&&this._layoutView&&(this.removeChild(this._layoutView),this._layoutView=null),this._layoutView?this._layoutView.refreshModels(this._layout):(this.addChild(this._layoutView=e.createLayoutView(t,this._layout)),this._layoutView.build(t,e)),this._owner=e}_doMeasure(t,e,i){return this._layoutView._explicitWidth=e,this._layoutView.prepareLayout(t,this._owner),this._layoutView.measureLayout(t,this._owner,e,i)}_doRender(t,e,i){this.resizeContent(e,i),this._layoutView.resize(e,i),this._layoutView.render(t)}_doAfterRender(){this._layoutChanged=!1,this._owner=null}}class To extends Hs{constructor(t,e,i){super(t,!0,i),this._model=e}model(){return this._model}setModel(t){this._model=t}_doMeasure(t,e,i){var s=this._padding=this.getPadding();e-=s.left+s.right,i-=s.top+s.bottom;const r=this._doMeasureContent(t,e,i);return r.width+=s.left+s.right,r.height+=s.top+s.bottom,r}_doRender(t,e,i){var s=this._padding;e-=s.left+s.right,i-=s.top+s.bottom,this._doRenderContent(t,e,i)}}class Po extends To{constructor(t,e,i){super(t,e,i),this._layoutChanged=!1}layoutView(){return this._layoutView}setLayout(t){this._layoutChanged=!this._layout||t.layout.tid!==this._layout.tid,this._layout=t.layout,this._rowStyle=t.rowStyle}click(t,e,i){this.model().click()}clickable(){return!0}_doInitContent(t,e){Object.assign(e.style,{overflow:"hidden"}),super._doInitContent(t,e)}_doPrepareRender(t,e){e.layoutContainer=this._model,this._layoutChanged&&this._layoutView&&(this.removeChild(this._layoutView),this._layoutView=null),this._layoutView?this._layoutView.refreshModels(this._layout):(this.addChild(this._layoutView=e.createLayoutView(t,this._layout)),this._layoutView.build(t,e)),this._layoutManager=e}_doApplyStyles(t){"string"==typeof this._rowStyle||this._rowStyle&&Object.assign(t,this._rowStyle)}_doMeasureContent(t,e,i){return this._layoutView._explicitWidth=e,this._layoutView.prepareLayout(t,this._layoutManager),this._layoutView.measureLayout(t,this._layoutManager,e,i)}_doRenderContent(t,e,i){this.resizeContent(e,i),this._layoutView.resize(e,i),this._layoutView.render(t)}_doAfterRender(){this._layoutChanged=!1,this._layoutManager=null}}class Mo extends qs{constructor(t){super(t,Eo.BUTTON_CLASS)}_doDestory(){this.model=null}setModel(t,e){return this.model=e,this._setModel(t,e),this}click(t){this.model.click(t)}}class Io extends Po{constructor(){super(...arguments),this._headButtons=[],this._footButtons=[],this._visHeadButtons=[],this._visTailButtons=[],this._gap=0}_doInitContent(t,e){this.addChild(this._headView=new Ve(t,!1,Io.HEAD_CLASS)),this.addChild(this._tailView=new Ve(t,!1,Io.TAIL_CLASS))}_doPrepareRender(t,e){super._doPrepareRender(t,e);const i=this.model();this.$_prepareActions(t,i),this._gap=i.buttonGap()||0}_doMeasureContent(t,e,i){var s=this._doMeasureHead(t,e),r=this._doMeasureTail(t,e);e-=this._wHead=s.width,e-=this._wTail=r.width,this._layoutView._explicitWidth=e,this._layoutView.prepareLayout(t,this._layoutManager),this._layoutView.measureLayout(t,this._layoutManager,e,i);const n=this._layoutView.measureLayout(t,this._layoutManager,e,i);return n.width+=this._wHead+this._wTail,n.height=Math.max(n.height,this._hHead=s.height,this._hTail=r.height),n}_doMeasureHead(t,e){return this.$_measureButtons(this._headActions,this._headButtons,this._visHeadButtons=[])}_doMeasureTail(t,e){return this.$_measureButtons(this._tailActions,this._footButtons,this._visTailButtons=[])}_doRenderContent(t,e,i){let s=e,r=0;this.resizeContent(e,i),0<this._wHead&&(this._headView.move(r,(i-this._hHead)/2),this._doRenderHead(this._headView,this._wHead,this._hHead),s-=this._wHead,r+=this._wHead),0<this._wTail&&(this._tailView.move(e-this._wTail,(i-this._hTail)/2),this._doRenderTail(this._tailView,this._wTail,this._hTail),s-=this._wTail),this._layoutView.move(r,0),this._layoutView.resize(s,i),this._layoutView.render(t)}_doRenderHead(t,e,i){let s=0;this._visHeadButtons.forEach(t=>{t.move(s,0),s+=t.width+this._gap})}_doRenderTail(t,e,i){let s=this._gap;this._visTailButtons.forEach(t=>{t.move(s,0),s+=t.width+this._gap})}_doAfterRender(){super._doAfterRender(),this._headActions=this._tailActions=null}$_prepareActions(t,e){let i=this._headActions=e.getButtons(Zr.HEAD),s=this._headButtons;for(;s.length<i.length;){var r=new Mo(t);this._headView.addChild(r),s.push(r)}for(;s.length>i.length;)this._headView.removeChild(s.pop());for(i=this._tailActions=e.getButtons(Zr.FOOT),s=this._footButtons;s.length<i.length;){var n=new Mo(t);this._tailView.addChild(n),s.push(n)}for(;s.length>i.length;)this._tailView.removeChild(s.pop())}$_measureButtons(s,t,r){const n=this.control;let o=0,a=0;return t.forEach((t,e)=>{const i=s[e];i.visible?(t.visible=!0,t.setEnabled(i.isEnabled(n.wrapperOrThis())),r.push(t),t.setModel(n,i).syncSize(),o+=t.width+this._gap,a=Math.max(a,t.height)):t.visible=!1}),{width:o,height:a}}}Io.HEAD_CLASS="dlist-section-head",Io.TAIL_CLASS="dlist-section-foot";class No extends Io{constructor(t,e){super(t,e,No.CLASS_NAME)}}No.CLASS_NAME="dlist-footer";class Oo extends Io{constructor(t,e){super(t,e,Oo.CLASS_NAME)}}Oo.CLASS_NAME="dlist-header";class Bo extends Hn{constructor(t,e){super(t,e)}}class Fo extends Hn{constructor(t,e){super(t,e)}_doLayoutContent(t,e,i){}_doMeasureLayout(t,e,i,s){this._measureChildren(this._visibles,t,e,i,s,null)}}(ir=Kr=Kr||{}).AUTO="auto",ir.ROW="row",ir.PAGE="page";class zo extends Ls{_doInitDefaults(){super._doInitDefaults(),this._mode=Kr.AUTO,this._barWidth=zo.DEF_BAR_WIDTH,this._showSelection=!0,this._tooltipVisible=!1,this._tooltipValue="top",this._firstTooltip="First",this._lastTooltip="Last"}mode(){return ne(this._mode,this._defs&&this._defs._mode)}setMode(t){t!==this._mode&&(this._mode=t,this._changed())}barWidth(){return ne(this._barWidth,this._defs&&this._defs._barWidth)}setBarWidth(t){(t=ae(t))!==this._barWidth&&(this._barWidth=t,this._changed())}showSelection(){return ne(this._showSelection,this._defs&&this._defs._showSelection)}setShowSelection(t){t!==this._showSelection&&(this._showSelection=t,this._changed())}clickable(){return ne(this._clickable,this._defs&&this._defs._clickable)}setClickable(t){t!==this._clickable&&(this._clickable=t,this._changed())}tooltipVisible(){return ne(this._tooltipVisible,this._defs&&this._defs._tooltipVisible)}setTooltipVisible(t){this._tooltipVisible=t}tooltipValue(){return ne(this._tooltipValue,this._defs&&this._defs._tooltipValue)}setTooltipValue(t){return this._tooltipValue=t}firstTooltip(){return ne(this._firstTooltip,this._defs&&this._defs._firstTooltip)}setFirstTooltip(t){this._firstTooltip=t}lastTooltip(){return ne(this._lastTooltip,this._defs&&this._defs._lastTooltip)}setLastTooltip(t){this._lastTooltip=t}tooltipStyle(){return ne(this._tooltipStyle,this._defs&&this._defs._tooltipStyle)}setTooltipStyle(t){t!==this._tooltipStyle&&(this._tooltipStyle=t,this._changed("style"))}_doPrepareRender(){}}zo.DEF_BAR_WIDTH=4;class Ho extends Ys{constructor(t){super(t,!1,"dlist-scroll-indicator-tooltip")}setText(t){this.dom.textContent=t}_getDisplayStyle(){return"inline-block"}}class Wo extends Gs{constructor(t,e){super(t,e,!1,Wo.CLASS_NAME),this._rate=0,this._tipHandler=()=>{if(+new Date-this._tipped>=Wo.TIP_DELAY)if(this.$_clearTipTimers(),this.canAnimate()){const t=this._tip.dom.animate([{opacity:1},{opacity:0}],{duration:700,fill:"none"});t.addEventListener("finish",()=>{this.listOwner().removeTooltipView(this._tip)})}else this.listOwner().removeTooltipView(this._tip)}}rate(){return this._rate}setRate(t,e){t!==this._rate&&(this._rate=t,e&&this.$_render())}updateRate(i,s,r,n,o){if(this.visible){const h=i.data();let e=this._tip;if(h){var a=i.isPaging();let t;if(t=a&&this._model.mode()!==Kr.ROW?(i.page()+1)/i.pageCount():(s+1-(1-n/r))/(i.isGrouped()?i.groupModel().visItemCount():h.rowCount()),this.setRate(t,o),this._model.tooltipVisible()){if(e)if(e.dom.getAnimations){const l=e.dom.getAnimations();l&&l.forEach(t=>t.finish())}else i.removeTooltipView(e);else e=this._tip=new Ho(i.doc());e.parent||isNaN(this._tipped)||i.addTooltipView(e),e.parent&&(r=0===(n=i.scrollIndex())?"First":1<=t?"Last":n+1+" / "+h.rowCount(),e.setText(r),n=e.getOffsetSize().width,r=this.width*t-n/2,e.moveX(Math.max(0,Math.min(r,this.width-n))),e.moveY(this.height+2),this._tipTimer||(this._tipTimer=setInterval(this._tipHandler,100))),this._tipped=+new Date}else e&&(i.removeTooltipView(e),this.$_clearTipTimers())}else this.setRate(0,o),e&&i.removeTooltipView(e),this.$_clearTipTimers()}else this.$_clearTipTimers()}$_clearTipTimers(){this._tipTimer&&(clearInterval(this._tipTimer),this._tipTimer=void 0),this._tipped=NaN}_doInitDom(t,e){this._bar=this.appendSpan(t,Wo.BAR_CLASS),Object.assign(this._bar.style,{position:"absolute",height:"100%"})}_doMeasure(t,e,i){return this.vertical?{width:this._model.barWidth(),height:i}:{width:e,height:this._model.barWidth()}}_doRender(t,e,i){this.$_render()}clickable(){return this._model.clickable()}click(t,e,i){alert(e+", "+i)}$_render(){var t=100*(this._rate||0)+"%";this.vertical?(this._bar.style.width="100%",this._bar.style.height=t):(this._bar.style.width=t,this._bar.style.height="100%")}}Wo.CLASS_NAME="dlist-scroll-indicator",Wo.BAR_CLASS="dlist-scroll-indicator-bar",Wo.SELECTION_CLASS="dlist-scroll-indicator-selection",Wo.TIP_DELAY=2e3;const Go={"@help":{width:48,path:"M24.2 35.65q.8 0 1.35-.55t.55-1.35q0-.8-.55-1.35t-1.35-.55q-.8 0-1.35.55t-.55 1.35q0 .8.55 1.35t1.35.55Zm-1.75-7.3h2.95q0-1.3.325-2.375T27.75 23.5q1.55-1.3 2.2-2.55.65-1.25.65-2.75 0-2.65-1.725-4.25t-4.575-1.6q-2.45 0-4.325 1.225T17.25 16.95l2.65 1q.55-1.4 1.65-2.175 1.1-.775 2.6-.775 1.7 0 2.75.925t1.05 2.375q0 1.1-.65 2.075-.65.975-1.9 2.025-1.5 1.3-2.225 2.575-.725 1.275-.725 3.375ZM24 44q-4.1 0-7.75-1.575-3.65-1.575-6.375-4.3-2.725-2.725-4.3-6.375Q4 28.1 4 24q0-4.15 1.575-7.8 1.575-3.65 4.3-6.35 2.725-2.7 6.375-4.275Q19.9 4 24 4q4.15 0 7.8 1.575 3.65 1.575 6.35 4.275 2.7 2.7 4.275 6.35Q44 19.85 44 24q0 4.1-1.575 7.75-1.575 3.65-4.275 6.375t-6.35 4.3Q28.15 44 24 44Zm0-3q7.1 0 12.05-4.975Q41 31.05 41 24q0-7.1-4.95-12.05Q31.1 7 24 7q-7.05 0-12.025 4.95Q7 16.9 7 24q0 7.05 4.975 12.025Q16.95 41 24 41Zm0-17Z"},"@info":{width:48,path:"M22.65 34h3V22h-3ZM24 18.3q.7 0 1.175-.45.475-.45.475-1.15t-.475-1.2Q24.7 15 24 15q-.7 0-1.175.5-.475.5-.475 1.2t.475 1.15q.475.45 1.175.45ZM24 44q-4.1 0-7.75-1.575-3.65-1.575-6.375-4.3-2.725-2.725-4.3-6.375Q4 28.1 4 23.95q0-4.1 1.575-7.75 1.575-3.65 4.3-6.35 2.725-2.7 6.375-4.275Q19.9 4 24.05 4q4.1 0 7.75 1.575 3.65 1.575 6.35 4.275 2.7 2.7 4.275 6.35Q44 19.85 44 24q0 4.1-1.575 7.75-1.575 3.65-4.275 6.375t-6.35 4.3Q28.15 44 24 44Zm.05-3q7.05 0 12-4.975T41 23.95q0-7.05-4.95-12T24 7q-7.05 0-12.025 4.95Q7 16.9 7 24q0 7.05 4.975 12.025Q16.95 41 24.05 41ZM24 24Z"},"@search":{width:48,path:"M39.8 41.95 26.65 28.8Q25.15 30.1 23.15 30.825Q21.15 31.55 18.9 31.55Q13.5 31.55 9.75 27.8Q6 24.05 6 18.75Q6 13.45 9.75 9.7Q13.5 5.95 18.85 5.95Q24.15 5.95 27.875 9.7Q31.6 13.45 31.6 18.75Q31.6 20.9 30.9 22.9Q30.2 24.9 28.8 26.65L42 39.75ZM18.85 28.55Q22.9 28.55 25.75 25.675Q28.6 22.8 28.6 18.75Q28.6 14.7 25.75 11.825Q22.9 8.95 18.85 8.95Q14.75 8.95 11.875 11.825Q9 14.7 9 18.75Q9 22.8 11.875 25.675Q14.75 28.55 18.85 28.55Z"},"@home":{width:48,path:"M8 42V18L24.1 6 40 18v24H28.3V27.75h-8.65V42Zm3-3h5.65V24.75H31.3V39H37V19.5L24.1 9.75 11 19.5Zm13-14.65Z"},"@menu":{width:48,path:"M6 36V33H42V36ZM6 25.5V22.5H42V25.5ZM6 15V12H42V15Z"},"@settings":{width:48,path:"M19.4 44 18.4 37.7Q17.45 37.35 16.4 36.75Q15.35 36.15 14.55 35.5L8.65 38.2L4 30L9.4 26.05Q9.3 25.6 9.275 25.025Q9.25 24.45 9.25 24Q9.25 23.55 9.275 22.975Q9.3 22.4 9.4 21.95L4 18L8.65 9.8L14.55 12.5Q15.35 11.85 16.4 11.25Q17.45 10.65 18.4 10.35L19.4 4H28.6L29.6 10.3Q30.55 10.65 31.625 11.225Q32.7 11.8 33.45 12.5L39.35 9.8L44 18L38.6 21.85Q38.7 22.35 38.725 22.925Q38.75 23.5 38.75 24Q38.75 24.5 38.725 25.05Q38.7 25.6 38.6 26.1L44 30L39.35 38.2L33.45 35.5Q32.65 36.15 31.625 36.775Q30.6 37.4 29.6 37.7L28.6 44ZM24 30.5Q26.7 30.5 28.6 28.6Q30.5 26.7 30.5 24Q30.5 21.3 28.6 19.4Q26.7 17.5 24 17.5Q21.3 17.5 19.4 19.4Q17.5 21.3 17.5 24Q17.5 26.7 19.4 28.6Q21.3 30.5 24 30.5ZM24 27.5Q22.55 27.5 21.525 26.475Q20.5 25.45 20.5 24Q20.5 22.55 21.525 21.525Q22.55 20.5 24 20.5Q25.45 20.5 26.475 21.525Q27.5 22.55 27.5 24Q27.5 25.45 26.475 26.475Q25.45 27.5 24 27.5ZM24 24Q24 24 24 24Q24 24 24 24Q24 24 24 24Q24 24 24 24Q24 24 24 24Q24 24 24 24Q24 24 24 24Q24 24 24 24Q24 24 24 24Q24 24 24 24Q24 24 24 24Q24 24 24 24Q24 24 24 24Q24 24 24 24Q24 24 24 24Q24 24 24 24ZM21.8 41H26.2L26.9 35.4Q28.55 35 30.025 34.15Q31.5 33.3 32.7 32.1L38 34.4L40 30.8L35.3 27.35Q35.5 26.5 35.625 25.675Q35.75 24.85 35.75 24Q35.75 23.15 35.65 22.325Q35.55 21.5 35.3 20.65L40 17.2L38 13.6L32.7 15.9Q31.55 14.6 30.1 13.725Q28.65 12.85 26.9 12.6L26.2 7H21.8L21.1 12.6Q19.4 12.95 17.925 13.8Q16.45 14.65 15.3 15.9L10 13.6L8 17.2L12.7 20.65Q12.5 21.5 12.375 22.325Q12.25 23.15 12.25 24Q12.25 24.85 12.375 25.675Q12.5 26.5 12.7 27.35L8 30.8L10 34.4L15.3 32.1Q16.5 33.3 17.975 34.15Q19.45 35 21.1 35.4Z"},"@close":{width:48,path:"M12.45 37.65 10.35 35.55 21.9 24 10.35 12.45 12.45 10.35 24 21.9 35.55 10.35 37.65 12.45 26.1 24 37.65 35.55 35.55 37.65 24 26.1Z"},"@edit":{width:48,path:"M9 39h2.2l22.15-22.15-2.2-2.2L9 36.8Zm30.7-24.3-6.4-6.4 2.1-2.1q.85-.85 2.1-.85t2.1.85l2.2 2.2q.85.85.85 2.1t-.85 2.1Zm-2.1 2.1L12.4 42H6v-6.4l25.2-25.2Zm-5.35-1.05-1.1-1.1 2.2 2.2Z"},"@delete":{width:48,path:"M13.05 42q-1.2 0-2.1-.9-.9-.9-.9-2.1V10.5H8v-3h9.4V6h13.2v1.5H40v3h-2.05V39q0 1.2-.9 2.1-.9.9-2.1.9Zm21.9-31.5h-21.9V39h21.9Zm-16.6 24.2h3V14.75h-3Zm8.3 0h3V14.75h-3Zm-13.6-24.2V39Z"},"@check":{width:48,path:"M18.9 35.7 7.7 24.5l2.15-2.15 9.05 9.05 19.2-19.2 2.15 2.15Z"},"@refresh":{width:48,path:"M24 40q-6.65 0-11.325-4.675Q8 30.65 8 24q0-6.65 4.675-11.325Q17.35 8 24 8q4.25 0 7.45 1.725T37 14.45V8h3v12.7H27.3v-3h8.4q-1.9-3-4.85-4.85Q27.9 11 24 11q-5.45 0-9.225 3.775Q11 18.55 11 24q0 5.45 3.775 9.225Q18.55 37 24 37q4.15 0 7.6-2.375 3.45-2.375 4.8-6.275h3.1q-1.45 5.25-5.75 8.45Q29.45 40 24 40Z"},"@back":{width:48,path:"M24 40 8 24 24 8l2.1 2.1-12.4 12.4H40v3H13.7l12.4 12.4Z"},"@forward":{width:48,path:"m24 40-2.1-2.15L34.25 25.5H8v-3h26.25L21.9 10.15 24 8l16 16Z"},"@first":{width:48,path:"M0 4 0 44 5 44 5 4Z M32 44 12 24 32 4 34.8 6.85 17.65 24 36.8 41.15Z"},"@prev":{width:48,path:"M20 44 0 24 20 4 22.8 6.85 5.65 24 22.8 41.15Z"},"@last":{width:48,path:"M33 3.9 33 45 38 45 38 3.9Z M5.2 43.9 2.4 41.05 19.55 23.9 2.4 6.75 5.2 3.9 25.2 23.9Z"},"@next":{width:48,path:"M15.2 43.9 12.4 41.05 29.55 23.9 12.4 6.75 15.2 3.9 35.2 23.9Z"},"@left":{width:48,path:"M8 24 40 40 40 8 Z"},"@right":{width:48,path:"M40 24 8 40 8 8 Z"},"@up":{width:48,path:"M24 8 8 40 40 40 Z"},"@down":{width:48,path:"M24 40 8 8 40 8 Z"},"@drag":{width:48,path:"M17.5 40q-1.45 0-2.475-1.025Q14 37.95 14 36.5q0-1.45 1.025-2.475Q16.05 33 17.5 33q1.45 0 2.475 1.025Q21 35.05 21 36.5q0 1.45-1.025 2.475Q18.95 40 17.5 40Zm13 0q-1.45 0-2.475-1.025Q27 37.95 27 36.5q0-1.45 1.025-2.475Q29.05 33 30.5 33q1.45 0 2.475 1.025Q34 35.05 34 36.5q0 1.45-1.025 2.475Q31.95 40 30.5 40Zm-13-12.5q-1.45 0-2.475-1.025Q14 25.45 14 24q0-1.45 1.025-2.475Q16.05 20.5 17.5 20.5q1.45 0 2.475 1.025Q21 22.55 21 24q0 1.45-1.025 2.475Q18.95 27.5 17.5 27.5Zm13 0q-1.45 0-2.475-1.025Q27 25.45 27 24q0-1.45 1.025-2.475Q29.05 20.5 30.5 20.5q1.45 0 2.475 1.025Q34 22.55 34 24q0 1.45-1.025 2.475Q31.95 27.5 30.5 27.5ZM17.5 15q-1.45 0-2.475-1.025Q14 12.95 14 11.5q0-1.45 1.025-2.475Q16.05 8 17.5 8q1.45 0 2.475 1.025Q21 10.05 21 11.5q0 1.45-1.025 2.475Q18.95 15 17.5 15Zm13 0q-1.45 0-2.475-1.025Q27 12.95 27 11.5q0-1.45 1.025-2.475Q29.05 8 30.5 8q1.45 0 2.475 1.025Q34 10.05 34 11.5q0 1.45-1.025 2.475Q31.95 15 30.5 15Z"}};class Uo extends Ps{constructor(t){super(),this._ctors={},this._customs={},this._owner=t,this.$_prepareStocks()}_doDestory(){super._doDestory(),this._owner=null}create(t,e){var i=t.NAME;let s=this.get(i);return!s&&this._ctors[i]&&this.add(i,s=this._ctors[i](e||this._owner.doc())),s&&Ts.clone(s,t)}createStock(t,e,i,s){const r=this._ctors[e];let n=this.get(e);if(!n&&r&&this.add(e,n=new r(t,i)),n)return t instanceof Document?new r(n,i,s):t?new r(t,i,s):void 0}createCustom(t,e,i){t=this._customs[t];const s=this.create(Ms,e);return i&&s.setClass(i),s.setShape(t),s}registerCustom(t,e,i,s){if(t&&e)if(t.startsWith("@")){const r=Go[t];r&&(r.path=e,0<i&&(r.width=i),0<s&&(r.height=s))}else this._customs[t]={w:i,h:s,d:e}}registerCustoms(t){for(var e in t){var i=t[e];if(i&&i.d)if(e.startsWith("@")){const s=Go[e];s&&(s.path=i.d,0<i.width&&(s.width=i.width),0<i.height&&(s.height=i.height))}else this._customs[e]={w:i.width,h:i.height,d:i.d}}}getCustom(t){return this._customs[t]}$_prepareStocks(){const t=this._ctors;t[Ms.NAME]=function(t,e){return new Ms(t,e,{width:"100%",height:"100%"})},t[Is.NAME]=function(t,e){return new Is(t,e)},t[Ns.NAME]=function(t,e){return new Ns(t,e)},t[Os.NAME]=function(t,e){return new Os(t,e)},t[Fs.NAME]=function(t,e){return new Fs(t,e)};for(let s in Go)t[s]=function(t,e){var i=Go[s];return new zs(t,i.width,i.height,i.path,e)}}}class qo extends js{constructor(t,e){super(t,qo.CLASS_NAME),this.setModel(e)}setModel(e){if(e!==this.model){let t;switch((this.model=e).label()){case"<<":t=Go["@first"];break;case"<":t=Go["@prev"];break;case">>":t=Go["@last"];break;case">":t=Go["@next"]}this._svg.setShape(t,!0)}this.setSize(this.model.owner().buttonSize()),this.setDisabled(e.disabled())}setVertical(t){Re.setData(this._svg.svg,"dir",t?"v":"")}_doInitSvg(t){}_doClick(){this.model.run()}}qo.CLASS_NAME="dlist-page-navigator-item";class jo extends Gs{constructor(t,e,i){super(t,i,!1,jo.CLASS_NAME),this._itemGap=0,this._owner=e,this.addChild(this._container=new Ve(t))}_doDestory(){super._doDestory(),this._spans=null}_doInitDom(t,e){}_doPrepareRender(t,e){if(!this._slash){const i=this._container,s=this._model,r=this._buttons=[this._first=new qo(t,s.first()),this._prev=new qo(t,s.prev()),this._next=new qo(t,s.next()),this._last=new qo(t,s.last())],n=this._spans=[this._page=i.appendSpan(t,jo.INDEX_CLASS),this._total=i.appendSpan(t,jo.INDEX_CLASS)];r.forEach(t=>{i.addChild(t)}),this._spans.push(this._slash=i.appendSpan(t,jo.SLASH_CLASS)),n.forEach(t=>{t.style.position="absolute",t.style.whiteSpace="nowrap"})}}$_getItemGap(){var e=this._model.itemGap();if(this.landscape&&this.vertical){let t=this._model.itemGap2();return isNaN(t)&&!isNaN(e)&&(t=.5*e),t}return e}_doMeasure(t,e,i){const s=this._owner;var r=s.page();const n=this.vertical;var o=this._itemGap=this.$_getItemGap();let a=0,h=0,l;return Re.setData(this.dom,"position",this.position),this._buttons.forEach(t=>{t.setDisabled(t.model.disabled()),t.setVertical(n),l=t.measure(),n?(h+=l.height,a=Math.max(a,l.width)):(a+=l.width,h=Math.max(h,l.height)),t.resize(l.width,l.height)}),this._page.textContent=""+(r+1),this._total.textContent=""+s.pageCount(),this._slash.textContent=n?"━":"/",n?this._spans.forEach(t=>{a=Math.max(a,t[zt]=t.offsetWidth),h+=t[Ht]=t.offsetHeight}):this._spans.forEach(t=>{a+=t[zt]=t.offsetWidth,h=Math.max(h,t[Ht]=t.offsetHeight)}),n?h+=4*o:a+=4*o,this._container.resize(a,h),n?{width:this._model.width()||this.dom.offsetWidth,height:i}:{width:e,height:this._model.height()||this.dom.offsetHeight}}_doRender(t,e,i){var s=this._container;const r=this._itemGap;if(this.vertical){var n=s.width,o=0;this._container.moveI((e-n)/2,(i-s.height)/2),this._first.moveI((n-this._first.mw)/2,0),o+=this._first.mh+r,this._prev.moveI((n-this._prev.mw)/2,o),o+=this._prev.mh+r,Re.moveI(this._page,(n-this._page[zt])/2,o),o+=this._page[Ht],Re.moveI(this._slash,(n-this._slash[zt])/2,o),o+=this._slash[Ht],Re.moveI(this._total,(n-this._total[zt])/2,o),o+=this._total[Ht],o+=r,this._next.moveI((n-this._next.mw)/2,o),o+=this._next.mh+r,this._last.moveI((n-this._last.mw)/2,o),this._last.mh}else{const r=this._itemGap;n=s.height,o=0;this._container.moveI((e-s.width)/2,(i-n)/2),this._first.moveI(0,(n-this._first.mh)/2),o+=this._first.mw+r,this._prev.moveI(o,(n-this._prev.mh)/2),o+=this._prev.mw+r,Re.moveI(this._page,o,(n-this._page[Ht])/2),o+=this._page[zt],Re.moveI(this._slash,o,(n-this._slash[Ht])/2),o+=this._slash[zt],Re.moveI(this._total,o,(n-this._total[Ht])/2),o+=this._total[zt],o+=r,this._next.moveI(o,(n-this._next.mh)/2),o+=this._next.mw+r,this._last.moveI(o,(n-this._last.mh)/2),this._last.mw}}}jo.CLASS_NAME="dlist-page-navigator",jo.INDEX_CLASS="dlist-page-navigator-index",jo.SLASH_CLASS="dlist-page-navigator-slash";const Yo="$_page";class Qo extends Ws{constructor(t,e,i){super(t,i,!1,Qo.CLASS_NAME),this._pagePool=[],this._pageViews=[],this._pageMap={},this._scrollPos=0,this._scrollOff=0,this._indexClicked=t=>{t=t.target[Yo];this._owner.pageIndexClick(t)},this._owner=e}static isPageIndex(t){return t.classList.contains(this.INDEX_CLASS)?t[Yo]:-1}get scrollPos(){return this._scrollPos}get scrollOff(){return this._scrollOff}scrollBy(e){var i=this.doc,s=this._model.itemGap();let r=this._scrollPos,n=this._scrollOff;if(0<e)if(n>=e)n-=e;else if(0===r)n=0;else{e-=n,n=0;let t;for(;0<r&&0<e;){t||(t=this.$_getIndexView(i),this._pageContainer.appendChild(t)),this.$_measureIndexView(t,--r);var o=t.offsetWidth+s;e<o?(n=o-e,e=0):e-=o}t&&(this._pagePool.push(t),this._pageContainer.removeChild(t))}else if(e<0){var t=0<n?this._pageViews[0].offsetWidth+s-n:0;if((e*=-1)<=t)n+=e;else{const h=this._pageViews.slice(0);for(0<t&&(e-=t,r++,n=0,h.shift());0<e&&0<h.length;){var a=h.shift().offsetHeight;a<e?(e-=a,r++):(n=-(e-a),e=0)}}}this.$_refreshView(i,r,n)}scrollTo(t){t=Math.max(0,Math.min(t,this._owner.pageCount()));this.$_refreshView(this.doc,t,0)}makeVisible(s,t=!1){if(t){var e=this._owner.pageCount(),r=this._pageViews;e>=r.length&&this.scrollTo(s-Math.floor(r.length/2))}else{e=this._pageViews,r=e[e.length-1];if(s===this._scrollPos)0<this._scrollOff&&this.$_refreshView(this.doc,this._scrollPos,0);else if(s<this._scrollPos)this.scrollTo(s);else if(s>r[Yo])this.scrollTo(s-Math.floor(e.length/2));else if(s<r[Yo])this._scrollOff=0;else if(s===r[Yo]){let t=this._scrollPos,e=this._scrollOff,i=r.offsetLeft+r.offsetWidth-this._pageContainer.offsetWidth;if(i<=e)e-=i;else{const a=this._pagePool,h=this._pageMap,l=this._pageViews;for(;0<i&&t<=s;){var n,o=this._pageViews[0].offsetHeight;i>=o?(n=l.shift(),delete h[t],a.push(n),i-=o,t++):(e=i,i=0)}}this._scrollPos=t,this._scrollOff=e}}}_doPrepareRender(t){const e=this.dom,i=e.ownerDocument;this._first||(this._tag="button",e.appendChild(this._firstContainer=i.createElement("div")),this._firstContainer.appendChild(this._first=i.createElement("button")),this._first.classList.add(Qo.INDEX_CLASS,Qo.END_CLASS),e.appendChild(this._pageContainer=i.createElement("div")),e.appendChild(this._lastContainer=i.createElement("div")),this._lastContainer.appendChild(this._last=i.createElement("button")),this._last.classList.add(Qo.INDEX_CLASS,Qo.END_CLASS))}_doMeasure(t,e,i){const s=this._model,r=this._owner;var n=s.itemGap();let o=0;return Re.setVisible(this._firstContainer,s.first().visible())&&(this._first[Yo]=0,this._first.textContent="≪",o+=this._first.offsetWidth+n),Re.setVisible(this._lastContainer,s.last().visible())&&(this._first[Yo]=r.pageCount()-1,this._last.textContent="≫",o+=this._last.offsetWidth+n),this.$_preparePages(t,this._pageContainer,e-o,n),{width:e,height:this._model.width()}}_doRender(t,e,i){var s=this._model.itemGap();let r=0;var n,o;Re.isVisible(this._lastContainer)&&(n=this._last.offsetWidth,Re.setBounds(this._firstContainer,e-n,0,n,i),e-=n),Re.isVisible(this._firstContainer)&&(n=this._first.offsetWidth,Re.setBounds(this._firstContainer,r,0,n,i),e-=n,r+=n),Re.setBounds(this._pageContainer,r,0,e,i),r=-this._scrollOff;for(o of this._pageViews)Re.move(o,r,0),r+=o.offsetWidth+s}$_getIndexView(t){let e=this._pagePool.pop();return e||(e=t.createElement(this._tag),e.classList.add(Qo.INDEX_CLASS),e.onclick=this._indexClicked),e}$_measureIndexView(t,e){t.classList.remove(Qo.CURRENT_CLASS),e===this._owner.page()&&t.classList.add(Qo.CURRENT_CLASS),t.textContent=e+1+""}$_preparePages(e,t,i,s){var r,n=this._owner.pageCount();let o=this._scrollPos,a=this._scrollOff;const h=this._pagePool,l=this._pageMap,d={},_=[];let c=i+a;for(;0<c&&o<n;){let t=l[o];t?delete l[o]:t=this.$_getIndexView(e),this.$_measureIndexView(t,o),c-=t.offsetWidth+s,_.push(t),d[o]=t,t[Yo]=o,o++}if(0<c){if(o=this._scrollOff,c<=a)a-=c;else for(c-=a;0<c&&0<o;){const g=this.$_getIndexView(e);this.$_measureIndexView(g,--o),_.unshift(g),d[o]=g,g[Yo]=o;var u=g.offsetWidth+s;c>u?c-=u:(a=u-c,c=0)}this._scrollPos=o,this._scrollOff=a}for(r in l)h.push(l[r]);this._pageViews=_,this._pageMap=d}$_refreshView(t,e,i){this._scrollPos=e,this._scrollOff=i,this.$_preparePages(this.doc,this._pageContainer,this.width,this.height),this.render(t)}}Qo.CLASS_NAME="dlist-page-scroller",Qo.INDEX_CLASS="dlist-page-scroller-index",Qo.END_CLASS="dlist-page-scroller-end",Qo.CURRENT_CLASS="dlist-page-scroller-current";class Zo extends Hs{constructor(t,e){super(t,!1,Zo.CLASS_NAME),this._vertical=!0,this._rowViews=[],this._model=e}get model(){return this._model}get rowCount(){return this._rowViews.length}getRowView(t){return this._rowViews[t]}_doInitDom(t,e){}_doMeasure(t,e,i){return this._vertical?this.$_measureVert(t,e,i):this.$_measureHorz(t,e,i)}_doRender(t,e,i){return this._vertical?this.$_renderVert(t,e,i):this.$_renderHorz(t,e,i)}$_measureVert(e,i,s){const t=this._model,r=this.parent.parent,n=r.owner(),o=n.data(),a=this._rowViews;var h=t.rowCount();let l=0,d=0;for(;a.length>h;){const u=a.pop();this.removeChild(u),u.destroy()}for(;a.length<h;){var _=t.getRow(a.length),c=n.getRowLayout(_);const g=new ro(e);g.setRow(o,_,o.getRowId(_),null),g.setLayout(c),this.addChild(g),a.push(g)}return a.forEach(t=>{t=t.measure(e,r,i,s);l+=t.height,d=Math.max(d,t.width)}),{width:d,height:l}}$_measureHorz(t,e,i){}$_renderVert(i,s,t){let r=0;this._rowViews.forEach(t=>{var e=t.mh;t.move(0,r).resize(s,e),t.render(i),r+=e})}$_renderHorz(t,e,i){}}Zo.CLASS_NAME="dlist-head-rows";const Xo={"가":"ㄱ","까":"ㄲ","나":"ㄴ","다":"ㄷ","따":"ㄸ","라":"ㄹ","마":"ㅁ","바":"ㅂ","빠":"ㅃ","사":"ㅅ","싸":"ㅆ","아":"ㅇ","자":"ㅈ","짜":"ㅉ","차":"ㅊ","카":"ㅋ","타":"ㅌ","파":"ㅍ","하":"ㅎ"};class Ko extends qs{constructor(t){super(t,Ko.CLASS_NAME)}setLetter(t){t!==this.letter&&(this.letter=t,this.dom.textContent=Xo[t]||t)}isActive(){return"1"===Re.getData(this.dom,"active")}setActive(t){Re.setData(this.dom,"active",t?"1":void 0)}_getDisplayStyle(){return"inline-block"}click(){this.parent.clickLetter(this)}}Ko.CLASS_NAME="dlist-index-bar-letter";class Jo extends Ws{constructor(t,e){super(t,e,!0,Jo.CLASS_NAME),this._letterViews=[]}letterCount(){return this._letterViews.length}getLetterView(t){return this._letterViews[t]}clickLetter(t){t=t.letter;this._model.clickLetter(t)}_doMeasure(i,t,e){function s(t){var e=new Ko(i);return t.addChild(e),n.push(e),e}const r=this._model,n=this._letterViews;for(var o=this._hChar=Math.ceil((0===n.length?s(this):n[0]).dom.offsetHeight),e=r.getLength(e),a=r.getLetters(e/o>>0),h=a.length;n.length>h;){var l=n.pop();this.removeChild(l)}for(;n.length<h;)s(this);for(let t=0;t<h;t++)n[t].setLetter(a[t]);return{width:this._model.minWidth(),height:e}}_doRender(t,i,s){const r=this._letterViews;var n=r.length;if(0<n){let e=(s-n*this._hChar)/2>>0;r.forEach(t=>{t.move((i-t.dom.offsetWidth)/2>>0,e),e+=this._hChar})}}}Jo.CLASS_NAME="dlist-index-bar";class ta extends Ws{constructor(t,e){super(t,e,!1,ta.CLASS_NAME),this._len=0,this._page=0,this._pos=0,this._thumbSum=0,this._thumbed=0,this._vertical=!0}setVertical(t){this._vertical=t}setScroll(t,e,i,s){this._len=t,this._page=e,this._pos=i,Re.setVisible(this._thumb,this._len>this._page),s&&this.$_setScrollBar(this.width,this.height)}calcPosition(t){var e=this.height,i=this.$_calcThumb(e);return t=t*this._len/(e-=i)>>0}reset(){this._thumbSum=this._thumbed=0}isView(t){return t===this._thumb}_doInitDom(t,e){this._thumb=this.appendSpan(t,ta.THUMB_CLASS),this._thumb.style.position="absolute"}_doMeasure(t,e,i){return this._vertical?{width:this._model.barWidth(),height:i}:{width:e,height:this._model.barWidth()}}_doRender(t,e,i){this.$_setScrollBar(e,i)}$_calcThumb(t){t=t*this._page/this._len;return this._thumbSum+=t,this._thumbed++,t=this._thumbSum/this._thumbed,Math.max(this._model.minThumbLength(),t)>>0}$_setScrollBar(t,e){var i,s,r;Re.isVisible(this._thumb)&&(s=((r=this._vertical?e:t)-(i=this.$_calcThumb(r)))*this._pos/(this._len-this._page)>>0,r=this._model.thumbWidth(),this._vertical?(t=(t-r)/2>>0,Re.setBounds(this._thumb,t,s,r,i)):(e=(e-r)/2>>0,Re.setBounds(this._thumb,s,e,i,r)))}}ta.CLASS_NAME="dlist-scroll-bar",ta.THUMB_CLASS="dlist-scroll-bar-thumb";class ea extends Ve{constructor(t){super(t,!1,ea.CLASS_NAME,"span")}_getDisplayStyle(){return"inline-block"}}ea.CLASS_NAME="dlist-selection-mask-handle";class ia extends Hs{constructor(t){super(t,!1,ia.CLASS_NAME)}_doInitDom(e,t){this._handles=[];for(let t=0;t<2;t++)this._handles.push(new ea(e))}_doMeasure(t,e,i){return{width:e,height:i}}_doRender(t,e,i){}}ia.CLASS_NAME="dlist-selection-mask";class sa extends qs{constructor(t){super(t,sa.CLASS_NAME)}_doDestory(){this.model=null}setModel(t,e){this._setModel(t,this.model=e)}_doInitDom(t,e){super._doInitDom(t,e)}click(t){this.parent.runCommand(t,this.model)}}sa.CLASS_NAME="dlist-command-cell";class ra extends Hs{constructor(t,e){super(t,!1,ra.CLASS_NAME),this._cellPool=[],this._cellViews=[],this._model=e}_doDestory(){this._data=null}setCommands(t,e,i){this._data=t,this._row=e,this._commands=i||[]}getCommand(t){for(var e of this._cellViews)if(e.isDom(t))return e.model}runCommand(t,e){e.run(t,this._data,this._row)}_doPrepareRender(t,e){const i=this._cellPool,s=this._cellViews;for(var r,n=this._commands;s.length<n.length;)(r=i.pop())||(r=new sa(t),this.addChild(r),s.push(r));for(;s.length>n.length;){var o=s.pop();this.removeChild(o),i.push(o)}}_doMeasure(t,e,i){const s=this.control,r=s.isVertical(),n=this._model,o=this._cellViews,a=this._commands,h=r?he(n.minCellWidth(),0):0,l=r?0:he(n.minCellHeight(),0);let d=0,_=0;const c=this._sizes=[];return o.forEach((t,e)=>{t.resize(NaN,NaN),t.setModel(s,a[e]);const i=t.getOffsetSize();r?(c.push(i.width=Math.max(h,Math.ceil(i.width))),d+=i.width,_=Math.max(_,Math.max(l||0,i.height))):(c.push(i.height=Math.max(l,Math.ceil(i.height))),_+=i.height,d=Math.max(d,Math.max(h||0,i.width)))}),{width:d,height:_}}_doRender(t,i,s){const e=this.control,r=e.isVertical(),n=this._cellViews;let o=0,a=0;n.forEach((t,e)=>{t.move(o,a),r?(t.resize(this._sizes[e],s),o+=t.width):(t.resize(i,this._sizes[e]),a+=t.height)})}}ra.CLASS_NAME="dlist-command-box",(_n=_n=_n||{}).AUTO="auto",_n.HORIZONTAL="horizontal",_n.VERTICA="vertical",(_n=Jr=Jr||{}).SHIFT="shift",_n.OVERLAP="overlap";class na extends $s{_doInitDefaults(){super._doInitDefaults(),this._minCellWidth=70,this._minCellHeight=24}orientation(){return ne(this._orientation,this._defs&&this._defs._orientation)}setOrientation(t){this._orientation=t}mode(){return ne(this._mode,this._defs&&this._defs._mode)}setMode(t){this._mode=t}minCellWidth(){return ne(this._minCellWidth,this._defs&&this._defs._minCellWidth)}setMinCellWidth(t){this._minCellWidth=t}minCellHeight(){return ne(this._minCellHeight,this._defs&&this._defs._minCellHeight)}setMinCellHeight(t){this._minCellHeight=t}_doPrepareRender(){}}class oa extends qs{constructor(t){super(t,oa.CLASS_NAME)}_doDestory(){this.model=null}setModel(t,e){return this.model=e,this._setModel(t,e),this}_getPositionStyle(){return""}click(t){this.model.click(t)}}oa.CLASS_NAME="dlist-row-button dlist-panel-button";class aa extends Hs{constructor(t,e,i){super(t,!0,i+" dlist-panel"),this._model=e}model(){return this._model}refresh(t,e,i){var s=this.doc;e=he(e,this.width),i=he(i,this.height);i=this.measure(s,t,e,i);this.resize(i.width,i.height),this.render(s),this.move(0,0),this._manager=null}click(t,e,i){return!1}clickButton(t,e){return t.enabled()&&t.click(e),!0}_doInitDom(t,e){Object.assign(e.style,{pointerEvents:"auto",overflow:"hidden"})}_doPrepareRender(t,e){this._manager=e}measure(t,e,i,s){const r=this._model;var n=r.getPosition();let o;switch(r.getPosition()){case Wr.CENTER:o="center";break;case Wr.BOTTOM:o="top";break;case Wr.LEFT:o="right";break;case Wr.RIGHT:o="left";break;default:Wr.TOP;o="bottom"}this.dom.dataset.border=o;const a=super.measure(t,e,i,s);return r.isFullWidth()&&(a.width=i),r.isFullHeight()&&(a.height=s),n===Wr.LEFT||n===Wr.RIGHT||n===Wr.CENTER?a.width=r.getSize(i,a.width):a.height=r.getSize(s,a.height),this.mw=a.width+=1,this.mh=a.height+=1,a}_doMeasure(t,e,i){var s=this._padding=this.getPadding(),e=e-s.left-s.right,i=i-s.top-s.bottom;let r=this._doMeasureContent(t,e,i);return r.width+=s.left+s.right,r.height+=s.top+s.bottom,r}_doAfterRender(){this._manager=null}_createButton(t,e){const i=new oa(t);return i.setModel(this.control,e),i}}aa.DURATION=500;class ha extends aa{constructor(t,e,i){super(t,e,i),this._buttonViews=[],this._hButton=0,this._wButton=0,this._hBody=0}getButton(e){return this._buttonViews.find(t=>t.model===e)}_getDefaultButtonPosition(){return Ur.BOTTOM}getButtonPosition(t){t=t.buttonPosition();return t===Ur.LEFT||t===Ur.RIGHT||t===Ur.BOTTOM?t:this._getDefaultButtonPosition()}_doInitDom(t,e){e.style.boxSizing=""}_doInitContent(t,e){e.style.display="flex",e.style.flexDirection="column",e.style.height="100%",this.addChild(this._bodyContainer=new Ve(t,!1,"dlist-dialog-panel-body")),this._bodyContainer.setStyles({position:"",flex:"1 1 auto",minHeight:"20px",overflow:"hidden scroll"}),this._initBody(t,this._bodyContainer),this.addChild(this._buttonContainer=new Ve(t,!1,"dlist-dialog-panel-buttons")),this._buttonContainer.setStyles({position:"",flex:"0 0 auto",display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"flex-end"})}_doPrepareRender(t,e){super._doPrepareRender(t,e);var i=this.model();this._layoutManager=e,this._prepareBody(t,this._bodyContainer,e,i),this.$_prepareButtons(t,i),this._prepareButtons(this._buttonViews)}_doMeasureContent(t,e,i){const s=this.model();var r=s.getPosition(),n=this.getButtonPosition(s),o=n===Ur.LEFT||n===Ur.RIGHT,e=r===Wr.LEFT||r===Wr.RIGHT?s.getSize(e,e):e;o?(this.content.style.flexDirection=n===Ur.LEFT?"row-reverse":"row",this._buttonContainer.dom.style.flexDirection="column"):(this.content.style.flexDirection="column",this._buttonContainer.dom.style.flexDirection="row"),this._buttonViews.forEach(t=>{t.setEnabled(t.model.isEnabled(this.control.wrapperOrThis()))}),this._buttonContainer.dom.style.gap=s.buttonGap()+"px",this._measureButtons(this._buttonViews),this._hButton=o?0:this._buttonContainer.dom.offsetHeight,this._wButton=o?this._buttonContainer.dom.offsetWidth:0,e-=this._wButton;i=this._measureBody(t,this._layoutManager,this._bodyContainer,s,e,i);this._hBody=i.height;o=o?Math.max(this._hBody,this._hButton):this._hBody+this._hButton;return{width:this.content.offsetWidth,height:o}}_doRender(t,e,i){this._renderBody(t,this._bodyContainer,e-this._wButton,i-this._hButton)}_doAfterRender(){this._layoutManager=null}clickButton(t,e){super.clickButton(t,e);t=t.model.type;return t===Hr.SUBMIT?this._submit():t===Hr.CANCEL||void 0}_initBody(t,e){}_prepareBody(t,e,i,s){}$_prepareButtons(t,e){for(var i=e.getButtons(),s=this._buttonViews;s.length<i.length;){var r=this._createButton(t,i[s.length]);this._buttonContainer.addChild(r),this._buttonViews.push(r)}for(;s.length>i.length;)this._buttonContainer.removeLast(),this._buttonViews.pop()}_prepareButtons(t){}_measureButtons(t){}_renderBody(t,e,i,s){}_submit(){return!0}}class la extends ha{constructor(t,e){super(t,e,la.CLASS_NAME),this._layoutChanged=!1}setLayout(t){this._layoutChanged=!this._layout||t.tid!==this._layout.tid,this._layout=t}_prepareBody(t,e,i,s){s=s.getLayout();let r=this._layoutView;this.setLayout(s),this._layoutChanged&&r&&(e.removeChild(r),r=null),r?r.refreshModels(s):(e.addChild(r=this._layoutView=i.createLayoutView(t,s)),r.build(t,i)),r.prepareLayout(t,i)}_measureBody(t,e,i,s,r,n){return this._layoutView.measureLayout(t,e,r,Number.MIN_SAFE_INTEGER)}_renderBody(t,e,i,s){this._layoutView.move(0,0),this._layoutView.resize(i,s),this._layoutView.render(t),e.setHeight(s)}}la.CLASS_NAME="dlist-form-panel";class da extends aa{constructor(t,e){super(t,e,da.CLASS_NAME),this._buttonViews=[]}static createView(t,e,i){return i!==qr.VERTICAL?(qr.DEFAULT,new da(t,e)):new _a(t,e)}display(){return qr.DEFAULT}_doInitContent(t,e){this.addChild(this._buttonContainer=new Ve(t,!1,"dlist-button-panel-buttons").setStyles(this._containerStyle()))}_doPrepareRender(t,e){super._doPrepareRender(t,e),this.$_prepareButtons(t,this.model())}_doMeasureContent(t,e,i){var s;return 0<this._buttonViews.length&&(s=(this.model().buttonGap()||0)/2+"px",this._layoutButtons(this._buttonViews,s)),this.content.style.width="",this.content.style.height="",this._buttonContainer.clearSize(),{width:this._buttonContainer.dom.offsetWidth+this._buttonViews.length,height:this._buttonContainer.dom.offsetHeight}}_doRender(t,e,i){var s=this.model().position();this._buttonContainer.dom.style.justifyContent=this.model().align(),s===Wr.LEFT||s===Wr.RIGHT?(this.content.style.height="100%",this._buttonContainer.dom.style.height="100%"):s!==Wr.TOP&&s!==Wr.BOTTOM||(this.content.style.width="100%",this._buttonContainer.dom.style.width="100%")}$_prepareButtons(t,e){var i=e.getButtons()||[];const s=this._buttonViews,r=this._buttonContainer;for(;s.length<i.length;){var n=this._createButton(t,i[s.length]);r.addChild(n),s.push(n)}for(;s.length>i.length;)r.removeLast(),s.pop()}_containerStyle(){return{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",flexWrap:"wrap"}}_layoutButtons(i,s){for(let t=0,e=i.length;t<e;t++)i[t].dom.style.marginLeft=s,i[t].dom.style.marginRight=s}}da.CLASS_NAME="dlist-button-panel";class _a extends da{display(){return qr.VERTICAL}_containerStyle(){const t=super._containerStyle();return t.flexDirection="column",t}_layoutButtons(i,s){for(let t=0,e=i.length;t<e;t++)i[t].dom.style.marginTop=s,i[t].dom.style.marginBottom=s}}class ca extends Ts{constructor(t){super(t,ca.CLASS_NAME),this.dir=u.DOWN,this._svg.setStyle({position:"absolute",width:"100%",height:"100%"})}_doDestory(){this._svg.detach(),super._doDestory()}active(){return this._svg.svg.firstElementChild&&+new Date-this._started<=ca.DURATION}draw(){const t=this._svg;var e=this.bounds;let i,s,r,n,o;switch(this.dir){case"up":s=e.x,r=e.y+e.height,n=e.width,i=t.quadratic(s,r,s+n/2,r,s+n,r),t._animateRevert(i,`M ${s} ${r} Q ${s+n/2} ${r} ${s+n} ${r} z`,`M ${s} ${r} Q ${s+n/2} ${r-ca.SIZE} ${s+n} ${r} z`,ca.DURATION);break;case"down":s=e.x,r=e.y,n=e.width,i=t.quadratic(s,r,s+n/2,e.y,s+n,r),t._animateRevert(i,`M ${s} ${r} Q ${s+n/2} ${r} ${s+n} ${r} z`,`M ${s} ${r} Q ${s+n/2} ${r+ca.SIZE} ${s+n} ${r} z`,ca.DURATION);break;case"left":s=e.x,r=e.y,o=e.height,i=t.quadratic(s,r,s,r+o/2,s,r+o),t._animateRevert(i,`M ${s} ${r} Q ${s} ${r+o/2} ${s} ${r+o} z`,`M ${s} ${r} Q ${s+ca.SIZE} ${r+o/2} ${s} ${r+o} z`,ca.DURATION);break;case"right":s=e.x+e.width,r=e.y,o=e.height,i=t.quadratic(s,r,s,r+o/2,s,r+o),t._animateRevert(i,`M ${s} ${r} Q ${s} ${r+o/2} ${s} ${r+o} z`,`M ${s} ${r} Q ${s-ca.SIZE} ${r+o/2} ${s} ${r+o} z`,ca.DURATION)}this._started=+new Date}}ca.CLASS_NAME="dlist-end-balloon",ca.SIZE=50,ca.DURATION=300;class ua extends Ve{clearFeedbacks(){this._endBalloon&&!this._endBalloon.active()&&this.removeEndBalloon()}removeEndBalloon(){this._endBalloon&&(this._endBalloon=this._endBalloon.destroy(),this.setAnimating(!1))}showEndBalloon(t,e){if(this._clearTimer&&(clearTimeout(this._clearTimer),this._clearTimer=void 0),this._endBalloon){if(this._endBalloon.active())return;this.removeEndBalloon()}const i=this._endBalloon=new ca(this.doc);i.bounds=Object.assign({},t),i.dir=e,i.draw(),i.appendTo(this),this.setAnimating(!0),this._clearTimer=setTimeout(()=>this.clearFeedbacks(),1e3)}_doInitDom(t,e){Object.assign(e.style,{pointerEvents:"none"})}}class ga extends Hn{constructor(t,e){super(t,e)}insertChild(t,e){if(!e._label){const i=e._label=this.doc.createElement("label");i.className=ga.SPAN_CLASS,i.style.position="absolute",i.style.overflow="hidden",i.style.textOverflow="ellipsis",Ve.BOUNDING&&(i.style.border=Ve.BOUNDING_BORDER)}super.insertChild(t,e)}_doPrepareRender(t,i){super._doPrepareRender(t,i),this._visibles.forEach((t,e)=>{t.prepareView(i)}),this._labelStyled=!1}_defaultExplicitWidth(t){return t}_doMeasureLayout(t,e,i,s){var r=this._visibles;return this.$_calcLabelSize(r,he(this._explicitWidth,i)),isNaN(this._szLabel)||(i=Math.max(0,i-this._szLabel-this.model().itemGap)),this._measureChildren(r,t,e,i,s,null),this.$_measureContent(t,i,s)}_doLayoutContent(t,e,i){var s=this._model;const r=this._visibles,n=this._pts,o=this._heights,a=this._szLabel,h=this._wLabel;let l=h+s.labelGap;r.forEach((t,e)=>{var i=t._label;isNaN(a)&&Re.setWidth(i,h),Re.move(i,0,n[e]+(o[e]-i.offsetHeight)/2),t.mx=l,t.my=n[e],t.mh=o[e],t.applyMeasuredBounds()})}$_calcLabelSize(e,a){if(0<a){const i=this._model,h=i.syncLabelWidth;let{szLabel:t,szMin:n,szMax:o}=i.getLabelWidth(a);if(this._szLabel=t,isNaN(t)){const l=i.labelStyle;let r=0;e.forEach((t,e)=>{const i=t._label;l&&Object.assign(i.style,l),i.style.whiteSpace="pre",i.textContent=t.model().getChildProp("label");let s=i.offsetWidth+1;h?r=Math.max(r,s):(s=q.clamp(s,n,o),t._explicitWidth=Math.max(0,a-s))}),h&&(this._szLabel=t=r),this._labelStyled=!0}isNaN(t)||(this._szLabel=q.clamp(t,n,o))}}$_measureContent(t,e,i){var s=this._model;const r=this._visibles,n=s.labelStyle,o=s.labelGap,a=s.itemGap,h=this._szLabel,l=this._pts=[0],d=this._heights=[];let _=0,c=0,u=0;return 0<r.length&&(r.forEach((t,e)=>{const i=t._label;this._labelStyled?isNaN(h)||(Re.setWidth(i,h),i.style.whiteSpace="pre-wrap"):(n&&Object.assign(i.style,n),isNaN(h)?i.style.whiteSpace="pre":(Re.setWidth(i,h),i.style.whiteSpace="pre-wrap"),i.textContent=t.model().getChildProp("label"));var s=Math.max(i.offsetHeight,t.mh);t._explicitHeight=s,d.push(s),u+=s,c=isNaN(h)?(_=Math.max(_,i.offsetWidth),Math.max(c,_+o+t.dom.offsetWidth)):Math.max(c,h+o+t.dom.offsetWidth),u+=a,l.push(u)}),u-=a),this._wLabel=isNaN(h)?_+1:h,{width:c,height:u}}}ga.SPAN_CLASS="dlist-form-label";class pa extends ha{constructor(t,e){super(t,e,pa.CLASS_NAME)}static createView(t,e,i){switch(i){case jr.LONG:return new fa(t,e);case jr.VERTICAL:return new wa(t,e);default:jr.DEFAULT;return new pa(t,e)}}display(){return jr.DEFAULT}search(){if(this._input.value)return this.model().search(this._input.value,this._options),!0}canShowResult(t){return this._chkAll.checked&&t&&(!t.isEmpty()||this.model().alwaysResult())}_initBody(t,e){this._createElements(t),this._initForm(t,e)}_prepareBody(t,e,i,s){var r=this._options=this._manager.owner().searchOptions();this._spanCase.textContent=s.matchCaseLabel(),this._chkCase.checked=r.matchCase,this._spanWhole.textContent=s.wholeWordLabel(),this._chkWhole.checked=r.matchWholeWord,this._spanExp.textContent=s.regExpLabel(),this._chkExp.checked=r.useRegExp,this._spanNext.textContent=s.searchNextLabel(),this._chkNext.checked=!r.searchAll,this._spanAll.textContent=s.searchAllLabel(),this._chkAll.checked=r.searchAll}_measureBody(t,e,i,s,r,n){let o=s.lineGap();return o!==this._lineGap&&(o=((this._lineGap=o)||0)/2+"px",this._lines.forEach(t=>{t.style.marginTop=o,t.style.marginBottom=o})),{width:i.dom.scrollWidth,height:i.dom.scrollHeight}}_measureButtons(t){this.$_checkOk()}$_checkOk(){const t=this.getButton(this.model().okButton());t&&t.setEnabled(0<this._input.value.length)}_createElements(t){this._input=t.createElement("input"),this._input.type="search",this._input.tabIndex=0,this._input.style.width="100%",this._input.oninput=()=>{this.$_checkOk()},this._chkCase=Re.createCheckBox(t,null),this._chkCase.onchange=()=>{this._options.matchCase=this._chkCase.checked},this._spanCase=t.createElement("label"),this._chkWhole=Re.createCheckBox(t,null),this._chkWhole.onchange=()=>{this._options.matchWholeWord=this._chkWhole.checked},this._spanWhole=t.createElement("label"),this._chkExp=Re.createCheckBox(t,null),this._chkExp.onchange=()=>{this._options.useRegExp=this._chkExp.checked},this._spanExp=t.createElement("label"),this._chkNext=Re.createRadio(t,null),this._chkNext.onchange=()=>{this._options.searchAll=this._chkAll.checked},this._spanNext=t.createElement("label"),this._chkAll=Re.createRadio(t,null),this._chkAll.onchange=()=>{this._options.searchAll=this._chkAll.checked},this._chkAll.style.marginLeft="10px",this._spanAll=t.createElement("label"),this._chkAll.name=this._chkNext.name="dl-search"}_addLine(t,e,i,s){return(s=s||Re.createElement(t,"div",{display:"flex"})).appendChild(e),e.style.marginRight="4px",i.htmlFor=e.id=Re.getDomId(),i.style.whiteSpace="pre",s.appendChild(i),s}_initForm(t,e){const i=this._lines=[this._input];var s;i.push(this._addLine(t,this._chkCase,this._spanCase)),i.push(this._addLine(t,this._chkWhole,this._spanWhole)),i.push(this._addLine(t,this._chkExp,this._spanExp)),s=this._addLine(t,this._chkNext,this._spanNext),i.push(this._addLine(t,this._chkAll,this._spanAll,s)),i.forEach(t=>e.appendDom(t))}_submit(){return this.search()}}pa.CLASS_NAME="dlist-search-panel";class fa extends pa{display(){return jr.LONG}_getDefaultButtonPosition(){return Ur.RIGHT}_measureBody(t,e,i,s,r,n){s=s.lineGap();return this._input.style.marginBottom=s+"px",this._line.style.marginBottom=s+"px",i.getOffsetSize()}_initForm(t,e){e.appendDom(this._input);var i=this._line=this._addLine(t,this._chkCase,this._spanCase);this._spanCase.style.marginRight="10px",this._addLine(t,this._chkWhole,this._spanWhole,i),this._spanWhole.style.marginRight="10px",this._addLine(t,this._chkExp,this._spanExp,i),e.appendDom(i),i=this._addLine(t,this._chkNext,this._spanNext),this._addLine(t,this._chkAll,this._spanAll,i),e.appendDom(i)}}class wa extends pa{display(){return jr.VERTICAL}_measureBody(t,e,i,s,r,n){const o=de(s.lineGap()||0);return this._input.style.marginBottom=o,this._lines.forEach(t=>t.style.marginBottom=o),i.getOffsetSize()}_initForm(t,e){const i=this._lines=[this._input];i.push(this._addLine(t,this._chkCase,this._spanCase)),i.push(this._addLine(t,this._chkWhole,this._spanWhole)),i.push(this._addLine(t,this._chkExp,this._spanExp)),i.push(this._addLine(t,this._chkNext,this._spanNext)),i.push(this._addLine(t,this._chkAll,this._spanAll)),i.forEach(t=>e.appendDom(t)),this._chkAll.style.marginLeft=""}}class ma extends To{constructor(t,e){super(t,e,ma.CLASS_NAME)}canEnter(){return!this._search.disabled}search(){this.canEnter()&&this._model.search(this._input.value)}setResult(t){this._result=t,this._reset.disabled=!t||t.isEmpty(),this._search.disabled=!t&&!this._input.value}isDom(t){return this.dom.contains(t)||super.isDom(t)}clickable(){return!0}click(t,e,i){t===this._search?this.search():t===this._reset?(this._result.clear(),this.control.invalidateLayout()):t===this._menu&&this._model.clickMenu()}_doInitContent(t,e){Object.assign(e.style,{display:"flex",alignItems:"center",gap:"5px"}),e.appendChild(this._input=t.createElement("input")),this._input.type="search",this._input.placeholder="검색어를 입력하세요.",this._input.style.flex="1 1 auto",this._input.oninput=()=>{this._search.disabled=!this._result&&this._input.value.length<1},e.appendChild(this._search=js.createButton(t,Go["@search"],24,Eo.BUTTON_CLASS)),this._search.disabled=!0,this._search.style.flex="0 0 auto",e.appendChild(this._reset=js.createButton(t,Go["@refresh"],24,Eo.BUTTON_CLASS)),this._reset.disabled=!0,this._reset.style.flex="0 0 auto",e.appendChild(this._menu=js.createButton(t,Go["@menu"],24,Eo.BUTTON_CLASS)),this._menu.style.flex="0 0 auto"}_doPrepareRender(t,e){var i=this._model;this.$_prepareButtons(t,i)}_doMeasureContent(t,e,i){const s=this._model;return this._reset.style.display=s.resetVisible()?"":"none",this._menu.style.display=s.optionsVisible()?"":"none",{width:e,height:this.content.offsetHeight}}_doRenderContent(t,e,i){this._model}$_prepareButtons(t,e){}}ma.CLASS_NAME="dlist-search-bar";class va extends To{constructor(t,e){super(t,e,va.CLASS_NAME),this._closed=!1}setResult(t){this._result=t,this._closed=!1,this.control.invalidateLayout(),this.refreshView()}refreshView(){const t=this._result;if(t){const s=this._buttons;var e=t.isEmpty(),i=t.current();s[va.PREV].disabled=s[va.FIRST].disabled=e||0==i,s[va.NEXT].disabled=s[va.LAST].disabled=e||i===t.count()-1}}isDom(t){return this.dom.contains(t)||super.isDom(t)}setVisible(t){return super.setVisible(t&&!this._closed)}clickable(){return!0}click(t,e,i){if(t===this._close)this._model.clearWhenClose()&&this._result.clear(),this._closed=!0,this.control.invalidateLayout();else for(const s in this._buttons)if(t===this._buttons[s]){switch(this._buttons[s].value){case va.FIRST:this._result.moveFirst();break;case va.PREV:this._result.movePrev();break;case va.NEXT:this._result.moveNext();break;case va.LAST:this._result.moveLast()}break}}_doInitContent(t,e){Object.assign(e.style,{display:"flex",alignItems:"center",gap:"5px"}),e.appendChild(this._title=t.createElement("span")),Object.assign(this._title.style,{flex:"0 1 auto",whiteSpace:"pre",overflow:"hidden",textOverflow:"ellipsis"}),this._title.textContent="검색 결과:",e.appendChild(this._counts=t.createElement("span")),Object.assign(this._counts.style,{flex:"0 0 auto",textAlign:"center",minWidth:"50px"}),this._counts.textContent="0 / 0",e.appendChild(this._container=t.createElement("div")),Object.assign(this._container.style,{display:"flex",justifyContent:"center",flex:"1 0 auto"}),this.$_prepareButtons(t,this._container,this._model),e.appendChild(this._close=js.createButton(t,Go["@close"],24,Eo.BUTTON_CLASS)),this._close.style.flex="0 0 auto"}_doPrepareRender(t,e){}_doMeasureContent(t,e,i){this.model;const s=this._result;return s&&(this._counts.textContent=s.current()+1+" / "+s.count()),{width:e,height:this.content.offsetHeight}}_doRenderContent(t,e,i){this.model}$_prepareButton(t,e){const i=t.createElement("button");e=Go[e];const s=new zi(t);return s.setViewSize(e.width),s.path(e.path),s.makeBackground().fillSize(),i.appendChild(s.svg),i.className=Eo.BUTTON_CLASS,i}$_prepareButtons(i,s,t){const r=this._buttons={};[va.FIRST,va.PREV,va.NEXT,va.LAST].forEach(t=>{const e=this.$_prepareButton(i,t);e.value=t,Re.resize(e,24,24),s.appendChild(e),r[t]=e})}}va.CLASS_NAME="dlist-search-result",va.FIRST="@first",va.PREV="@prev",va.NEXT="@next",va.LAST="@last",(_n=tn=tn||{}).NORMAL="norml",_n.HEADER="header",_n.SEPARATOR="separator",_n.SUBMENU="submenu",_n.CHECK="check",_n.RADIO="radio";class ya extends a{constructor(t,e){super(),this.type=tn.NORMAL,this._checked=!1,this._parent=t,Object.assign(this,e)}parent(){return this._parent}get items(){return this._items?this._items.slice(0):[]}set items(t){this._items=t?t.slice(0):[]}get checked(){return this._checked}set checked(t){t!==this._checked&&(this._checked=t)&&this._parent&&ba.checkItem(this,this._parent.items)}checkable(){return this.type===tn.CHECK||this.type===tn.RADIO}$_click(t){switch(this.type){case tn.HEADER:case tn.SEPARATOR:break;case tn.CHECK:case tn.RADIO:default:return this.onClick&&!0===this.onClick(t,this)}}}(_n=en=en||{}).TOP="top",_n.BOTTOM="bottom",_n.LEFT="left",_n.RIGHT="right",_n.HEADER="header",_n.FOOTER="footer",_n.CENTER="center";class ba extends Le{constructor(t,e){super(t),this._checkSize=20,this.separator=!0,this.autoCheck=!0,this.autoHide=!0,this.fillWidth=!1,this.fillHeight=!0,this.origin=en.RIGHT;const i=e.items;delete e.items;try{const s=this._itemMap={};if(Object.assign(this,e),i){this._items=i.map(t=>new ya(this,t));for(let t=this._items.length-1;0<=t;t--){const r=this._items[t];if(r.id&&(s[r.id]=r),r.checked&&r.checkable()){this.checkItem(r);break}}}else this._items=[]}finally{i&&(e.items=i)}}static checkItem(t,e){if(t.type===tn.RADIO&&e){var i=t.group;for(const s of e)s===t||s.type!==tn.RADIO||s.group!==i&&(s.group||i)||(s.checked=!1)}}get checkSize(){return this._checkSize}set checkSize(t){t!==this._checkSize&&(this._checkSize=t)}get items(){return this._items?this._items.slice(0):[]}set items(t){this._items=t?t.slice(0):[]}getItem(t){return this._itemMap[t]}show(e){this.onShow&&this.onShow(e,this),this._items.forEach(t=>t.onShow&&t.onShow(e,t))}close(t){this.onClose&&this.onClose(t,this)}clickItem(t,e){var i=e.checkable();return this.autoCheck&&i&&(e.checked=!e.checked),e.$_click(t)||this.onClick&&this.onClick(t,this,e),this.alwaysHide||!i}checkItem(t){ba.checkItem(t,this._items)}}class Sa extends Ve{constructor(t){super(t,!1,"dlist-menu-item")}model(){return this._model}setModel(t,e){this._model=t,this._spanLabel.textContent=t.label,this._divMenu.style.borderBottom=e?"1px solid #ccc":"",t.type===tn.CHECK||t.type===tn.RADIO?this._shape&&"check"===this._shape.name()||(this._shape&&this._shape.remove(),this._shape=this.control.shapes().createShape(this.doc,"@check"),this._shape.appendTo(this._divMenu),this._shape.resize(Sa.CHECK_SIZE),this.$_resetCheck(this._shape.dom())):this._shape&&this._shape.setVisible(!1)}refresh(){this._shape&&this.$_resetCheck(this._shape.dom())}touched(){this.dom.dataset.touched="1"}clearTouched(){delete this.dom.dataset.touched}isDom(t){return this.containsDom(t)}_doInitDom(t,e){Object.assign(e.style,{position:"relative",display:"flex",alignItems:"center",pointerEvents:"auto"}),this._divImage=t.createElement("div"),this._divImage.style.flex="0 0 24px",e.appendChild(this._divImage),this._divMenu=t.createElement("div"),Object.assign(this._divMenu.style,{display:"flex",alignItems:"center",flex:"1 1 auto",boxSizing:"content-box",padding:"10px 5px"}),this._spanLabel=t.createElement("span"),Object.assign(this._spanLabel.style,{flex:"1 1 auto",whiteSpace:"pre",overflow:"hidden",textOverflow:"ellipsis"}),this._divMenu.appendChild(this._spanLabel),e.appendChild(this._divMenu)}$_resetCheck(t){t.style.stroke=this._model.checked?"#333":"#ccc",t.style.fill=this._model.checked?"#333":"#ccc"}}Sa.CHECK_SIZE=24;class Ca extends Hs{constructor(t){super(t,!0,"dlist-menu"),this._itemPool=[],this._itemViews=[],this._lineGap=8}get model(){return this._model}show(e,i,t,s){if(!this.visible){const r=this._itemContainer;if(this.setVisible(!0),e.origin===en.CENTER)this.$_refresh(this.doc,e,i,t,!1),r.center(i,t),this.dom.style.backgroundColor="#00000040",r.dom.style.border="1px solid #777";else if(this.$_refresh(this.doc,e,i,t),r.dom.style.border="",s){const n=r.dom;let t;if(t=e.origin===en.LEFT?[{left:-r.width+"px"},{left:"0px"}]:[{left:i+"px"},{left:i-r.width+"px"}],t){const o=n.animate(t,{delay:100,duration:150,fill:"both"});o.addEventListener("finish",()=>{}),this.dom.animate([{backgroundColor:"#00000000"},{backgroundColor:"#00000040"}],{duration:500,fill:"both"})}}else e.origin===en.LEFT?this.moveX(0):this.moveX(i-this._itemContainer.width)}}hide(e){if(this.visible){if(e&&this._model.origin!==en.CENTER){e=this._itemContainer;const i=e.dom;let t;t=this._model.origin===en.LEFT?[{left:"0px"},{left:-e.width+"px"}]:[{left:e.x+"px"},{left:e.x+e.width+"px"}];const s=i.animate(t,{duration:150,fill:"none"});s.addEventListener("finish",()=>{this.setVisible(!1);var t=this.control.wrapperOrThis();this.remove(),this._model.close(t),this._model=null}),this.dom.animate([{backgroundColor:"#00000040"},{backgroundColor:"#00000000"}],{duration:500,fill:"both"})}else this.setVisible(!1),this.remove(),this._model=null;return!0}}$_refresh(t,e,i,s,r=!0){var n=this.measure(t,this._model=e,i,s),e=.7*i>>0;this.resize(i,s),this._itemContainer.resize(e,r?s:n.height),this.render(t)}resetRadios(){this._itemViews.forEach(t=>t.model().type===tn.RADIO&&t.refresh())}isMenuView(t){return this.containsDom(t)}setTouched(t){(this._touched=t).touched()}clearTouched(){this._touched&&this._touched.clearTouched()}_doInitDom(t,e){e.style.pointerEvents="all"}_doInitContent(t,e){this._itemContainer=new Ve(t),this._itemContainer.setStyles({position:"absolute",display:"flex",flexDirection:"column",padding:"5px 0px",backgroundColor:"#efefef"}),this.addChild(this._itemContainer)}_doPrepareRender(e,t){var i=t.items;const s=this._itemPool,r=this._itemViews;for(;r.length<i.length;){let t=s.pop();t=t||this.$_createItemView(e),r.push(t),this._itemContainer.addChild(t)}this._model=t}_doMeasure(t,e,i){const r=this._model,n=this._itemViews;return this._itemContainer.getPadding(),r.items.forEach((t,e,i)=>{const s=n[e];s.setModel(t,r.separator&&e<i.length-1)}),this._itemContainer.getOffsetSize()}_doRender(t,e,i){}$_createItemView(t){return new Sa(t)}}class xa extends Ve{isDirty(){return this._item.filter.enabled!=this._check.checked}setItem(t,e,i){e=xa.CLASS_NAME+"-"+e;this._item=t,this._check.id=e,this._check.checked=t.filter.enabled,this._label.htmlFor=e,this._label.textContent=t.label}_doInitDom(t,e){e.className=xa.CLASS_NAME,Re.setStyle(e,{position:"relative",display:"flex",flexDirection:"row",padding:"4px 4px"}),e.appendChild(this._check=Re.createCheckBox(t,{marginRight:"8px",flex:"0 0 auto"})),e.appendChild(this._label=Re.createElement(t,"label",{flex:"1 1 auto",whiteSpace:"pre"}))}}xa.CLASS_NAME="dlist-filter-panel-item";class Ra extends ha{constructor(t,e){super(t,e,Ra.CLASS_NAME),this._itemViews=[]}_prepareBody(t,e,i,s){this._dv=i.data(),s.prepare(this._dv)}_prepareButtons(t){}_measureBody(t,e,i,s,r,n){return this.$_buildFilters(t,i,s),i.getOffsetSize()}_measureButtons(t){this.$_checkOk()}_doAfterRender(){this.model().unprepare(),super._doAfterRender()}click(t,e,i){for(var s of this._itemViews)if(s.isView(t)){if(this.model().autoApply())return this._dv.toggleFilter(s._item.filter,!0),!0;setTimeout(()=>{this.$_checkOk()},0)}return!1}_submit(){var t=this._itemViews.filter(t=>t.isDirty()).map(t=>t._item.filter);return this._dv.toggleFilters(t,!0),!0}$_buildFilters(t,e,i){const s=i.getItems(),r=this._itemViews;for(;r.length<s.length;){var n=new xa(t);e.addChild(n),r.push(n)}for(;r.length>s.length;)r.pop().remove();r.forEach((t,e)=>t.setItem(s[e],e,!1)),this.$_checkOk()}$_checkOk(){const t=this.getButton(this.model().okButton());if(t){for(var e of this._itemViews)if(e.isDirty())return void t.setEnabled(!0);t.setEnabled(!1)}}}Ra.CLASS_NAME="dlist-filter-panel";const Ea="①".charCodeAt(0);class Va extends Ve{setField(t,e){this._field=t,this._span.textContent=t.displayText(),e?(this._mark.style.display="",this._mark.textContent=e.dir===f.ASCENDING?"↓":"↑",this._order.style.display="",this._order.textContent=String.fromCharCode(Ea+e.order)):(this._mark.style.display="none",this._order.style.display="none")}_doInitDom(t,e){e.className=Va.CLASS_NAME,e.style.display="inline-flex",e.style.alignItems="center",e.appendChild(this._span=Re.createSpan(t,{whiteSpace:"pre"})),e.appendChild(this._mark=Re.createSpan(t,{fontFamily:"Helvetica",fontWeight:"bold",color:"#111",marginLeft:"2px"})),e.appendChild(this._order=Re.createSpan(t,{color:"#111",fontWeight:"bold",marginLeft:"2px"}))}_getPositionStyle(){return""}}Va.CLASS_NAME="dlist-field-bar-item";class $a extends To{constructor(t,e){super(t,e,$a.CLASS_NAME),this._itemViews=[]}_doInitContent(t,e){Object.assign(e.style,{display:"flex",flexDirection:"row",alignItems:"center",flexWrap:"wrap"})}_doMeasureContent(t,e,i){return this.content.style.width=e+"px",this.$_buildItems(t,this._model),{width:e,height:this.content.offsetHeight}}_doRenderContent(t,e,i){this.content.style.width="100%"}clickable(){return!0}isDom(t){for(var e of this._itemViews)if(e.isView(t))return!0}click(t,e,i){for(var s of this._itemViews)if(s.isView(t)){this._model.sortField(s._field);break}}$_buildItems(t,s){const r=s.getFields(),e=this._itemViews;for(;e.length<r.length;){var i=new Va(t);this.addChild(i),e.push(i)}for(;e.length>r.length;)this.removeChild(e.pop());e.forEach((t,e)=>{var i=s.getSort(r[e]);t.setField(r[e],i)})}}$a.CLASS_NAME="dlist-field-bar";class Aa extends Po{constructor(t,e){super(t,e,Aa.CLASS_NAME)}click(t,e,i){const s=this._layoutView instanceof Hn&&this._layoutView.simpleByDom(t,!0);t=s&&s.model().renderer;t instanceof Gi&&this.model().sortField(t.field||s.model().field())}}Aa.CLASS_NAME="dlist-field-header";class La extends Hs{constructor(t,e){super(t,!1),e||lt(Z.layoutMustSet),this._model=e}build(t,e){var i=this._view=this._model.clone();this.appendDom(i)}refreshModels(t){}prepareLayout(t,e){var i=this.dom.style;this._doPrepareRender(t,e),this._doApplyStyles(i),this._doApplyImportantStyles(i),this._prevMax={width:NaN,height:NaN},this.mw=this.mh=NaN;const s=this._padding=this.getPadding2();s.horz=s.left+s.right+s.borderLeft+s.borderRight,s.vert=s.top+s.bottom+s.borderTop+s.borderBottom}measureLayout(t,e,i,s){var r=this._padding;i-=r.horz,s-=r.vert;const n=this._doMeasure(t,i,s);return this.mw=n.width+=r.horz,this.mh=n.height+=r.vert,n}_doInitContent(t,e){Ve.BOUNDING&&(e.style.boxSizing="border-box",e.style.border=Ve.BOUNDING_BORDER_2)}prepareView(t){}_doPrepareRender(t,e){this._manager=e}_doApplyStyles(t){}_doApplyImportantStyles(t){this.setImportantStyle(t,"position","absolute"),this.setImportantStyle(this._view.style,"position","absolute")}_doMeasure(t,e,i){this._manager;var s=!isNaN(this._explicitWidth);return isNaN(this._explicitHeight),s&&(e=this._explicitWidth),this._view.style.width=e+"px",this._model.apply(this._view),{width:e,height:this._view.offsetHeight}}_doRender(t,e,i){Re.resize(this.dom,e,i)}_doAfterRender(){super._doAfterRender(),this._manager=null}_doMeasureContent(t,e,i){}_doLayoutContent(t,e,i){}}(_n=sn=sn||{}).TOP="top",_n.BOTTOM="bottom",_n.CENTER="center";class Da extends s{constructor(t){super(),this.duration=3e3,this.position=sn.BOTTOM,this.margin=50,t&&(this.message=t.message,this.html=t.html,0<t.duration&&(this.duration=t.duration),t.position&&(this.position=t.position),isNaN(t.margin)||(this.margin=t.margin),this.style=t.style)}}class ka extends Ve{constructor(t){super(t,!1,"dlist-toast")}show(t,e){const i=this.dom;var s=t.width,r=t.height;this.$_hide(),"string"==typeof e.style?this.setClassName(e.style):e.style&&this.setStyles(e.style),t.addChild(this),this.setVisible(!0),e.html?i.innerHTML=e.html:i.textContent=e.message;var n=i.offsetHeight,o=e.margin;let a;switch(e.position){case sn.TOP:a=o;break;case sn.CENTER:a=(r-n)/2+o;break;default:a=r-n-o}a=Math.max(0,Math.min(r-n,a)),this.move((s-i.offsetWidth)/2,a),this.$_show(e)}$_hide(){this.setVisible(!1),this.remove()}$_show(t){this.dom.animate([{opacity:"0"},{opacity:"1"}],{duration:ka.EFFECT_DURATION,fill:"forwards"});const e=this.dom.animate([{opacity:"1"},{opacity:"0"}],{delay:t.duration,duration:2*ka.EFFECT_DURATION,fill:"forwards"});e.addEventListener("finish",()=>{this.$_hide()})}}ka.EFFECT_DURATION=500;class Ta extends Hn{constructor(t,e){super(t,e)}scrollable(){return!0}_doInitContent(t,e){super._doInitContent(t,e),e.style.overflow="auto"}_doPrepareRender(t,e){super._doPrepareRender(t,e),0<this._visibles.length&&this._visibles[0].prepareView(e)}_doLayoutContent(t,e,i){0<this._visibles.length&&this._visibles[0].applyMeasuredBounds()}_doMeasureLayout(t,e,i,s){return this._measureChildren(this._visibles,t,e,i,s,null),{width:i,height:s}}}class Pa extends $s{_doInitDefaults(){super._doInitDefaults(),this.setVisible(!1),this.setLength(Pa.LENGTH),this._floating=!1,this._minWidth=Pa.MIN_WIDTH,this._spaceCharacter="•",this._caseSensitive=!1,this._autoScroll=!0,this._groups=this._defGroups=this.$_buildGroups("가-하,A-Z")}onLetterClick(){return ne(this._onLetterClick,this._defs&&this._defs._onLetterClick)}setOnLetterClick(t){this._onLetterClick=t}length(){return ne(this._length,this._defs&&this._defs._length)}setLength(t){var e;e=t,(t=isNaN(e)&&("string"!=typeof e||!e.trimRight().endsWith("*")||isNaN(parseFloat(e)))?Pa.LENGTH:t)!==this._length&&(this._length=t,this._changed())}floating(){return ne(this._floating,this._defs&&this._defs._floating)}setFloating(t){t!==this._floating&&(this._floating=t,this._changed())}width(){return ne(this._width,this._defs&&this._defs._width)}setWidth(t){(t=he(t,NaN))!==this._width&&(this._width=t,this._changed())}minWidth(){return ne(this._minWidth,this._defs&&this._defs._minWidth)}setMinWidth(t){(t=he(t,NaN))!==this._minWidth&&(this._minWidth=t,this._changed())}maxWidth(){return ne(this._maxWidth,this._defs&&this._defs._maxWidth)}setMaxWidth(t){(t=he(t,NaN))!==this._maxWidth&&(this._maxWidth=t,this._changed())}spaceCharacter(){return ne(this._spaceCharacter,this._defs&&this._defs._spaceCharacter)}setSpaceCharacter(t){t!==this._spaceCharacter&&(this._spaceCharacter=t,this._changed())}caseSensitive(){return ne(this._caseSensitive,this._defs&&this._defs._caseSensitive)}setCaseSensitive(t){this._caseSensitive=t}letters(){return ne(this._letters,this._defs&&this._defs._letters)}setLetters(t){(t=t&&t.trim())!==this._letters&&(this._letters=t,this._groups=this.$_buildGroups(t),this._changed())}indexField(){return ne(this._indexField,this._defs&&this._defs._indexField)}setIndexField(t){this._indexField=t}autoScroll(){return ne(this._autoScroll,this._defs&&this._defs._autoScroll)}setAutoScroll(t){this._autoScroll=t}getLength(t){return rt(this._len,t)}getLetters(i){let s=this._groups;s=s||(this._defs?this._defs._groups||this._defs._defGroups:this._defGroups);let n=[];for(let t=0,e=Math.min(i,s.length);t<e;t++)n.push(s[t][0]);let r=i-n.length;if(0<r){const u=s.slice(0).sort((t,e)=>e.length-t.length);var t,o=u.length,a=r;const g=[];let e=0;n=[];for(t of u)e+=t.length-1;if(e<=i)for(var h of u)for(var l of h)n.push(l);else{r=i;for(let t=0;t<o&&0<r;t++){var d=Math.floor(u[t].length*a/e);g.push(d),r-=d}if(0<r)for(let t=0;t<o&&0<r;t++){var _=u[t].length*a/e;Math.round(_)>_&&(g[t]++,r--)}if(0<r)for(let t=0;t<o&&0<r;t++)g[t]++,r--;for(let t=0;t<o;t++){var c=s[t];!function(i,s){if(1===s)n.push(i[0]);else{var r=i.length/s;let t=0,e=1;for(n.push(i[0]);e<i.length;)e-t>=r&&n.push(i[e>>0]),t=e,e+=r}}(c,g[u.indexOf(c)])}}}return n}clickLetter(t){const e=this.onLetterClick();if(e)return e(t)}_doPrepareRender(){this._len=it(this.length(),!1)}$_extractChars(t){const i=t.trim().split(""),e=[];if(0<i.length){for(let e=0;e<i.length;e++){var s=i[e];for(let t=0;t<ce.length-1;t++)s>=ce[t]&&s<ce[t+1]&&(i[e]=ce[t])}if(2<i.length&&"-"===i[1]){let t=i[0];for(var r=i[2];e.push(t),t=t>=ce[0]&&t<=ce[ce.length-1]?ce[ce.indexOf(t)+1]:String.fromCharCode(t.charCodeAt(0)+1),t<=r;);}else for(let t=0;t<i.length;t++)e.push(i[t])}return 0<e.length?e:null}$_buildGroups(t){t=t.split(",").map(t=>this.$_extractChars(t)).filter(t=>!!t);return 0<t.length?t:null}}Pa.LENGTH="85%",Pa.MIN_WIDTH=20,Pa.LETTER_GAP=2,(_n=rn=rn||{}).FIRST="first",_n.PREV="prev",_n.NEXT="next",_n.LAST="last";class Ma extends t{constructor(t,e,i,s){super(),this._disabled=!1,this._owner=t,this._action=e,this._label=i,this._defs=s}owner(){return this._owner}action(){return this._action}label(){return this._label}className(){return ne(this._className,this._defs&&this._defs._className)}setClassName(t){t!==this._className&&(this._className=t,this._changed())}disabledClass(){return ne(this._disabledClass,this._defs&&this._defs._disabledClass)}setDisabledClass(t){t!==this._disabledClass&&(this._disabledClass=t,this._changed())}hint(){return ne(this._hint,this._defs&&this._defs._hint)}setHint(t){t!==this._hint&&(this._hint=t,this._changed())}disabled(){return this._disabled}$_setDisabled(t){t!==this._disabled&&(this._disabled=t,this._changed())}run(){const t=this._owner.owner().pageModel();switch(this._action){case rn.FIRST:t.setPage(0);break;case rn.PREV:t.incPage(-1);break;case rn.NEXT:t.incPage(1);break;case rn.LAST:t.setPage(t.pageCount()-1)}}_changed(){var t;null!==(t=this._owner)&&void 0!==t&&t._itemChanged(this)}}class Ia extends t{constructor(t,e){super(),this._owner=t,this._defs=e}className(){return ne(this._className,this._defs&&this._defs._className)}setClassName(t){t!==this._className&&(this._className=t,this._changed())}_changed(){var t;null!==(t=this._owner)&&void 0!==t&&t._itemChanged(this)}}class Na extends Ls{constructor(t,e,i){super(t,i),this._owner=e,this._first=new Ma(this,rn.FIRST,"<<",i&&i._first),this._prev=new Ma(this,rn.PREV,"<",i&&i._prev),this._next=new Ma(this,rn.NEXT,">",i&&i._next),this._last=new Ma(this,rn.LAST,">>",i&&i._last),this._page=new Ia(this,i&&i._page),this._total=new Ia(this,i&&i._total)}_doInitDefaults(){super._doInitDefaults(),this._width=60,this._height=60,this._itemGap=10,this._buttonSize=36}owner(){return this._owner}first(){return this._first}prev(){return this._prev}next(){return this._next}last(){return this._last}width(){return ne(this._width,this._defs&&this._defs._width)}setWidth(t){t!==this._width&&(this._width=t,this._changed())}height(){return ne(this._height,this._defs&&this._defs._height)}setHeight(t){t!==this._height&&(this._height=t,this._changed())}itemGap(){return ne(this._itemGap,this._defs&&this._defs._itemGap)}setItemGap(t){t!==this._itemGap&&(this._itemGap=t,this._changed())}itemGap2(){return ne(this._itemGap2,this._defs&&this._defs._itemGap2)}setItemGap2(t){t!==this._itemGap2&&(this._itemGap2=t,this._changed())}buttonSize(){return ne(this._buttonSize,this._defs&&this._defs._buttonSize)}setButtonSize(t){(t=ae(t))!==this._buttonSize&&(this._buttonSize=t,this._changed())}_doPrepareRender(){const t=this._owner.pageModel();var e=t.page(),i=t.pageCount();this._first.$_setDisabled(0===e),this._prev.$_setDisabled(this._first.disabled()),this._last.$_setDisabled(i-1<=e),this._next.$_setDisabled(this._last.disabled())}_itemChanged(t){this._changed()}}class Oa extends t{constructor(t,e){super(),this._owner=t,this._defs=e||void 0,e||this._doInitDefaults()}_doInitDefaults(){}className(){return ne(this._className,this._defs&&this._defs._className)}setClassName(t){t!==this._className&&(this._className=t,this._changed())}hint(){return ne(this._hint,this._defs&&this._defs._hint)}setHint(t){t!==this._hint&&(this._hint=t)}_changed(){var t;null!==(t=this._owner)&&void 0!==t&&t._indexChanged(this)}}class Ba extends Oa{_doInitDefaults(){super._doInitDefaults(),this._visible=!0}visible(){return ne(this._visible,this._defs&&this._defs._visible)}setVisible(t){t!==this._visible&&(this._visible=t,this._changed())}}(_n=nn=nn||{}).NEAR="near",_n.FAR="far";class Fa extends $s{constructor(t,e){super(t,e),this._first=new Ba(this,e&&e._first),this._last=new Ba(this,e&&e._last),this._index=new Oa(this,e&&e._index),this._current=new Oa(this,e&&e._current)}_doInitDefaults(){super._doInitDefaults(),this.setVisible(!1),this._position=nn.FAR,this._itemGap=7,this._autoScroll=!0,this._width=50,this._height=50}position(){return ne(this._position,this._defs&&this._defs._position)}setPosition(t){t!==this._position&&(this._position=t,this._changed("position"))}itemGap(){return ne(this._itemGap,this._defs&&this._defs._itemGap)}setItemGap(t){(t=q.toNumber(t,0))!==this._itemGap&&(this._itemGap=t,this._changed("itemGap"))}autoScroll(){return this._autoScroll}setAutoScroll(t){this._autoScroll=t}first(){return this._first}last(){return this._last}index(){return this._index}current(){return this._current}width(){return ne(this._width,this._defs&&this._defs._width)}setWidth(t){(t=ae(t))!==this._width&&(this._width=t,this._changed())}height(){return ne(this._height,this._defs&&this._defs._height)}setHeight(t){(t=ae(t))!==this._height&&(this._height=t,this._changed())}_doPrepareRender(){}_indexChanged(t){this._changed()}}class za extends $s{_doInitDefaults(){super._doInitDefaults(),this.setVisible(!1),this._floating=!0,this._barWidth=za.BAR_WIDTH,this._thumbWidth=za.THUMB_WIDTH,this._minThumbLength=za.MIN_THUMB_LENGTH}floating(){return ne(this._floating,this._defs&&this._defs._floating)}setFloating(t){t!==this._floating&&(this._floating=t,this._changed())}barWidth(){return ne(this._barWidth,this._defs&&this._defs._barWidth)}setBarWidth(t){t=he(t,void 0),(t=!isNaN(t)?Math.max(0,t):t)!==this._barWidth&&(this._barWidth=t,this._changed())}thumbWidth(){return ne(this._thumbWidth,this._defs&&this._defs._thumbWidth)}setThumbWidth(t){t=he(t,void 0),(t=!isNaN(t)?Math.max(0,t):t)!==this._thumbWidth&&(this._thumbWidth=t,this._changed())}minThumbLength(){return ne(this._minThumbLength,this._defs&&this._defs._minThumbLength)}setMinThumbLength(t){t=he(t,void 0),(t=!isNaN(t)?Math.max(0,t):t)!==this._minThumbLength&&(this._minThumbLength=t,this._changed())}_doPrepareRender(){}}za.BAR_WIDTH=6,za.THUMB_WIDTH=4,za.PIXELS_PER_ROW=1,za.MIN_THUMB_LENGTH=30;class Ha extends $s{_doInitDefaults(){super._doInitDefaults(),this._showHandle=!0}showHandle(){return ne(this._showHandle,this._defs&&this._defs._showHandle)}setShowHandle(t){t!==this._showHandle&&(this._showHandle=t,this._changed())}_doPrepareRender(){}}class Wa extends a{constructor(t,e,i){super(),this._group=t instanceof Ne?t:null,this._data=t instanceof Ne?t.data():t,this._start=e,this._end=i}_doDestory(){this._group=null}get start(){return this._start}get end(){return this._end}get min(){return Math.min(this._start,this._end)}get max(){return Math.max(this._start,this._end)}resize(t){return 0<=t&&(t=Math.min(t,this.$_getMax()))!==this._end&&(this._end=t,!0)}contains(t){return t>=this.min&&t<=this.max}isRowSelected(t){if(this._group){var e=this._group.itemOfRow(t,!1);return e&&this.contains(e.index)}return this.contains(t)}getSelectedRows(){if(this._group){const i=[];for(let t=this.min,e=this.max;t<=e;t++){const s=this._group.getItem(t);s instanceof Te&&i.push(s.row())}return i}return q.makeIntArray(this.min,this.max+1)}getSelectedItems(){return q.makeIntArray(this.min,this.max+1)}$_getMax(){return this._group?this._group.itemCount()-1:this._data.rowCount()-1}}class Ga{constructor(){this.template=void 0,this.indent=void 0,this.rowBar=void 0,this.editBar=void 0,this.style=void 0}assign(t){return q.assignProps(this,t)}copy(){return Object.assign({},this)}}class Ua extends t{constructor(t,e){super(),this._infos={},this._owner=t,this._defs=e||void 0}master(){const t=this._master||this._defs&&this._defs._master;return t&&t.copy()}setMaster(t){t!==this._master&&(t?(this._master||(this._master=new Ga),this._master.assign(t)):this._master=void 0,this._owner.invalidateLayout())}prepareRender(){this.dv=this._owner.data()}getInfo(t){const e=this._infos[t];return e&&e.copy()}setInfo(t,e,i=0){const s=this._infos[t]||new Ga;e=s.assign(e);return this._infos[t]=s,e}setInfos(t){for(const e in t)this.setInfo(e,t[e],!1)}getRowTemplate(t){var e=this._infos[t];return ne(e&&e.template,this._defs&&this._defs.getRowTemplate(t))}getIndent(t){var e=this._infos[t];return ne(e&&e.indent,this._defs&&this._defs.getIndent(t))}getRowBar(t){var e=this._infos[t];return ne(e&&e.rowBar,this._defs&&this._defs.getRowBar(t))}getEditBar(t){var e=this._infos[t];return ne(e&&e.editBar,this._defs&&this._defs.getEditBar(t))}getStyle(t){var e=this._infos[t];return ne(e&&e.style,this._defs&&this._defs.getStyle(t))}}class qa extends Lo{_doInitDefaults(){super._doInitDefaults(),this.setVisible(!0)}caption(){return ne(this._model&&this._model.caption,super.caption())}style(){return ne(this._model&&this._model.style,super.style())}showCheck(){return ne(this._model&&this._model.showCheck,super.showCheck())}autoCheck(){return ne(this._model&&this._model.autoCheck,super.autoCheck())}setModel(t){this._model=t||void 0}}function ja(t){var e={template:{layout:"vlinear",itemsAlign:"left",children:[]},rowStyle:{padding:"11px 9px"}};return t&&t(e),e}function Ya(t){var e={template:{layout:"form",maxLabelWidth:"40%",labelStyle:{fontWeight:"bold",textAlign:"right"},children:[]},rowStyle:{padding:"11px 9px"}};return t&&t(e),e}class Qa extends Se{constructor(t,e){super(t,e),this._allFields=!0,this._args={context:this,control:void 0,row:-1,field:void 0,values:void 0},this._header=this._createHeader(t,e)}_doInitDefaults(){this._effectDuration=.2,this._showDirection=C.UP,this._hideDirection=C.DEFAULT}inflateParam(t,e,i){var s=this.templateParams2();if(s){const r=s[i.name];if("function"==typeof r){const n=this._args;return n.control=this.owner().wrapperOrThis(),n.row=this._row,n.field=e,n.values=this._rowValues,r(n)}if(void 0!==r)return r}}inflateStock(t,e,i){}data(){return this.owner().data()}header(){return this._header}fitSize(){return ne(this._fitSize,this._defs&&this._defs._fitSize)}setFitSize(t){this._fitSize=t}style(){return ne(this._style,this._defs&&this._defs._style)}setStyle(t){this._style=t}effectDuration(){return ne(this._effectDuration,this._defs&&this._defs._effectDuration)}setEffectDuration(t){this._effectDuration=t}template(){return oe(this._model&&this._model.template,this._template,this._defs&&this._defs._template)}setTemplate(t){this._template=t}showDirection(){return ne(this._showDirection,this._defs&&this._defs._showDirection)}setShowDirection(t){this._showDirection=t}hideDirection(){return ne(this._hideDirection,this._defs&&this._defs._hideDirection)}setHideDirection(t){this._hideDirection=t}allFields(){return oe(this._model&&this._model.allFields,this._allFields,this._defs&&this._defs._allFields)}setAllFields(t){this._allFields=t}fields(){return oe(this._model&&this._model.fields,this._fields,this._defs&&this._defs._fields)}setFields(t){this._fields=Object.assign({},t)}templateVars(){return oe(this._model&&this._model.templateVars,this._templateVars,this._defs&&this._defs._templateVars)}setTemplateVars(t){this._templateVars=t}templateParams2(){return oe(this._model&&this._model.templateParams,this._templateParams,this._defs&&this._defs._templateParams)}setTemplateParams2(t){this._templateParams=t}setModel(t){this._model=t||void 0,this._header.setModel(t&&t.header)}getLayout(t,e){t=this.owner().getTemplate(this.template())||this._getDefaultTemplate(t,this.templateVars(),e);return this._rowInflater=this.owner().getRowInflater(e),this._row=e,this._rowValues=this._getRowValues(),{layout:ms.Instance.layoutFromTemplate(this.wrapperOrThis(),this,!1,!1,t,this),rowStyle:t.rowStyle,rowProps:t.rowProps}}getShowDirection(){let t=this.showDirection();return t===C.RANDOM&&(t=this.$_getRandomDir()),t}getHideDirection(t){let e=this.hideDirection();if(e===C.RANDOM)e=this.$_getRandomDir();else if(e===C.DEFAULT)switch(t){case C.LEFT:e=C.RIGHT;break;case C.RIGHT:e=C.LEFT;break;case C.DOWN:e=C.UP;break;default:e=C.DOWN}return e}$_getRandomDir(){for(;;){var t=q.erandom(C);if(t!==C.RANDOM&&t!==C.DOWN)return t}}_getLabelRenderer(t){return"text"}_getDefRenderer(t){return"text"}_prepareFields(t){const i={},s=this.fields()||{},r=[],n=this.allFields();return t.fields().forEach(t=>{var e=s[t.name]||i;!n&&e===i||r.push({field:t.name,label:ne(e.label,t.displayText()),unit:e.unit,default:e.default,required:e.required,renderer:ne(e.renderer,this._getDefRenderer(t)),style:e.style,labelRenderer:this._getLabelRenderer(t),validator:e.validator})}),r}_isImageRenderer(t){if(t)return"image"===("string"==typeof t?t:t.type)}_extendStyle(t,e,i){const s=e.style;return t&&i?("string"==typeof s&&i&&i[s.substring(2)]?(i=i[s.substring(2)])&&Object.assign(t,i):q.isObject(s)&&Object.assign(t,s),t):s}}class Za extends qa{_doInitDefaults(){super._doInitDefaults(),this.setButtons([{name:"back",label:"〈",position:Zr.HEAD,style:{fontSize:"20px",fontWeight:"bold"},onClick:t=>{t.control.closeEditPage()}},{name:"cancel",label:"취소",onClick:t=>{t.control.closeEditPage(!1)}},{name:"commit",label:"완료",onClick:t=>{t.control.closeEditPage(!0)}}])}}(_n=on=on||{}).DEFAULT="default",_n.FORM="form",_n.A="A";function Xa(t){var e={layout:"hlinear",width:"100%",itemsArrange:"end",style:{paddingRight:"10px",paddingTop:"10px"},children:[{renderer:{type:"button",label:"취소",buttonWidth:80,onClick:t=>{t.control.closeEditPage(!1)},style:{}}},{renderer:{type:"button",label:"완료",buttonWidth:80,onClick:t=>{t.control.closeEditPage(!0)},style:{}}}]};return t&&t(e),e}const Ka={left:20,right:10,height:20,renderer:"line"};class Ja extends Qa{constructor(t,e){super(t,e),this._defaultTemplate=(t,e,i)=>{const s=ja(),r=s.template.children;return t.fields().forEach(t=>{const e=[{value:t.displayText()}];t.required&&e.push({value:"*",style:{color:"#a00",fontSize:"20px"}}),r.push({layout:"hlinear",children:e}),r.push({id:t.name,left:20,right:10,field:t.name,renderer:this._getDefRendderer(t)}),r.push({space:10})}),r.push(Ka,Xa()),s.vars=e,new Ze(null,s)},this._formTemplate=(t,e,i)=>{const s=Ya(),r=s.template.children;return t.fields().forEach(t=>{r.push({id:t.name,label:t.displayText(),field:t.name,renderer:this._getDefRendderer(t)})}),r.push(Ka,Xa(t=>t.style.paddingRight="0px")),s.vars=e,new Ze(null,s)},this._ATemplate=(t,e,i)=>{},this._templates={defafult:this._defaultTemplate,form:this._formTemplate,A:this._ATemplate}}_getDefRendderer(t){switch(t.type){case Ss.NUMBER:return"number";case Ss.DATE:return"datetime";case Ss.BOOL:return"switch";default:return"input"}}_doInitDefaults(){super._doInitDefaults(),this._viewType=on.DEFAULT}viewType(){return ne(this._viewType,this._defs&&this._defs._viewType)}setViewType(t){this._viewType=t}valueChanged(t,e,i,s){const r=this.owner().onEditFieldChange;r&&r({ctx:t,row:this._row,field:e,newValue:i,oldValue:s})}commit(t,e){const i=this.owner().onEditCommit;if(i){t={ctx:t,row:this._row,values:e,cancel:!1,message:void 0};if(i(t),t.cancel){if(t.message)throw t.message;return!1}}return 0<=this._row?this.data().updateRow(this._row,e,!1):this.data().appendRow(e),!0}_getRowValues(){return{}}_createHeader(t,e){return new Za(t,e&&e.header())}_getDefaultTemplate(t,e,i){return(this._templates[this.viewType()]||this._defaultTemplate)(t,e,i)}}(_n=an=an||{}).SLIDE="slide",_n.FLIP="flip";class th extends jn{_doInitDefaults(){super._doInitDefaults(),this.setDuration(1e4),this.setChangeDuration(500),this._changeEffect=an.SLIDE}changeEffect(){return ne(this._changeEffect,this._defs&&this._defs._changeEffect)}setChangeEffect(t){this._changeEffect=t}}class eh extends Se{constructor(t,e){super(t,e),this._autoScroll=new th(t,e&&e._autoScroll)}_doInitDefaults(){this._visible=!1,this._noShrink=!0,this._maskEffect=!0,this._showPrev=!1,this._showNext=!1,this._rowChangeDir=v.DEFAULT,this._rowBorderVisible=!1}visible(){return ne(this._visible,this._defs&&this._defs._visible)}setVisible(t){t!==this._visible&&(this._visible=t,this._changed())}noShrink(){return ne(this._noShrink,this._defs&&this._defs._noShrink)}setNoShrink(t){this._noShrink=t}maskEffect(){return ne(this._maskEffect,this._defs&&this._defs._maskEffect)}setMaskEffect(t){this._maskEffect=t}showPrev(){return ne(this._showPrev,this._defs&&this._defs._showPrev)}setShowPrev(t){t!==this._showPrev&&(this._showPrev=t,this._changed())}showNext(){return ne(this._showNext,this._defs&&this._defs._showNext)}setShowNext(t){t!==this._showNext&&(this._showNext=t,this._changed())}rowChangeDir(){return ne(this._rowChangeDir,this._defs&&this._defs._rowChangeDir)}setRowChangeDir(t){(t=t||v.DEFAULT)!==this._rowChangeDir&&(this._rowChangeDir=t,this._changed())}rowNavigator(){return ne(this._rowNavigator,this._defs&&this._defs._rowNavigator)}setRowNavigator(t){t!==this._rowNavigator&&(this._rowNavigator=t,this._changed())}rowBorderVisible(){return ne(this._rowBorderVisible,this._defs&&this._defs._rowBorderVisible)}setRowBorderVisible(t){t!==this._rowBorderVisible&&(this._rowBorderVisible=t,this._changed())}autoScroll(){return this._autoScroll}}class ih extends Eo{constructor(){super(...arguments),this._menu={items:[{id:"case",type:tn.CHECK,label:"대소문자 구분",onShow:(t,e)=>{e.checked=this._options.matchCase},onClick:(t,e)=>(this._options.matchCase=e.checked,!0)},{id:"whole",type:tn.CHECK,label:"전체 단어 일치",onShow:(t,e)=>{e.checked=this._options.matchWholeWord},onClick:(t,e)=>(this._options.matchWholeWord=e.checked,!0)},{id:"regExp",type:tn.CHECK,label:"정규식 사용",onShow:(t,e)=>{e.checked=this._options.useRegExp},onClick:(t,e)=>(this._options.useRegExp=e.checked,!0)}],onShow:(t,e)=>{}},this._options={matchCase:!1,matchWholeWord:!1,useRegExp:!1}}_doInitDefaults(){super._doInitDefaults(),this.setVisible(!1),this._position=S.AFTER,this._resetVisible=!0,this._optionsVisible=!0}position(){return ne(this._position,this._defs&&this._defs._position)}setPosition(t){this._position=t}resetVisible(){return ne(this._resetVisible,this._defs&&this._defs._resetVisible)}setResetVisible(t){this._resetVisible=t}optionsVisible(){return ne(this._optionsVisible,this._defs&&this._defs._optionsVisible)}setOptionsVisible(t){this._optionsVisible=t}alwaysResult(){return this._alwaysResult}setAlwaysResult(t){this._alwaysResult=t}search(t){this.owner().search(this._options,t)}clickMenu(){this.owner().toggleMenu(this._menu,!0)}canShowResult(t){return this.visible()&&t&&(!t.isEmpty()||this.alwaysResult())}_doPrepareRender(){}}ih.TYPE="search",(_n=hn=hn||{}).BEFORE="before",_n.AFTER="after",_n.REPLACE="replate";class sh extends Eo{_doInitDefaults(){super._doInitDefaults(),this._position=hn.BEFORE,this._clearWhenClose=!0}position(){return ne(this._position,this._defs&&this._defs._position)}setPosition(t){this._position=t}clearWhenClose(){return ne(this._clearWhenClose,this._defs&&this._defs._clearWhenClose)}setClearWhenClose(t){this._clearWhenClose=t}_doPrepareRender(){}}sh.TYPE="searchresult";class rh extends Eo{_doInitDefaults(){super._doInitDefaults(),this.setVisible(!1)}fields(){const t=ne(this._fields,this._defs&&this._defs._fields);return Array.isArray(t)?t.slice(0):t||null}setFields(t){t!==this._fields&&(this._fields=Array.isArray(t)?t.slice(0):t||null,this._changed())}_setRowTemplate(t){this._rowTemplate=t}getFields(){const e=this.data(),t=this.fields();if("template"!==t)return"sortables"===t?e.fields().filter(t=>t.sortable):Array.isArray(t)?t.map(t=>e.fieldByName(t)).filter(t=>!!t):e.fields();{const i=this._owner.getDefaultRowTemplate().getFields()||[];return i.map(t=>e.fieldByName(t)).filter(t=>!!t)}}getSort(t){return this.data().isSorted(t)}sortField(t){const e=this.data();e instanceof Co&&e.toggleSort(t,!0)}}class nh extends Vo{constructor(){super(...arguments),this.defRenderer="field"}_doInitDefaults(){super._doInitDefaults(),this.setVisible(!1),this._showOrder=!0}showOrder(){return ne(this._showOrder,this._defs&&this._defs._showOrder)}setShowOrder(t){t!==this._showOrder&&(this._showOrder=t,this._changed())}isFieldOrderVisible(){return this.showOrder()}sortField(t){const e=this.data();e instanceof Co&&e.toggleSort(t,!0)}defTemplate(){}}class oh extends Se{constructor(t,e){super(t,e),this._inflater=new Ro(t)}_doInitDefaults(){this._visible=!1,this._endSpace=0,this._indicatorVisible=!0,this._indicatorType=D.DEFAULT,this._indicatorSize=28,this._indicatorMargin=2}inflateParam(t,e,i){i=i.name;if(this.templateParams){var s=this.templateParams[i];if(void 0!==s)return s}s=this.layoutParams();return s&&s[i]}inflateStock(t,e,i){return this._inflater.inflateStock(i)}visible(){return ne(this._visible,this._defs&&this._defs._visible)}setVisible(t){t!==this._visible&&(this._visible=t,this._changed())}endSpace(){return le(this._endSpace,this._defs&&this._defs._endSpace,0)}setEndSpace(t){t!==this._endSpace&&(this._endSpace=t,this._changed())}rowTemplate(){return ne(this._rowTemplate,this._defs&&this._defs._rowTemplate)}setRowTemplate(t){t!==this._rowTemplate&&(this._rowTemplate=t,this._changed())}indicatorVisible(){return ne(this._indicatorVisible,this._defs&&this._defs._indicatorVisible)}setIndicatorVisible(t){t!==this._indicatorVisible&&(this._indicatorVisible=t,this._changed())}indicatorType(){return ne(this._indicatorType,this._defs&&this._defs._indicatorType)}setIndicatorType(t){t!==this._indicatorType&&(this._indicatorType=t,this._changed())}indicatorSize(){return le(this._indicatorSize,this._defs&&this._defs._indicatorSize,24)}setIndicatorSize(t){t!==this._indicatorSize&&(this._indicatorSize=t,this._changed())}indicatorMargin(){return le(this._indicatorMargin,this._defs&&this._defs._indicatorMargin,0)}setIndicatorMargin(t){t!==this._indicatorMargin&&(this._indicatorMargin=t,this._changed())}layoutParams(){return ne(this._layoutParams,this._defs&&this._defs._layoutParams)}setLayoutParams(t){let e=!1;t?q.equalObjects(t,this._layoutParams)||(this._layoutParams=Object.assign({},t),e=!0):this._layoutParams&&(this._layoutParams=t,e=!0),e&&this._changed()}layout(){var t=this.rowTemplate();if(t){t=this.owner().getTemplate(t);return{layout:ms.Instance.layoutFromTemplate(this.wrapperOrThis(),this,!1,!1,t,this),rowStyle:t.rowStyle}}}}class ah extends qa{_doInitDefaults(){super._doInitDefaults(),this.setButtons([{name:"back",position:Zr.HEAD,shape:"@prev",shapeWidth:16,style:{fill:"blue"},onClick:t=>{t.control.closeInfoPage()}},{name:"close",label:"닫기",onClick:t=>{t.control.closeInfoPage()}}])}}(_n=ln=ln||{}).DEFAULT="default",_n.FORM="form";const hh={left:10,right:5,height:10,renderer:"line"},lh={right:5,style:{paddingTop:"5px"},renderer:{type:"button",label:"닫기",buttonWidth:80,onClick:t=>{t.control.closeInfoPage()},style:{}}},dh={right:5,renderer:{type:"button",label:"닫기",onClick:t=>{t.control.closeInfoPage()},style:{fontSize:"17px",border:"none",backgroundColor:"transparent",color:"#0088ff",padding:"7px 0px"}}};class _h extends Qa{constructor(){super(...arguments),this._defaultTemplate=(t,e,i)=>{const s=ja(),r=s.template.children,n={wrap:!0,style:{fontSize:"18px"}};return t.forEach(t=>{r.push({value:t.label,renderer:t.labelRenderer,style:{fontSize:"0.8em",fontWeight:"bold"}}),r.push({field:t.field,left:20,right:5,renderer:t.renderer||n,style:{color:"#555"}}),r.push({space:10})}),r.push({space:20}),r.push(hh),r.push(dh),s.vars=e,new Ze(null,s)},this._formTemplate=(t,e,i)=>{const s=Ya(),r=s.template.children,n={wrap:!0,style:{fontSize:"18px"}};return t.forEach(t=>{r.push({label:t.label,field:t.field,renderer:t.renderer||n})}),r.push(hh),r.push(dh),s.vars=e,new Ze(null,s)},this._ATemplate=(t,e,i)=>{const s=ja(t=>{t.rowStyle.backgroundColor="#e8e8ea"}),r=s.template.children,n={wrap:!0,style:{border:"1px inset #fff",padding:"3px 5px",borderRadius:"5px",backgroundColor:"#fffff8",fontSize:"17px"}};return t.forEach(t=>{r.push({value:t.label,style:{fontWeight:"bold",fontSize:"0.8em"}}),r.push({field:t.field,left:10,right:5,renderer:t.renderer||n}),r.push({space:10})}),r.push(hh),r.push(lh),s.vars=e,new Ze(null,s)},this._BTemplate=(t,e,i)=>{const s=ja(t=>{t.rowStyle.backgroundColor="#e8e8ea"}),r=s.template.children,n={wrap:!0};return t.forEach(t=>{r.push({value:t.label,style:{fontWeight:"bold",fontSize:"16px"}}),r.push({field:t.field,left:10,right:this._isImageRenderer(t.renderer)?void 0:5,style:{border:"1px inset #fff",padding:"3px 5px",borderRadius:"5px",backgroundColor:"#fffff8",fontSize:"17px"},renderer:t.renderer||n}),r.push({space:10})}),r.push(hh),r.push(lh),s.vars=e,new Ze(null,s)},this._CTemplate=(t,e,i)=>{},this._FTemplate=(t,e,i)=>{const s=Ya(t=>{t.rowStyle.backgroundColor="#e8e8ea"}),r=s.template.children,n={wrap:!0,style:{border:"1px inset #fff",padding:"3px 5px",borderRadius:"5px",backgroundColor:"#fffff8",fontSize:"17px"}};return t.forEach(t=>{r.push({label:t.label,field:t.field,renderer:t.renderer||n})}),r.push(hh),r.push(lh),s.vars=e,new Ze(null,s)},this._GTemplate=(t,r,e)=>{const i=Ya(t=>{t.rowStyle.backgroundColor="#e8e8ea"}),n=i.template.children,o={wrap:!0};return t.forEach(t=>{var e=t.renderer||o,i=this._isImageRenderer(e)?{}:{border:"1px inset #fff",padding:"3px 5px",borderRadius:"5px",backgroundColor:"#fffff8",fontSize:"17px"};const s=[{grow:1,field:t.field,style:this._extendStyle(i,t,r),renderer:e}];t.unit&&s.push({bottom:1,value:t.unit}),n.push({layout:"hlinear",itemGap:6,label:t.label,children:s})}),n.push(hh),n.push(lh),i.vars=r,new Ze(null,i)},this._templates={defafult:this._defaultTemplate,form:this._formTemplate,A:this._ATemplate,B:this._BTemplate,C:this._CTemplate,F:this._FTemplate,G:this._GTemplate}}_getDefRenderer(t){}_doInitDefaults(){super._doInitDefaults(),this._viewType=ln.DEFAULT}viewType(){return ne(this._viewType,this._defs&&this._defs._viewType)}setViewType(t){this._viewType=t}_getRowValues(){return this.data().internalRowValues(this._row)}inflateParam(t,e,i){var s=super.inflateParam(t,e,i);return void 0!==s?s:(i.name,this._rowInflater.inflateParam(t,e,i))}inflateStock(t,e,i){var s=super.inflateStock(t,e,i);return void 0!==s?s:(i.name,this._rowInflater.inflateStock(t,e,i))}_createHeader(t,e){return new ah(t,e&&e.header())}_getDefaultTemplate(t,e,i){t=this._prepareFields(t);return(this._templates[this.viewType()]||this._defaultTemplate)(t,e,i)}}class ch extends a{constructor(t){super(),this._options=t}static createTheme(t,e){return new(t!==gh.TYPE?uh:gh)(e)}bodyIndented(){return this._bodyMode}getBodyIndent(t){if(this._bodyMode)switch(this._options.rowIndents()){case E.PARENT:return(t.group.level()-1)*this._indent;case E.INNER:return(t.group.level()-1)*this._indent+this._indent;default:return 0}else if(t instanceof Je)return 0}getBodyMargin(t){return 0}getItemIndent(t){if(this._bodyMode)return 0;if(t instanceof Je)switch(this._options.rowIndents()){case E.PARENT:return(t.group.level()-1)*this._indent;case E.INNER:return(t.group.level()-1)*this._indent+this._indent;default:return 0}}prepareRender(){return this._bodyMode=this.indentsMode()===R.BODY,this._indent=this._options.indent(),this._endMargin=this._options.endMargin(),this}}class uh extends ch{type(){return uh.TYPE}indentsMode(){return R.ROW}}uh.TYPE="default";class gh extends ch{type(){return gh.TYPE}indentsMode(){return R.BODY}getBodyMargin(t){return t.isLeaf()?this._endMargin:0}}gh.TYPE="classic";class ph extends a{constructor(t){super(),this._options=t}static createTheme(t,e){return new(t!==wh.TYPE?fh:wh)(e)}bodyIndented(){return this._bodyMode}getBodyIndent(t){if(!this._bodyMode)return 0;if(!(t instanceof Te))return t.group.level()*this._gindent;switch(this._options.rowIndents()){case E.PARENT:return t.group.level()*this._gindent;case E.INNER:return t.group.level()*this._gindent+this._indent;default:return 0}}getBodyMargin(t){return 0}getItemIndent(t){if(this._bodyMode)return 0;if(!(t instanceof Te))return t.group.level()*this._gindent;switch(this._options.rowIndents()){case E.PARENT:return t.group.level()*this._gindent;case E.INNER:return t.group.level()*this._gindent+this._indent;default:return 0}}prepareRender(){return this._bodyMode=this.indentsMode()===R.BODY,this._indent=this._options.indent(),this._gindent=this._options.groupIndent(),this._endMargin=this._options.endMargin(),this}}class fh extends ph{type(){return fh.TYPE}indentsMode(){return R.ROW}}fh.TYPE="default";class wh extends ph{type(){return wh.TYPE}indentsMode(){return R.BODY}getBodyIndent(t){return this._bodyMode&&t instanceof Ie?(t.group.level()+1)*this._gindent:super.getBodyIndent(t)}getBodyMargin(t){return this._endMargin}}wh.TYPE="classic";class mh extends Se{_doInitDefaults(){this._rowIndents=E.INNER,this._indent=mh.INDENT,this._endMargin=vh.END_MARGIN}theme(){return ne(this._theme,this._defs&&this._defs._theme)}setTheme(t){this._theme=t}rowIndents(){return ne(this._rowIndents,this._defs&&this._defs._rowIndents)}setRowIndents(t){this._rowIndents=t}indent(){return ne(this._indent,this._defs&&this._defs._indent)}setIndent(t){this._indent=t}endMargin(){return ne(this._endMargin,this._defs&&this._defs._endMargin)}setEndMargin(t){this._endMargin=t}}mh.INDENT=12;class vh extends mh{constructor(t,e,i){super(t,i),this._header=new Oe(e,i&&i._header),this._footer=new Be(e,i&&i._footer),this._expander=new Cr(e,i&&i._expander)}_doInitDefaults(){super._doInitDefaults(),this._groupIndent=vh.GROUP_INDENT}header(){return this._header}footer(){return this._footer}expander(){return this._expander}groupIndent(){return ne(this._groupIndent,this._defs&&this._defs._groupIndent)}setGroupIndent(t){this._groupIndent=t}getTheme(){var t=this.theme();return this._themeImpl&&t===this._themeImpl.type()||(this._themeImpl=ph.createTheme(t,this)),this._themeImpl}}vh.GROUP_INDENT=12,vh.END_MARGIN=4;class yh extends mh{constructor(t,e,i){super(t,i),this._expander=new Cr(e,i&&i._expander)}_doInitDefaults(){super._doInitDefaults()}expander(){return this._expander}groupLevel(){return ne(this._groupLevel,this._defs&&this._defs._groupLevel)}setGroupLevel(t){this._groupLevel=t}addMasterHeader(){return this._addMasterHeader}addMasterFooter(){return this._addMasterFooter}addEmptyMasterHeader(){return this._addEmptyMasterHeader}addEmptyMasterFooter(){return this._addEmptyMasterFooter}addDetailHeader(){return this._addDetailHeader}addDetailFooter(){return this._addDetailFooter}addSingleDetailHeader(){return this._addSingleDetailHeader}addSingleDetailFooter(){return this._addSingleDetailFooter}getTheme(){var t=this.theme();return this._themeImpl&&t===this._themeImpl.type()||(this._themeImpl=ch.createTheme(t,this)),this._themeImpl}}class bh{constructor(t,e,i){this.master=t,this.dv=e,this.dataRow=i}id(){return this.dataRow.id}values(){return this.dataRow.values}level(){return this.master?this.master.level()+1:0}detailCount(){return this.details?this.details.length:0}getDescendants(){const r=[];return function i(t){var s=t.details;if(s)for(let t=0,e=s.length;t<e;t++)r.push(s[t]),i(s[t])}(this),r}}class Sh extends a{constructor(t,e,i){if(super(),!(t instanceof gr))throw new Error("데이터객체가 지정돼야 합니다.");if(t instanceof Rh)throw new Error("데이터링크는 다른 데이터링크의 데이터로 지정될 수 없습니다.");if(0<=i.indexOf(t))throw new ar(t,"A data is already linked: "+t.name());i.push(this.data=t)}_initDetails(t,e,i){if(t){const s=q.makeArray(t);0<s.length&&(this.details=s.map(t=>new Ch(this,t,e,i)))}}level(){return this.parent.level()+1}detailCount(){return this.details?this.details.length:0}}class Ch extends Sh{constructor(t,e,i,s){if(super(e.data,e.details,i),(s[e.data.hash]=this).parent=t,this.$_setParentLevel(this.level()+1),this.keyFields=go(e.data,e.keyFields),Array.isArray(e.masterFields)&&0<e.masterFields.length?this.masterFields=go(t.data,e.masterFields):this.masterFields=go(t.data,e.keyFields),this.keyFields.length!==this.masterFields.length)throw new Error("key fields와 master fields의 개수가 동일해야 합니다.");this._initDetails(e.details,i,s)}$_setParentLevel(t){this.parent instanceof xh?this.parent._levels=Math.max(this.parent._levels,t):this.parent instanceof Ch&&this.parent.$_setParentLevel(t)}_doDestory(){this.data=null,this.details&&(this.details.forEach(t=>t.destroy()),this.details=null)}findData(t){if(this.data.name()===t)return this.data;if(this.details)for(var e of this.details){e=e.findData(t);if(e)return e}}}class xh extends Sh{constructor(t,e,i,s){super(t,e,i),this._levels=1,(s[t.hash]=this)._initDetails(e,i,s)}_doDestory(){this.data=null,this.details.forEach(t=>t.destroy()),this.details=null}findData(t){if(t===this.data.name())return this.data;if(this.details)for(var e of this.details){e=e.findData(t);if(e)return e}}level(){return 0}}class Rh extends gr{constructor(t,e,i,s){super(t),this._wrapper=s,this._info=new xh(e,i,this._dvs=[],this._infoMap={}),this._dvMap={},this._dvs.forEach(t=>{(this._dvMap[t.name()]=t).addListener(this)}),this._root=this._info.data,this._rows=this.$_buildRows()}_doDestory(){this._dvs.forEach(t=>t.removeListener(this)),this._dvs=this._root=this._info=null}source(){return this._root.source()}wrapper(){return this._wrapper}wrapperOrThis(){return this._wrapper||this}readOnly(){return this._root.readOnly()}fields(){return this._root.fields()}fieldByName(t){return this._root.fieldByName(t)}rowCount(){return this._rows.length}visRowCount(){return this._rows.length}getSource(t){return this._rows[t].dv}getSourceRow(t){const e=this._rows[t].dv;return t=e.rowOfDataRow(this._rows[t].dataRow),{dv:e,row:t}}canSort(){return this._root.canSort()}canMove(){return!1}getRowId(t){return this._rows[t].id()}levelRowOfRow(t){return this._rows[t].no}getRowValues(t){wo.checkRow(this,t);t=this._rows[t];return t&&Object.assign({},t.dataRow.values)}getValues(t,e,i){if(Array.isArray(e)){gr.checkRow(this,t);const s={},r=this._rows[t],n=r.values(),o=r.dv.source();return e.forEach(t=>{i&&o.checkField(t),s[t]=n[t]}),s}return this.getRowValues(t)}internalRowValues(t){return Object.assign({},this._rows[t].dataRow.values)}getValue(t,e,i){gr.checkRow(this,t);t=this._rows[t];const s=t.dv;return i&&s.checkField(e),t.dataRow.values[e]}getProp(t,e,i,s){gr.checkRow(this,t);const r=this._rows[t],n=r.dv;return s&&n.checkField(e),r.dataRow.getProp(e,i)}getFieldValues(t,e,i){}getSummary(t,e,i){return this._root.getSummary(t,e,i)}updateValue(t,e,i){const s=this._rows[t].dv;return s.updateValue(-1,e,i)}findRow(t,e=0,i=-1){return this._root.findRow(t,e,i)}findRows(t,e=0,i=-1){return this._root.findRows(t,e,i)}findDistinctRows(t,e,i){return this._root.findDistinctRows(t,e,i)}deleteRow(t,e){wo.checkRow(this,t);t=this._rows[t];const i=t.dv;i.deleteRow(i.rowOfDataRow(t.dataRow),e)}deleteRows(t,e){if(Array.isArray(t)&&0<t.length){t.forEach(t=>gr.checkRow(this,t));const i=this.$_getRowsMap(t);for(const s in i){const r=this._dvMap[s];r&&(t=i[s].map(t=>r.rowOfDataRow(t)),r.deleteRows(t,e))}}}updateRow(t,e,i=!1){wo.checkRow(this,t);t=this._rows[t];const s=t.dv;t=s.rowOfDataRow(t.dataRow);return s.updateRow(t,e,i)}appendRow(t){return this._root.appendRow(t)}getRowState(t){return wo.checkRow(this,t),this.internalRowState(t)}internalRowState(t){return this._rows[t].dataRow.state}$_getRowsMap(t){const i={};return t.forEach(t=>{const e=this._rows[t];t=e.dv.name();i[t]?i[t].push(e.dataRow):i[t]=[e.dataRow]}),i}$_handler(){var t=this._rows.length;this.$_reset(),this._fireEvent("onDataReset"),this._rows.length!==t&&this._fireEvent("onDataCountChanged",this._rows.length,t),this._fireEvent("onDataChanged")}onDataValueUpdated(t,e,i,s,r){this.$_handler()}onDataRowUpdated(t,e,i){this.$_handler()}onDataRowsUpdated(t,e){this.$_handler()}onDataRangeUpdated(t,e,i){this.$_handler()}onDataRowAdded(t,e){this.$_handler()}onDataRowsAdded(t,e,i){this.$_handler()}onDataCleared(t,e){this.$_handler()}onDataRowDeleted(t,e,i){var s=this.getRowOfId(i);if(!(s<0)){const r=this._rows[s];i=this._rows.length;let t;r.details&&(t=r.getDescendants(),t.unshift(r)),this.$_reset(),this._fireEvent("onDataReset"),t?this._fireEvent("onDataRowsDeleted",t,this.$_getRowIds(t)):this._fireEvent("onDataRowDeleted",s,r.id()),t?this._flags._rowsDeleted(q.sortNum(this.$_getRowIds(t))):this._flags._rowDeleted(s),this._fireEvent("onDataCountChanged",this._rows.length,i),this._fireEvent("onDataChanged")}}onDataRowsDeleted(r,t,n){if(0<(t=this.getRowsOfIds(r,n)).length){var e=this._rows.length;let s=[];t.forEach(t=>{const e=this._rows[t];var i=this.$_getRowIds(e.getDescendants());s.push(t),0<i.length&&(s=s.concat(this.getRowsOfIds(r,i)),n=n.concat(i))}),s=q.dedupe(s),n=q.dedupe(n),this.$_reset(),this._fireEvent("onDataRowsDeleted",s,n),this._fireEvent("onDataReset"),this._flags._rowsDeleted(q.sortNum(s)),this._fireEvent("onDataCountChanged",this._rows.length,e),this._fireEvent("onDataChanged")}}onDataRangeDeleted(e,t,i){const s=q.makeIntArray(t,t+i);i=s.map(t=>e.getRowId(t));this.onDataRowsDeleted(e,s,i)}onDataRowMoved(t,e,i){}onDataRowsMoved(t,e,i,s){}info(){return this._info}root(){return this._root}levels(){return this._info._levels}setDataTags(t,e){for(const i of this._rows)i.tag=void 0;for(const s of t)this._rows[s].tag=e}getDataTag(t){return this._rows[t].tag}isDataTag(t,e){return this._rows[t].tag===e}getDataViews(){return this._dvs.slice(0)}getLevel(t){return this._rows[t].level()}getLinkInfo(t){return this._infoMap[t.hash]}getLinkRows(){return this._rows.slice(0)}getRows(){return this._rows.map(t=>t.dataRow)}getDetailCount(t,e){return e?1:this._rows[t].detailCount()}isLeaf(t){return wo.checkRow(this,t),this._rows[t].level()===this._info._levels-1}_internalLeaf(t){return this._rows[t].level()===this._info._levels-1}isLast(t){return t===this._rows.length-1}isMaster(t){return wo.checkRow(this,t),this._rows[t].level()<this._info._levels-1}getRowOf(i,s){for(let t=0,e=this._rows.length;t<e;t++){var r=this._rows[t];if(r.dv===i&&i.getDataRow(s)===r.dataRow)return t}return-1}getRowsOf(i,s){const r=[];var n=s.length;for(let e=0,t=this._rows.length;e<t;e++){var o=this._rows[e];if(o.dv===i)for(let t=0;t<n;t++)if(o.dataRow==i.getDataRow(s[t])){r.push(e);break}if(r.length===n)break}return r}getRowOfId(i){for(let t=0,e=this._rows.length;t<e;t++)if(this._rows[t].id()===i)return t;return-1}getRowsOfIds(i,s){const r=[];var n=s.length;for(let e=0,t=this._rows.length;e<t;e++){const o=this._rows[e];if(o.dv===i)for(let t=0;t<n;t++)if(o.id()==s[t]){r.push(e);break}if(r.length===n)break}return r}$_collectDetails(t,r,e,n){function l(i,s){const r=[];for(let t=0,e=s.length;t<e;t++)r.push(i.values[s[t]]);return r}function o(t,i,s,r,n,e){const o=[];var a,h=l(r.dataRow,e);for(let t=0,e=i.rowCount();t<e;t++)s[t]&&(!function(i,s){for(let t=0,e=i.length;t<e;t++)if(i[t]!==s[t])return;return 1}(l(i.getDataRow(t),n),h)||(a=new bh(r,i,s[t]),o.push(a),d.push(a),s[t]=null));return o}const d=[];return e.forEach(e=>{var t=e.keyFields.map(t=>t.name),i=e.masterFields.map(t=>t.name);const s=o(0,e.data,e.drows,r,t,i);0<s.length&&s.forEach(t=>{n.push(t),t.no=e.no++,Array.isArray(e.details)&&(t.details=this.$_collectDetails(e.data,t,e.details,n))})}),d}$_buildRows(){var t=+new Date;const i=this._info.details,s=this._root;var r=s.getRows();const n=[];i&&i.forEach(t=>function e(t){t.drows=t.data.getRows().slice(0),t.no=0,Array.isArray(t.details)&&t.details.forEach(t=>e(t))}(t));for(let t=0,e=r.length;t<e;t++){const o=new bh(null,s,r[t]);o.no=t,n.push(o),i&&(o.details=this.$_collectDetails(s,o,i,n))}return i&&i.forEach(t=>function e(t){delete t.drows,Array.isArray(t.details)&&t.details.forEach(t=>e(t))}(t)),console.log("DATA LINK BUILD: "+(+new Date-t)+"ms."),n}$_reset(){this._rows=this.$_buildRows(),this._fireEvent("onDataReset")}$_getRowIds(t){return t.map(t=>t.id())}}class Eh extends t{constructor(t,e){super(),this._owner=t,this._defs=e,this._row=new Kn(t,e&&e._row),e||this._doInitDefaults()}_doInitDefaults(){}owner(){return this._owner}row(){return this._row}load(t){return this.assignProps(t)}_changed(){this._owner.invalidateLayout()}}const Vh=[];(_n=dn=dn||{}).AFTER="after",_n.BEFORE="before";class $h extends Eh{constructor(){super(...arguments),this._drows=[]}_doInitDefaults(){this._visible=!0,this._position=dn.AFTER}visible(){return ne(this._visible,this._defs&&this._defs._visible)}setVisible(t){t!==this._visible&&(this._visible=t,this._changed())}position(){return ne(this._position,this._defs&&this._defs._position)}setPosition(t){t!==this._position&&(this._position=t,this._changed())}data(){return ne(this._data,this._defs&&this._defs._data)}setData(t){t!==this._data&&(this._data&&this._data.removeListener(this),this._data=t,this._data&&this._data.addListener(this),this._changed())}rows(){var t;return null===(t=ne(this._rows,this._defs&&this._defs._rows))||void 0===t?void 0:t.slice(0)}setRows(t){t!=this._rows&&(this._rows=t&&t.slice(0),this._changed())}rowCount(){return this._drows===Vh?this._data.rowCount():this._drows.length}prepareRender(e){if(this.visible){let t=this._rows;if(void 0===t&&this._defs&&(t=this._defs._rows),t&&0<t.length){if(this._drows=[],e=this._dv=this._data||e){const i=e.rowCount();t.forEach(t=>{0<=t&&t<i&&this._drows.push(t)})}}else this._data&&(this._dv=this._data,this._drows=Vh);return 0<this.rowCount()}}getRow(t){return this._drows===Vh?t:this._drows[t]}getValue(t,e){return this._dv.getValue(this.getRow(t),e,!0)}}class Ah extends Eh{constructor(t,e,i,s){super(e,i),this._landscape=s,this._rowBar=new Dr(t,e,i&&i._rowBar),this._editBar=new Ar(t,e,i&&i._editBar),this._scrollIndicator=new zo(t,i&&i._scrollIndicator),this._indexBar=new Pa(t,i&&i._indexBar),this._scrollBar=new za(t,i&&i._scrollBar),this._pageNavigator=new Na(t,e,i&&i._pageNavigator),this._pageScroller=new Fa(t,i&&i._pageScroller),this._commandBox=new na(t,i&&i._commandBox),this._selectionMask=new Ha(t,i&&i._selectionMask),this._headRows=new $h(e,i&&i._headRows),this._header=new Lo(e,i&&i._header),this._footer=new Do(e,i&&i._footer),this._searchBar=new ih(e,i&&i._searchBar),this._searchResultBar=new sh(e,i&&i._searchResultBar),this._fieldBar=new rh(e,i&&i._fieldBar),this._fieldHeader=new nh(e,i&&i._fieldHeader),this._rowGroup=new vh(e,this,i&&i._rowGroup),this._dataGroup=new yh(e,this,i&&i._dataGroup),this._dataRowInfos=new Ua(e,i&&i._dataRowInfos),this._infoPage=new _h(e,i&&i._infoPage),this._editPage=new Ja(e,i&&i._editPage),this._addPage=new Ja(e,i&&i._addPage),this._singleRow=new eh(e,i&&i._singleRow),this._attachedRow=new oh(e,i&&i._attachedRow),this._formPanel=new _o(t,i&&i._formPanel),this._buttonPanel=new lo(t,i&&i._buttonPanel),this._searchPanel=new co(t,i&&i._searchPanel),this._filterPanel=new xo(t,i&&i._filterPanel),this._emptyPage=new to(e,i&&i._emptyPage),this._loadingPage=new eo(e,i&&i._loadingPage),this._rowTemplateArgs={control:t.wrapperOrThis(),large:!1,row:-1}}_doDestory(){super._doDestory(),this._dataLink=this._dv=null}_doInitDefaults(){super._doInitDefaults(),this._orientation=n.VERTICAL,this._largeSize=Ah.LARGE_SIZE,this._rowsPerLine=1,this._levelIndent=8,this._overScrollEffect=w.BALLOON}groupSectionChanged(t){this._changed()}rowCellObjectChanged(t){this._changed()}isLandscape(){return this._landscape}orientation(){return ne(this._orientation,this._defs&&this._defs._orientation)}setOrientation(t){t!==this._orientation&&(t===n.HORIZONTAL&&this._owner.isGrouped()&&lt(Z.canNotHorzInGrouping),this._orientation=t,this._changed())}largeSize(){return he(this._largeSize,this._defs&&this._defs._largeSize)}setLargeSize(t){t!==this._largeSize&&(this._largeSize=t,this._changed())}rowWidth(){return he(this._rowWidth,this._defs&&this._defs._rowWidth)}setRowWidth(t){t!==this._rowWidth&&(this._rowWidth=t,this._changed())}minRowWidth(){return he(this._minRowWidth,this._defs&&this._defs._minRowWidth)}setMinRowWidth(t){t!==this._minRowWidth&&(this._minRowWidth=t,this._changed())}maxRowWidth(){return he(this._maxRowWidth,this._defs&&this._defs._maxRowWidth)}setMaxRowWidth(t){t!==this._maxRowWidth&&(this._maxRowWidth=t,this._changed())}rowCount(){return he(this._rowCount,this._defs?this._defs._rowCount:NaN)}setRowCount(t){(t=q.toNumber(t)>>>0)!==this._rowCount&&(this._rowCount=t,this._changed())}levelIndent(){return he(this._levelIndent,this._defs?this._defs._levelIndent:NaN)}setLevelIndent(t){(t=he(t,0))!==this._levelIndent&&(this._levelIndent=t,this._changed())}menu(){return ne(this._menu,this._defs&&this._defs._menu)}setMenu(t){this._menu=t}overScrollEffect(){return ne(this._overScrollEffect,this._defs&&this._defs._overScrollEffect)}setOverScrollEffect(t){this._overScrollEffect=t}headRows(){return this._headRows}header(){return this._header}footer(){return this._footer}searchBar(){return this._searchBar}searchResultBar(){return this._searchResultBar}fieldBar(){return this._fieldBar}fieldHeader(){return this._fieldHeader}rowGroup(){return this._rowGroup}dataGroup(){return this._dataGroup}dataRowInfos(){return this._dataRowInfos}editBar(){return this._editBar}scrollIndicator(){return this._scrollIndicator}indexBar(){return this._indexBar}scrollBar(){return this._scrollBar}pageNavigator(){return this._pageNavigator}pageScroller(){return this._pageScroller}commandBox(){return this._commandBox}selectionMask(){return this._selectionMask}infoPage(){return this._infoPage}editPage(){return this._editPage}addPage(){return this._addPage}singleRow(){return this._singleRow}attachedRow(){return this._attachedRow}formPanel(){return this._formPanel}buttonPanel(){return this._buttonPanel}searchPanel(){return this._searchPanel}filterPanel(){return this._filterPanel}emptyPage(){return this._emptyPage}loadingPage(){return this._loadingPage}load(t){return super.load(t)}isLarge(){return this.isLandscape()?this._owner.height()>=this.largeSize():this._owner.width()>=this.largeSize()}getDefaultRowTemplate(){return this._runRowTemplate}getRowTemplate(e){const t=this._runRowTemplateCallback;let i;if(t&&(this._rowTemplateArgs.row=e,this._rowTemplateArgs.large=this.isLarge(),i=t(this._rowTemplateArgs)),!i){let t;t=(this._dataLink?this._dataLink.getSource(e):this._dv).name(),i=t&&this.dataRowInfos().getRowTemplate(t)}return i||this._runRowTemplate}getRowParams(){return this._runRowParams}getRowStyle(){return this._runRowStyle}getRowCommands(){const e=this._owner.rowCommands(),i=[];return q.makeArray(this.row().commands(),!0).forEach(t=>{t=e.get(t);t&&i.push(t)}),i}prepareRender(){this.$_prepareRunnings(),this._dv=this.owner().data(),this._dataLink=this._dv instanceof Rh?this._dv:null,this._rowBar.visible()&&this._rowBar.prepareRender(),this._editBar.visible()&&this._editBar.prepareRender(),this._scrollIndicator.visible()&&this._scrollIndicator.prepareRender(),this._indexBar.visible()&&this._indexBar.prepareRender(),this._scrollBar.visible()&&this._scrollBar.prepareRender(),this._owner.isPaging()&&this._pageNavigator.visible()&&this._pageNavigator.prepareRender(),this._owner.isPaging()&&this._pageScroller.visible()&&this._pageScroller.prepareRender(),this._commandBox.visible()&&this._commandBox.prepareRender(),this._selectionMask.visible()&&this._selectionMask.prepareRender(),this._fieldBar.visible()&&this._fieldBar._setRowTemplate(this._row.template()),this._dataRowInfos.prepareRender(),this._rowBar.visible()&&this._rowBar.prepareRender()}unprepareRender(){this._rowBar.visible()&&this._rowBar.unprepareRender(),this._editBar.visible()&&this._editBar.unprepareRender()}$_getPanel(t){switch(t){case _o.TYPE:return this._formPanel;case lo.TYPE:return this._buttonPanel;case co.TYPE:return this._searchPanel;case xo.TYPE:return this._filterPanel}}$_prepareRunnings(){const t=this._row;this._runRowTemplateCallback=t.templateCallback(),this._runRowTemplate=this.isLarge()&&t.largeTemplate()||t.template(),this._runRowParams=t.$_internalParams(),this._runRowStyle=t.style()}}Ah.LARGE_SIZE=600;class Lh extends Hs{constructor(t){super(t,!1,Lh.CLASS_NAME)}_doInitDom(t,e){}_doMeasure(t,e,i){return{width:e,height:i}}_doRender(t,e,i){}}Lh.CLASS_NAME="dlist-focus-mask";class Dh extends a{constructor(t){super(),this._bodyView=t}_doDestory(){this.stop()}start(){return this._doStart()||this.stop(),this}stop(){this._doStop()}}class kh extends Hs{constructor(t,e){super(t,!1,kh.CLASS_NAME),this._panelViews=[],this.pageMoving=!1,this.orderWidth=NaN,this.rightMargin=0,this._owner=e,this.addChild(this._bodyView=this._bodyView=this._createBodyView(t,e.noCache(),!1)),(this._bodyView._listView=this).addChild(this._sectionContainer=new Ve(t,!1,"dlist-sections")),this.addChild(this._panelContainer=new $e(t,!1,"dlist-panels")),this._panelContainer.dom.style.overflow="hidden",this.addChild(this._toolContainer=new $e(t,!1,"dlist-tools"))}_doDestory(){super._doDestory(),this.rowBar=this.editBar=this._renderInfo=this._owner=null,this._panelViews.length=0}isSkeleton(){return!1}createLayoutView(t,e){return new(e instanceof ss?Mh[e.type]:La)(t,e)}borrowRenderer(t){return this._owner.borrowRenderer(t)}freeRenderer(t){this._owner.freeRenderer(t)}useImage(t){this._owner.useImage(t)}getImageSize(t){return this._owner.getImageSize(t)}getIcon(t,e){return this._owner.getIcon(t,e)}rowBorderVisible(t){return!t._last||!this._owner.rowBorder.skipLast}owner(){return this._owner}data(){return this._owner.data()}isVertical(){return this._vertical}isLandscape(){return this._owner.isLandscape()}itemCount(){return this._bodyView.itemViewCount()}headRowsView(){return this._headRowsView}formPanelView(){return this._formPanelView}buttonPanelView(){return this._buttonPanelView}bodyView(){return this._bodyView}headerView(){return this._headerView}footerView(){return this._footerView}searchBarView(){return this._searchBarView}fieldBarView(){return this._fieldBarView}fieldHeaderView(){return this._fieldHeaderView}scrollIndicatorView(){return this._scrollIndicatorView}indexBarView(){return this._indexBarView}scrollBarView(){return this._scrollBarView}pageNavigatorView(){return this._pageNavigatorView}pageScrollerView(){return this._pageScrollerView}menuView(){return this._menuView}renderInfo(){return this._renderInfo}scrollPos(){return this._bodyView.scrollPos()}scrollOff(){return this._bodyView.scrollOff()}topRow(){return this._bodyView.topRow()}activePanel(){return this._activePanel}menu(){return this._menu}getExpander(t){return this._bodyView.getExpander(t)}_resetScrollStates(){var t=this.scrollPos(),e=this.scrollOff();this.$_setScrollRate(this._scrollIndicatorView,t,e,!0),this.$_setScrollBar(this._scrollBarView,!0)}scrollBy(t){t=this._bodyView.scrollBy(t);return this._resetScrollStates(),this._bodyView.checkItemViewOrders(),this._bodyView.resetFocusedView(),t}scrollToEnd(t){this._bodyView.scrollToEnd(t),this._resetScrollStates(),this._bodyView.checkItemViewOrders(),this._bodyView.resetFocusedView()}pageChanged(t){const e=this._pageScrollerView;e&&e.visible&&e.makeVisible(t)}closePanel(t){if(this._activePanel){var e=this._panelContainer.width,i=this._panelContainer.height;const s=this.$_getPanelView(this._activePanel);t?s&&this.$_hidePanel(s,e,i,null):(this._activePanel=null,s&&(this._panelContainer.dom.style.pointerEvents="none",this._panelContainer.removeChild(s),s.setVisible(!1)))}}showPanel(t,e){const i=this._panelContainer.width,s=this._panelContainer.height;if(e)t&&t!==this._activePanel&&(this._activePanel?this.$_hidePanel(this.$_getPanelView(this._activePanel),i,s,()=>{this.$_showPanel(this.$_getPanelView(t),i,s,null)}):this.$_showPanel(this.$_getPanelView(t),i,s,null));else if(t&&t!==this._activePanel){const r=this.$_getPanelView(this._activePanel=t);r?(this._panelContainer.dom.style.pointerEvents="auto",r.setVisible(!0),this._panelContainer.addChild(r)):this._panelContainer.removeChild(r)}}togglePanel(t,e){if(t){var i=this._panelContainer.width,s=this._panelContainer.height,r=t===this._activePanel;const n=this.$_getPanelView(t);n&&(e?r?this.$_hidePanel(n,i,s,null):this.$_showPanel(n,i,s,null):(this._activePanel=r?null:t,n.setVisible(!r)?this._panelContainer.addChild(n):this._panelContainer.removeChild(n)))}}getPanel(t){const e=this._activePanel&&this.$_getPanelView(this._activePanel);return e&&e.containsDom(t)?e:null}isInPanel(t){const e=this.getPanel(t);return e&&e.containsDom(t)}isMenuView(t){return this._menuView&&this._menuView.isMenuView(t)}showMenu(t,e){!function(t,e){if(!t)throw new Error(e||t+" is null.")}(!!t,"menu object is required."),this.closePanel(!1),this.hideMenu(!1),t.onShow&&t.show(this.control.wrapperOrThis());let i=this._menuView;i||(i=this._menuView=new Ca(this.doc),i.setVisible(!1)),this._panelContainer.addChild(i),i.show(this._menu=t,this.width,this.height,this.canAnimate())}hideMenu(t){return this._menuView&&this._menuView.hide(this.canAnimate())}canMovePage(t,e){const i=this._owner;if(i.isPaging())if(0<t){if(0<i.page())return!0;e&&this._bodyView.$_showOverEffect(u.LEFT)}else if(t<0){if(i.page()<i.pageCount()-1)return!0;e&&this._bodyView.$_showOverEffect(u.RIGHT)}}canMoveSingle(t,e){return!1}getSpareBody(){return this._spareBodyView||(this._spareBodyView=this._createBodyView(this.doc,this._owner.noCache(),!0),this._spareBodyView._listView=this),this._spareBodyView}refreshPanel(){this._buttonPanelView&&this._buttonPanelView.visible&&this._buttonPanelView.refresh(this,this.width,this.height)}focusedRowChanged(t,e){this._bodyView.focusedRowChanged(t,e)}getLayoutView(t){for(const e of this._layoutViews)if(e&&e.visible&&e.isView(t))return e}addTooltipView(t){this.control.lock(()=>{this._toolContainer.addChild(t)})}removeTooltipView(t){this.control.lock(()=>{this._toolContainer.removeChild(t)})}addFeedback(t){this._toolContainer.appendDom(t)}showToast(t){const e=new ka(this.doc);t=new Da(t);e.show(this._toolContainer,t)}_doPrepareRender(t,e){this.pageMoving;const i=this._owner;var s=i.isEmpty();const r=i.data();var n=i.fullMode(),o=i.isSingleRow(),a=0<i.getRowCount();const h=i.current(),l=this._sectionContainer,d=h.headRows();let _;this._vertical=i.isVertical(),this._renderInfo=e,this.rowBar=h._rowBar.visible()?h._rowBar:null,this.editBar=h._editBar.visible()?h._editBar:null,this.borderLine=o&&!h.singleRow().rowBorderVisible||!h.row().borderLine().visible()?null:h.row().borderLine(),this.focusMask=!o&&h.row().focusMask().visible()?h.row().focusMask():null,this.textFormatter=i.getTextFormatter(),this.boolFormatter=i.getBoolFormatter(),this.numberFormatter=i.getNumberFormatter(),this.dateFormatter=i.getDateFormatter(),d.prepareRender(i.data())?l.addChild(this._headRowsView=new Zo(t,d)):this._headRowsView&&this._headRowsView.setVisible(!1),_=h._scrollIndicator.visible()&&!s,n||!_||this._scrollIndicatorView?this._scrollIndicatorView&&this._scrollIndicatorView.setVisible(a&&_)&&this._scrollIndicatorView.setModel(h.scrollIndicator()):l.addChild(this._scrollIndicatorView=new Wo(t,h.scrollIndicator())),_=h.header().visible(),_&&!this._headerView?l.addChild(this._headerView=new Oo(t,h.header())):this._headerView&&this._headerView.setVisible(_)&&this._headerView.setModel(h.header()),_=h.searchBar().visible(),_&&!this._searchBarView?l.addChild(this._searchBarView=new ma(t,h.searchBar())):this._searchBarView&&this._searchBarView.setVisible(_)&&this._searchBarView.setModel(h.searchBar()),_=h.searchResultBar().visible()&&(this._searchPanelView&&this._searchPanelView.canShowResult(i.searchResult())||h.searchBar().canShowResult(i.searchResult())),_&&!this._searchResultView?l.addChild(this._searchResultView=new va(t,h.searchResultBar())):this._searchResultView&&this._searchResultView.setVisible(_)&&this._searchResultView.setModel(h.searchResultBar()),_=h.fieldBar().visible()&&r&&r.canSort(),_&&!this._fieldBarView?l.addChild(this._fieldBarView=new $a(t,h.fieldBar())):this._fieldBarView&&this._fieldBarView.setVisible(_)&&this._fieldBarView.setModel(h.fieldBar()),_=h.fieldHeader().visible(),_&&!this._fieldHeaderView?l.addChild(this._fieldHeaderView=new Aa(t,h.fieldHeader())):this._fieldHeaderView&&this._fieldHeaderView.setVisible(_)&&this._fieldHeaderView.setModel(h.fieldHeader()),_=h.footer().visible(),_&&!this._footerView?l.addChild(this._footerView=new No(t,h.footer())):this._footerView&&this._footerView.setVisible(_)&&this._footerView.setModel(h.footer()),_=a&&i.indexBar().visible()&&!s,n||!_||this._indexBarView?this._indexBarView&&this._indexBarView.setVisible(a&&_)&&this._indexBarView.setModel(h.indexBar()):l.addChild(this._indexBarView=new Jo(t,h.indexBar()));let c=this._scrollBarView;_=i.scrollBar().visible()&&!s,!n&&a&&_&&!c?l.addChild(c=this._scrollBarView=new ta(t,h.scrollBar())):c&&c.setVisible(a&&_)&&c.setModel(h.scrollBar()),_&&c&&c.setVertical(this._vertical),i.isPaging()&&(_=i.pageNavigator().visible(),_&&!this._pageNavigatorView?l.addChild(this._pageNavigatorView=new jo(t,i,h.pageNavigator())):this._pageNavigatorView&&this._pageNavigatorView.setVisible(_)&&this._pageNavigatorView.setModel(h.pageNavigator()),_=i.pageScroller().visible(),_&&!this._pageScrollerView?l.addChild(this._pageScrollerView=new Qo(t,i,h.pageScroller())):this._pageScrollerView&&this._pageScrollerView.setVisible(_)&&this._pageScrollerView.setModel(h.pageScroller()));const u=this.$_getPanelView(this._activePanel);u&&u.setVisible(!0),this._panelViews.forEach(t=>{t===u||t.animating()||t.setVisible(!1)}),this._runScrollIndicator=this._scrollIndicatorView&&this._scrollIndicatorView.visible?this._scrollIndicatorView:null,this._runPageNavigator=this._pageNavigatorView&&this._pageNavigatorView.visible?this._pageNavigatorView:null,this._headerViews=[this._headerView,this._searchBarView,this._fieldBarView,this._fieldHeaderView],this._layoutViews=[this._headerView,this._footerView,this._fieldHeaderView]}$_measureFull(t,e,i,s){let r=0;this.rightMargin=0,this._headRowsView&&this._headRowsView.visible&&(r+=this._headRowsView.measure(e,null,i,s).height),this._headerView&&this._headerView.visible&&(this._headerView.setLayout(this._headerView.model().layout()),r+=this._headerView.measure(e,this,i,s).height),this._searchBarView&&this._searchBarView.visible&&(r+=this._searchBarView.measure(e,t,i,s).height),this._fieldBarView&&this._fieldBarView.visible&&(r+=this._fieldBarView.measure(e,t,i,s).height),this._fieldHeaderView&&this._fieldHeaderView.visible&&(r+=this._fieldHeaderView.measure(e,t,i,s).height),this._footerView&&this._footerView.visible&&(this._footerView.setLayout(this._footerView.model().layout()),r+=this._footerView.measure(e,this,i,s).height),r+=this._bodyView.measure(e,t,i,s).height,this._runPageNavigator&&(r+=this._runPageNavigator.measure(e,this,i,s).height),this._pageScrollerView&&this._pageScrollerView.visible&&(r+=this._pageScrollerView.measure(e,this,i,s).height);const n=this.$_getPanelView(this._activePanel);return n&&!n.animating()&&n.measure(e,this,i,s),{width:i,height:r}}_doMeasure(t,e,i){const s=this._owner;if(s.fullMode())return this.$_measureFull(s,t,e,Number.MAX_SAFE_INTEGER);if(!this._vertical)return this._doMeasureHorz(t,e,i);var r=s.isLandscape(),n=s.searchResult();let o=i,a=e,h=0,l=0,d=0,_=0,c=0,u=0,g;const p=this._runPageNavigator;p&&(p.setPosition(r),g=p.measure(t,this,a,o),p.vertical?a-=g.width:o-=g.height);const f=this._runScrollIndicator;f&&(f.setPosition(r),g=f.measure(t,this,a,o),f.vertical?a-=g.width:o-=g.height),this._headRowsView&&this._headRowsView.visible&&(g=this._headRowsView.measure(t,null,a,o),o-=g.height),this._pageScrollerView&&this._pageScrollerView.visible&&(g=this._pageScrollerView.measure(t,this,a,o),o-=g.height),this._headerView&&this._headerView.visible&&(this._headerView.setLayout(this._headerView.model().layout()),h=this._headerView.measure(t,this,a,o).height),this._searchBarView&&this._searchBarView.visible&&(this._searchBarView.setResult(n),l=this._searchBarView.measure(t,s,a,o).height),this._fieldBarView&&this._fieldBarView.visible&&(d=this._fieldBarView.measure(t,s,a,o).height),this._fieldHeaderView&&this._fieldHeaderView.visible&&(this._fieldHeaderView.setLayout(this._fieldHeaderView.model().layout()),_=this._fieldHeaderView.measure(t,this,a,o).height),this._searchResultView&&(this._searchResultView.setResult(n),this._searchResultView.visible&&(c=this._searchResultView.measure(t,this,a,o).height)),this._footerView&&this._footerView.visible&&(this._footerView.setLayout(this._footerView.model().layout()),u=this._footerView.measure(t,this,a,o).height),o-=h+l+d+_+c+u,this.rightMargin=0,this._scrollBarView&&this._scrollBarView.visible&&(g=this._scrollBarView.measure(t,this,a,o),this._scrollBarView.model().floating()||(this.rightMargin+=g.width)),this._indexBarView&&this._indexBarView.visible&&(g=this._indexBarView.measure(t,this,a,o),this._indexBarView.model().floating()||(this.rightMargin+=g.width));const w=this.$_getPanelView(this._activePanel);return w&&!w.animating()&&w.measure(t,this,e,o),this._bodyView._searchResult=n,this._bodyView.measure(t,s,a,o),{width:e,height:i}}_doRender(e,i,s){if(!this._vertical)return void this._doRenderHorz(e,i,s);function t(){var t=u.mh;u.resize(i,t).move(v,y),s=-t,y+=t,u.render(e)}var r,n,o,a,h,l,d,_=this.scrollPos(),c=this.scrollOff();const u=this._headRowsView&&this._headRowsView.visible?this._headRowsView:null,g=this._runPageNavigator,p=this._runScrollIndicator;let f=this._scrollBarView&&this._scrollBarView.visible?this._scrollBarView:null,w=i,m=s,v=0,y=0,b=s,S;g&&g.vertical&&(r=g.mw,g.position===vs.LEFT?(g.resize(r,s).move(v,y),v+=r):g.resize(r,s).move(w-r,y),i-=r,w-=r,g.render(e)),p&&(p.vertical?(r=p.mw,p.resize(r,s),p.position===vs.LEFT?(p.move(v,y),v+=r):p.move(w-r,y),i-=r,w-=r):(n=p.mh,p.resize(i,n),p.position===vs.TOP?(p.move(v,y),y+=n):(p.move(v,m-n),b-=n),s-=n,m-=n),p.render(e)),u&&u.model.position()===dn.BEFORE&&t(),S=this._pageScrollerView,S&&S.visible&&(n=S.mh,S.resize(i,n).move(v,m-n),s-=n,m-=n,S.render(e)),g&&!g.vertical&&(o=g.mh,g.position===vs.TOP?(g.resize(i,o).move(v,y),y+=o):(g.resize(i,o).move(v,m-o),b-=o),s-=o,m-=o,g.render(e)),S=this._footerView,S&&S.visible&&(o=S.mh,b-=o,S.resize(i,o).move(v,b),s-=o,m-=o,S.render(e)),S=this._searchResultView,S&&S.visible&&(h=S.mh,b-=h,S.resize(i,h).move(v,b),s-=h,m-=h,S.render(e));for(const S of this._headerViews)S&&S.visible&&(a=S.mh,S.resize(i,a).move(v,y),s-=a,y+=a,S.render(e));u&&u.model.position()===dn.AFTER&&t();let C=0;S=f,S&&(h=S.mw,S.resize(h,s).move(i-h,y),this._scrollBarView.model().floating()||(C+=h)),S=this._indexBarView,S&&S.visible&&(d=S.mw,l=S.mh,S.resize(d,l).move(i-C-d,(s-l)/2),S.render(e),this._indexBarView.model().floating()||(C+=d)),this._panelContainer.setBounds(0,y,i,s);const x=this.$_getPanelView(this._activePanel);x&&!x.animating()&&(l=x.mw,d=x.mh,x.resize(l,d),this.$_movePanel(x),x.render(e));const R=this._bodyView;R.resize(i,Math.max(0,s)).move(v,y),R.render(e),R.isEmpty()&&f&&(f.setVisible(!1),f=null),p&&(this.$_setScrollRate(p,_,c,!1),p.render(e)),f&&(this.$_setScrollBar(f,!1),f.render(e)),this._toolContainer.setBounds(0,0,i,m)}_doMeasureHorz(t,e,i){const s=this._owner;var r=s.searchResult();let n=i;var o=e;let a=0,h=0,l=0,d=0,_;this.rightMargin=0;const c=this._scrollIndicatorView;c&&c.visible&&(_=c.measure(t,this,o,n),n-=_.height);var u=this._runPageNavigator;u&&u.vertical;const g=this._headerView;g&&g.visible&&(g.setLayout(g.model().layout()),a=g.measure(t,this,o,n).height),this._searchBarView&&this._searchBarView.visible&&(this._searchBarView.setResult(r),h=this._searchBarView.measure(t,this,o,n).height),this._searchResultView&&(this._searchResultView.setResult(r),this._searchResultView.visible&&(l=this._searchResultView.measure(t,this,o,n).height));const p=this._footerView;p&&p.visible&&(p.setLayout(p.model().layout()),d=p.measure(t,this,o,n).height),n-=a+h+l+d,this._scrollBarView&&this._scrollBarView.visible&&(_=this._scrollBarView.measure(t,this,o,n),this._scrollBarView.model().floating());const f=this.$_getPanelView(this._activePanel);return f&&!f.animating()&&f.measure(t,this,e,n),this._bodyView._searchResult=r,this._bodyView.measure(t,s,o,n),{width:e,height:i}}_doRenderHorz(t,e,i){var s=this.scrollPos(),r=this.scrollOff();let n=this._scrollIndicatorView&&this._scrollIndicatorView.visible?this._scrollIndicatorView:null,o=this._scrollBarView&&this._scrollBarView.visible?this._scrollBarView:null,a=i;var h,l,d;let _=0,c;c=n,c&&(h=c.mh,c.resize(e,h).move(0,_),i-=h,_+=h),c=this._footerView,c&&c.visible&&(h=c.mh,c.resize(e,h).move(0,a-h),i-=h,a-=h,c.render(t)),c=this._searchResultView,c&&c.visible&&(l=c.mh,c.resize(e,l).move(0,a-l),i-=l,a-=l,c.render(t)),c=this._headerView,c&&c.visible&&(l=c.mh,c.resize(e,l).move(0,_),i-=l,_+=l,c.render(t)),c=this._searchBarView,c&&c.visible&&(d=c.mh,c.resize(e,d).move(0,_),i-=d,_+=d,c.render(t)),c=o,c&&(d=c.mh,c.resize(e,d).move(0,a-d),this._scrollBarView.model().floating());const u=this._bodyView;u.resize(e,Math.max(0,i)).move(0,_),u.render(t),u.isEmpty()&&(n&&(n.setVisible(!1),n=null),o&&(o.setVisible(!1),o=null)),n&&(this.$_setScrollRate(n,s,r,!1),n.render(t)),o&&(this.$_setScrollBar(o,!1),o.render(t)),this._panelContainer.move(0,_),this._panelContainer.setHeight(a-_);const g=this.$_getPanelView(this._activePanel);g&&!g.animating()&&(s=g.mw,r=g.mh,g.resize(s,r).move(0,0),g.render(t))}_doAfterRender(){this._runPageNavigator=null,this._bodyView.checkItemViewOrders()}$_destroyPanel(t){if(t)return this._panelViews.splice(this._panelViews.indexOf(t),1),t.destroy()}$_getButtonPanel(t){const e=this._panelViews;var i=t.getDisplay(this.isLandscape());let s=this._buttonPanelView;return s&&s.display()==i||(this.$_destroyPanel(s),s=da.createView(this.doc,t,i),e.push(this._buttonPanelView=s)),s}$_getFormPanel(t){const e=this._panelViews;return this._formPanelView||e.push(this._formPanelView=new la(this.doc,t)),this._formPanelView}$_getSearchPanel(t){const e=this._panelViews;var i=t.getDisplay(this.isLandscape());let s=this._searchPanelView;return s&&s.display()==i||(this.$_destroyPanel(s),s=pa.createView(this.doc,t,i),e.push(this._searchPanelView=s)),s}$_getFilterPanel(t){const e=this._panelViews;return this._filterPanelView||e.push(this._filterPanelView=new Ra(this.doc,t)),this._filterPanelView}$_setScrollRate(t,e,i,s){if(t){const o=this._owner,a=this._bodyView;var r=this._vertical;if(o.isSingleRow())t.updateRate(this._owner,e,1,1,s);else if(o.preMode()){var n=a.getPreLength();const i=a.itemLayerOff()+(r?a.height:a.width);t.setRate(i/n,s)}else{r=a.lastItemView();if(r){n=this._vertical?r.height:r.width;const i=this._vertical?a.height-r.y:a.width-r.x;t.updateRate(o,e+a.itemViewCount()-1,n,i,s)}}}}$_getPageLen(t){var e=this._bodyView._itemPoints(),i=e.length-1;if(0<i){var s=i-t.scrollOff()/(e[1]-e[0]);return s-=(e[i]-(this._vertical?t.height:t.width))/(e[i]-e[i-1])}return 0}$_setScrollBar(t,e){if(t&&t.visible){const n=this._bodyView;var i=n.scrollPos();if(n._preMode){var s=n.getPreLength(),r=n.getPrePos(i,n.scrollOff());t.setScroll(s,this._vertical?n.height:n.width,r,e)}else{const o=this._owner;s=o.isPaging()?o.pageSize():o.isGrouped()?o.groupModel().visItemCount():o.data().rowCount(),r=this._vertical?n.getItemView(0).height:n.getItemView(0).width,i=i+(0<n.itemViewCount()?n.scrollOff()/r:0),r=this.$_getPageLen(n);t.setScroll(s,r,i,e)}}}$_getPanelView(t){return this._panelViews,t instanceof lo?this.$_getButtonPanel(t):t instanceof _o?this.$_getFormPanel(t):t instanceof co?this.$_getSearchPanel(t):t instanceof xo?this.$_getFilterPanel(t):void 0}$_movePanel(t){var e=this._panelContainer.width,i=this._panelContainer.height;let s=0,r=0;switch(t.model().getPosition()){case Wr.RIGHT:s=e-t.mw;break;case Wr.BOTTOM:r=i-t.mh;break;case Wr.CENTER:s+=(e-t.mw)/2,r+=(i-t.mh)/2;break;case Wr.LEFT:case Wr.TOP:}t.move(s,r)}$_hidePanel(e,t,i,s){function r(t){e.setVisible(!1),t._panelContainer.removeChild(e),t._activePanel=null,s&&s()}if(this._panelContainer.dom.style.pointerEvents="none",this.canAnimate()){var n=function(){switch(e.model().getPosition()){case Wr.CENTER:return[{opacity:"1"},{opacity:"0"}];case Wr.LEFT:return[{left:_e},{left:de(-e.width)}];case Wr.RIGHT:return[{left:de(t-e.width)},{left:de(t)}];case Wr.BOTTOM:return[{top:de(i-e.height)},{top:de(i)}];default:Wr.TOP;return[{top:_e},{top:de(-e.height)}]}}();const o=e.dom.animate(n,{duration:kh.PANEL_DURATION,fill:"backwards"});e.setAnimating(!0),o.addEventListener("finish",()=>{e.setAnimating(!1),r(this)})}else r(this)}$_showPanel(t,e,i,s){function r(){s&&s()}if(this._activePanel=t.model(),this._panelContainer.dom.style.pointerEvents="auto",this._panelContainer.addChild(t),t.setVisible(!0),t.refresh(this,e,i),this.$_movePanel(t),this.canAnimate()){var n=function(){switch(t.model().getPosition()){case Wr.CENTER:return[{opacity:"0"},{opacity:"1"}];case Wr.LEFT:return[{left:de(-t.width)},{left:_e}];case Wr.RIGHT:return[{left:de(e)},{left:de(e-t.width)}];case Wr.BOTTOM:return[{top:de(i)},{top:de(i-t.height)}];default:Wr.TOP;return[{top:de(-t.height)},{top:_e}]}}();const o=t.dom.animate(n,{duration:kh.PANEL_DURATION,fill:"backwards"});t.setAnimating(!0),o.addEventListener("finish",()=>{t.setAnimating(!1),r()})}else r()}}kh.CLASS_NAME="dlist-list-view",kh.PANEL_DURATION=250;class Th extends ko{}class Ph extends ko{}const Mh={vlinear:class extends Bo{isCheckHorzExplicits(){return!0}_doPrepareRender(t,s){if(super._doPrepareRender(t,s),this._gaps=[],(this._szGap=0)<this._visibles.length){const r=this.model().itemGap,n=this._gaps;let i=!0;this._visibles.forEach((t,e)=>{t.prepareView(s),t.isSpacer()?(n.push(0),i=!0):i?(n.push(0),i=!1):(n.push(r),this._szGap+=r)})}}_doMeasureLayout(n,o,a,h){const l=this._visibles;let t=this.mw,s=this.mh;if((h-=this._szGap)!==this._prevMax.height){let e=0,i=0;this._measureChildren(l,n,o,a,h,t=>{e+=t.mh,i=Math.max(i,t.mw)}),s=e,t=i,this._prevMax.height=h}if(!isNaN(this._explicitHeight)){var e=h-s;let r=!1;if(e<0&&this._model.canShrink()){const p=[];let i=0,s=0;for(const f of l){var d=he(f.model().getChildProp("shrink"),1);0<d&&(p.push(f),i+=f._expand=d),s+=f.mh}if(r=0!==i){let t=s-h,e=0;if(1<=i){for(const w of p)e+=w.mh*w._expand;for(const m of p){var _=m.mh-m._expand*m.mh/e*t;m.measureLayout(n,o,a,_),m.mh=_}}else if(0<i){t*=i;for(const v of p)e+=v.mh;i=0;for(const y of p)i+=y._expand*=y.mh/e;for(const b of p){var c=b.mh-t*b._expand/i;b.measureLayout(n,o,a,c),b.mh=c}}}}else if(0<e&&this._model.canGrow()){const S=[];let t=0,e=0;for(const C of l){var i=he(C.model().getChildProp("grow"),0);0<i&&(S.push(C),t+=C._expand=i),e+=C.mh}if(r=0!==t){var u=h-e;for(const x of S){var g=x.mh+u*x._expand/t;x.measureLayout(n,o,a,g),x.mh=g}}}if(r){let e=0,i=0;l.forEach(t=>{e+=t.mh,i=Math.max(i,t.mw)}),t=i,s=e}}return{width:t,height:s+this._szGap}}_doLayoutContent(t,n,i){var s=this._model;const r=this._visibles;var o=r.length;const a=this._gaps;let h=0;var l=h;if(r.forEach((t,e)=>{e=a[e];t.my=h+e,h+=t.mh+e}),1<(i-=h-l)){l=s.itemsArrange;let e=0;switch(l){case p.CENTER:e=i/2|0;break;case p.END:e=0|i;break;case p.SPACE_BETWEEN:let t=!0;case p.SPACE_AROUND:{const _=i/(t?o-1:o+1);let e=t?0:_;r.forEach(t=>{t.my+=0|e,e+=_})}}0!==e&&r.forEach(t=>{t.my+=e})}const d=s.itemsAlign;r.forEach(t=>{const e=t.model();var i=e.getLeftIn(n),s=e.getRightIn(n);let r;(t.mw>n||t.isSpacer())&&(t.mw=n),r=isNaN(i)?isNaN(s)?d===c.LEFT?0:d===c.RIGHT?n-t.mw:(n-t.mw)/2:n-t.mw-s:i,t.mx=r,t.applyMeasuredBounds()})}},hlinear:class extends Bo{isCheckVertExplicits(){return!0}_doPrepareRender(t,i){if(super._doPrepareRender(t,i),this._gaps=[],(this._szGap=0)<this._visibles.length){const s=this.model().itemGap,r=this._gaps;let e=!0;this._visibles.forEach(t=>{t.prepareView(i),t.isSpacer()?(r.push(0),e=!0):e?(r.push(0),e=!1):(r.push(s),this._szGap+=s)})}}_doMeasureLayout(n,o,a,h){const l=this._visibles;let t=this.mw,s=this.mh;if((a-=this._szGap)!==this._prevMax.width){let e=0,i=0;this._measureChildren(l,n,o,a,h,t=>{e+=t.mw,i=Math.max(i,t.mh)}),t=e,s=i,this._prevMax.width=a}if(!isNaN(this._explicitWidth)){var e=a-t;let r=!1;if(e<0&&this._model.canShrink()){const p=[];let i=0,s=0;for(const f of l){var d=he(f.model().getChildProp("shrink"),1);0<d&&(p.push(f),i+=f._expand=d),s+=f.mw}if(r=0!==i){let t=s-a,e=0;if(1<=i){for(const w of p)e+=w.mw*w._expand;for(const m of p){var _=m.mw-m._expand*m.mw/e*t;m.measureLayout(n,o,_,h),m.mw=_}}else if(0<i){t*=i;for(const v of p)e+=v.mw;i=0;for(const y of p)i+=y._expand*=y.mw/e;for(const b of p){var c=b.mw-t*b._expand/i;b.measureLayout(n,o,c,h),b.mw=c}}}}else if(0<e&&this._model.canGrow()){const S=[];let t=0,e=0;for(const C of l){var i=he(C.model().getChildProp("grow"),0);0<i&&(S.push(C),t+=C._expand=i),e+=C.mw}if(r=0!==t){var u=a-e;for(const x of S){var g=x.mw+u*x._expand/t;x.measureLayout(n,o,g,h),x.mw=g}}}if(r){let e=0,i=0;l.forEach(t=>{e+=t.mw,i=Math.max(i,t.mh)}),t=e,s=i}}return{width:t+this._szGap,height:s}}_doLayoutContent(t,i,n){var s=this._model;const r=this._visibles;var o=r.length;const a=this._gaps;let h=0;var l=h;if(r.forEach((t,e)=>{e=a[e];t.mx=h+e,h+=t.mw+e}),1<(i-=h-l)){l=s.itemsArrange;let e=0;switch(l){case p.CENTER:e=i/2|0;break;case p.END:e=0|i;break;case p.SPACE_BETWEEN:let t=!0;case p.SPACE_AROUND:{const _=i/(t?o-1:o+1);let e=t?0:_;r.forEach(t=>{t.mx+=0|e,e+=_})}}0!==e&&r.forEach(t=>{t.mx+=e})}const d=s.itemsAlign;r.forEach(t=>{const e=t.model();var i=e.getTopIn(n),s=e.getBottomIn(n);let r;(t.mh>n||t.isSpacer())&&(t.mh=n),r=isNaN(i)?isNaN(s)?d===g.TOP?0:d===g.BOTTOM?n-t.mh:(n-t.mh)/2:n-t.mh-s:i,t.my=r,t.applyMeasuredBounds()})}},frame:class extends qn{constructor(t,e){super(t,e)}_doPrepareRender(t,e){super._doPrepareRender(t,e),this._visibles.forEach(t=>{t.prepareView(e),t.setRelativePositions()})}},stack:class extends qn{constructor(t,e){super(t,e)}_doPrepareRender(t,e){super._doPrepareRender(t,e);const i=this._model.getActiveChild(e,this._model.row);let s=this._visibles.find(t=>t.model().id()===i);s=s||(0<this._visibles.length?this._visibles[this._visibles.length-1]:null),this._visibles.forEach(t=>t._internalVisible(t===s)),s?(this._childView=s,s.prepareView(e),s.setRelativePositions(),this._visibles=[s]):this._visibles=[]}},scroll:Ta,form:ga,grid:Fo};class Ih extends Ve{constructor(t){super(t,!1,"dlist-search-field"),this.setVisible(!1)}_doInitDom(r,n){["tl","tr","bl","br"].forEach(t=>{var e=r.createElement("span");const i={position:"absolute",width:"5px",height:"5px",borderStyle:"solid"};var s=t.charAt(0),t=t.charAt(1);i[xe[s]+"Width"]="2px",i[xe[t]+"Width"]="2px","b"===s&&(i.bottom="0"),"r"===t&&(i.right="0"),Object.assign(e.style,i),n.appendChild(e)})}}class Nh extends Hs{constructor(t,e){super(t,!0,Nh.CLASS_NAME),this._layoutChanged=!1,this._body=e,this.setVisible(!1)}_doDestory(){this._body=null,super._doDestory()}_doInitDom(t,e){}_getContentPosition(){return"absolute"}_doPrepareRender(t,e){const i=e,s=this._model=i.current().attachedRow();e=s.layout();const r=this.content;if(this._vertical=i.isVertical(),this.dom.dataset.dir=this._vertical?"v":"h",e)if(this._layoutChanged=!this._layout||e.layout.tid!==this._layout.tid,this._layout=e.layout,this._rowStyle=e.rowStyle,this._layoutChanged&&this._layoutView&&(r.removeChild(this._layoutView.dom),this._layoutView=null),this._layoutView)this._layoutView&&this._layoutView.refreshModels(this._layout);else{const n=this._body.listView();this._layoutView=n.createLayoutView(t,this._layout),this._layoutView.build(t,n),r.appendChild(this._layoutView.dom)}else this._layoutView&&(r.removeChild(this._layoutView.dom),this._layoutView=null);i.isDataAppending()&&s.indicatorVisible()?(!this._indicator||this._indiSize===s.indicatorSize()&&this._indiType===s.indicatorType()||(Re.hide(this._indicator),Re.clearChildren(this._indicator)),this._indicator||(this._indicator=zi.create(t),this._indicator.style.position="absolute",this.appendDom(this._indicator)),e=this._indiSize=s.indicatorSize(),Re.show(this._indicator),Re.resize(this._indicator,e,e),Hi.render(t,this._indicator,{type:this._indiType=s.indicatorType(),itemCount:10,width:e,height:e})):this._indicator&&(Re.hide(this._indicator),this._indiSize=0)}_doApplyStyles(t){this._rowStyle&&(t=this.content.style,Object.assign(t,this._rowStyle.default))}_doMeasure(e,i,s){const t=this._model;var r=this._padding=Re.getPadding(this.dom),n=i,o=s,a=r.left+r.right,h=r.top+r.bottom;let l=0;if(i-=a,s-=h,0<this._indiSize&&(l=this._indiSize+2*t.indicatorMargin()),this._space=Math.max(0,he(t.endSpace(),0)),this._vertical){let t=0;return this._layoutView&&(r=this._body.listView(),this._layoutView.prepareLayout(e,r),this._layoutView._explicitWidth=i,t+=this._layoutView.measureLayout(e,r,i,s).height+h,i+=a),t+=l+this._space,{width:n,height:t}}{let t=0;return this._layoutView&&(n=this._body.listView(),this._layoutView.prepareLayout(e,n),this._layoutView._explicitHeight=s,t+=this._layoutView.measureLayout(e,n,i,s).width+a,s+=h),t+=l+this._space,{width:t,height:o}}}_doRender(e,i,s){var r=this._padding;const n=this._layoutView;if(i-=r.left+r.right,s-=r.top+r.bottom,this.setContentBounds(r.left,r.top,i,s),this._vertical){let t=0;n&&(n.resizeByMeasure().render(e),t+=n.height+r.top+r.bottom),0<this._indiSize&&this._indicator&&Re.move(this._indicator,(i-this._indiSize)/2,t+this._model.indicatorMargin())}else{let t=0;n&&(n.resizeByMeasure().render(e),t+=n.width+r.left+r.right),0<this._indiSize&&this._indicator&&Re.move(this._indicator,t+this._model.indicatorMargin(),(s-this._indiSize)/2)}}}Nh.CLASS_NAME="dlist-attached-row";class Oh extends Ve{_doInitDom(t,e){Object.assign(e.style,{width:"100%",height:"100%",overflow:"hidden",pointerEvents:"none"})}}class Bh extends Hs{constructor(t){super(t,!1,Bh.CLASS_NAME),this._vertical=!0,this._rowViewPool=[],this._rowViewMap={},this._touchedRow=-1,this._commandRow=-1,this._noCache=!1,this._positionsDirty=!1,this._arVis=!1,this._scrollPos=0,this._scrollOff=0,this._topRow=0,this._focusedRow=-1,this._rowEnded=!1,this._scrollEnded=!1,this._deletingRowIds=[],this.addChild(this._loadingView=new Th(t)),this.addChild(this._emptyView=new Ph(t)),this.addChild(this._indentLayer=new Ve(t,!1,"dlist-indent-layer")),this.addChild(this._deletingLayer=new Ve(t,!1,"dlist-deleting-layer")),this.addChild(this._itemLayer=new Ve(t,!1,"dlist-item-layer")),this.addChild(this._itemSubLayer=new Ve(t,!1,"dlist-items-sub")),this._itemSubLayer.addChild(this._attachedView=new Nh(t,this)),this._itemSubLayer.addChild(this._searchFieldView=new Ih(t)),this.addChild(this._maskLayer=new Oh(t,!1,"dlist-mask-layer")),this.addChild(this._feedback=new ua(t)),this.addChild(this._toolLayer=new $e(t,!1,"dlist-tools")),this._itemLayer.moveY(0),this._itemSubLayer.moveY(0)}_doDestory(){this._focusView=this._focusView&&this._focusView.destroy(),this._selectionView=this._selectionView&&this._selectionView.destroy(),this._commandsView=this._commandsView&&this._commandsView.destroy(),super._doDestory()}listView(){return this._listView}owner(){return this._owner}isVertical(){return this._vertical}data(){return this._listView.data()}scrollPos(){return this._scrollPos}scrollOff(){return this._scrollOff}topRow(){return this._topRow}commandRow(){return this._commandRow}animating(){return!!this._rowAnimation}isRowEnded(){return this._rowEnded}isScrollEnded(){return this._scrollEnded}itemLayerOff(){return-this._itemLayer[this.POS]}length(){return this[this.SIZE]}isEmpty(){return this.itemViewCount()<1}addFeedback(t){this._toolLayer.appendDom(t)}indexOfRow(i){for(let t=0,e=this.itemViewCount();t<e;t++)if(this.getItemView(t).row()===i)return t;return-1}getRowView(t){return this._rowViewMap[this._dv.getRowId(t)]}getRenderer(t,e){let i;if(this._emptyView.visible)i=this._emptyView.simpleViewByDom(e,!0);else if(this._loadingView.visible)i=this._loadingView.simpleViewByDom(e,!0);else if(0<=t){const s=this.getRowView(t);i=s.simpleViewByDom(e,!0)}return i&&i.renderer()}findSimpleLayoutView(t,e){return null===(t=this.getRowView(t))||void 0===t?void 0:t.simpleViewByTag(e,!0)}findDom(t,e){return this.doc.getElementById(In.getDomId(t,NaN,e))}getRow(t){let e=t;for(;e;){if(e instanceof HTMLDivElement&&ro.isRowView(e)){const i=this._rowViewOfDom(e);if(i)return i.row();break}e=e.parentElement}}setTouchedRow(t){if(t!==this._touchedRow){if(0<=this._touchedRow){const e=this.getRowView(this._touchedRow);e&&e.setTouched(!1)}if(this._touchedRow=t,0<=this._touchedRow){const i=this.getRowView(this._touchedRow);i&&i.setTouched(!0)}}}scrollBy(t){var e=this.doc,i=this._vertical,s=this.width,r=this.height;let n;if((t>>=0)<0){if(0===this._scrollPos&&0===this._scrollOff)return this.$_scrollEnded(!1),"near";t=i?Math.min(r,-t):Math.min(s,-t),n=this._doScrollNear(e,this._scrollPos,this._scrollOff,t,s,r),n.pos<=0&&n.off<=0?this.$_scrollEnded(!1):this.$_removeEndEffect()}else if(0<t){if(this.isScrollEnded())return this.$_scrollEnded(!0),"far";t=i?Math.min(r,t):Math.min(s,t),n=this._doScrollFar(e,this._scrollPos,this._scrollOff,t,s,r),this._scrollEnded?this.$_scrollEnded(!0):this.$_removeEndEffect()}if(n)return this._scrollPos=n.pos,this._scrollOff=n.off,this._topRow=n.row,this._searchResult&&this.$_renderSearchField(this._searchResult),!0}setCommands(d,_,c){this.control.lock(()=>{const e=this.getRowView(d);if(e){var i=this.doc;const l=this._owner;var s,r,n,o=l.isVertical(),a=e.getOffsetBounds(),h=l.commandBox().mode()===Jr.SHIFT;let t=this._commandsView;this._commandRow=d,t||(t=this._commandsView=new ra(i,l.commandBox()),this.addChild(this._commandsView)),t.visible=!0,t.setCommands(l.data(),d,_),t.measure(i,null,this.width,this.height),o?t.resize(t.mw,Math.max(a.height,t.mh)):t.resize(Math.max(a.width,t.mw),t.mh),t.render(i),o?(s=a.y+(this._itemLayer.y||0),r=a.x+a.width-t.mw+1,n=a.x-t.mw,t.move(r,s),this._commandPos=e.x,h&&e.move(n,s),c&&this.canAnimate()&&(this._commandsView.dom.animate([{left:a.x+a.width+"px"},{left:r+"px"}],{duration:150,fill:"none"}),h&&e.dom.animate([{left:a.x+"px"},{left:n+"px"}],{duration:150,fill:"none"}))):(s=a.x+(this._itemLayer.x||0),r=a.y+a.height-t.mh+1,n=a.y-t.mh,t.move(s,r),this._commandPos=e.y,h&&e.move(s,n),c&&this.canAnimate()&&(this._commandsView.dom.animate([{top:a.y+a.height+"px"},{top:r+"px"}],{duration:150,fill:"none"}),h&&e.dom.animate([{top:a.y+"px"},{top:n+"px"}],{duration:150,fill:"none"})))}})}clearCommands(t){if(0<=this._commandRow){const e=this.getRowView(this._commandRow);this._commandsView.visible=!1,this._commandRow=-1,e&&(this._owner.isVertical()?e.moveX(this._commandPos):e.moveY(this._commandPos))}}focusedRowChanged(t,e){this._focusedRow=t}canMoveTo(t,e){return!0}_doInitDom(t,e){e.style.overflow="hidden"}_doPrepareRender(t,e){var i,s;e&&(i=e.isDataLoading(),s=this._vertical=e.isSingleRow()||e.isVertical(),this._preMode=e.preMode(),this._noCache=e.noCache(),this._owner=e,this._dv=e.data(),this.SIZE=s?"height":"width",this.MEASURE_SIZE=s?"mh":"mw",this.POS=s?"y":"x",this._arVis=e.current().attachedRow().visible(),this._positionsDirty=e.isDataChanged(),this._loadingView.setVisible(i&&!e.skeletonVisible),this._emptyView.setVisible(!i&&e.shouldShowEmptyPage()))}_measureLayoutView(t,e,i,s,r,n,o){if(e.visible){const a=this._owner;s=i&&a.getTemplate(i)||Es.get(s),r=ms.Instance.layoutFromTemplate(a.wrapperOrThis(),-1,!1,!1,s,r||{inflateParam:function(t,e,i){},inflateStock:function(t,e,i){}});return e.setLayout(r),e.measure(t,this._listView,n,o),{width:n,height:o}}}_renderLayoutedView(t,e,i,s){if(e.visible)return e.resize(i,s),e.render(t),!0}_createRowAnimation(){let t;var e;return 0<this._deletingRowIds.length?(e=this._deletingRowIds.sort((t,e)=>t-e),t=this._createRowsDeleingAnimation(e),this._deletingRowIds=[]):0<=this._detailingRow&&(t=new(this._owner.isRowDetailed(this._detailingRow)?Hh:Wh)(this,this._detailingRow),this._detailingRow=-1),t}_doMeasure(t,e,i){this._rowAnimation&&(this._rowAnimation.stop(),this._rowAnimation=null);const s=this._owner.current();let r=this._measureLayoutView(t,this._loadingView,s.loadingPage().template(),"@it_loading_page",s.loadingPage(),e,i)||this._measureLayoutView(t,this._emptyView,s.emptyPage().template(),"@it_empty_page",s.emptyPage(),e,i);return r||(this._rowAnimation=this._createRowAnimation(),this._searchFieldView.setVisible(!!this._searchResult),r=this._vertical?this._doMeasureVert(t,e,i):this._doMeasureHorz(t,e,i)),r}$_renderSelection(t,e,i){var s=this._owner.getSelection();let r=this._selectionView;s?(r||(r=this._selectionView=new ia(t),this.addChild(r)),r.visible=!0,this._doRenderSelection(t,this._vertical,s,r,e,i)):r&&(r.visible=!1)}$_renderSearchField(t){const e=this._searchFieldView;if(t.isEmpty())e.setVisible(!1);else{var i=t.getCurrrentField();const s=this.getRowView(i.row);if(s){const r=s.simpleViewByModel(i.layout,!0);r?(t=this.getClientRect(),i=r.getClientRect(),e.setVisible(!0),e.setBounds(i.x-t.x-4,i.y-t.y-2,r.width+8,r.height+4)):e.setVisible(!1)}else e.setVisible(!1)}}_doRender(t,e,i){this._renderLayoutedView(t,this._loadingView,e,i)||this._renderLayoutedView(t,this._emptyView,e,i)||(this._feedback.resize(e,i),this._vertical?this._doRenderVert(t,e,i):this._doRenderHorz(t,e,i),this.$_renderSelection(t,e,i),this._searchResult&&this.$_renderSearchField(this._searchResult),this.setFocusedRow(this._focusedRow)),this._toolLayer.setBounds(0,0,e,i)}setFocusedRow(t){const e=0<=t?this.getRowView(t):void 0;if(e){this._focusView||(this._focusView=new Lh(this.doc)),this._maskLayer.addChild(this._focusView);const i=this._listView.focusMask,s=e.getBounds();t=e.getNearIndent(i.nearIndent());s.x+=t,s.width-=t+e.getFarIndent(i.farIndent()),this._focusView.setRect(s)}else this._focusView&&this._focusView.remove()}resetFocusedView(){this.setFocusedRow(this._focusedRow)}_doAfterRender(){this._rowAnimation&&this._rowAnimation.start(),J.log("ROW VIEW POOL: ",this._rowViewPool.length)}_moveItemLayer(t){this._vertical?(this._itemLayer.moveY(t),this._itemSubLayer.moveY(t),this._deletingLayer.moveY(t)):(this._itemLayer.moveX(t),this._itemSubLayer.moveX(t),this._deletingLayer.moveX(t))}_canShowAttached(t){return!t.isPaging()&&t.current().attachedRow().visible()}_measureAttached(t,e,i,s,r){const n=this._attachedView;if(this._canShowAttached(e)&&(n.setVisible(!0),0<n.measure(t,e,s,r).height))return n;n.setVisible(!1)}_getRowIndent(t){return 0}_getBodyIndent(t){return 0}_getBodyMargin(t){return 0}_prepareRowView(t,e,i){var s=i.getRowLayout(e);t.setData("state",void 0),t.setLayout(s),t.indent=this._getRowIndent(t),t.bodyIndent=this._getBodyIndent(t),t.bodyMargin=this._getBodyMargin(t),t.alternate=e%2==1,t.rowState=i.data().internalRowState(e),t.detailed=i.isRowDetailed(e),t.checked=i.isRowChecked(e),t.selected=null===(s=i.getSelection())||void 0===s?void 0:s.isRowSelected(e),t.searched=i.isRowSearched(e)}_getRowView(t,e,i,s){var r=this._owner;const n=this._rowViewMap;var o=this._dv.getRowId(e);let a=n[o];if(a)delete n[o];else{const h=this._rowViewPool;if(0<h.length){for(let t=h.length-1;0<t;t--)if(h[t]._rowid===o){a=h.splice(t,1)[0];break}a||(a=h.pop(),a.$_borrowed())}a=a||this._createItemView(t),s?this._itemLayer.insertBefore(a,s):this._itemLayer.addChild(a)}return a.setRow(this._dv,e,o,i),this._prepareRowView(a,e,r),a}_returnRowView(t){this._itemLayer.removeChild(t),delete this._rowViewMap[t._rowid],this._rowViewPool.push(t)}_returnRowViews(e,i){for(let t=e.length-1;t>=i;t--)this._returnRowView(e[t])}_resetRowViews(t){let e=this._rowViewMap;for(const s in e){var i=e[s];this._returnRowView(i)}e=this._rowViewMap={};for(const r of t)r instanceof ro&&(e[r._rowid]=r)}_addRowView(t,e,i,s,r,n,o){const a=this._getRowView(t,e,i,s);s=a.measure(t,this._listView,n-a.bodyIndent-a.bodyMargin,o);return r?a.resize(n-a.bodyIndent-a.bodyMargin,s.height):a.resize(s.width,o-a.bodyIndent-a.bodyMargin),a.render(t),this._rowViewMap[a._rowid]=a,a}_createItemView(t){return new ro(t)}_setScrollPos(t,e,i){this._scrollPos=t,this._scrollOff=e,this._topRow=i}$_addDeletingRows(t){this.canAnimate()&&(Array.isArray(t)?this._deletingRowIds=this._deletingRowIds.concat(t):this._deletingRowIds.push(t))}$_setDetailingRow(t){this._detailingRow=t}$_scrollEnded(t){this.$_showOverEffect(t?this._vertical?u.UP:u.RIGHT:this._vertical?u.DOWN:u.LEFT)}$_showOverEffect(t){this._owner.current().overScrollEffect(),this._feedback.showEndBalloon({x:0,y:0,width:this.width,height:this.height},t)}$_removeEndEffect(){this._owner.current().overScrollEffect(),this._feedback.removeEndBalloon()}}Bh.CLASS_NAME="dlist-body",Bh.DELETE_DURATION=300,Bh.DETAIL_DURATION=300;class Fh extends Dh{constructor(t,e){super(t);var i=t.isVertical(),e=e.sort((t,e)=>t-e);this.SIZE=i?"height":"width",this.POS=i?"y":"x",this.MOVE=i?"moveY":"moveX",this._allViews=t.itemViews(),this.$_collectDeleted(e)}_doStart(){return this._doPrepare(),this._rowAni=xn.create(t=>{this._doRun(t)},(t,e)=>{},Bh.DELETE_DURATION),!0}_doStop(){this.$_clear()}_doPrepare(){const t=this._bodyView,e=this.POS,i=this.SIZE,s=this._deletedViews,r=this._views=this._getItemViews(),n=r.slice(0);var o=0<r.length?r[0][e]:0;let a=o,h=0;s.forEach(t=>t.rv.newPos=t.rv[e]),r.forEach(t=>t.newPos=t[e]),s.forEach(t=>{const e=t.rv.vindex();var i=n.findIndex(t=>t.vindex()===e);0<=i?n.splice(i,0,t.rv):e>n[n.length-1].vindex()&&n.push(t.rv)}),n.forEach(t=>{t.oldPos=a,a+=t[i],h+=t[i]}),t.isScrollEnded()&&h>t[i]&&(a=h-t[i]+o,r.forEach(t=>{t.oldPos-=a}))}_preparePre(){const e=this.POS,t=this._allViews,i=this._deletedViews,s=this._views=this._getItemViews();let r=0;t.forEach(t=>{t.oldPos=r,r+=t.height}),i.forEach(t=>{t.rv.newPos=t[e]}),s.forEach(t=>{t.newPos=t[e]})}_doRun(e){const i=this.MOVE;this._views.forEach(t=>{t[i](t.oldPos+(t.newPos-t.oldPos)*e)})}$_collectDeleted(t){var e=this._bodyView.isVertical();const i=this._bodyView._rowViewMap,s=this._bodyView._deletingLayer,r=this._deletedViews=[];var n=e?this._bodyView.width:this._bodyView.height;for(const o of t){const a=i[o];if(a){const h={};h[e?"left":"top"]=[_e,de(-n)],h[e?"height":"width"]=[de(e?a.height:a.width),_e];const l=a.dom.animate(h,{duration:Bh.DELETE_DURATION,fill:"none"}),d={rv:a,ani:l};l.addEventListener("finish",()=>{s.removeChild(a)}),l.addEventListener("cancel",()=>{s.removeChild(a)}),r.push(d),d.rv.aniTag=e?d.rv.height:d.rv.width,s.addChild(d.rv),delete i[o]}}r.sort((t,e)=>t.rv.row()-e.rv.row())}$_clear(){const e=this._bodyView._rowViewPool,i=this._bodyView._deletingLayer,s=this._deletedViews;if(s)for(let t=s.length-1;0<=t;t--){const r=s[t];r.ani=Re.stopAnimation(r.ani),i.removeChild(r.rv),e.push(r.rv),s.splice(t,1)}this._rowAni=a.destroy(this._rowAni)}}class zh extends Dh{constructor(t,e){super(t),this._rowView=t.getRowView(e),this._oldHeight=this._rowView.height}_doStart(){var t=this._rowView.bottom()-this._bodyView.height;return this._ani=this._createAnimation(),this._moveOthers(this.$_collectOtherViews(),this._rowView.height-this._oldHeight),0<t&&this._bodyView._owner.scrollBy(t),!0}_doStop(){this._ani=Re.stopAnimation(this._ani),this._rowView=null}$_collectOtherViews(){var e=this._bodyView.isVertical();const i=[];var s=this._rowView.row();const r=this._bodyView;var n=r.itemViewCount(),s=r.indexOfRow(s);if(0<=s&&s+1<n)for(let t=s+1;t<n;t++){const o=r.getItemView(t);i.push(o),o.aniTag=e?o.y:o.x}return i}}class Hh extends zh{_createAnimation(){var t=this._rowView.height;return this._rowView.dom.animate([{height:this._oldHeight+"px"},{height:t+"px"}],{duration:Bh.DETAIL_DURATION,fill:"none"})}_moveOthers(t,i){this._moveAni=xn.create(e=>{t.forEach(t=>this._doStep(t,i,e))},(t,e)=>{this._bodyView.control.invalidateLayout()},Bh.DETAIL_DURATION)}_doStep(t,e,i){t.moveY(t.aniTag-e+e*i)}_doStop(){this._moveAni=a.destroy(this._moveAni),super._doStop()}}class Wh extends Hh{}class Gh extends kh{canMoveSingle(t,e){return this._bodyView.canMoveSingle(t,e)}_createBodyView(t,e,i){return new(e?i?jh:Xh:i?jh:qh)(t)}_doMeasure(t,e,i){const s=this.headerView(),r=this.footerView(),n=this._owner;var o=n.data(),a=this.renderInfo();return this.reqScrollPos=a&&o?Math.max(0,Math.min(n.getRowCount()-1,a.scrollPos)):0,this.reqScrollOff=a?a.scrollOff:0,n.isSingleRow()&&o?(s&&s.model().setTopRow(this.reqScrollPos),r&&r.model().setTopRow(this.reqScrollPos)):(s&&s.model().setTopRow(NaN),r&&r.model().setTopRow(NaN)),this._bodyView._expander=n.groupExpander(),super._doMeasure(t,e,i)}}class Uh extends Fh{_getItemViews(){return this._bodyView._internalRowViews()}}class qh extends Bh{constructor(){super(...arguments),this._rowViews=[],this._rowPts=[0],this._singleMode=!1,this.singleMoving=!1}_internalRowPoints(){return this._rowPts}singleView(){return this._singleView}spareSingleView(){return this._spareSingleView||(this._spareSingleView=this.$_createSingleView(this.doc,!0)),this._spareSingleView}canMoveSingle(t,e){if(this._singleMode){const r=this.owner();var i=this._singleView.row(),s=r.getRowCount();if(0<t){if(0<i)return!0;e&&this.$_showOverEffect(u.LEFT)}else if(t<0){if(i<s-1)return!0;e&&this.$_showOverEffect(u.RIGHT)}}}rowViewAt(t){return this._rowViews[t]}_internalRowViews(){return this._rowViews}bottomRow(){return this._topRow+this._rowPts.length-1}isEmpty(){return!this._singleMode&&this._rowPts.length<2}itemViewCount(){return this._rowPts.length-1}_itemPoints(){return this._rowPts}rowViewCount(){return this._rowPts.length-1}lastItemView(){return this._rowViews[this._rowViews.length-1]}getItemViewPoints(){return this._rowPts.slice(0)}itemViews(){return this._rowViews.slice(0)}getItemView(t){return this._rowViews[t]}itemViewAt(t,e){var i=this._vertical?e:t,s=this._rowPts;for(let t=0,e=s.length-1;t<e;t++)if(i>=s[t]&&i<s[t+1])return this._rowViews[t]}getRowView(t){return this._singleMode?t===this._singleView.row()?this._singleView.rowView():null:super.getRowView(t)}getPreLength(){return this._rowPts[this._rowPts.length-1]+(this._attachedView.visible?this._attachedView[this.SIZE]:0)}getPrePos(t,e){return this._rowPts[t]+e}getExpander(t){return this._expander}_rowViewOfDom(t){if(this._singleMode)return this._singleView.rowView().isDom(t)?this._singleView.rowView():null;for(const e of this._rowViews)if(e.isDom(t))return e}validateViews(){const t=this._listView.owner(),e=this.height,i=this._rowViews,s=this._rowViewMap;var r=this._rowPts,n=r.length;if(r.length!==i.length+1)throw`Invalid length: ${r.length}, `+i.length;if(0!==i.length){if(i[0].row()!==t.getRowAt(this.scrollPos()))throw`Invalid top index: ${this.scrollPos()}, `+i[0].row();i.forEach(t=>{if(!s[t._rowid])throw`Invalid map: ${t.row()} is not in view map.`});for(let e in s)if(!i.find(t=>t._rowid===+e))throw`Invalid map: ${e} is not in view array.`;if(-r[0]!==this.scrollOff())throw`Invalid start: ${r[0]}, `+this.scrollOff();for(let t=1;t<n;t++)if(r[t]<0||r[t]<=r[t-1])throw`Invalid pos: ${t}, `+r[t];for(let t=1;t<n-1;t++)if(r[t]>e)throw`Invalid end pos: ${t}, `+r[t];if(r[n-1]<e&&0!==r[0])throw"Invalid first pos: "+r[0];r[0];for(let t=0;t<n-1;t++){const e=r[t+1]-r[t];if(e!==i[t].height)throw`Invalid height: ${t}, ${e}, `+i[t].height}}}$_createSingleView(t,e){return new Qh(t,this,this._owner.current().singleRow(),e)}_doPrepareRender(t,e){super._doPrepareRender(t,e),this._indentLayer.setVisible(!1),this._singleMode=e&&e.isSingleRow(),e&&(this._singleMode?(this._singleView||(this.insertBefore(this._singleView=this.$_createSingleView(t,!1),this._feedback),this._singleView._doPrepareRender(t,e)),this._singleView.setVisible(!0)):this._singleView&&(this._singleView.setVisible(!1),this._spareSingleView&&this._spareSingleView.setVisible(!1)))}$_clearRowViews(){this._itemLayer.clear(),this._returnRowViews(this._rowViews,0),this._rowViews=[],this._rowViewMap={}}_measureSingle(t,e,i){var s=this._listView,r=s.reqScrollPos,s=s.reqScrollOff;this.$_clearRowViews(),this._setScrollPos(r,s,r);i=this._singleView._doMeasureVert(t,e,i);return this._singleView.mh=i.height,i}_doMeasureVert(t,e,i){if(this._singleMode)return this._measureSingle(t,e,i);const s=this._listView,r=s.owner();var n,o=r.getRowCount();const a=this._rowViews=[];let h=s.reqScrollPos,l=s.reqScrollOff,d=h,_=i+l,c=0;for(;0<_&&d<o;){var u=r.getRowAt(d);const p=this._getRowView(t,u,null,null);u=p.measure(t,s,e,i);a.push(p),_-=u.height,c=Math.max(c,u.width),d++}if(d===o&&0<_&&(n=this._measureAttached(t,r,!0,e,_))&&(_-=n.mh),0<_)for(0<l&&(_>l?(_-=l,l=0):(l-=_,_=0));0<h&&0<_;){const f=this._getRowView(t,r.getRowAt(h-1),null,null);var g=f.measure(t,s,e,i);a.unshift(f),_>=g.height?_-=g.height:(l=g.height-_,_=0),c=Math.max(c,g.width),h--}return 0<a.length?(this._setScrollPos(h,l,a[0].row()),r.isPaging()||at(a[0].row()===this.scrollPos(),"row === scrollPos")):this._setScrollPos(0,0,-1),{width:c,height:i-_}}_doMeasureHorz(t,e,i){if(this._singleMode)return this._measureSingle(t,e,i);const s=this._listView,r=s.owner();let n=s.reqScrollPos,o=s.reqScrollOff;var a=r.getRowCount();const h=this._rowViews=[];let l=n,d=e+o,_=0;for(;0<d&&l<a;){var c=r.getRowAt(l);const g=this._getRowView(t,c,null,null);c=g.measure(t,s,e,i);h.push(g),d-=c.width,_=Math.max(_,c.height),l++}if(r.isDataAppending(),0<d)for(0<o&&(d>o?(d-=o,o=0):(o-=d,d=0));0<n&&0<d;){const p=this._getRowView(t,r.getRowAt(n-1),null,null);var u=p.measure(t,s,e,i);h.unshift(p),d>=u.width?d-=u.width:(o=u.width-d,d=0),_=Math.max(_,u.height),n--}return 0<h.length?(this._setScrollPos(n,o,h[0].row()),!r.isPaging()&&0<h.length&&at(h[0].row()===this.scrollPos(),"row === scrollPos")):this._setScrollPos(0,0,-1),{width:e-d,height:_}}_doRenderVert(t,e,i){var s;this._singleMode?(s=Math.max(i,this._singleView.mh),this._singleView.resize(e,s),this._singleView.move(0,-this._scrollOff),this._singleView._doRenderVert(t,e,s)):(this._renderVert(t,this.scrollOff(),e,i),this._resetRowViews(this._rowViews))}_doRenderHorz(t,e,i){var s;this._singleMode?(s=Math.max(e,this._singleView.mw),this._singleView.resize(s,i),this._singleView.move(-this._scrollOff,0),this._singleView._doRenderHorz(t,s,i)):(this._renderHorz(t,this.scrollOff(),e,i),this._resetRowViews(this._rowViews))}_doAfterRender(){this._singleMode?this._singleView._doAfterRender():super._doAfterRender()}_doRenderSelection(t,e,i,s,r,n){var o=i.min;let a=i.max;var h=this.topRow(),l=this.rowViewCount();if(s.visible=o<h+l&&a>=h){o=Math.max(h,o)-h,a=Math.min(h+l,a)-h;o=this._rowPts[o];const n=this._rowPts[a+1]-o;s.measure(t,i,r,n),s.move(0,o).resize(r,n),s.render(t)}}_doScrollNear(t,e,i,s,r,n){const o=this._listView.owner();var a=this._vertical;const h=this._rowViews;let l=e,d=i,_;for(0<d&&(s>d?(s-=d,d=0):(d-=s,s=0));0<s&&0<l;){var c=0<h.length?h[0]:null;_=this._addRowView(t,o.getRowAt(--l),null,c,a,r,n),h.unshift(_),(s-=a?_.height:_.width)<=0&&(d=-s)}for(a?this._renderVert(t,d,r,n,!1,!1):this._renderHorz(t,d,r,n,!1,!1);1<h.length;){const _=h[h.length-1];if(!(_.y>=n))break;this._returnRowView(_),h.pop(),this._rowPts.pop()}return 0<h.length?{pos:l,off:d,row:h[0].row()}:{pos:0,off:0,row:-1}}$_scrollSingle(t){var e=this._singleView.height-this.height,i=this._scrollOff;return t>>=0,i=Math.min(e,Math.max(0,i+t)),this._singleView.moveY(-i),(this._scrollOff=i)<=0&&t<0?(this.$_scrollEnded(!1),"near"):e<=i&&0<t?(this.$_scrollEnded(!0),"far"):0!==t}scrollBy(t){return this._singleMode?this.$_scrollSingle(t):super.scrollBy(t)}_doScrollFar(o,t,e,i,a,h){function l(t){m[0]=t,g.forEach((t,e)=>m[e+1]=m[e]+t[_.SIZE]),m[m.length-1],w}function s(){var t=g[0];_._returnRowView(t),g.splice(0,1),m.pop(),l(0)}function d(){return p&&!f.visible&&(f.setVisible(!0),w=f.measure(o,n,a,h)[_.SIZE],C=!0)}const _=this,r=this._listView,n=r.owner(),c=n.getEndRow(),u=this._vertical,g=this._rowViews,p=this._arVis,f=this._attachedView;let w=f.visible?u?f.height:f.width:0;const m=this._rowPts,v=u?h:a;m[m.length-1],w;let y=t,b=e;const S=m[1]-m[0];let C=!1;for(at(b===-m[0],"-off가 pts[0]과 동일해야 한다."),0<b&&(i>=S-b?(i-=S-b,b=0,y++,s()):(b+=i,i=0,l(-b)));0<i;){var x=y-t;const S=m[1+x]-m[x];(i-=S)<0?(b=S+i,l(-b)):0<g.length&&g[g.length-1].row()<c?(y++,s()):(l(-b),i=0)}return function(){let e=m[m.length-1]+w;for(;e<v;){let t=v-e;var i=0<g.length?g[g.length-1].row():c;if(i===c){if(d()&&(e+=w,t-=w,t<=0))break;if(b>=t){b-=t,l(-b);break}for(t-=b,b=0;0<t&&0<y;){y--;var s=_._addRowView(o,y,null,null,u,a,h),r=s[_.SIZE];g.unshift(s),e+=r,r>t?(b=r-t,t=0):(t-=r,b=0)}l(-b)}else if(i<c){var n=_._addRowView(o,i+1,null,null,u,a,h),i=n[_.SIZE];g.push(n),m.push(m[m.length-1]+i),e+=i}else{if(!d())break;e+=w}}}(),at(b===-m[0],"off가 pts[0]과 동일해야 한다 2."),u?this._renderVert(o,b,a,h,!1,C):this._renderHorz(o,b,a,h,!1,C),{pos:y,off:b,row:0<g.length?g[0].row():-1}}_createRowsDeleingAnimation(t){return new Uh(this,t)}isRowVisible(t,e){return t>=this._scrollPos&&t<this._scrollPos+this._rowViews.length}makeRowVisible(t){if(!this._singleMode){let i=this._scrollPos,s=this._scrollOff;if(t===i)return 0<s?{pos:t,off:0}:void 0;if(t<i)return{pos:t,off:0};if(t!==i+this._rowViews.length-1)return t>=i+this._rowViews.length?this._vertical?this.$_pullUpVert(t):this.$_pullUpHorz(t):void 0;{var r=this.height,n=this._rowPts,o=t-i+1;let e=n[o]-r;if(0<e){let t=0;for(;t<o&&0<e;){var a=n[t+1]-n[t];if(a>e){s+=e;break}a>=e&&(i++,s=0,e-=a),t++}}return{pos:i,off:i===t?0:s}}}}$_pullUpVert(t){let e=this.height;var i=this.doc;const s=this._listView,r=s.owner(),n=r.data();var o=this.width,a=this.height;const h=new ro(i);let l=t;for(this._itemLayer.addChild(h);0<=l;){h.setRow(n,l,n.getRowId(l),null),this._prepareRowView(h,l,r);var d=h.measure(i,s,a,o);if(e-=d.height,e<=0){l=Math.min(t,l+1);break}l--}return this._itemLayer.removeChild(h),{pos:l,off:0}}$_pullUpHorz(t){let e=this.width;var i=this.doc;const s=this._listView,r=s.owner(),n=r.data();var o=this.width,a=this.height;const h=new ro(i);let l=t;for(this._itemLayer.addChild(h);0<=l;){h.setRow(n,l,n.getRowId(l),null),this._prepareRowView(h,l,r);var d=h.measure(i,s,a,o);if(e-=d.width,e<=0){l=Math.min(t,l+1);break}l--}return this._itemLayer.removeChild(h),{pos:l,off:0}}scrollToEnd(t){const e=this._listView,i=e.owner();var s=this.doc,r=this._vertical;const n=this._rowViews=[];var o=this.width,a=this.height;let h=r?a:o,l=0;var d=t<0&&this._measureAttached(s,i,r,o,a);for(d&&(h-=r?d.mh:d.mw),t=t<0?i.getEndRow():t;0<=t;){const c=this._getRowView(s,t,null,null);var _=c.measure(s,e,o,a);if(n.unshift(c),h-=_[this.SIZE],h<=0){l=-h;break}t--}this._setScrollPos(t,l,t),r?this._renderVert(s,l,o,a,!0,!!d):this._renderHorz(s,l,o,a,!0,!!d),this._resetRowViews(this._rowViews)}checkItemViewOrders(){var e=Array.from(this._itemLayer.dom.children);if(1<e.length)for(let t=1;t<e.length;t++);}$_checkPositions(){if(this._positionsDirty){const t=this._rowViews;t[0].row(),this._positionsDirty=!1}}_renderVert(t,e,i,s,r=!0,n=!0){var o=this._arVis;const a=this._attachedView,h=this._rowViews;var l=this._commandRow,d=h.length;const _=this._rowPts=[-e];let c=_[0],u=0;for(this.$_checkPositions();u<d&&c<s;){const p=h[u++];var g=p.mh;p.isRow(l)?p.moveY(c):p.move(0,c),r&&p.resize(p.mw,g).render(t),c+=g,_.push(c)}this._returnRowViews(h,u),h.length=u,a.visible?c>=s?a.setVisible(!1):(a.move(0,c),n&&a.resize(i,a.mh).render(t),c+=a.mh):o&&(c<s||c++),this._rowEnded=0===h.length||h[h.length-1].row()===this.owner().getRowCount()-1,this._scrollEnded=this._rowEnded&&c<=s}_renderHorz(t,e,i,s,r=!0,n=!0){var o=this._arVis;const a=this._attachedView,h=this._rowViews;var l=this._commandRow,d=h.length;const _=this._rowPts=[-e];let c=_[0],u=0;for(this.$_checkPositions();u<d&&c<i;){const p=h[u++];var g=p.mw;p.isRow(l)?p.moveX(c):p.move(c,0),r&&p.resize(g,s).render(t),c+=g,_.push(c)}this._returnRowViews(h,u),h.length=u,a.visible?c>=i?a.setVisible(!1):(a.move(c,0),n&&a.resize(a.mw,s).render(t),c+=a.mw):o&&(c<i||c++),this._rowEnded=0===h.length||h[h.length-1].row()===this.owner().getRowCount()-1,this._scrollEnded=this._rowEnded&&c<=i}}class jh extends qh{constructor(){super(...arguments),this._page=-1}get page(){return this._page}setPage(t,e,i){!i&&t===this._page||(i=this.doc,0<=(this._page=t)&&(this.measure(i,e.owner(),e.width,e.height),this.move(e.x,e.y).resize(e.width,e.height),this.render(i)))}scrollPos(){return 0}scrollOff(){return 0}_doMeasureVert(t,e,i){const s=this._listView,r=s.owner();var n=this._page,o=r.getPageRows(n),a=o.length;const h=this._rowViews=[];let l=0,d=i,_=0;for(;0<d&&l<a;){var c=o[l];const u=this._getRowView(t,c,null,null);c=u.measure(t,s,e,i);h.push(u),d-=c.height,_=Math.max(_,c.width),l++}return{width:_,height:i-d}}}class Yh extends ro{isFixedHeight(){return!0}}class Qh extends Hs{constructor(t,e,i,s){super(t,!1,Qh.CLASS_NAME),this._requestRow=-1,this._row=-1,this._dimmed=0,this._model=i,this._bodyView=e,this._spare=s,this.addChild(this._rowView=new Yh(t)),this._prevView=new ro(t),this._nextView=new ro(t),this.appendDom(this._mask=t.createElement("div")),Object.assign(this._mask.style,{width:"100%",height:"100%",background:"#333",opacity:"0",pointerEvents:"none"})}_doDestory(){super._doDestory()}isSpare(){return this._spare}row(){return this._row}setRow(t,e){var i;t!==this._row&&0<=t&&(i=this.doc,e=e||this,this._requestRow=t,this.measure(i,e._bodyView.owner(),e.width,e.height),this.move(e.x,e.y).resize(e.width,e.height),this.render(i))}rowView(){return this._rowView}getRow(t){const e=this._rowView;if(e&&e.containsDom(t))return{dv:e._dv,row:e.row()}}isRowEnded(){return!this._rowView||this._rowView.row()===this._bodyView.owner().getRowCount()-1}scrollBy(t){return 0<t?"near":t<0?"far":void 0}setDimmed(t){this._model.maskEffect()&&t!==this._dimmed&&(this._dimmed=t,this.dom.style.opacity=0<t?Math.max(.3,1-t)+"":"",this._mask.style.opacity=0<t?t+"":"0")}_doPrepareRender(t,e){var i=this._row=0<=this._requestRow?this._requestRow:this._bodyView.listView().reqScrollPos;const s=e.data(),r=e.getRowLayout(i),n=this._rowView;n.setRow(s,i,s.getRowId(i),null),r.layout instanceof ss&&r.layout.setNoShrink(e.current().singleRow().noShrink()),n.setLayout(r),this._requestRow=-1}_doMeasure(t,e,i){return this._bodyView.owner().isVertical()?this._doMeasureVert(t,e,i):this._doMeasureHorz(t,e,i)}_doRender(t,e,i){return this._bodyView.owner().isVertical()?this._doRenderVert(t,e,i):this._doRenderHorz(t,e,i)}_doAfterRender(){}_doMeasureVert(t,e,i){return this._rowView.measure(t,this._bodyView.listView(),e,i)}_doMeasureHorz(t,e,i){return this._doMeasureVert(t,e,i)}_doRenderVert(t,e,i){this._rowView.resize(e,i),this._rowView.render(t)}_doRenderHorz(t,e,i){this._doRenderVert(t,e,i)}}Qh.CLASS_NAME="dlist-single-body";class Zh extends Uh{_doPrepare(){const t=this._bodyView;this._preparePre(),this._pLayer=t.itemLayerOff(),this._oldLayer=t._prevPos}_doRun(t){super._doRun(t);const e=this._bodyView;e._moveItemLayer(-(this._oldLayer+(this._pLayer-this._oldLayer)*t))}}class Xh extends qh{constructor(){super(...arguments),this._prevPos=0}_doMeasureVert(t,e,i){if(this._singleMode)return this._measureSingle(t,e,i);const s=this._listView,r=s.owner();var n=r.getRowCount();const o=this._rowViews=[],a=this._rowPts=[0];var h,l=s.reqScrollPos,d=s.reqScrollOff;let _=0,c=0,u=0;for(;_<n;){var g=r.getRowAt(_);const p=this._getRowView(t,g,null,null);g=p.measure(t,s,e,i);o.push(p),c+=g.height,a.push(c),u=Math.max(u,g.width),_++}return(h=this._measureAttached(t,r,!0,e,c))&&(c+=h.mh),0<o.length?this._preMode&&(d=this.$_scrollTo(this.$_scrollOff(l,d),i),this._setScrollPos(d.pos,d.off,o[d.pos].row())):(this.$_scrollTo(0,i),this._setScrollPos(0,0,-1)),{width:u,height:c}}_doMeasureHorz(t,e,i){if(this._singleMode)return this._measureSingle(t,e,i);const s=this._listView,r=s.owner();var n=r.getRowCount();const o=this._rowViews=[],a=this._rowPts=[0];var h,l=s.reqScrollPos,d=s.reqScrollOff;let _=0,c=0,u=0;for(;_<n;){var g=r.getRowAt(_);const p=this._getRowView(t,g,null,null);g=p.measure(t,s,e,i);o.push(p),c+=g.width,a.push(c),u=Math.max(u,g.height),_++}return(h=this._measureAttached(t,r,!1,e,i))&&(c+=h.mw),0<o.length?this._preMode&&(d=this.$_scrollTo(this.$_scrollOff(l,d),e),this._setScrollPos(d.pos,d.off,o[d.pos].row())):(this.$_scrollTo(0,e),this._setScrollPos(0,0,-1)),{width:c,height:u}}_doScrollNear(t,e,i,s,r,n){s=this.$_scrollBy(-s);return{pos:s.pos,off:s.off,row:s.row}}_doScrollFar(t,e,i,s,r,n){s=this.$_scrollBy(s);return{pos:s.pos,off:s.off,row:s.row}}scrollToEnd(t){if(t<0){const n=this._listView;var e=n.owner(),i=this.doc,s=this._vertical,r=this.width,t=this.height;const o=this._measureAttached(i,e,s,r,t);o.resize(s?r:o.mw,s?o.mh:t),o.render(i)}this.$_scrollTo(Number.MAX_SAFE_INTEGER,this[this.SIZE])}_renderVert(t,e,i,s,r=!0,n=!0){const o=this._attachedView;var a=this._rowViews,h=this._commandRow,l=a.length;let d=0,_=0;for(;_<l;){const c=a[_++];c.isRow(h)?c.moveY(d):c.move(0,d),r&&c.resizeByMeasure().render(t),d+=c.mh}o.visible&&(o.move(0,d),n&&o.resize(i,o.mh).render(t),d+=o.mh),this.$_checkEnded()}_renderHorz(t,e,i,s,r=!0,n=!0){const o=this._attachedView;var a=this._rowViews,h=this._commandRow,l=a.length;let d=0,_=0;for(i=Number.MAX_SAFE_INTEGER;_<l&&d<i;){const c=a[_++];c.isRow(h)?c.moveX(d):c.move(d,0),r&&c.resizeByMeasure().render(t),d+=c.mw}o.visible&&(o.move(d,0),n&&o.resize(o.mw,s).render(t),d+=o.mw),this.$_checkEnded()}_createRowsDeleingAnimation(t){return new Zh(this,t)}_moveItemLayer(t){this._prevPos=this.itemLayerOff(),super._moveItemLayer(t)}$_scrollOff(e,t){var i=this._rowViews,s=this.MEASURE_SIZE;let r=0;for(let t=0;t<e;t++)r+=i[t][s];return r+=t,r}$_scrollBy(t){return this.$_scrollTo(-this._itemLayer[this.POS]+t,this[this.SIZE])}$_scrollTo(n,o){const a=this._rowViews;var h=this.MEASURE_SIZE,l=a.length;if(0<l){var d=this._arVis?this._attachedView[this.MEASURE_SIZE]:0,_=this._rowPts,d=_[l]+d;o=he(o,this[this.SIZE]);let t=l-1,e=0,i=n=Math.max(0,Math.min(n,d-o)),s=0,r=0;for(;r<l;){var c=a[r][h];if(c>i){t=r,e=i,s+=e;break}i-=c,s+=c,r++}if(i=d-_[t]-e,i<o)if(i=o-i,e>=i)e-=i,s-=i;else for(;0<t&&0<i;){var u=a[--t][h];i>u?(i-=u,s-=u,e=0):(e=i,s-=i,i=0)}return this._moveItemLayer(-s),this.$_checkEnded(),{pos:t,off:e,row:a[t].row()}}return this._moveItemLayer(0),this.$_checkEnded(),{pos:0,off:0,row:-1}}$_checkEnded(){var t,e,i,s=this._rowPts,r=s.length-1;0<r?(t=this[this.SIZE],i=this._arVis?this._attachedView[this.MEASURE_SIZE]:0,e=s[r]+i,i=-this._itemLayer[this.POS],this._rowEnded=s[r-1]-i<=t,this._scrollEnded=e-i<=t):this._rowEnded=this._scrollEnded=!0}}class Kh extends kh{clickItem(t){this._bodyView.$_clickItem(t)}makeItemVisible(t){return this._bodyView.makeItemVisible(t.index)}_createBodyView(t,e,i){return new(e?ol:el)(t)}_doPrepareRender(t,e){super._doPrepareRender(t,e),this._bodyView._expander=this._owner.dataExpander()}rowBorderVisible(t){if(super.rowBorderVisible(t))return!t._groupLast||!this._owner.rowBorder.skipGroupLast}}class Jh extends Fh{_getItemViews(){return this._bodyView._internalItemViews()}}class tl extends ro{}class el extends Bh{constructor(){super(...arguments),this._headerPool=[],this._headerPoolMap={},this._headerMap={},this._footerPool=[],this._footerPoolMap={},this._footerMap={},this._itemViews=[],this._itemPts=[0],this._rowCount=0}_internalItemViews(){return this._itemViews}_internalItemPoints(){return this._itemPts}getGroupItem(t){const e=this._headerMap;for(const s in e)if(e[s].isView(t))return e[s].model();const i=this._footerMap;for(const r in i)if(i[r].isView(t))return i[r].model()}$_clickItem(t){t instanceof Me&&this.$_clickHeader(t)}$_clickHeader(t){if(t){switch(this.owner().current().rowGroup().header().clickAction()){case V.EXPAND:this.owner().groupModel().toggle(t.group,!1);break;case V.COMMAND:}return!0}}bottomRow(){return this._topRow+this._rowCount-1}itemViewCount(){return this._itemPts.length-1}_itemPoints(){return this._itemPts}rowViewCount(){return this._rowCount}getItemViewPoints(){return this._itemPts.slice(0)}itemViews(){return this._itemViews.slice(0)}getItemView(t){return this._itemViews[t]}itemViewAt(t,i){var s=this._itemPts;for(let t=0,e=s.length-1;t<e;t++)if(i>=s[t]&&i<s[t+1])return this._itemViews[t]}lastItemView(){return this._itemViews[this._itemViews.length-1]}getPreLength(){return this._itemPts[this._itemPts.length-1]}getPrePos(t,e){return this._itemPts[t]+e}getExpander(t){return this._expander}_rowViewOfDom(t){for(const e of this._itemViews)if(e instanceof ro&&e.isDom(t))return e}validateViews(){this.height;var t=this._itemViews;this._rowViewMap,this._headerMap,this._footerMap;var e=this._itemPts;if(e.length,e.length!==t.length+1)throw`Invalid length: ${e.length}, `+t.length}$_itemCount(t){return this._pageItems?this._pageItems.length:t.visItemCount()}$_getItem(t,e){return this._pageItems?this._pageItems[e]:t.getVisItem(e)}_createItemView(t){return new tl(t)}_getGroupOptions(t){return t.current().rowGroup()}_getRowIndent(t){return this._theme.getItemIndent(t._model)}_getBodyIndent(t){return this._theme.getBodyIndent(t._model)}_getBodyMargin(t){return this._theme.getBodyMargin(t._model)}_doPrepareRender(t,e){super._doPrepareRender(t,e),this._options=this._getGroupOptions(e),this._theme=this._options.getTheme().prepareRender(),this._indented=this._theme.bodyIndented(),this._indentLayer.setVisible(this._indented),this._indentLayer.setData("theme",this._theme.type()),this._pageItems=e.isPaging()?e.pageModel().getGroupItems():null}_doMeasure(t,e,i){this._itemViews=[];const s=this._listView;var r=s.renderInfo();const n=s.owner();var o=n.groupModel(),o=this.$_itemCount(o);return s.reqScrollPos=r?Math.max(0,Math.min(o-1,r.scrollPos)):0,s.reqScrollOff=r?r.scrollOff:0,super._doMeasure(t,e,i)}_doMeasureVert(e,i,s){const r=this._listView,t=r.owner();t.current().rowGroup();var n,o=t.groupModel(),a=this.$_itemCount(o);const h=this._itemViews;let l=r.reqScrollPos,d=r.reqScrollOff,_=l,c=s+d,u=0;for(;0<c&&_<a;){var g=this.$_getItem(o,_);let t=this.$_getItemView(e,g,null);g=t.measure(e,r,i-t.bodyIndent-t.bodyMargin,s);h.push(t),c-=g.height,u=Math.max(u,g.width),_++}if(_===a&&0<c&&(n=this._measureAttached(e,t,!0,i,c))&&(c-=n.mh),0<c)for(0<d&&(c>d?(c-=d,d=0):(d-=c,c=0));0<l&&0<c;){var p=this.$_getItem(o,l-1);const f=this.$_getItemView(e,p,null);p=f.measure(e,r,i-f.bodyIndent-f.bodyMargin,s);h.unshift(f),c>=p.height?c-=p.height:(d=p.height-c,c=0),u=Math.max(u,p.width),l--}return 0<h.length?this._setScrollPos(l,d,this.$_getTopRow()):this._setScrollPos(0,0,-1),{width:u,height:s-c}}_doMeasureHorz(t,e,i){const s=this._listView,r=s.owner();r.groupModel(),this._itemViews;return{width:e,height:+i}}_doRender(t,e,i){this._indentLayer.visible&&this._indentLayer.setBounds(0,0,e,i),super._doRender(t,e,i)}_doRenderVert(t,e,i){this._renderVert(t,this.scrollOff(),e,i),this._resetRowViews(this._itemViews),this.$_resetGroupViews(this._itemViews)}_doRenderHorz(t,e,i){}_doRenderSelection(t,e,i,s,r,n){var o=i.min;let a=i.max;var h=this.scrollPos(),l=this.itemViewCount();if(s.visible=o<h+l&&a>=h){o=Math.max(h,o)-h,a=Math.min(h+l,a)-h;o=this._itemPts[o];const n=this._itemPts[a+1]-o;s.measure(t,i,r,n),s.move(0,o).resize(r,n),s.render(t)}}_doScrollNear(t,e,i,s,r,n){const o=this._listView,a=o.owner();var h=a.isVertical(),l=a.groupModel();const d=this._itemViews;let _=e,c=i;for(0<c&&(s>c?(s-=c,c=0):(c-=s,s=0));0<s&&0<_;){var u=0<d.length?d[0]:null,g=this.$_getItem(l,--_),u=this.$_addItemView(t,h,g,u,r,n);d.unshift(u),(s-=u.height)<=0&&(c=-s)}return this._renderVert(t,c,r,n,!1,!1),0<d.length?{pos:_,off:c,row:this.$_getTopRow()}:{pos:0,off:0,row:-1}}_doScrollFar(o,t,e,i,a,h){function l(t){y[0]=t,f.forEach((t,e)=>y[e+1]=y[e]+t.height),y[y.length-1],v}function s(){var t=f[0];_.$_returnItemView(t),f.splice(0,1),y.pop(),l(0)}function d(){return w&&!m.visible&&(m.setVisible(!0),v=m.measure(o,n,a,h).height,R=!0)}const _=this,r=this._listView,n=r.owner(),c=n.groupModel();const u=n.isPaging()?_._pageItems[0].vindex:0,g=this.$_itemCount(c),p=n.isVertical(),f=this._itemViews,w=this._arVis,m=this._attachedView;let v=m.visible?m.height:0;const y=this._itemPts,b=p?h:a;y[y.length-1],v;let S=t,C=e;const x=y[1]-y[0];let R=!1;for(at(C===-y[0],"-off가 pts[0]과 동일해야 한다."),0<C&&(i>=x-C?(i-=x-C,C=0,S++,s()):(C+=i,i=0,l(-C)));0<i;){var E=S-t;const x=y[1+E]-y[E];(i-=x)<0?(C=x+i,l(-C)):0<f.length&&f[f.length-1].model().vindex-u<g?(S++,s()):(l(-C),i=0)}return function(){let e=y[y.length-1]+v;for(;e<b;){var i=f[f.length-1].model().vindex+1-u;let t=b-e;if(i===g){if(d()&&(e+=v,t-=v,t<=0))break;if(C>=t){C-=t,l(-C);break}for(t-=C,C=0;0<t&&0<S;){S--;var s=_.$_addItemView(o,p,_.$_getItem(c,S),null,a,h),r=p?s.height:s.width;f.unshift(s),e+=r,r>t?(C=r-t,t=0):(t-=r,C=0)}l(-C)}else if(i<g){var n=_.$_addItemView(o,p,_.$_getItem(c,i),null,a,h),i=p?n.height:n.width;f.push(n),y.push(y[y.length-1]+i),e+=i}else{if(!d())break;e+=v}}}(),at(C===-y[0],"off가 pts[0]과 동일해야 한다 2."),this._renderVert(o,C,a,h,!1,R),{pos:S,off:C,row:0<f.length?this.$_getTopRow():-1}}_createRowsDeleingAnimation(t){return new Jh(this,t)}scrollToEnd(t){this._itemViews.forEach(t=>this.$_returnItemView(t));const e=this._itemViews=[],i=this._listView,s=i.owner();var r=s.isVertical();const n=s.groupModel();var o=this.doc,a=this.width,h=this.height;let l=h,d=0;var _=t<0&&this._measureAttached(o,s,r,a,h);_&&(l-=_.mh),t=t<0?s.getEndRow():t;let c=n.visIndexOfRow(t);for(;0<=c;){var u=this.$_getItem(n,c);let t=this.$_getItemView(o,u,null);u=t.measure(o,i,a,h);if(e.unshift(t),l-=u.height,l<=0){d=-l;break}c--}this._setScrollPos(t,d,this.$_getTopRow()),r?this._renderVert(o,d,a,h,!0):this._renderHorz(o,d,a,h,!0)}_getRowView(t,e,i,s){const r=super._getRowView(t,e,i,s);return r.setData("theme",this._theme.type()),r.setData("no",i.no),r}canMoveTo(t,e){const i=this.getRowView(t);if(i)return console.log(i.group().hash,e.group().hash),e instanceof ro&&i.group()===e.group()}$_getItemView(t,e,i){var s;let r;e instanceof Je||e instanceof Te?(r=this._getRowView(t,e.row(),e,i),r._gindex=e.vindex):e instanceof Me?(r=this._headerMap[e.index],r?delete this._headerMap[e.index]:(0<=(s=this._headerPoolMap[e.index])?(r=this._headerPool[s],this._headerPool.splice(s,1),delete this._headerPoolMap[e.index]):r=this._headerPool.pop(),r=r||new sl(t),r.indent=this.$_getItemIndent(e),i?this._itemLayer.insertBefore(r,i):this._itemLayer.addChild(r),r.setModel(e)),r.setTheme(this._theme.type()),r.setItemData("exp",e.group.expanded()?"1":"0")):e instanceof Ie&&(r=this._footerMap[e.index],r?delete this._footerMap[e.index]:(0<=(s=this._footerPoolMap[e.index])?(r=this._footerPool[s],this._footerPool.splice(s,1),delete this._footerPoolMap[e.index]):r=this._footerPool.pop(),r=r||new rl(t),r.indent=this.$_getItemIndent(e),i?this._itemLayer.insertBefore(r,i):this._itemLayer.addChild(r),r.setModel(e)),r.bodyIndent=this._getBodyIndent(r),r.bodyMargin=this._getBodyMargin(r),r.setTheme(this._theme.type()));const n=this._listView.owner();return r instanceof il?r.setLayout(n.getGroupItemLayout(r.model())):e instanceof Te&&(t=e.row(),r.alternate=e.vindex%2==1,r.detailed=n.isRowDetailed(t),r.checked=n.isRowChecked(t),r.selected=null===(i=n.getSelection())||void 0===i?void 0:i.isRowSelected(t)),r.dom._idx_=e.vindex,r.hasData("state")||r.setData("state","g"),r}$_getItemIndent(t){return t.group.level()*this._options.groupIndent()}$_addItemView(t,e,i,s,r,n){if(i instanceof Te){const o=this._addRowView(t,i.row(),i,s,e,r,n);return o.hasData("state")||o.setData("state","g"),o.dom._idx_=i.vindex,o}{const a=this.$_getItemView(t,i,s);n=a.measure(t,this._listView,r-a.bodyIndent-a.bodyMargin,n);return a.resize(r-a.bodyIndent-a.bodyMargin,n.height),a.render(t),a instanceof sl?this._headerMap[i.index]=a:this._footerMap[i.index]=a,a}}$_resetGroupViews(t){for(const s in this._headerMap){var e=this._headerMap[s];this.$_returnItemView(e)}this._headerMap={};for(const r of t)r instanceof sl&&(this._headerMap[r.model().index]=r);for(const n in this._footerMap){var i=this._footerMap[n];this.$_returnItemView(i)}this._footerMap={};for(const o of t)o instanceof rl&&(this._footerMap[o.model().index]=o)}$_returnItemView(t){var e;t instanceof ro?this._returnRowView(t):(this._itemLayer.removeChild(t),t instanceof sl?(e=t.model().index,delete this._headerMap[e],this._headerPool.push(t),this._headerPoolMap[e]=this._headerPool.length-1):t instanceof rl?(e=t.model().index,delete this._footerMap[e],this._footerPool.push(t),this._footerPoolMap[e]=this._footerPool.length-1):dt(Z.unknownItemViewType,t))}_renderVert(t,e,i,s,r=!0,n=!0){var o=this._arVis;const a=this._attachedView,h=this._itemViews;var l=h.length;const d=this._itemPts=[-e];let _=d[0],c=0,u;for(this._rowCount=0;c<l&&_<s;){const p=h[c++];var g=p.mh;p.move(0+p.bodyIndent,_),r&&p.resize(p.mw,g).render(t),_+=g,d.push(_),p instanceof ro&&(u=p,this._rowCount++)}for(let t=c;t<l;t++)this.$_returnItemView(h[t]);h.length=c,a.visible?_>s?a.setVisible(!1):(a.move(0,_),n&&a.resize(i,a.mh).render(t),_+=a.mh):o&&(_<s||_++),this._rowEnded=0===h.length||u&&u.row()===this.owner().getEndRow(),this._scrollEnded=this._rowEnded&&_<=s}_renderHorz(t,e,i,s,r=0){}$_getTopRow(){for(const t of this._itemViews)if(t instanceof ro)return t.row();return-1}checkItemViewOrders(){var e=Array.from(this._itemLayer.dom.children);if(1<e.length)for(let t=1;t<e.length;t++);}isRowVisible(t,e){return this.isItemVisible(this.indexOfRow(t),e)}isItemVisible(t,e){if(0<this._itemViews.length)return t>=this._itemViews[0].gindex()&&t<=this._itemViews[this._itemViews.length-1].gindex()}makeRowVisible(t){const e=this._listView,i=e.owner(),s=i.groupModel();t=s.visIndexOfRow(t);return 0<=t?this.makeItemVisible(t):null}makeItemVisible(t){const e=this._listView,i=e.owner();var s=i.isPaging()?this._pageItems[0].vindex:0;const r=i.groupModel();var n=this._scrollPos,o=this._scrollOff;if(!(t<0||t>=r.itemCount()))return(t=r.getItem(t).vindex-s)!==n?t<n?{pos:t,off:0}:t===n+this._itemViews.length-1?{pos:n+1,off:0}:t>=n+this._itemViews.length?this.$_pullUpVert(r,t):void 0:0<o?{pos:t,off:0}:void 0}$_pullUpVert(e,t){var i=this.doc,s=this._listView,r=this.width,n=this.height;const o=this._itemViews=[];let a=.7*n>>0,h=t;for(;0<=h;){var l=this.$_getItem(e,h);let t=this.$_getItemView(i,l,null);l=t.measure(i,s,r,n);if(o.unshift(t),a-=l.height,a<=0)break;h--}var d=h,t=-a;return this._setScrollPos(d,t,this.$_getTopRow()),this._doRenderVert(this.doc,r,n),{pos:d,off:t}}$_pullUpHorz(t,e){this.doc;const i=this._listView,s=i.owner();s.data(),this.width,this.height}}class il extends so{model(){return this._model}group(){return this._model.group}row(){return this._model.row()}dv(){return null}gindex(){return this._model.index}vindex(){return this._model.index}setModel(t){return this._model=t,this}getItemStyle(t){return this._model.getStyle()}}class sl extends il{getItemClass(){return sl.CLASS_NAME}_getExpander(){const t=this._owner.getExpander(this.gindex());if(t){var e=t.position(),i=e===Js.HEAD?ys.NEAR:e===Js.FOOT?ys.FAR:void 0;if(e)return{pos:i,size:18}}}_isExpanded(){return this._model.group.expanded()}}sl.CLASS_NAME="dlist-item dlist-group-header";class rl extends il{getItemClass(){return rl.CLASS_NAME}_toggleExpanded(){}}rl.CLASS_NAME="dlist-group-footer";class nl extends Jh{_doPrepare(){const t=this._bodyView;this._preparePre(),this._pLayer=t.itemLayerOff(),this._oldLayer=t._prevPos}_doRun(t){super._doRun(t);const e=this._bodyView;e._moveItemLayer(-(this._oldLayer+(this._pLayer-this._oldLayer)*t))}}class ol extends el{constructor(){super(...arguments),this._prevPos=0}_doMeasureVert(e,i,s){const r=this._listView,t=r.owner();var n=t.groupModel(),o=this.$_itemCount(n);const a=this._itemViews,h=this._itemPts=[0];var l,d=r.reqScrollPos,_=r.reqScrollOff;let c=0,u=0,g=0;for(;c<o;){var p=this.$_getItem(n,c);let t=this.$_getItemView(e,p,null);p=t.measure(e,r,i-t.bodyIndent-t.bodyMargin,s);a.push(t),u+=p.height,h.push(u),g=Math.max(g,p.width),c++}return(l=this._measureAttached(e,t,!0,i,u))&&(u+=l.mh),0<a.length?this._preMode&&(_=this.$_scrollTo(this.$_scrollOff(d,_),s),this._setScrollPos(_.pos,_.off,a[_.pos].row())):(this.$_scrollTo(0,s),this._setScrollPos(0,0,-1)),{width:g,height:u}}_doMeasureHorz(t,e,i){const s=this._listView,r=s.owner();r.groupModel(),this._itemViews;return{width:0,height:0}}_renderVert(t,e,i,s,r=!0,n=!0){const o=this._attachedView;var a=this._itemViews,h=a.length;let l=0,d=0;for(this._rowCount=0;d<h;){const _=a[d++];_.move(0+_.bodyIndent,l),r&&_.resizeByMeasure().render(t),l+=_.mh,_ instanceof ro&&this._rowCount++}o.visible&&(l>s?o.setVisible(!1):(o.move(0,l),n&&o.resize(i,o.mh).render(t),l+=o.mh)),this.$_checkEnded()}_renderHorz(t,e,i,s,r=0){}_doScrollNear(t,e,i,s,r,n){s=this.$_scrollBy(-s);return{pos:s.pos,off:s.off,row:s.row}}_doScrollFar(t,e,i,s,r,n){s=this.$_scrollBy(s);return{pos:s.pos,off:s.off,row:s.row}}scrollToEnd(t){if(t<0){const n=this._listView;var e=n.owner(),i=this.doc,s=this._vertical,r=this.width,t=this.height;const o=this._measureAttached(i,e,s,r,t);o.resize(s?r:o.mw,s?o.mh:t),o.render(i)}this.$_scrollTo(Number.MAX_SAFE_INTEGER,this[this.SIZE])}_createRowsDeleingAnimation(t){return new nl(this,t)}_moveItemLayer(t){this._prevPos=this.itemLayerOff(),super._moveItemLayer(t)}$_scrollOff(e,t){var i=this._itemViews,s=this.MEASURE_SIZE;let r=0;for(let t=0;t<e;t++)r+=i[t][s];return r+=t,r}$_scrollBy(t){return this.$_scrollTo(-this._itemLayer[this.POS]+t,this[this.SIZE])}$_scrollTo(n,o){const a=this._itemViews;var h=this.MEASURE_SIZE,l=a.length;if(0<l){var d=this._arVis?this._attachedView[this.MEASURE_SIZE]:0,_=this._itemPts,d=_[l]+d;o=he(o,this[this.SIZE]);let t=l-1,e=0,i=n=Math.max(0,Math.min(n,d-o)),s=0,r=0;for(;r<l;){var c=a[r][h];if(c>i){t=r,e=i,s+=e;break}i-=c,s+=c,r++}if(i=d-_[t]-e,i<o)if(i=o-i,e>=i)e-=i,s-=i;else for(;0<t&&0<i;){var u=a[--t][h];i>u?(i-=u,s-=u,e=0):(e=i,s-=i,i=0)}return this._moveItemLayer(-s),this.$_checkEnded(),{pos:t,off:e,row:a[t].row()}}return this._moveItemLayer(0),this.$_checkEnded(),{pos:0,off:0,row:-1}}$_checkEnded(){var t,e,i,s=this._itemPts,r=s.length-1;0<r?(t=this[this.SIZE],i=this._arVis?this._attachedView[this.MEASURE_SIZE]:0,e=s[r]+i,i=-this._itemLayer[this.POS],this._rowEnded=s[r-1]-i<=t,this._scrollEnded=e-i<=t):this._rowEnded=this._scrollEnded=!0}}class al extends ro{}class hl extends el{_getGroupOptions(t){return t.current().dataGroup()}_createItemView(t){return new al(t)}_getRowIndent(t){return this._theme.getItemIndent(t._model)}_getBodyIndent(t){return this._theme.getBodyIndent(t._model)}_getBodyMargin(t){return this._theme.getBodyMargin(t._model)}_getRowView(t,e,i,s){const r=super._getRowView(t,e,i,s);return r.setData("master",i.isLeaf()?"0":"1"),r}}class ll extends ol{_getGroupOptions(t){return t.current().dataGroup()}_createItemView(t){return new al(t)}_getRowIndent(t){return this._theme.getItemIndent(t._model)}_getBodyIndent(t){return this._theme.getBodyIndent(t._model)}_getBodyMargin(t){return this._theme.getBodyMargin(t._model)}_getRowView(t,e,i,s){const r=super._getRowView(t,e,i,s);return r.setData("master",i.isLeaf()?"0":"1"),r}}class dl extends Kh{_createBodyView(t,e,i){return new(e?ll:hl)(t)}rowBorderVisible(t){if(super.rowBorderVisible(t))return!this._owner.rowBorder.leafOnly||!t._master}}class _l extends In{_doPrepare(t,e){e[qt]=this.$_getButton(t,e)}_getStyleTarget(t){return t[qt].style}_doMeasure(i,t,e,s){var r=i.doc;const n=this._model;var o,a=n.label,h=n.imageUrl,t=t[qt];const l=N?t.firstElementChild:t;let d=Re.childByClass(l,_l.IMAGE_CLASS),_=Re.childByClass(l,_l.SHAPE_CLASS),c=n.buttonWidth,u=n.buttonHeight,g;if(this._setContext(i,t,n),n.borderless&&Re.setData(t,"borderless",1),n.borderless||Re.setData(l,"image",1),this._setClass(l,i.row),h){_=Re.remove(_),d||(d=i.doc.createElement("img"),d.className=_l.IMAGE_CLASS,d.style.pointerEvents="none",d.style.verticalAlign="middle",Re.setAttr(d,"aria-hidden",!0),l.appendChild(d));let t=n.imageWidth,e=n.imageHeight;d.src=h,d.complete||i.useImage(h),isNaN(t)&&isNaN(e)&&(o=N&&i.getImageSize(h),e=o?(t=o.width,o.height):(t=d.naturalWidth,d.naturalHeight)),isNaN(t)||(d.width=t),isNaN(e)||(d.height=e),g=d}else if(o=n.shape){d=Re.remove(d);var p=n.getShapeSize();if(_&&_[Wt]===o)_&&Re.resize(_,p.width,p.height);else{const f=i.manager().owner().shapes(),w=f.createStock(i.doc,o,_l.SHAPE_CLASS)||f.createCustom(o,null,null);_=Re.remove(_),w&&(w instanceof Ms&&w.setShape(f.getCustom(o)),w.appendTo(l),_=w._svg.svg,_[Wt]=o,_.style.verticalAlign="middle",w.resize(p.width,p.height))}g=_}if(g)N?this.$_arrangeafari(r,l,g):this.$_arrange(r,l,g);else{let t=Re.childByClass(l,_l.LABEL_CLASS);p=Re.childByClass(l,_l.BR_CLASS);d=Re.remove(d),_=Re.remove(_),Re.remove(p),t||(t=this.$_createSpan(r),l.appendChild(t)),t.textContent=a,Re.setData(l,"image",void 0)}if(isNaN(c)||(l.style.width=c+"px"),isNaN(u)||(l.style.height=u+"px"),Re.setDisabled(l.parentElement,n.disabled),Ve.TESTING)return isNaN(c)&&(c=l.offsetWidth),isNaN(u)&&(u=l.offsetHeight),{width:Math.ceil(c),height:Math.ceil(u)}}$_createSpan(t){const e=t.createElement("span");return e.className=_l.LABEL_CLASS,e.style.pointerEvents="none",e.style.verticalAlign="middle",e}$_arrange(t,e,i){var s=this._model,r=s.label;let n=Re.childByClass(e,_l.LABEL_CLASS),o=Re.childByClass(e,_l.BR_CLASS);if(r&&s.labelPosition!==b.NONE)switch(n=n||this.$_createSpan(t),n.textContent=r,s.labelPosition){case b.LEFT:o=Re.remove(o),i.style.paddingLeft=Us,e.insertBefore(n,i);break;case b.RIGHT:o=Re.remove(o),i.style.paddingRight=Us,e.appendChild(n);break;case b.TOP:e.insertBefore(n,i),e.insertBefore(o||Re.createBR(t,_l.BR_CLASS),i),i.style.paddingTop=Us;break;default:i.style.paddingBottom=Us,e.appendChild(n),e.insertBefore(o||Re.createBR(t,_l.BR_CLASS),n)}else o=Re.remove(o),n=n||this.$_createSpan(t),e.insertBefore(n,i),n.textContent=""}$_arrangeafari(t,e,i){var s=this._model,r=s.label;let n=Re.childByClass(e,_l.LABEL_CLASS);if(r&&s.labelPosition!==b.NONE)switch(n=n||this.$_createSpan(t),n.textContent=r,s.labelPosition){case b.LEFT:e.style.flexDirection="row",i.style.paddingLeft=Us,e.insertBefore(n,i);break;case b.RIGHT:e.style.flexDirection="row",i.style.paddingRight=Us,e.appendChild(n);break;case b.TOP:e.insertBefore(n,i),i.style.paddingTop=Us,e.style.flexDirection="column";break;default:e.style.flexDirection="column",i.style.paddingBottom=Us,e.appendChild(n)}else n=Re.remove(n)}_doRender(t,e,i,s){}_doUnprepare(t,e){e[qt]=null}setValue(t,e){}$_getButton(t,e){let i=e.getElementsByClassName(_l.BUTTON_CLASS)[0];if(!i&&(i=t.createElement("button"),i.type="button",i.className=_l.BUTTON_CLASS,i[Kt]="1",Object.assign(i.style,ks),e.appendChild(i),N)){const s=t.doc.createElement("div");s.style.display="flex",s.style.alignItems="center",s.style.justifyContent="center",s.style.boxSizing="border-box",i.appendChild(s)}return i}}_l.BUTTON_CLASS="dlist-button-button",_l.BR_CLASS="dlist-button-br",_l.LABEL_CLASS="dlist-button-label",_l.IMAGE_CLASS="dlist-button-image",_l.SHAPE_CLASS="dlist-button-shape";class cl extends On{_doPrepare(t,e){e[jt]=this.$_getBox(t,e)}_getStyleTarget(t){}_measureBox(t,e){e.checked=this._model.isTrue(this._value)}_doMeasure(t,e,i,s){const r=this._model,n=e[jt],o=e.getElementsByClassName(cl.LABEL_CLASS)[0];let a=r.getBoxWidth(),h=r.getBoxHeight();if(this._setClass(n,t.row),isNaN(t._explicitWidth)||Re.setWidth(e.firstElementChild.firstElementChild,t._explicitWidth),this._setContext(t,n,r),this._measureBox(t,n),isNaN(a)||(n.style.width=a+"px"),isNaN(h)||(n.style.height=a+"px"),o.style.whiteSpace=r.labelWrap&&isNaN(t._explicitWidth)?"pre-wrap":"pre",o.textContent=r.getLabel(n.checked),Ve.TESTING)return isNaN(a)&&(a=n.offsetWidth),isNaN(h)&&(h=n.offsetHeight),{width:a,height:h}}_doRender(t,e,i,s){}_doUnprepare(t,e){}getValue(t){var e=this._getBoxClass(),e=Re.childByClass(t,e);if(e)return e.checked?this._model.trueValue:this._model.falseValue}setValue(t,e){}_getBoxType(){return"checkbox"}_getBoxClass(){return cl.BOX_CLASS}$_getBox(t,e){const i=this._getBoxClass();let s=e.getElementsByClassName(i)[0];if(!s){const r=t.doc.createElement("div");r.style.position="relative";const n=t.doc.createElement("div");n.style.display="flex",n.style.alignItems="center",s=t.doc.createElement("input"),s.className=i,s.style.marginRight="5px",s.style.flex="none",s.type=this._getBoxType(),s.onclick=function(){console.log("> CLICKED",s.type,s.id,i)};const o=t.doc.createElement("label");o.className=cl.LABEL_CLASS,Object.assign(o.style,{flexGrow:1}),n.appendChild(s),n.appendChild(o),r.appendChild(n),e.appendChild(r)}return s}}cl.BOX_CLASS="dlist-check-box",cl.LABEL_CLASS="dlist-check-label";class ul extends Ts{draw(t){const e=t.model;var i=e.getStyle(),s=Math.ceil((parseFloat(i.strokeWidth)||0)/2),{cx:r,cy:n,rx:o,ry:a}=e.getExtents(t.width,t.height),h=e.startAngle||0,l=(e.endAngle||0)-h;this._svg.clear(),this._svg.arc(r,n,o-s,a-s,h,l,e.clockwise,i),l*=e.getValueRate(t.value),i=e.getValueStyle(),this._svg.arc(r,n,o-s,a-s,h,l,e.clockwise,i),this._svg.setSize(t.width,t.height)}_doInit(t){}}class gl extends Nn{_doPrepare(t,e){}_getStyleTarget(t){}_doMeasure(t,e,i,s){const r=this.model();var n=r.getGaugeWidth(),o=r.getGaugeHeight();return this._setClass(e,t.row),{width:n,height:o}}_doRender(t,e,i,s){const r=this._getShape(t,e);console.log("GAUGE",this._value),r.draw({model:this.model(),value:this._value,width:i,height:s})}_doUnprepare(t,e){}setValue(t,e){}_getShape(t,e){var i=e.getElementsByClassName(gl.SVG_CLASS)[0];let s;return i?s=new ul(i,gl.SVG_CLASS):(s=new ul(t.doc,gl.SVG_CLASS),s.appendTo(e)),s}}gl.SVG_CLASS="dlist-gauge-svg";class pl extends In{_doPrepare(t,e){this._img=this.$_getImage(t,e)}_getStyleTarget(t){}_doMeasure(t,e,i,s){var r=this.model();const n=this._img;var o=t.getIcon(r.iconSet,r.iconName);let a,h;if(this._setClass(n,t.row),n.src=o.url,n.alt=r.hint||o.url,isNaN(o.width)||(n.width=a=o.width),isNaN(o.height)||(n.height=h=o.height),Ve.TESTING)return isNaN(a)&&(a=n.offsetWidth||0),isNaN(h)&&(h=n.offsetHeight||0),{width:a,height:h}}_doRender(t,e,i,s){}_doUnprepare(t,e){this._img=null}setValue(t,e){}$_getImage(t,e){let i=e.getElementsByClassName(pl.IMAGE_CLASS)[0];return i||(i=t.doc.createElement("img"),i.className=pl.IMAGE_CLASS,e.appendChild(i)),i}}pl.IMAGE_CLASS="dlist-icon-image";class fl extends Nn{_doPrepare(t,e){e[Ut]=this.$_getImage(t,e)}_getStyleTarget(t){return t[Ut].style}_doMeasure(t,e,i,s){const r=this.model(),n=e[Ut];var{url:o,isNull:e}=r.getUrl(this._value);let a=e?r.nullWidth:r.imageWidth,h=e?r.nullHeight:r.imageHeight;e=n.alt=r.alt||r.hint||"";if(this._setClass(n,t.row),Re.setAttr(n,"aria-hidden",r.decorative||!e),n.src=o,n.complete||t.useImage(o),isNaN(a)&&isNaN(h)&&(a=n.naturalWidth,isNaN(a)||(h=n.naturalHeight)),isNaN(this._imageWidth=a)||(n.width=a),isNaN(this._imageHeight=h)||(n.height=h),Ve.TESTING)return a=le(n.width,a,0),h=le(n.height,h,0),{width:Math.ceil(a),height:Math.ceil(h)}}_doRender(t,e,i,s){if(isNaN(this._imageWidth)&&isNaN(this._imageHeight)){const r=e[Ut];r.width=i,r.height=s}}_doUnprepare(t,e){e[Ut]=null}setValue(t,e){}$_getImage(t,e){let i=e.getElementsByClassName(fl.IMAGE_CLASS)[0];if(!i){const s=t.doc.createElement("div");i=t.doc.createElement("img"),i.className=fl.IMAGE_CLASS,s.appendChild(i),e.appendChild(s)}return i}}fl.IMAGE_CLASS="dlist-image-image";const wl="autohide";class ml extends On{_doPrepare(t,e){e[jt]=this.$_getInput(t,e)}_getStyleTarget(t){}_doMeasure(t,e,i,s){const r=this._model,n=e[jt];let o=r.boxWidth,a=r.boxHeight;if(this._setClass(n,t.row),n.style.maxWidth="",isNaN(o)&&!isNaN(t._explicitWidth)&&(o=t._explicitWidth*r.getFitWidth()),isNaN(a)&&!isNaN(t._explicitHeight)&&(a=t._explicitHeight*r.getFitHeight()),isNaN(o)||Re.setWidth(n,o),isNaN(a)||Re.setHeight(n,a),r.autoHide?n.dataset[wl]="1":delete n.dataset[wl],this._setContext(t,n,r),n.value=ne(this._valueToText(this._value),this._valueToText(this._getDefaultValue())),this._prepareInput(n),Ve.TESTING)return{width:o||0,height:a||0}}_doRender(t,e,i,s){const r=e[jt];r.style.width||(r.style.maxWidth=i+"px")}_doUnprepare(t,e){e[jt]=null}getValue(t){t=Re.childByClass(t,ml.INPUT_CLASS);return t&&this._textToValue(t.value)}setValue(t,e){const i=Re.childByClass(t,ml.INPUT_CLASS);i&&(i.value=this._valueToText(e))}_initInput(t){}_prepareInput(t){}_getDefaultValue(){return""}_valueToText(t){return t}_textToValue(t){return t}$_getInput(t,e){let i=e.getElementsByClassName(ml.INPUT_CLASS)[0];if(!i){const s=t.doc.createElement("div");i=t.doc.createElement("input"),i.className=ml.INPUT_CLASS,i.type=this._getInputType(),i.style.boxSizing="border-box",i.onkeydown=function(t){"1"===i.dataset[wl]&&"Enter"===t.key&&(t.preventDefault(),t.currentTarget.blur())},i.onfocus=t=>{Ee.currentInput=i.id},this._initInput(i),s.appendChild(i),e.appendChild(s)}return i}}ml.INPUT_CLASS="dlist-input-input";ml;ml;class vl extends Nn{_getStyleTarget(t){return t[Gt].firstElementChild.style}needBounds(){return!0}_doPrepare(t,e){const i=this._model;const s=e[Gt].firstElementChild,r=s.style;this._setClass(s,t.row),Object.assign(r,i.singleLine?yl.SPAN_STYLE_SINGLE:i.wrap?yl.SPAN_STYLE_WRAP:yl.SPAN_STYLE),r.maxWidth="",r.maxHeight="",r.lineHeight="",s.textContent=i.getText(t,this._value,t.manager().owner().lineSepReg())}_doMeasure(t,e,i,s){const r=e[Gt];e=r.firstElementChild;return r.style.maxWidth=i+"px",r.style.maxHeight=s+"px",{width:e.offsetWidth+1,height:r.offsetHeight}}_doRender(t,e,i,s){const r=e[Gt].firstElementChild;r.style.maxWidth=i+"px",r.style.maxHeight=s+"px"}_doUnprepare(t,e){e[Gt]=null}setValue(t,e){}}vl.SPAN_STYLE={whiteSpace:"pre",wordWrap:"normal",textOverflow:"ellipsis",overflow:"hidden"},vl.SPAN_STYLE_WRAP={whiteSpace:"pre-wrap",textOverflow:"ellipsis",overflow:"hidden"},vl.SPAN_STYLE_SINGLE={whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"};class yl extends vl{_doPrepare(t,e){e[Gt]=this.$_getSpan(t,e),super._doPrepare(t,e)}$_getSpan(t,e){let i=e.getElementsByClassName(yl.SPAN_CLASS)[0];return i||(i=t.createElement("div"),i.className=yl.SPAN_CLASS,t=t.createElement("span"),i.appendChild(t),e.appendChild(i)),i}}yl.SPAN_CLASS="dlist-text-span";class bl extends yl{_doMeasure(t,e,i,s){super._doMeasure(t,e,i,s);e=e[Gt];return{width:Math.ceil(e.offsetWidth),height:Math.ceil(e.offsetHeight)}}}class Sl extends vl{_doPrepare(t,e){const i=e[Gt]=this.$_getAnchor(t,e);super._doPrepare(t,e),i.firstElementChild.href=this._model.getLink(t)}setValue(t,e){}$_getAnchor(t,e){let i=e.getElementsByClassName(Sl.ANCHOR_CLASS)[0];return i||(i=t.createElement("div"),i.className=Sl.ANCHOR_CLASS,t=t.doc.createElement("a"),i.appendChild(t),e.appendChild(i)),i}}Sl.ANCHOR_CLASS="dlist-link-anchor";class Cl extends Nn{_doPrepare(t,e){e[Qt]=this.$_getBar(t,e)}_getStyleTarget(t){}_doMeasure(t,e,i,s){var r=this.model();let n=this._barWidth=r.barWidth,o=this._barHeight=r.barHeight;const a=e[Qt];var h=r.minValue,l=r.maxValue,d=r.lowValue,_=r.highValue,e=r.optimumValue,r=q.pickNum(r.value,this._value);if(this._setClass(a,t.row),isNaN(h)||(a.min=h),isNaN(l)||(a.max=l),isNaN(d)||(a.low=d),isNaN(_)||(a.high=_),isNaN(e)||(a.optimum=e),isNaN(r)||(a.value=r),isNaN(n)||(a.style.width=n+"px"),isNaN(o)||(a.style.height=o+"px"),Ve.TESTING)return n=a.offsetWidth,o=a.offsetHeight,{width:n,height:o}}_doRender(t,e,i,s){const r=e[Qt];isNaN(this._barWidth)&&(r.style.width=i+"px"),isNaN(this._barHeight)&&(r.style.height=s+"px")}_doUnprepare(t,e){e[Qt]=null}setValue(t,e){}$_getBar(t,e){let i=e.getElementsByClassName(Cl.BAR_CLASS)[0];return i||(i=t.doc.createElement("meter"),i.className=Cl.BAR_CLASS,e.appendChild(i)),i}}Cl.BAR_CLASS="dlist-meter-bar";class xl extends Nn{_doPrepare(t,e){e[Qt]=this.$_getBar(t,e)}_getStyleTarget(t){}_doMeasure(t,e,i,s){const r=this.model(),n=e[Qt];let o=r.barWidth,a=r.barHeight;var h=r.minValue,l=r.maxValue,e=+this._value;if(this._setClass(n,t.row),!isNaN(h)&&!isNaN(l)&&!isNaN(e)&&h<l?(n.max=l-h,n.value=e-h):delete n.value,isNaN(o)&&!isNaN(t._explicitWidth)&&(o=t._explicitWidth*r.getFitWidth()),isNaN(a)&&!isNaN(t._explicitHeight)&&(o=t._explicitHeight*r.getFitHeight()),isNaN(o)||Re.setWidth(n,o),isNaN(a)||Re.setHeight(n,a),Ve.TESTING)return o=isNaN(o)?n.offsetWidth:o,a=isNaN(a)?n.offsetHeight:a,{width:o,height:a}}_doRender(t,e,i,s){e[Qt]}_doUnprepare(t,e){e[Qt]=null}setValue(t,e){}$_getBar(t,e){let i=e.getElementsByClassName(xl.BAR_CLASS)[0];return i||(i=t.doc.createElement("progress"),i.className=xl.BAR_CLASS,e.appendChild(i)),i}}xl.BAR_CLASS="dlist-progress-bar";var Rl,El,Vl,$l=(function(t){self,t.exports=(()=>{var i={192:(t,e)=>{var i,s=function(){function s(t,e){function o(t,e){d=function(t){for(var e=new Array(t),i=0;i<t;i+=1){e[i]=new Array(t);for(var s=0;s<t;s+=1)e[i][s]=null}return e}(_=4*a+17),i(0,0),i(_-7,0),i(0,_-7),function(){for(var t=w.getPatternPosition(a),e=0;e<t.length;e+=1)for(var i=0;i<t.length;i+=1){var s=t[e],r=t[i];if(null==d[s][r])for(var n=-2;n<=2;n+=1)for(var o=-2;o<=2;o+=1)d[s+n][r+o]=-2==n||2==n||-2==o||2==o||0==n&&0==o}}(),function(){for(var t=8;t<_-8;t+=1)null==d[t][6]&&(d[t][6]=t%2==0);for(var e=8;e<_-8;e+=1)null==d[6][e]&&(d[6][e]=e%2==0)}(),function(t,e){for(var i=h<<3|e,s=w.getBCHTypeInfo(i),r=0;r<15;r+=1){var n=!t&&1==(s>>r&1);r<6?d[r][8]=n:r<8?d[r+1][8]=n:d[_-15+r][8]=n}for(r=0;r<15;r+=1)n=!t&&1==(s>>r&1),r<8?d[8][_-r-1]=n:r<9?d[8][15-r-1+1]=n:d[8][15-r-1]=n;d[_-8][8]=!t}(t,e),7<=a&&function(t){for(var e=w.getBCHTypeNumber(a),i=0;i<18;i+=1){var s=!t&&1==(e>>i&1);d[Math.floor(i/3)][i%3+_-8-3]=s}for(i=0;i<18;i+=1)s=!t&&1==(e>>i&1),d[i%3+_-8-3][Math.floor(i/3)]=s}(t),function(t,e){for(var i=-1,s=_-1,r=7,n=0,o=w.getMaskFunction(e),a=_-1;a>0;a-=2)for(6==a&&(a-=1);;){for(var h=0;h<2;h+=1)if(null==d[s][a-h]){var l=!1;n<t.length&&(l=1==(t[n]>>>r&1)),o(s,a-h)&&(l=!l),d[s][a-h]=l,-1==(r-=1)&&(n+=1,r=7)}if((s+=i)<0||_<=s){s-=i,i=-i;break}}}(s=null==s?function(t,e,i){for(var s=p.getRSBlocks(t,e),r=f(),n=0;n<i.length;n+=1){var o=i[n];r.put(o.getMode(),4),r.put(o.getLength(),w.getLengthInBits(o.getMode(),t)),o.write(r)}for(var a=0,n=0;n<s.length;n+=1)a+=s[n].dataCount;if(r.getLengthInBits()>8*a)throw"code length overflow. ("+r.getLengthInBits()+">"+8*a+")";for(r.getLengthInBits()+4<=8*a&&r.put(0,4);r.getLengthInBits()%8!=0;)r.putBit(!1);for(;!(r.getLengthInBits()>=8*a||(r.put(236,8),r.getLengthInBits()>=8*a));)r.put(17,8);return function(t,e){for(var i=0,s=0,r=0,n=new Array(e.length),o=new Array(e.length),a=0;a<e.length;a+=1){var h=e[a].dataCount,l=e[a].totalCount-h;s=Math.max(s,h),r=Math.max(r,l),n[a]=new Array(h);for(var d=0;d<n[a].length;d+=1)n[a][d]=255&t.getBuffer()[d+i];i+=h;var _=w.getErrorCorrectPolynomial(l),c=m(n[a],_.getLength()-1).mod(_);for(o[a]=new Array(_.getLength()-1),d=0;d<o[a].length;d+=1){var u=d+c.getLength()-o[a].length;o[a][d]=u>=0?c.getAt(u):0}}var g=0;for(d=0;d<e.length;d+=1)g+=e[d].totalCount;var p=new Array(g),f=0;for(d=0;d<s;d+=1)for(a=0;a<e.length;a+=1)d<n[a].length&&(p[f]=n[a][d],f+=1);for(d=0;d<r;d+=1)for(a=0;a<e.length;a+=1)d<o[a].length&&(p[f]=o[a][d],f+=1);return p}(r,s)}(a,h,l):s,e)}function i(t,e){for(var i=-1;i<=7;i+=1)if(!(t+i<=-1||_<=t+i))for(var s=-1;s<=7;s+=1)e+s<=-1||_<=e+s||(d[t+i][e+s]=0<=i&&i<=6&&(0==s||6==s)||0<=s&&s<=6&&(0==i||6==i)||2<=i&&i<=4&&2<=s&&s<=4)}var a=t,h=g[e],d=null,_=0,s=null,l=[],u={addData:function(t,e){var i=null;switch(e=e||"Byte"){case"Numeric":i=r(t);break;case"Alphanumeric":i=n(t);break;case"Byte":i=v(t);break;case"Kanji":i=y(t);break;default:throw"mode:"+e}l.push(i),s=null},isDark:function(t,e){if(t<0||_<=t||e<0||_<=e)throw t+","+e;return d[t][e]},getModuleCount:function(){return _},make:function(){if(a<1){for(var t=1;t<40;t++){for(var e=p.getRSBlocks(t,h),i=f(),s=0;s<l.length;s++){var r=l[s];i.put(r.getMode(),4),i.put(r.getLength(),w.getLengthInBits(r.getMode(),t)),r.write(i)}for(var n=0,s=0;s<e.length;s++)n+=e[s].dataCount;if(i.getLengthInBits()<=8*n)break}a=t}o(!1,function(){for(var t=0,e=0,i=0;i<8;i+=1){o(!0,i);var s=w.getLostPoint(u);(0==i||s<t)&&(t=s,e=i)}return e}())},createTableTag:function(t,e){t=t||2;var i="";i+='<table style="',i+=" border-width: 0px; border-style: none;",i+=" border-collapse: collapse;",i+=" padding: 0px; margin: "+(e=void 0===e?4*t:e)+"px;",i+='">',i+="<tbody>";for(var s=0;s<u.getModuleCount();s+=1){i+="<tr>";for(var r=0;r<u.getModuleCount();r+=1)i+='<td style="',i+=" border-width: 0px; border-style: none;",i+=" border-collapse: collapse;",i+=" padding: 0px; margin: 0px;",i+=" width: "+t+"px;",i+=" height: "+t+"px;",i+=" background-color: ",i+=u.isDark(s,r)?"#000000":"#ffffff",i+=";",i+='"/>';i+="</tr>"}return i+"</tbody></table>"},createSvgTag:function(t,e,i,s){var r={};"object"==typeof arguments[0]&&(t=(r=arguments[0]).cellSize,e=r.margin,i=r.alt,s=r.title),t=t||2,e=void 0===e?4*t:e,(i="string"==typeof i?{text:i}:i||{}).text=i.text||null,i.id=i.text?i.id||"qrcode-description":null,(s="string"==typeof s?{text:s}:s||{}).text=s.text||null,s.id=s.text?s.id||"qrcode-title":null;var n,o,a,h=u.getModuleCount()*t+2*e,l="",d="l"+t+",0 0,"+t+" -"+t+",0 0,-"+t+"z ";for(l+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',l+=r.scalable?"":' width="'+h+'px" height="'+h+'px"',l+=' viewBox="0 0 '+h+" "+h+'" ',l+=' preserveAspectRatio="xMinYMin meet"',l+=s.text||i.text?' role="img" aria-labelledby="'+c([s.id,i.id].join(" ").trim())+'"':"",l+=">",l+=s.text?'<title id="'+c(s.id)+'">'+c(s.text)+"</title>":"",l+=i.text?'<description id="'+c(i.id)+'">'+c(i.text)+"</description>":"",l+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',l+='<path d="',o=0;o<u.getModuleCount();o+=1)for(a=o*t+e,n=0;n<u.getModuleCount();n+=1)u.isDark(o,n)&&(l+="M"+(n*t+e)+","+a+d);return l+'" stroke="transparent" fill="black"/></svg>'},createDataURL:function(i,t){i=i||2,t=void 0===t?4*i:t;var e=u.getModuleCount()*i+2*t,s=t,r=e-t;return b(e,e,function(t,e){if(s<=t&&t<r&&s<=e&&e<r){t=Math.floor((t-s)/i),e=Math.floor((e-s)/i);return u.isDark(e,t)?0:1}return 1})},createImgTag:function(t,e,i){t=t||2,e=void 0===e?4*t:e;var s=u.getModuleCount()*t+2*e,r="";return r+="<img",r+=' src="',r+=u.createDataURL(t,e),r+='"',r+=' width="',r+=s,r+='"',r+=' height="',r+=s,r+='"',i&&(r+=' alt="',r+=c(i),r+='"'),r+"/>"}},c=function(t){for(var e="",i=0;i<t.length;i+=1){var s=t.charAt(i);switch(s){case"<":e+="&lt;";break;case">":e+="&gt;";break;case"&":e+="&amp;";break;case'"':e+="&quot;";break;default:e+=s}}return e};return u.createASCII=function(t,e){if((t=t||1)<2)return function(t){t=void 0===t?2:t;for(var e,i,s,r,n=+u.getModuleCount()+2*t,o=t,a=n-t,h={"██":"█","█ ":"▀"," █":"▄","  ":" "},l={"██":"▀","█ ":"▀"," █":" ","  ":" "},d="",_=0;_<n;_+=2){for(i=Math.floor(_-o),s=Math.floor(_+1-o),e=0;e<n;e+=1)r="█",o<=e&&e<a&&o<=_&&_<a&&u.isDark(i,Math.floor(e-o))&&(r=" "),o<=e&&e<a&&o<=_+1&&_+1<a&&u.isDark(s,Math.floor(e-o))?r+=" ":r+="█",d+=(t<1&&a<=_+1?l:h)[r];d+="\n"}return n%2&&0<t?d.substring(0,d.length-n-1)+Array(1+n).join("▀"):d.substring(0,d.length-1)}(e);--t,e=void 0===e?2*t:e;for(var i,s,r,n=u.getModuleCount()*t+2*e,o=e,a=n-e,h=Array(t+1).join("██"),l=Array(t+1).join("  "),d="",_="",c=0;c<n;c+=1){for(s=Math.floor((c-o)/t),_="",i=0;i<n;i+=1)r=1,_+=(r=o<=i&&i<a&&o<=c&&c<a&&u.isDark(s,Math.floor((i-o)/t))?0:r)?h:l;for(s=0;s<t;s+=1)d+=_+"\n"}return d.substring(0,d.length-1)},u.renderTo2dContext=function(t,e){e=e||2;for(var i=u.getModuleCount(),s=0;s<i;s++)for(var r=0;r<i;r++)t.fillStyle=u.isDark(s,r)?"black":"white",t.fillRect(s*e,r*e,e,e)},u}s.stringToBytes=(s.stringToBytesFuncs={default:function(t){for(var e=[],i=0;i<t.length;i+=1){var s=t.charCodeAt(i);e.push(255&s)}return e}}).default,s.createStringToBytes=function(a,h){var r=function(){for(var e=l(a),t=function(){var t=e.read();if(-1==t)throw"eof";return t},i=0,s={};;){var r=e.read();if(-1==r)break;var n=t(),o=t()<<8|t();s[String.fromCharCode(r<<8|n)]=o,i+=1}if(i!=h)throw i+" != "+h;return s}(),n="?".charCodeAt(0);return function(t){for(var e=[],i=0;i<t.length;i+=1){var s=t.charCodeAt(i);s<128?e.push(s):"number"==typeof(s=r[t.charAt(i)])?(255&s)==s?e.push(s):(e.push(s>>>8),e.push(255&s)):e.push(n)}return e}};var e,t,i,g={L:1,M:0,Q:3,H:2},w=(e=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],i=function(t){for(var e=0;0!=t;)e+=1,t>>>=1;return e},(t={}).getBCHTypeInfo=function(t){for(var e=t<<10;0<=i(e)-i(1335);)e^=1335<<i(e)-i(1335);return 21522^(t<<10|e)},t.getBCHTypeNumber=function(t){for(var e=t<<12;0<=i(e)-i(7973);)e^=7973<<i(e)-i(7973);return t<<12|e},t.getPatternPosition=function(t){return e[t-1]},t.getMaskFunction=function(t){switch(t){case 0:return function(t,e){return(t+e)%2==0};case 1:return function(t,e){return t%2==0};case 2:return function(t,e){return e%3==0};case 3:return function(t,e){return(t+e)%3==0};case 4:return function(t,e){return(Math.floor(t/2)+Math.floor(e/3))%2==0};case 5:return function(t,e){return t*e%2+t*e%3==0};case 6:return function(t,e){return(t*e%2+t*e%3)%2==0};case 7:return function(t,e){return(t*e%3+(t+e)%2)%2==0};default:throw"bad maskPattern:"+t}},t.getErrorCorrectPolynomial=function(t){for(var e=m([1],0),i=0;i<t;i+=1)e=e.multiply(m([1,o.gexp(i)],0));return e},t.getLengthInBits=function(t,e){if(1<=e&&e<10)switch(t){case 1:return 10;case 2:return 9;case 4:case 8:return 8;default:throw"mode:"+t}else if(e<27)switch(t){case 1:return 12;case 2:return 11;case 4:return 16;case 8:return 10;default:throw"mode:"+t}else{if(!(e<41))throw"type:"+e;switch(t){case 1:return 14;case 2:return 13;case 4:return 16;case 8:return 12;default:throw"mode:"+t}}},t.getLostPoint=function(t){for(var e=t.getModuleCount(),i=0,s=0;s<e;s+=1)for(var r=0;r<e;r+=1){for(var n=0,o=t.isDark(s,r),a=-1;a<=1;a+=1)if(!(s+a<0||e<=s+a))for(var h=-1;h<=1;h+=1)r+h<0||e<=r+h||0==a&&0==h||o==t.isDark(s+a,r+h)&&(n+=1);5<n&&(i+=3+n-5)}for(s=0;s<e-1;s+=1)for(r=0;r<e-1;r+=1){var l=0;t.isDark(s,r)&&(l+=1),t.isDark(s+1,r)&&(l+=1),t.isDark(s,r+1)&&(l+=1),t.isDark(s+1,r+1)&&(l+=1),0!=l&&4!=l||(i+=3)}for(s=0;s<e;s+=1)for(r=0;r<e-6;r+=1)t.isDark(s,r)&&!t.isDark(s,r+1)&&t.isDark(s,r+2)&&t.isDark(s,r+3)&&t.isDark(s,r+4)&&!t.isDark(s,r+5)&&t.isDark(s,r+6)&&(i+=40);for(r=0;r<e;r+=1)for(s=0;s<e-6;s+=1)t.isDark(s,r)&&!t.isDark(s+1,r)&&t.isDark(s+2,r)&&t.isDark(s+3,r)&&t.isDark(s+4,r)&&!t.isDark(s+5,r)&&t.isDark(s+6,r)&&(i+=40);for(var d=0,r=0;r<e;r+=1)for(s=0;s<e;s+=1)t.isDark(s,r)&&(d+=1);return i+Math.abs(100*d/e/e-50)/5*10},t),o=function(){for(var e=new Array(256),i=new Array(256),t=0;t<8;t+=1)e[t]=1<<t;for(t=8;t<256;t+=1)e[t]=e[t-4]^e[t-5]^e[t-6]^e[t-8];for(t=0;t<255;t+=1)i[e[t]]=t;return{glog:function(t){if(t<1)throw"glog("+t+")";return i[t]},gexp:function(t){for(;t<0;)t+=255;for(;256<=t;)t-=255;return e[t]}}}();function m(s,r){if(void 0===s.length)throw s.length+"/"+r;var e=function(){for(var t=0;t<s.length&&0==s[t];)t+=1;for(var e=new Array(s.length-t+r),i=0;i<s.length-t;i+=1)e[i]=s[i+t];return e}(),n={getAt:function(t){return e[t]},getLength:function(){return e.length},multiply:function(t){for(var e=new Array(n.getLength()+t.getLength()-1),i=0;i<n.getLength();i+=1)for(var s=0;s<t.getLength();s+=1)e[i+s]^=o.gexp(o.glog(n.getAt(i))+o.glog(t.getAt(s)));return m(e,0)},mod:function(t){if(n.getLength()-t.getLength()<0)return n;for(var e=o.glog(n.getAt(0))-o.glog(t.getAt(0)),i=new Array(n.getLength()),s=0;s<n.getLength();s+=1)i[s]=n.getAt(s);for(s=0;s<t.getLength();s+=1)i[s]^=o.gexp(o.glog(t.getAt(s))+e);return m(i,0).mod(t)}};return n}function S(){var i=[],r={writeByte:function(t){i.push(255&t)},writeShort:function(t){r.writeByte(t),r.writeByte(t>>>8)},writeBytes:function(t,e,i){e=e||0,i=i||t.length;for(var s=0;s<i;s+=1)r.writeByte(t[s+e])},writeString:function(t){for(var e=0;e<t.length;e+=1)r.writeByte(t.charCodeAt(e))},toByteArray:function(){return i},toString:function(){var t="";t+="[";for(var e=0;e<i.length;e+=1)0<e&&(t+=","),t+=i[e];return t+"]"}};return r}var c,p=(c=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],{getRSBlocks:function(t,e){var i=function(t){switch(e){case g.L:return c[4*(t-1)+0];case g.M:return c[4*(t-1)+1];case g.Q:return c[4*(t-1)+2];case g.H:return c[4*(t-1)+3];default:return}}(t);if(void 0===i)throw"bad rs block @ typeNumber:"+t+"/errorCorrectionLevel:"+e;for(var s,r,n=i.length/3,o=[],a=0;a<n;a+=1)for(var h=i[3*a+0],l=i[3*a+1],d=i[3*a+2],_=0;_<h;_+=1)o.push((s=d,void 0,(r={}).totalCount=l,r.dataCount=s,r));return o}}),f=function(){var i=[],s=0,r={getBuffer:function(){return i},getAt:function(t){var e=Math.floor(t/8);return 1==(i[e]>>>7-t%8&1)},put:function(t,e){for(var i=0;i<e;i+=1)r.putBit(1==(t>>>e-i-1&1))},getLengthInBits:function(){return s},putBit:function(t){var e=Math.floor(s/8);i.length<=e&&i.push(0),t&&(i[e]|=128>>>s%8),s+=1}};return r},r=function(t){var s=t,t={getMode:function(){return 1},getLength:function(t){return s.length},write:function(t){for(var e=s,i=0;i+2<e.length;)t.put(r(e.substring(i,i+3)),10),i+=3;i<e.length&&(e.length-i==1?t.put(r(e.substring(i,i+1)),4):e.length-i==2&&t.put(r(e.substring(i,i+2)),7))}},r=function(t){for(var e=0,i=0;i<t.length;i+=1)e=10*e+n(t.charAt(i));return e},n=function(t){if("0"<=t&&t<="9")return t.charCodeAt(0)-"0".charCodeAt(0);throw"illegal char :"+t};return t},n=function(t){var s=t,t={getMode:function(){return 2},getLength:function(t){return s.length},write:function(t){for(var e=s,i=0;i+1<e.length;)t.put(45*r(e.charAt(i))+r(e.charAt(i+1)),11),i+=2;i<e.length&&t.put(r(e.charAt(i)),6)}},r=function(t){if("0"<=t&&t<="9")return t.charCodeAt(0)-"0".charCodeAt(0);if("A"<=t&&t<="Z")return t.charCodeAt(0)-"A".charCodeAt(0)+10;switch(t){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+t}};return t},v=function(t){var i=s.stringToBytes(t);return{getMode:function(){return 4},getLength:function(t){return i.length},write:function(t){for(var e=0;e<i.length;e+=1)t.put(i[e],8)}}},y=function(t){var e=s.stringToBytesFuncs.SJIS;if(!e)throw"sjis not supported.";!function(){var t=e("友");if(2!=t.length||38726!=(t[0]<<8|t[1]))throw"sjis not supported."}();var r=e(t);return{getMode:function(){return 8},getLength:function(t){return~~(r.length/2)},write:function(t){for(var e=r,i=0;i+1<e.length;){var s=(255&e[i])<<8|255&e[i+1];if(33088<=s&&s<=40956)s-=33088;else{if(!(57408<=s&&s<=60351))throw"illegal char at "+(i+1)+"/"+s;s-=49472}t.put(s=192*(s>>>8&255)+(255&s),13),i+=2}if(i<e.length)throw"illegal char at "+(i+1)}}},l=function(t){var i=t,s=0,r=0,n=0,t={read:function(){for(;n<8;){if(s>=i.length){if(0==n)return-1;throw"unexpected end of file./"+n}var t=i.charAt(s);if(s+=1,"="==t)return n=0,-1;t.match(/^\s$/)||(r=r<<6|o(t.charCodeAt(0)),n+=6)}var e=r>>>n-8&255;return n-=8,e}},o=function(t){if(65<=t&&t<=90)return t-65;if(97<=t&&t<=122)return t-97+26;if(48<=t&&t<=57)return t-48+52;if(43==t)return 62;if(47==t)return 63;throw"c:"+t};return t},b=function(t,e,i){for(var s,r,u,n,g,o=(s=t,r=e,u=new Array(t*e),f={setPixel:function(t,e,i){u[e*s+t]=i},write:function(t){t.writeString("GIF87a"),t.writeShort(s),t.writeShort(r),t.writeByte(128),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(255),t.writeByte(255),t.writeByte(255),t.writeString(","),t.writeShort(0),t.writeShort(0),t.writeShort(s),t.writeShort(r),t.writeByte(0);var e=n(2);t.writeByte(2);for(var i=0;255<e.length-i;)t.writeByte(255),t.writeBytes(e,i,255),i+=255;t.writeByte(e.length-i),t.writeBytes(e,i,e.length-i),t.writeByte(0),t.writeString(";")}},n=function(t){for(var e=1<<t,i=1+(1<<t),s=t+1,r=g(),n=0;n<e;n+=1)r.add(String.fromCharCode(n));r.add(String.fromCharCode(e)),r.add(String.fromCharCode(i));var o,a,h,t=S(),l=(o=t,h=a=0,{write:function(t,e){if(t>>>e!=0)throw"length over";for(;8<=a+e;)o.writeByte(255&(t<<a|h)),e-=8-a,t>>>=8-a,a=h=0;h|=t<<a,a+=e},flush:function(){0<a&&o.writeByte(h)}});l.write(e,s);var d=0,_=String.fromCharCode(u[d]);for(d+=1;d<u.length;){var c=String.fromCharCode(u[d]);d+=1,r.contains(_+c)?_+=c:(l.write(r.indexOf(_),s),r.size()<4095&&(r.size()==1<<s&&(s+=1),r.add(_+c)),_=c)}return l.write(r.indexOf(_),s),l.write(i,s),l.flush(),t.toByteArray()},g=function(){var e={},i=0,s={add:function(t){if(s.contains(t))throw"dup key:"+t;e[t]=i,i+=1},size:function(){return i},indexOf:function(t){return e[t]},contains:function(t){return void 0!==e[t]}};return s},f),a=0;a<e;a+=1)for(var h=0;h<t;h+=1)o.setPixel(h,a,i(h,a));var l=S();o.write(l);for(var d,_,c,p,f,w,m=(c=_=d=0,p="",w=function(t){if(!(t<0)){if(t<26)return 65+t;if(t<52)return t-26+97;if(t<62)return t-52+48;if(62==t)return 43;if(63==t)return 47}throw"n:"+t},(f={}).writeByte=function(t){for(d=d<<8|255&t,_+=8,c+=1;6<=_;)b(d>>>_-6),_-=6},f.flush=function(){if(0<_&&(b(d<<6-_),_=d=0),c%3!=0)for(var t=3-c%3,e=0;e<t;e+=1)p+="="},f.toString=function(){return p},f),v=l.toByteArray(),y=0;y<v.length;y+=1)m.writeByte(v[y]);function b(t){p+=String.fromCharCode(w(63&t))}return m.flush(),"data:image/gif;base64,"+m};return s}();s.stringToBytesFuncs["UTF-8"]=function(t){for(var e=[],i=0;i<t.length;i++){var s=t.charCodeAt(i);s<128?e.push(s):s<2048?e.push(192|s>>6,128|63&s):s<55296||57344<=s?e.push(224|s>>12,128|s>>6&63,128|63&s):(i++,s=65536+((1023&s)<<10|1023&t.charCodeAt(i)),e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|63&s))}return e},void 0===(i="function"==typeof(i=function(){return s})?i.apply(e,[]):i)||(t.exports=i)},796:(t,e,i)=>{i.d(e,{default:()=>Q});var n=function(){return(n=Object.assign||function(t){for(var e,i=1,s=arguments.length;i<s;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},o=function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;for(var s=Array(t),r=0,e=0;e<i;e++)for(var n=arguments[e],o=0,a=n.length;o<a;o++,r++)s[r]=n[o];return s},a=function(t){return!!t&&"object"==typeof t&&!Array.isArray(t)};function h(s){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];if(!t.length)return s;var r=t.shift();return void 0!==r&&a(s)&&a(r)?(s=n({},s),Object.keys(r).forEach(function(t){var e=s[t],i=r[t];(!Array.isArray(e)||!Array.isArray(i))&&a(e)&&a(i)?s[t]=h(Object.assign({},e),i):s[t]=i}),h.apply(void 0,o([s],t))):s}function l(t,e){var i=document.createElement("a");i.download=e,i.href=t,document.body.appendChild(i),i.click(),document.body.removeChild(i)}function p(t){var e=t.originalHeight,i=t.originalWidth,s=t.maxHiddenDots,r=t.maxHiddenAxisDots,n=t.dotSize,o={x:0,y:0},t={x:0,y:0};if(e<=0||i<=0||s<=0||n<=0)return{height:0,width:0,hideYDots:0,hideXDots:0};i=e/i;return o.x=Math.floor(Math.sqrt(s/i)),o.x<=0&&(o.x=1),r&&r<o.x&&(o.x=r),o.x%2==0&&o.x--,t.x=o.x*n,o.y=1+2*Math.ceil((o.x*i-1)/2),t.y=Math.round(t.x*i),(o.y*o.x>s||r&&r<o.y)&&(r&&r<o.y?(o.y=r,o.y%2==0&&o.x--):o.y-=2,t.y=o.y*n,o.x=1+2*Math.ceil((o.y/i-1)/2),t.x=Math.round(t.y/i)),{height:t.y,width:t.x,hideYDots:o.y,hideXDots:o.x}}const f={L:.07,M:.15,Q:.25,H:.3},d="classy-rounded",_="extra-rounded";var s=function(){return(s=Object.assign||function(t){for(var e,i=1,s=arguments.length;i<s;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};const E=(r.prototype.draw=function(t,e,i,s){var r,n=this._context;switch(this._type){case"dots":r=this._drawDot;break;case"classy":r=this._drawClassy;break;case d:r=this._drawClassyRounded;break;case"rounded":r=this._drawRounded;break;case _:r=this._drawExtraRounded;break;default:r=this._drawSquare}r.call(this,{x:t,y:e,size:i,context:n,getNeighbor:s})},r.prototype._rotateFigure=function(t){var e=t.x,i=t.y,s=t.size,r=t.context,n=t.rotation,n=void 0===n?0:n,t=t.draw,e=e+s/2,s=i+s/2;r.translate(e,s),n&&r.rotate(n),t(),r.closePath(),n&&r.rotate(-n),r.translate(-e,-s)},r.prototype._basicDot=function(t){var e=t.size,i=t.context;this._rotateFigure(s(s({},t),{draw:function(){i.arc(0,0,e/2,0,2*Math.PI)}}))},r.prototype._basicSquare=function(t){var e=t.size,i=t.context;this._rotateFigure(s(s({},t),{draw:function(){i.rect(-e/2,-e/2,e,e)}}))},r.prototype._basicSideRounded=function(t){var e=t.size,i=t.context;this._rotateFigure(s(s({},t),{draw:function(){i.arc(0,0,e/2,-Math.PI/2,Math.PI/2),i.lineTo(-e/2,e/2),i.lineTo(-e/2,-e/2),i.lineTo(0,-e/2)}}))},r.prototype._basicCornerRounded=function(t){var e=t.size,i=t.context;this._rotateFigure(s(s({},t),{draw:function(){i.arc(0,0,e/2,-Math.PI/2,0),i.lineTo(e/2,e/2),i.lineTo(-e/2,e/2),i.lineTo(-e/2,-e/2),i.lineTo(0,-e/2)}}))},r.prototype._basicCornerExtraRounded=function(t){var e=t.size,i=t.context;this._rotateFigure(s(s({},t),{draw:function(){i.arc(-e/2,e/2,e,-Math.PI/2,0),i.lineTo(-e/2,e/2),i.lineTo(-e/2,-e/2)}}))},r.prototype._basicCornersRounded=function(t){var e=t.size,i=t.context;this._rotateFigure(s(s({},t),{draw:function(){i.arc(0,0,e/2,-Math.PI/2,0),i.lineTo(e/2,e/2),i.lineTo(0,e/2),i.arc(0,0,e/2,Math.PI/2,Math.PI),i.lineTo(-e/2,-e/2),i.lineTo(0,-e/2)}}))},r.prototype._basicCornersExtraRounded=function(t){var e=t.size,i=t.context;this._rotateFigure(s(s({},t),{draw:function(){i.arc(-e/2,e/2,e,-Math.PI/2,0),i.arc(e/2,-e/2,e,Math.PI/2,Math.PI)}}))},r.prototype._drawDot=function(t){var e=t.x,i=t.y,s=t.size,t=t.context;this._basicDot({x:e,y:i,size:s,context:t,rotation:0})},r.prototype._drawSquare=function(t){var e=t.x,i=t.y,s=t.size,t=t.context;this._basicSquare({x:e,y:i,size:s,context:t,rotation:0})},r.prototype._drawRounded=function(t){var e=t.x,i=t.y,s=t.size,r=t.context,n=t.getNeighbor,o=n?+n(-1,0):0,a=n?+n(1,0):0,h=n?+n(0,-1):0,t=n?+n(0,1):0,n=o+a+h+t;if(0!=n)if(2<n||o&&a||h&&t)this._basicSquare({x:e,y:i,size:s,context:r,rotation:0});else{if(2==n){var l=0;return o&&h?l=Math.PI/2:h&&a?l=Math.PI:a&&t&&(l=-Math.PI/2),void this._basicCornerRounded({x:e,y:i,size:s,context:r,rotation:l})}if(1==n)return l=0,h?l=Math.PI/2:a?l=Math.PI:t&&(l=-Math.PI/2),void this._basicSideRounded({x:e,y:i,size:s,context:r,rotation:l})}else this._basicDot({x:e,y:i,size:s,context:r,rotation:0})},r.prototype._drawExtraRounded=function(t){var e=t.x,i=t.y,s=t.size,r=t.context,n=t.getNeighbor,o=n?+n(-1,0):0,a=n?+n(1,0):0,h=n?+n(0,-1):0,t=n?+n(0,1):0,n=o+a+h+t;if(0!=n)if(2<n||o&&a||h&&t)this._basicSquare({x:e,y:i,size:s,context:r,rotation:0});else{if(2==n){var l=0;return o&&h?l=Math.PI/2:h&&a?l=Math.PI:a&&t&&(l=-Math.PI/2),void this._basicCornerExtraRounded({x:e,y:i,size:s,context:r,rotation:l})}if(1==n)return l=0,h?l=Math.PI/2:a?l=Math.PI:t&&(l=-Math.PI/2),void this._basicSideRounded({x:e,y:i,size:s,context:r,rotation:l})}else this._basicDot({x:e,y:i,size:s,context:r,rotation:0})},r.prototype._drawClassy=function(t){var e=t.x,i=t.y,s=t.size,r=t.context,n=t.getNeighbor,o=n?+n(-1,0):0,a=n?+n(1,0):0,t=n?+n(0,-1):0,n=n?+n(0,1):0;0!=o+a+t+n?o||t?a||n?this._basicSquare({x:e,y:i,size:s,context:r,rotation:0}):this._basicCornerRounded({x:e,y:i,size:s,context:r,rotation:Math.PI/2}):this._basicCornerRounded({x:e,y:i,size:s,context:r,rotation:-Math.PI/2}):this._basicCornersRounded({x:e,y:i,size:s,context:r,rotation:Math.PI/2})},r.prototype._drawClassyRounded=function(t){var e=t.x,i=t.y,s=t.size,r=t.context,n=t.getNeighbor,o=n?+n(-1,0):0,a=n?+n(1,0):0,t=n?+n(0,-1):0,n=n?+n(0,1):0;0!=o+a+t+n?o||t?a||n?this._basicSquare({x:e,y:i,size:s,context:r,rotation:0}):this._basicCornerExtraRounded({x:e,y:i,size:s,context:r,rotation:Math.PI/2}):this._basicCornerExtraRounded({x:e,y:i,size:s,context:r,rotation:-Math.PI/2}):this._basicCornersRounded({x:e,y:i,size:s,context:r,rotation:Math.PI/2})},r),c="extra-rounded";function r(t){var e=t.context,t=t.type;this._context=e,this._type=t}var u=function(){return(u=Object.assign||function(t){for(var e,i=1,s=arguments.length;i<s;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};const V=(g.prototype.draw=function(t,e,i,s){var r,n=this._context;switch(this._type){case"square":r=this._drawSquare;break;case c:r=this._drawExtraRounded;break;default:r=this._drawDot}r.call(this,{x:t,y:e,size:i,context:n,rotation:s})},g.prototype._rotateFigure=function(t){var e=t.x,i=t.y,s=t.size,r=t.context,n=t.rotation,n=void 0===n?0:n,t=t.draw,e=e+s/2,s=i+s/2;r.translate(e,s),n&&r.rotate(n),t(),r.closePath(),n&&r.rotate(-n),r.translate(-e,-s)},g.prototype._basicDot=function(t){var e=t.size,i=t.context,s=e/7;this._rotateFigure(u(u({},t),{draw:function(){i.arc(0,0,e/2,0,2*Math.PI),i.arc(0,0,e/2-s,0,2*Math.PI)}}))},g.prototype._basicSquare=function(t){var e=t.size,i=t.context,s=e/7;this._rotateFigure(u(u({},t),{draw:function(){i.rect(-e/2,-e/2,e,e),i.rect(-e/2+s,-e/2+s,e-2*s,e-2*s)}}))},g.prototype._basicExtraRounded=function(t){var e=t.size,i=t.context,s=e/7;this._rotateFigure(u(u({},t),{draw:function(){i.arc(-s,-s,2.5*s,Math.PI,-Math.PI/2),i.lineTo(s,-3.5*s),i.arc(s,-s,2.5*s,-Math.PI/2,0),i.lineTo(3.5*s,-s),i.arc(s,s,2.5*s,0,Math.PI/2),i.lineTo(-s,3.5*s),i.arc(-s,s,2.5*s,Math.PI/2,Math.PI),i.lineTo(-3.5*s,-s),i.arc(-s,-s,1.5*s,Math.PI,-Math.PI/2),i.lineTo(s,-2.5*s),i.arc(s,-s,1.5*s,-Math.PI/2,0),i.lineTo(2.5*s,-s),i.arc(s,s,1.5*s,0,Math.PI/2),i.lineTo(-s,2.5*s),i.arc(-s,s,1.5*s,Math.PI/2,Math.PI),i.lineTo(-2.5*s,-s)}}))},g.prototype._drawDot=function(t){var e=t.x,i=t.y,s=t.size,r=t.context,t=t.rotation;this._basicDot({x:e,y:i,size:s,context:r,rotation:t})},g.prototype._drawSquare=function(t){var e=t.x,i=t.y,s=t.size,r=t.context,t=t.rotation;this._basicSquare({x:e,y:i,size:s,context:r,rotation:t})},g.prototype._drawExtraRounded=function(t){var e=t.x,i=t.y,s=t.size,r=t.context,t=t.rotation;this._basicExtraRounded({x:e,y:i,size:s,context:r,rotation:t})},g);function g(t){var e=t.context,t=t.type;this._context=e,this._type=t}var w=function(){return(w=Object.assign||function(t){for(var e,i=1,s=arguments.length;i<s;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};const $=(m.prototype.draw=function(t,e,i,s){var r=this._context,n="square"===this._type?this._drawSquare:this._drawDot;n.call(this,{x:t,y:e,size:i,context:r,rotation:s})},m.prototype._rotateFigure=function(t){var e=t.x,i=t.y,s=t.size,r=t.context,n=t.rotation,n=void 0===n?0:n,t=t.draw,e=e+s/2,s=i+s/2;r.translate(e,s),n&&r.rotate(n),t(),r.closePath(),n&&r.rotate(-n),r.translate(-e,-s)},m.prototype._basicDot=function(t){var e=t.size,i=t.context;this._rotateFigure(w(w({},t),{draw:function(){i.arc(0,0,e/2,0,2*Math.PI)}}))},m.prototype._basicSquare=function(t){var e=t.size,i=t.context;this._rotateFigure(w(w({},t),{draw:function(){i.rect(-e/2,-e/2,e,e)}}))},m.prototype._drawDot=function(t){var e=t.x,i=t.y,s=t.size,r=t.context,t=t.rotation;this._basicDot({x:e,y:i,size:s,context:r,rotation:t})},m.prototype._drawSquare=function(t){var e=t.x,i=t.y,s=t.size,r=t.context,t=t.rotation;this._basicSquare({x:e,y:i,size:s,context:r,rotation:t})},m);function m(t){var e=t.context,t=t.type;this._context=e,this._type=t}var A=[[1,1,1,1,1,1,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,1,1,1,1,1,1]],L=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]];const v=(Object.defineProperty(y.prototype,"context",{get:function(){return this._canvas.getContext("2d")},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"width",{get:function(){return this._canvas.width},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"height",{get:function(){return this._canvas.height},enumerable:!1,configurable:!0}),y.prototype.getCanvas=function(){return this._canvas},y.prototype.clear=function(){var t=this.context;t&&t.clearRect(0,0,this._canvas.width,this._canvas.height)},y.prototype.drawQR=function(g){return t=this,a=function(){var n,e,o,i,s,r,a,h,l,d,_,t,c=this;return r=this,a=function(t){switch(t.label){case 0:return n=g.getModuleCount(),i=Math.min(this._options.width,this._options.height)-2*this._options.margin,e=Math.floor(i/n),o={hideXDots:0,hideYDots:0,width:0,height:0},this._qr=g,this._options.image?[4,this.loadImage()]:[3,2];case 1:if(t.sent(),!this._image)return[2];s=this._options,i=s.imageOptions,s=s.qrOptions,s=i.imageSize*f[s.errorCorrectionLevel],s=Math.floor(s*n*n),o=p({originalWidth:this._image.width,originalHeight:this._image.height,maxHiddenDots:s,maxHiddenAxisDots:n-14,dotSize:e}),t.label=2;case 2:return this.clear(),this.drawBackground(),this.drawDots(function(t,e){var i,s,r;return!(c._options.imageOptions.hideBackgroundDots&&t>=(n-o.hideXDots)/2&&t<(n+o.hideXDots)/2&&e>=(n-o.hideYDots)/2&&e<(n+o.hideYDots)/2||null!==(i=A[t])&&void 0!==i&&i[e]||null!==(s=A[t-n+7])&&void 0!==s&&s[e]||null!==(s=A[t])&&void 0!==s&&s[e-n+7]||null!==(r=L[t])&&void 0!==r&&r[e]||null!==(r=L[t-n+7])&&void 0!==r&&r[e]||null!==(t=L[t])&&void 0!==t&&t[e-n+7])}),this.drawCorners(),this._options.image&&this.drawImage({width:o.width,height:o.height,count:n,dotSize:e}),[2]}},_={label:0,sent:function(){if(1&d[0])throw d[1];return d[1]},trys:[],ops:[]},t={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function u(e){return function(t){return function(e){if(h)throw new TypeError("Generator is already executing.");for(;_;)try{if(h=1,l&&(d=2&e[0]?l.return:e[0]?l.throw||((d=l.return)&&d.call(l),0):l.next)&&!(d=d.call(l,e[1])).done)return d;switch(l=0,(e=d?[2&e[0],d.value]:e)[0]){case 0:case 1:d=e;break;case 4:return _.label++,{value:e[1],done:!1};case 5:_.label++,l=e[1],e=[0];continue;case 7:e=_.ops.pop(),_.trys.pop();continue;default:if(!((d=0<(d=_.trys).length&&d[d.length-1])||6!==e[0]&&2!==e[0])){_=0;continue}if(3===e[0]&&(!d||e[1]>d[0]&&e[1]<d[3])){_.label=e[1];break}if(6===e[0]&&_.label<d[1]){_.label=d[1],d=e;break}if(d&&_.label<d[2]){_.label=d[2],_.ops.push(e);break}d[2]&&_.ops.pop(),_.trys.pop();continue}e=a.call(r,_)}catch(t){e=[6,t],l=0}finally{h=d=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},o=void 0,new(o=Promise)(function(i,e){function s(t){try{n(a.next(t))}catch(t){e(t)}}function r(t){try{n(a.throw(t))}catch(t){e(t)}}function n(t){var e;t.done?i(t.value):((e=t.value)instanceof o?e:new o(function(t){t(e)})).then(s,r)}n((a=a.apply(t,[])).next())});var t,o,a},y.prototype.drawBackground=function(){var t,i,e=this.context,s=this._options;e&&(s.backgroundOptions.gradient?(t=s.backgroundOptions.gradient,i=this._createGradient({context:e,options:t,additionalRotation:0,x:0,y:0,size:this._canvas.width>this._canvas.height?this._canvas.width:this._canvas.height}),t.colorStops.forEach(function(t){var e=t.offset,t=t.color;i.addColorStop(e,t)}),e.fillStyle=i):s.backgroundOptions.color&&(e.fillStyle=s.backgroundOptions.color),e.fillRect(0,0,this._canvas.width,this._canvas.height))},y.prototype.drawDots=function(r){var n=this;if(!this._qr)throw"QR code is not defined";var t=this.context;if(!t)throw"QR code is not defined";var e=this._options,o=this._qr.getModuleCount();if(o>e.width||o>e.height)throw"The canvas is too small.";var i=Math.min(e.width,e.height)-2*e.margin,a=Math.floor(i/o),h=Math.floor((e.width-o*a)/2),l=Math.floor((e.height-o*a)/2),d=new E({context:t,type:e.dotsOptions.type});t.beginPath();for(var s,_=this,c=0;c<o;c++)!function(s){for(var t=0;t<o;t++)!function(i){(!r||r(s,i))&&_._qr.isDark(s,i)&&d.draw(h+s*a,l+i*a,a,function(t,e){return!(s+t<0||i+e<0||o<=s+t||o<=i+e)&&!(r&&!r(s+t,i+e))&&!!n._qr&&n._qr.isDark(s+t,i+e)})}(t)}(c);e.dotsOptions.gradient?(i=e.dotsOptions.gradient,s=this._createGradient({context:t,options:i,additionalRotation:0,x:h,y:l,size:o*a}),i.colorStops.forEach(function(t){var e=t.offset,t=t.color;s.addColorStop(e,t)}),t.fillStyle=t.strokeStyle=s):e.dotsOptions.color&&(t.fillStyle=t.strokeStyle=e.dotsOptions.color),t.fill("evenodd")},y.prototype.drawCorners=function(f){var w=this;if(!this._qr)throw"QR code is not defined";var m=this.context;if(!m)throw"QR code is not defined";var v=this._options,y=this._qr.getModuleCount(),t=Math.min(v.width,v.height)-2*v.margin,b=Math.floor(t/y),S=7*b,C=3*b,x=Math.floor((v.width-y*b)/2),R=Math.floor((v.height-y*b)/2);[[0,0,0],[1,0,Math.PI/2],[0,1,-Math.PI/2]].forEach(function(t){var e,i,r,s=t[0],n=t[1],t=t[2];if(!f||f(s,n)){var o,a,h,l=x+s*b*(y-7),d=R+n*b*(y-7);if(null!==(n=v.cornersSquareOptions)&&void 0!==n&&n.type){var _=new V({context:m,type:null===(_=v.cornersSquareOptions)||void 0===_?void 0:_.type});m.beginPath(),_.draw(l,d,S,t)}else{var c=new E({context:m,type:v.dotsOptions.type});m.beginPath();for(var u=0;u<A.length;u++)!function(s){for(var t=0;t<A[s].length;t++)!function(i){if(null===(e=A[s])||void 0===e||!e[i])return;c.draw(l+s*b,d+i*b,b,function(t,e){return!(null===(t=A[s+t])||void 0===t||!t[i+e])})}(t)}(u)}if(null!==(_=v.cornersSquareOptions)&&void 0!==_&&_.gradient?(a=v.cornersSquareOptions.gradient,o=w._createGradient({context:m,options:a,additionalRotation:t,x:l,y:d,size:S}),a.colorStops.forEach(function(t){var e=t.offset,t=t.color;o.addColorStop(e,t)}),m.fillStyle=m.strokeStyle=o):null!==(i=v.cornersSquareOptions)&&void 0!==i&&i.color&&(m.fillStyle=m.strokeStyle=v.cornersSquareOptions.color),m.fill("evenodd"),null!==(i=v.cornersDotOptions)&&void 0!==i&&i.type){var g=new $({context:m,type:null===(g=v.cornersDotOptions)||void 0===g?void 0:g.type});m.beginPath(),g.draw(l+2*b,d+2*b,C,t)}else{c=new E({context:m,type:v.dotsOptions.type}),m.beginPath();for(var p=function(s){for(var t=0;t<L[s].length;t++)!function(i){if(null===(r=L[s])||void 0===r||!r[i])return;c.draw(l+s*b,d+i*b,b,function(t,e){return!(null===(t=L[s+t])||void 0===t||!t[i+e])})}(t)},u=0;u<L.length;u++)p(u)}null!==(g=v.cornersDotOptions)&&void 0!==g&&g.gradient?(a=v.cornersDotOptions.gradient,h=w._createGradient({context:m,options:a,additionalRotation:t,x:l+2*b,y:d+2*b,size:C}),a.colorStops.forEach(function(t){var e=t.offset,t=t.color;h.addColorStop(e,t)}),m.fillStyle=m.strokeStyle=h):null!==(a=v.cornersDotOptions)&&void 0!==a&&a.color&&(m.fillStyle=m.strokeStyle=v.cornersDotOptions.color),m.fill("evenodd")}})},y.prototype.loadImage=function(){var r=this;return new Promise(function(t,e){var i=r._options,s=new Image;if(!i.image)return e("Image is not defined");"string"==typeof i.imageOptions.crossOrigin&&(s.crossOrigin=i.imageOptions.crossOrigin),(r._image=s).onload=function(){t()},s.src=i.image})},y.prototype.drawImage=function(t){var e=t.width,i=t.height,s=t.count,r=t.dotSize,n=this.context;if(!n)throw"canvasContext is not defined";if(!this._image)throw"image is not defined";var o=this._options,a=Math.floor((o.width-s*r)/2),t=Math.floor((o.height-s*r)/2),a=a+o.imageOptions.margin+(s*r-e)/2,r=t+o.imageOptions.margin+(s*r-i)/2,e=e-2*o.imageOptions.margin,o=i-2*o.imageOptions.margin;n.drawImage(this._image,a,r,e<0?0:e,o<0?0:o)},y.prototype._createGradient=function(t){var e=t.context,i=t.options,s=t.additionalRotation,r=t.x,n=t.y,o=t.size,a="radial"===i.type?e.createRadialGradient(r+o/2,n+o/2,0,r+o/2,n+o/2,o/2):(r=t=r+o/2,a=n=n+o/2,0<=(s=((i=((i.rotation||0)+s)%(2*Math.PI))+2*Math.PI)%(2*Math.PI))&&s<=.25*Math.PI||s>1.75*Math.PI&&s<=2*Math.PI?(t-=o/2,n-=o/2*Math.tan(i),r+=o/2,a+=o/2*Math.tan(i)):s>.25*Math.PI&&s<=.75*Math.PI?(n-=o/2,t-=o/2/Math.tan(i),a+=o/2,r+=o/2/Math.tan(i)):s>.75*Math.PI&&s<=1.25*Math.PI?(t+=o/2,n+=o/2*Math.tan(i),r-=o/2,a-=o/2*Math.tan(i)):s>1.25*Math.PI&&s<=1.75*Math.PI&&(n+=o/2,t+=o/2/Math.tan(i),a-=o/2,r-=o/2/Math.tan(i)),e.createLinearGradient(Math.round(t),Math.round(n),Math.round(r),Math.round(a)));return a},y);function y(t){this._canvas=document.createElement("canvas"),this._canvas.width=t.width,this._canvas.height=t.height,this._options=t}var b=function(){return(b=Object.assign||function(t){for(var e,i=1,s=arguments.length;i<s;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};const x=(S.prototype.draw=function(t,e,i,s){var r;switch(this._type){case"dots":r=this._drawDot;break;case"classy":r=this._drawClassy;break;case d:r=this._drawClassyRounded;break;case"rounded":r=this._drawRounded;break;case _:r=this._drawExtraRounded;break;default:r=this._drawSquare}r.call(this,{x:t,y:e,size:i,getNeighbor:s})},S.prototype._rotateFigure=function(t){var e=t.x,i=t.y,s=t.size,r=t.rotation,r=void 0===r?0:r,e=e+s/2,s=i+s/2;(0,t.draw)(),null===(t=this._element)||void 0===t||t.setAttribute("transform","rotate("+180*r/Math.PI+","+e+","+s+")")},S.prototype._basicDot=function(t){var e=this,i=t.size,s=t.x,r=t.y;this._rotateFigure(b(b({},t),{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","circle"),e._element.setAttribute("cx",String(s+i/2)),e._element.setAttribute("cy",String(r+i/2)),e._element.setAttribute("r",String(i/2))}}))},S.prototype._basicSquare=function(t){var e=this,i=t.size,s=t.x,r=t.y;this._rotateFigure(b(b({},t),{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","rect"),e._element.setAttribute("x",String(s)),e._element.setAttribute("y",String(r)),e._element.setAttribute("width",String(i)),e._element.setAttribute("height",String(i))}}))},S.prototype._basicSideRounded=function(t){var e=this,i=t.size,s=t.x,r=t.y;this._rotateFigure(b(b({},t),{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","path"),e._element.setAttribute("d","M "+s+" "+r+"v "+i+"h "+i/2+"a "+i/2+" "+i/2+", 0, 0, 0, 0 "+-i)}}))},S.prototype._basicCornerRounded=function(t){var e=this,i=t.size,s=t.x,r=t.y;this._rotateFigure(b(b({},t),{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","path"),e._element.setAttribute("d","M "+s+" "+r+"v "+i+"h "+i+"v "+-i/2+"a "+i/2+" "+i/2+", 0, 0, 0, "+-i/2+" "+-i/2)}}))},S.prototype._basicCornerExtraRounded=function(t){var e=this,i=t.size,s=t.x,r=t.y;this._rotateFigure(b(b({},t),{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","path"),e._element.setAttribute("d","M "+s+" "+r+"v "+i+"h "+i+"a "+i+" "+i+", 0, 0, 0, "+-i+" "+-i)}}))},S.prototype._basicCornersRounded=function(t){var e=this,i=t.size,s=t.x,r=t.y;this._rotateFigure(b(b({},t),{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","path"),e._element.setAttribute("d","M "+s+" "+r+"v "+i/2+"a "+i/2+" "+i/2+", 0, 0, 0, "+i/2+" "+i/2+"h "+i/2+"v "+-i/2+"a "+i/2+" "+i/2+", 0, 0, 0, "+-i/2+" "+-i/2)}}))},S.prototype._drawDot=function(t){var e=t.x,i=t.y,t=t.size;this._basicDot({x:e,y:i,size:t,rotation:0})},S.prototype._drawSquare=function(t){var e=t.x,i=t.y,t=t.size;this._basicSquare({x:e,y:i,size:t,rotation:0})},S.prototype._drawRounded=function(t){var e=t.x,i=t.y,s=t.size,r=t.getNeighbor,n=r?+r(-1,0):0,o=r?+r(1,0):0,a=r?+r(0,-1):0,t=r?+r(0,1):0,r=n+o+a+t;if(0!=r)if(2<r||n&&o||a&&t)this._basicSquare({x:e,y:i,size:s,rotation:0});else{if(2==r){var h=0;return n&&a?h=Math.PI/2:a&&o?h=Math.PI:o&&t&&(h=-Math.PI/2),void this._basicCornerRounded({x:e,y:i,size:s,rotation:h})}if(1==r)return h=0,a?h=Math.PI/2:o?h=Math.PI:t&&(h=-Math.PI/2),void this._basicSideRounded({x:e,y:i,size:s,rotation:h})}else this._basicDot({x:e,y:i,size:s,rotation:0})},S.prototype._drawExtraRounded=function(t){var e=t.x,i=t.y,s=t.size,r=t.getNeighbor,n=r?+r(-1,0):0,o=r?+r(1,0):0,a=r?+r(0,-1):0,t=r?+r(0,1):0,r=n+o+a+t;if(0!=r)if(2<r||n&&o||a&&t)this._basicSquare({x:e,y:i,size:s,rotation:0});else{if(2==r){var h=0;return n&&a?h=Math.PI/2:a&&o?h=Math.PI:o&&t&&(h=-Math.PI/2),void this._basicCornerExtraRounded({x:e,y:i,size:s,rotation:h})}if(1==r)return h=0,a?h=Math.PI/2:o?h=Math.PI:t&&(h=-Math.PI/2),void this._basicSideRounded({x:e,y:i,size:s,rotation:h})}else this._basicDot({x:e,y:i,size:s,rotation:0})},S.prototype._drawClassy=function(t){var e=t.x,i=t.y,s=t.size,r=t.getNeighbor,n=r?+r(-1,0):0,o=r?+r(1,0):0,t=r?+r(0,-1):0,r=r?+r(0,1):0;0!=n+o+t+r?n||t?o||r?this._basicSquare({x:e,y:i,size:s,rotation:0}):this._basicCornerRounded({x:e,y:i,size:s,rotation:Math.PI/2}):this._basicCornerRounded({x:e,y:i,size:s,rotation:-Math.PI/2}):this._basicCornersRounded({x:e,y:i,size:s,rotation:Math.PI/2})},S.prototype._drawClassyRounded=function(t){var e=t.x,i=t.y,s=t.size,r=t.getNeighbor,n=r?+r(-1,0):0,o=r?+r(1,0):0,t=r?+r(0,-1):0,r=r?+r(0,1):0;0!=n+o+t+r?n||t?o||r?this._basicSquare({x:e,y:i,size:s,rotation:0}):this._basicCornerExtraRounded({x:e,y:i,size:s,rotation:Math.PI/2}):this._basicCornerExtraRounded({x:e,y:i,size:s,rotation:-Math.PI/2}):this._basicCornersRounded({x:e,y:i,size:s,rotation:Math.PI/2})},S);function S(t){var e=t.svg,t=t.type;this._svg=e,this._type=t}var C=function(){return(C=Object.assign||function(t){for(var e,i=1,s=arguments.length;i<s;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};const R=(D.prototype.draw=function(t,e,i,s){var r;switch(this._type){case"square":r=this._drawSquare;break;case c:r=this._drawExtraRounded;break;default:r=this._drawDot}r.call(this,{x:t,y:e,size:i,rotation:s})},D.prototype._rotateFigure=function(t){var e=t.x,i=t.y,s=t.size,r=t.rotation,r=void 0===r?0:r,e=e+s/2,s=i+s/2;(0,t.draw)(),null===(t=this._element)||void 0===t||t.setAttribute("transform","rotate("+180*r/Math.PI+","+e+","+s+")")},D.prototype._basicDot=function(t){var e=this,i=t.size,s=t.x,r=t.y,n=i/7;this._rotateFigure(C(C({},t),{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","path"),e._element.setAttribute("clip-rule","evenodd"),e._element.setAttribute("d","M "+(s+i/2)+" "+r+"a "+i/2+" "+i/2+" 0 1 0 0.1 0zm 0 "+n+"a "+(i/2-n)+" "+(i/2-n)+" 0 1 1 -0.1 0Z")}}))},D.prototype._basicSquare=function(t){var e=this,i=t.size,s=t.x,r=t.y,n=i/7;this._rotateFigure(C(C({},t),{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","path"),e._element.setAttribute("clip-rule","evenodd"),e._element.setAttribute("d","M "+s+" "+r+"v "+i+"h "+i+"v "+-i+"zM "+(s+n)+" "+(r+n)+"h "+(i-2*n)+"v "+(i-2*n)+"h "+(2*n-i)+"z")}}))},D.prototype._basicExtraRounded=function(t){var e=this,i=t.size,s=t.x,r=t.y,n=i/7;this._rotateFigure(C(C({},t),{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","path"),e._element.setAttribute("clip-rule","evenodd"),e._element.setAttribute("d","M "+s+" "+(r+2.5*n)+"v "+2*n+"a "+2.5*n+" "+2.5*n+", 0, 0, 0, "+2.5*n+" "+2.5*n+"h "+2*n+"a "+2.5*n+" "+2.5*n+", 0, 0, 0, "+2.5*n+" "+2.5*-n+"v "+-2*n+"a "+2.5*n+" "+2.5*n+", 0, 0, 0, "+2.5*-n+" "+2.5*-n+"h "+-2*n+"a "+2.5*n+" "+2.5*n+", 0, 0, 0, "+2.5*-n+" "+2.5*n+"M "+(s+2.5*n)+" "+(r+n)+"h "+2*n+"a "+1.5*n+" "+1.5*n+", 0, 0, 1, "+1.5*n+" "+1.5*n+"v "+2*n+"a "+1.5*n+" "+1.5*n+", 0, 0, 1, "+1.5*-n+" "+1.5*n+"h "+-2*n+"a "+1.5*n+" "+1.5*n+", 0, 0, 1, "+1.5*-n+" "+1.5*-n+"v "+-2*n+"a "+1.5*n+" "+1.5*n+", 0, 0, 1, "+1.5*n+" "+1.5*-n)}}))},D.prototype._drawDot=function(t){var e=t.x,i=t.y,s=t.size,t=t.rotation;this._basicDot({x:e,y:i,size:s,rotation:t})},D.prototype._drawSquare=function(t){var e=t.x,i=t.y,s=t.size,t=t.rotation;this._basicSquare({x:e,y:i,size:s,rotation:t})},D.prototype._drawExtraRounded=function(t){var e=t.x,i=t.y,s=t.size,t=t.rotation;this._basicExtraRounded({x:e,y:i,size:s,rotation:t})},D);function D(t){var e=t.svg,t=t.type;this._svg=e,this._type=t}var k=function(){return(k=Object.assign||function(t){for(var e,i=1,s=arguments.length;i<s;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};const T=(P.prototype.draw=function(t,e,i,s){var r="square"===this._type?this._drawSquare:this._drawDot;r.call(this,{x:t,y:e,size:i,rotation:s})},P.prototype._rotateFigure=function(t){var e=t.x,i=t.y,s=t.size,r=t.rotation,r=void 0===r?0:r,e=e+s/2,s=i+s/2;(0,t.draw)(),null===(t=this._element)||void 0===t||t.setAttribute("transform","rotate("+180*r/Math.PI+","+e+","+s+")")},P.prototype._basicDot=function(t){var e=this,i=t.size,s=t.x,r=t.y;this._rotateFigure(k(k({},t),{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","circle"),e._element.setAttribute("cx",String(s+i/2)),e._element.setAttribute("cy",String(r+i/2)),e._element.setAttribute("r",String(i/2))}}))},P.prototype._basicSquare=function(t){var e=this,i=t.size,s=t.x,r=t.y;this._rotateFigure(k(k({},t),{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","rect"),e._element.setAttribute("x",String(s)),e._element.setAttribute("y",String(r)),e._element.setAttribute("width",String(i)),e._element.setAttribute("height",String(i))}}))},P.prototype._drawDot=function(t){var e=t.x,i=t.y,s=t.size,t=t.rotation;this._basicDot({x:e,y:i,size:s,rotation:t})},P.prototype._drawSquare=function(t){var e=t.x,i=t.y,s=t.size,t=t.rotation;this._basicSquare({x:e,y:i,size:s,rotation:t})},P);function P(t){var e=t.svg,t=t.type;this._svg=e,this._type=t}var M=[[1,1,1,1,1,1,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,1,1,1,1,1,1]],I=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]];const N=(Object.defineProperty(B.prototype,"width",{get:function(){return this._options.width},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"height",{get:function(){return this._options.height},enumerable:!1,configurable:!0}),B.prototype.getElement=function(){return this._element},B.prototype.clear=function(){var t,e=this._element;this._element=e.cloneNode(!1),null===(t=null==e?void 0:e.parentNode)||void 0===t||t.replaceChild(this._element,e),this._defs=document.createElementNS("http://www.w3.org/2000/svg","defs"),this._element.appendChild(this._defs)},B.prototype.drawQR=function(g){return t=this,a=function(){var n,e,o,i,s,r,a,h,l,d,_,t,c=this;return r=this,a=function(t){switch(t.label){case 0:return n=g.getModuleCount(),i=Math.min(this._options.width,this._options.height)-2*this._options.margin,e=Math.floor(i/n),o={hideXDots:0,hideYDots:0,width:0,height:0},this._qr=g,this._options.image?[4,this.loadImage()]:[3,2];case 1:if(t.sent(),!this._image)return[2];s=this._options,i=s.imageOptions,s=s.qrOptions,s=i.imageSize*f[s.errorCorrectionLevel],s=Math.floor(s*n*n),o=p({originalWidth:this._image.width,originalHeight:this._image.height,maxHiddenDots:s,maxHiddenAxisDots:n-14,dotSize:e}),t.label=2;case 2:return this.clear(),this.drawBackground(),this.drawDots(function(t,e){var i,s,r;return!(c._options.imageOptions.hideBackgroundDots&&t>=(n-o.hideXDots)/2&&t<(n+o.hideXDots)/2&&e>=(n-o.hideYDots)/2&&e<(n+o.hideYDots)/2||null!==(i=M[t])&&void 0!==i&&i[e]||null!==(s=M[t-n+7])&&void 0!==s&&s[e]||null!==(s=M[t])&&void 0!==s&&s[e-n+7]||null!==(r=I[t])&&void 0!==r&&r[e]||null!==(r=I[t-n+7])&&void 0!==r&&r[e]||null!==(t=I[t])&&void 0!==t&&t[e-n+7])}),this.drawCorners(),this._options.image&&this.drawImage({width:o.width,height:o.height,count:n,dotSize:e}),[2]}},_={label:0,sent:function(){if(1&d[0])throw d[1];return d[1]},trys:[],ops:[]},t={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function u(e){return function(t){return function(e){if(h)throw new TypeError("Generator is already executing.");for(;_;)try{if(h=1,l&&(d=2&e[0]?l.return:e[0]?l.throw||((d=l.return)&&d.call(l),0):l.next)&&!(d=d.call(l,e[1])).done)return d;switch(l=0,(e=d?[2&e[0],d.value]:e)[0]){case 0:case 1:d=e;break;case 4:return _.label++,{value:e[1],done:!1};case 5:_.label++,l=e[1],e=[0];continue;case 7:e=_.ops.pop(),_.trys.pop();continue;default:if(!((d=0<(d=_.trys).length&&d[d.length-1])||6!==e[0]&&2!==e[0])){_=0;continue}if(3===e[0]&&(!d||e[1]>d[0]&&e[1]<d[3])){_.label=e[1];break}if(6===e[0]&&_.label<d[1]){_.label=d[1],d=e;break}if(d&&_.label<d[2]){_.label=d[2],_.ops.push(e);break}d[2]&&_.ops.pop(),_.trys.pop();continue}e=a.call(r,_)}catch(t){e=[6,t],l=0}finally{h=d=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},o=void 0,new(o=Promise)(function(i,e){function s(t){try{n(a.next(t))}catch(t){e(t)}}function r(t){try{n(a.throw(t))}catch(t){e(t)}}function n(t){var e;t.done?i(t.value):((e=t.value)instanceof o?e:new o(function(t){t(e)})).then(s,r)}n((a=a.apply(t,[])).next())});var t,o,a},B.prototype.drawBackground=function(){var t,e=this._element,i=this._options;e&&(e=null===(t=i.backgroundOptions)||void 0===t?void 0:t.gradient,t=null===(t=i.backgroundOptions)||void 0===t?void 0:t.color,(e||t)&&this._createColor({options:e,color:t,additionalRotation:0,x:0,y:0,height:i.height,width:i.width,name:"background-color"}))},B.prototype.drawDots=function(r){var e,n=this;if(!this._qr)throw"QR code is not defined";var t=this._options,o=this._qr.getModuleCount();if(o>t.width||o>t.height)throw"The canvas is too small.";var i=Math.min(t.width,t.height)-2*t.margin,a=Math.floor(i/o),h=Math.floor((t.width-o*a)/2),l=Math.floor((t.height-o*a)/2),d=new x({svg:this._element,type:t.dotsOptions.type});this._dotsClipPath=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._dotsClipPath.setAttribute("id","clip-path-dot-color"),this._defs.appendChild(this._dotsClipPath),this._createColor({options:null===(i=t.dotsOptions)||void 0===i?void 0:i.gradient,color:t.dotsOptions.color,additionalRotation:0,x:h,y:l,height:o*a,width:o*a,name:"dot-color"});for(var _=this,s=0;s<o;s++)!function(s){for(var t=0;t<o;t++)!function(i){(!r||r(s,i))&&null!==(e=_._qr)&&void 0!==e&&e.isDark(s,i)&&(d.draw(h+s*a,l+i*a,a,function(t,e){return!(s+t<0||i+e<0||o<=s+t||o<=i+e)&&!(r&&!r(s+t,i+e))&&!!n._qr&&n._qr.isDark(s+t,i+e)}),d._element&&_._dotsClipPath&&_._dotsClipPath.appendChild(d._element))}(t)}(s)},B.prototype.drawCorners=function(){var f=this;if(!this._qr)throw"QR code is not defined";var t=this._element,w=this._options;if(!t)throw"Element code is not defined";var m=this._qr.getModuleCount(),t=Math.min(w.width,w.height)-2*w.margin,v=Math.floor(t/m),y=7*v,b=3*v,S=Math.floor((w.width-m*v)/2),C=Math.floor((w.height-m*v)/2);[[0,0,0],[1,0,Math.PI/2],[0,1,-Math.PI/2]].forEach(function(t){var e,r,i,n,s=t[0],o=t[1],a=t[2],h=S+s*v*(m-7),l=C+o*v*(m-7),d=f._dotsClipPath,_=f._dotsClipPath;if((null!==(t=w.cornersSquareOptions)&&void 0!==t&&t.gradient||null!==(t=w.cornersSquareOptions)&&void 0!==t&&t.color)&&((d=document.createElementNS("http://www.w3.org/2000/svg","clipPath")).setAttribute("id","clip-path-corners-square-color-"+s+"-"+o),f._defs.appendChild(d),f._cornersSquareClipPath=f._cornersDotClipPath=_=d,f._createColor({options:null===(e=w.cornersSquareOptions)||void 0===e?void 0:e.gradient,color:null===(e=w.cornersSquareOptions)||void 0===e?void 0:e.color,additionalRotation:a,x:h,y:l,height:y,width:y,name:"corners-square-color-"+s+"-"+o})),null!==(e=w.cornersSquareOptions)&&void 0!==e&&e.type){var c=new R({svg:f._element,type:w.cornersSquareOptions.type});c.draw(h,l,y,a),c._element&&d&&d.appendChild(c._element)}else for(var u=new x({svg:f._element,type:w.dotsOptions.type}),g=0;g<M.length;g++)!function(s){for(var t=0;t<M[s].length;t++)!function(i){if(null===(r=M[s])||void 0===r||!r[i])return;u.draw(h+s*v,l+i*v,v,function(t,e){return!(null===(t=M[s+t])||void 0===t||!t[i+e])}),u._element&&d&&d.appendChild(u._element)}(t)}(g);if((null!==(c=w.cornersDotOptions)&&void 0!==c&&c.gradient||null!==(i=w.cornersDotOptions)&&void 0!==i&&i.color)&&((_=document.createElementNS("http://www.w3.org/2000/svg","clipPath")).setAttribute("id","clip-path-corners-dot-color-"+s+"-"+o),f._defs.appendChild(_),f._cornersDotClipPath=_,f._createColor({options:null===(i=w.cornersDotOptions)||void 0===i?void 0:i.gradient,color:null===(i=w.cornersDotOptions)||void 0===i?void 0:i.color,additionalRotation:a,x:h+2*v,y:l+2*v,height:b,width:b,name:"corners-dot-color-"+s+"-"+o})),null!==(o=w.cornersDotOptions)&&void 0!==o&&o.type){o=new T({svg:f._element,type:w.cornersDotOptions.type});o.draw(h+2*v,l+2*v,b,a),o._element&&_&&_.appendChild(o._element)}else for(var u=new x({svg:f._element,type:w.dotsOptions.type}),p=function(s){for(var t=0;t<I[s].length;t++)!function(i){if(null===(n=I[s])||void 0===n||!n[i])return;u.draw(h+s*v,l+i*v,v,function(t,e){return!(null===(t=I[s+t])||void 0===t||!t[i+e])}),u._element&&_&&_.appendChild(u._element)}(t)},g=0;g<I.length;g++)p(g)})},B.prototype.loadImage=function(){var r=this;return new Promise(function(t,e){var i=r._options,s=new Image;if(!i.image)return e("Image is not defined");"string"==typeof i.imageOptions.crossOrigin&&(s.crossOrigin=i.imageOptions.crossOrigin),(r._image=s).onload=function(){t()},s.src=i.image})},B.prototype.drawImage=function(t){var e=t.width,i=t.height,s=t.count,r=t.dotSize,n=this._options,o=Math.floor((n.width-s*r)/2),t=Math.floor((n.height-s*r)/2),o=o+n.imageOptions.margin+(s*r-e)/2,s=t+n.imageOptions.margin+(s*r-i)/2,r=e-2*n.imageOptions.margin,e=i-2*n.imageOptions.margin,i=document.createElementNS("http://www.w3.org/2000/svg","image");i.setAttribute("href",n.image||""),i.setAttribute("x",String(o)),i.setAttribute("y",String(s)),i.setAttribute("width",r+"px"),i.setAttribute("height",e+"px"),this._element.appendChild(i)},B.prototype._createColor=function(t){var s,e,i=t.options,r=t.color,n=t.additionalRotation,o=t.x,a=t.y,h=t.height,l=t.width,d=t.name,_=h<l?l:h,c=document.createElementNS("http://www.w3.org/2000/svg","rect");c.setAttribute("x",String(o)),c.setAttribute("y",String(a)),c.setAttribute("height",String(h)),c.setAttribute("width",String(l)),c.setAttribute("clip-path","url('#clip-path-"+d+"')"),i?("radial"===i.type?((s=document.createElementNS("http://www.w3.org/2000/svg","radialGradient")).setAttribute("id",d),s.setAttribute("gradientUnits","userSpaceOnUse"),s.setAttribute("fx",String(o+l/2)),s.setAttribute("fy",String(a+h/2)),s.setAttribute("cx",String(o+l/2)),s.setAttribute("cy",String(a+h/2)),s.setAttribute("r",String(_/2))):(t=e=o+l/2,o=_=a+h/2,0<=(n=((a=((i.rotation||0)+n)%(2*Math.PI))+2*Math.PI)%(2*Math.PI))&&n<=.25*Math.PI||n>1.75*Math.PI&&n<=2*Math.PI?(e-=l/2,_-=h/2*Math.tan(a),t+=l/2,o+=h/2*Math.tan(a)):n>.25*Math.PI&&n<=.75*Math.PI?(_-=h/2,e-=l/2/Math.tan(a),o+=h/2,t+=l/2/Math.tan(a)):n>.75*Math.PI&&n<=1.25*Math.PI?(e+=l/2,_+=h/2*Math.tan(a),t-=l/2,o-=h/2*Math.tan(a)):n>1.25*Math.PI&&n<=1.75*Math.PI&&(_+=h/2,e+=l/2/Math.tan(a),o-=h/2,t-=l/2/Math.tan(a)),(s=document.createElementNS("http://www.w3.org/2000/svg","linearGradient")).setAttribute("id",d),s.setAttribute("gradientUnits","userSpaceOnUse"),s.setAttribute("x1",String(Math.round(e))),s.setAttribute("y1",String(Math.round(_))),s.setAttribute("x2",String(Math.round(t))),s.setAttribute("y2",String(Math.round(o)))),i.colorStops.forEach(function(t){var e=t.offset,i=t.color,t=document.createElementNS("http://www.w3.org/2000/svg","stop");t.setAttribute("offset",100*e+"%"),t.setAttribute("stop-color",i),s.appendChild(t)}),c.setAttribute("fill","url('#"+d+"')"),this._defs.appendChild(s)):r&&c.setAttribute("fill",r),this._element.appendChild(c)},B),O="canvas";function B(t){this._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("width",String(t.width)),this._element.setAttribute("height",String(t.height)),this._defs=document.createElementNS("http://www.w3.org/2000/svg","defs"),this._element.appendChild(this._defs),this._options=t}for(var F={},z=0;z<=40;z++)F[z]=z;const H={type:O,width:300,height:300,data:"",margin:0,qrOptions:{typeNumber:F[0],mode:void 0,errorCorrectionLevel:"Q"},imageOptions:{hideBackgroundDots:!0,imageSize:.4,crossOrigin:void 0,margin:0},dotsOptions:{type:"square",color:"#000"},backgroundOptions:{color:"#fff"}};var W=function(){return(W=Object.assign||function(t){for(var e,i=1,s=arguments.length;i<s;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function G(t){t=W({},t);if(!t.colorStops||!t.colorStops.length)throw"Field 'colorStops' is required in gradient";return t.rotation?t.rotation=Number(t.rotation):t.rotation=0,t.colorStops=t.colorStops.map(function(t){return W(W({},t),{offset:Number(t.offset)})}),t}function U(t){t=W({},t);return t.width=Number(t.width),t.height=Number(t.height),t.margin=Number(t.margin),t.imageOptions=W(W({},t.imageOptions),{hideBackgroundDots:Boolean(t.imageOptions.hideBackgroundDots),imageSize:Number(t.imageOptions.imageSize),margin:Number(t.imageOptions.margin)}),t.margin>Math.min(t.width,t.height)&&(t.margin=Math.min(t.width,t.height)),t.dotsOptions=W({},t.dotsOptions),t.dotsOptions.gradient&&(t.dotsOptions.gradient=G(t.dotsOptions.gradient)),t.cornersSquareOptions&&(t.cornersSquareOptions=W({},t.cornersSquareOptions),t.cornersSquareOptions.gradient&&(t.cornersSquareOptions.gradient=G(t.cornersSquareOptions.gradient))),t.cornersDotOptions&&(t.cornersDotOptions=W({},t.cornersDotOptions),t.cornersDotOptions.gradient&&(t.cornersDotOptions.gradient=G(t.cornersDotOptions.gradient))),t.backgroundOptions&&(t.backgroundOptions=W({},t.backgroundOptions),t.backgroundOptions.gradient&&(t.backgroundOptions.gradient=G(t.backgroundOptions.gradient))),t}function q(t,o,a,h){return new(a=a||Promise)(function(i,e){function s(t){try{n(h.next(t))}catch(t){e(t)}}function r(t){try{n(h.throw(t))}catch(t){e(t)}}function n(t){var e;t.done?i(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(s,r)}n((h=h.apply(t,o||[])).next())})}function j(i,s){var r,n,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&e[0]?n.return:e[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,e[1])).done)return o;switch(n=0,(e=o?[2&e[0],o.value]:e)[0]){case 0:case 1:o=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,n=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((o=0<(o=a.trys).length&&o[o.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){a.label=e[1];break}if(6===e[0]&&a.label<o[1]){a.label=o[1],o=e;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(e);break}o[2]&&a.ops.pop(),a.trys.pop();continue}e=s.call(i,a)}catch(t){e=[6,t],n=0}finally{r=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}var e=i(192),Y=i.n(e);const Q=(Z._clearContainer=function(t){t&&(t.innerHTML="")},Z.prototype._getQRStylingElement=function(s){return void 0===s&&(s="png"),q(this,void 0,void 0,function(){var e,i;return j(this,function(t){switch(t.label){case 0:if(!this._qr)throw"QR code is empty";return"svg"!==s.toLowerCase()?[3,2]:(e=void 0,[4,this._svg&&this._svgDrawingPromise?(e=this._svg,this._svgDrawingPromise):(e=new N(this._options)).drawQR(this._qr)]);case 1:return t.sent(),[2,e];case 2:return i=void 0,[4,this._canvas&&this._canvasDrawingPromise?(i=this._canvas,this._canvasDrawingPromise):(i=new v(this._options)).drawQR(this._qr)];case 3:return t.sent(),[2,i]}})})},Z.prototype.update=function(t){Z._clearContainer(this._container),this._options=t?U(h(this._options,t)):this._options,this._options.data&&(this._qr=Y()(this._options.qrOptions.typeNumber,this._options.qrOptions.errorCorrectionLevel),this._qr.addData(this._options.data,this._options.qrOptions.mode||function(t){switch(!0){case/^[0-9]*$/.test(t):return"Numeric";case/^[0-9A-Z $%*+\-./:]*$/.test(t):return"Alphanumeric";default:return"Byte"}}(this._options.data)),this._qr.make(),this._options.type===O?(this._canvas=new v(this._options),this._canvasDrawingPromise=this._canvas.drawQR(this._qr),this._svgDrawingPromise=void 0,this._svg=void 0):(this._svg=new N(this._options),this._svgDrawingPromise=this._svg.drawQR(this._qr),this._canvasDrawingPromise=void 0,this._canvas=void 0),this.append(this._container))},Z.prototype.append=function(t){if(t){if("function"!=typeof t.appendChild)throw"Container should be a single DOM node";this._options.type===O?this._canvas&&t.appendChild(this._canvas.getCanvas()):this._svg&&t.appendChild(this._svg.getElement()),this._container=t}},Z.prototype.getRawData=function(s){return void 0===s&&(s="png"),q(this,void 0,void 0,function(){var e,i;return j(this,function(t){switch(t.label){case 0:if(!this._qr)throw"QR code is empty";return[4,this._getQRStylingElement(s)];case 1:return e=t.sent(),"svg"===s.toLowerCase()?(i=new XMLSerializer,i=i.serializeToString(e.getElement()),[2,new Blob(['<?xml version="1.0" standalone="no"?>\r\n'+i],{type:"image/svg+xml"})]):[2,new Promise(function(t){return e.getCanvas().toBlob(t,"image/"+s,1)})]}})})},Z.prototype.download=function(n){return q(this,void 0,void 0,function(){var e,i,s,r;return j(this,function(t){switch(t.label){case 0:if(!this._qr)throw"QR code is empty";return e="png",i="qr","string"==typeof n?(e=n,console.warn("Extension is deprecated as argument for 'download' method, please pass object { name: '...', extension: '...' } as argument")):"object"==typeof n&&null!==n&&(n.name&&(i=n.name),n.extension&&(e=n.extension)),[4,this._getQRStylingElement(e)];case 1:return s=t.sent(),"svg"===e.toLowerCase()?(r=new XMLSerializer,r='<?xml version="1.0" standalone="no"?>\r\n'+r.serializeToString(s.getElement()),l("data:image/svg+xml;charset=utf-8,"+encodeURIComponent(r),i+".svg")):l(s.getCanvas().toDataURL("image/"+e),i+"."+e),[2]}})})},Z);function Z(t){this._options=t?U(h(H,t)):H,this.update()}}},s={};function r(t){if(s[t])return s[t].exports;var e=s[t]={exports:{}};return i[t](e,e.exports,r),e.exports}return r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var i in e)r.o(e,i)&&!r.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r(796)})().default}(Rl={exports:{}}),Rl.exports),Al=(El=$l)&&El.__esModule&&Object.prototype.hasOwnProperty.call(El,"default")?El.default:El;$l.QRCodeStyling;class Ll extends Nn{_doPrepare(t,e){const i=e[Zt]=new Al({qrOptions:{errorCorrectionLevel:A.Q}});i.append(e)}_getStyleTarget(t){}_doMeasure(t,e,i,s){const r=this._model,n=e[Zt];var o=this._value,a=null==o?"":String(o),{w:e,h:o}=r.getQrcodeSize();if(n.update({type:r.output||"canvas",width:e,height:o,data:a,dotsOptions:{},backgroundOptions:{}}),Ve.TESTING)return{width:e,height:o}}_doRender(t,e,i,s){}_doUnprepare(t,e){e[Zt]=null}setValue(t,e){}}Ll.SPAN_CLASS="dlist-qrcode-span";class Dl extends Ll{_doPrepare(t,e){e[Zt]=null}_getStyleTarget(t){return t.style}_doMeasure(t,e,i,s){var{w:r,h:n}=this._model.getQrcodeSize();return{width:r,height:n}}}class kl extends In{_doPrepare(t,e){e[Yt]=this.$_buildGroup(t,this._model,e)}_getStyleTarget(t){return t.style}_doMeasure(o,a,t,e){var i=this._model;const h=i.values,l=h?h.length:0,d=a[Yt].firstElementChild;if(this._setClass(d,o.row),this._setContext(o,a,i),0<l){const _=o.value(),c=i.labels||[],u=i.labelWrap&&!isNaN(o._explicitWidth)?"pre-wrap":"pre",g=i.boxGap+"px",p=i.itemGap+"px";h.forEach((t,e)=>{const i=d.children[e],s=i.firstElementChild,r=i.children[1];var n=a.id+"-"+e;u&&Re.setWidth(i,o._explicitWidth),s.checked=t===_,s.id=n,s.name=a.id,s.style.marginRight=g,r.style.whiteSpace=u,r.textContent=c[e]||h[e],r.htmlFor=n,e<l-1&&(i.style.marginBottom=p)})}return{width:a.offsetWidth,height:a.offsetHeight}}_doRender(t,e,i,s){e[Yt]}_doUnprepare(t,e){e[Yt]=null}setValue(t,e){}$_buildGroup(t,e,i){let s=i.getElementsByClassName(kl.CLASS_NAME)[0],r;s?r=s.firstElementChild:(s=t.doc.createElement("div"),s.className=kl.CLASS_NAME,r=t.doc.createElement("div"),r.className=kl.GROUP_CLASS,Object.assign(r.style,{display:"flex",flexDirection:"column"}),s.appendChild(r),i.appendChild(s));for(var n=e.valueCount;r.children.length<n;){const o=t.doc.createElement("div"),a=t.doc.createElement("input"),h=t.doc.createElement("label");Object.assign(o.style,{display:"flex"}),a.className=kl.BOX_CLASS,a.type="radio",Object.assign(a.style,{flex:"none"}),h.className=kl.LABEL_CLASS,Object.assign(h.style,{flexGrow:1}),o.appendChild(a),o.appendChild(h),r.appendChild(o)}for(;r.children.length>n;)r.lastElementChild.remove();return s}}kl.CLASS_NAME="dlist-radiogroup",kl.GROUP_CLASS="dlist-radiogroup-group",kl.BOX_CLASS="dlist-radiogroup-box",kl.LABEL_CLASS="dlist-radiogroup-label";class Tl extends cl{_measureBox(t,e){super._measureBox(t,e);var i=this._model;e.name=(i.group||"_dlist_radio_group_")+t.row}setValue(t,e){}_getBoxType(){return"radio"}_getBoxClass(){return Tl.BOX_CLASS}}Tl.BOX_CLASS="dlist-radio-box";class Pl extends In{_doPrepare(t,e){e[Yt]=this.$_getGroup(t,e)}_getStyleTarget(t){}_doMeasure(t,e,i,s){return{width:0,height:0}}_doRender(t,e,i,s){}_doUnprepare(t,e){}setValue(t,e){}$_getGroup(t,e){let i=e.getElementsByClassName(Pl.GROUP_CLASS)[0];return i||(i=t.doc.createElement("div"),i.className=Pl.GROUP_CLASS,e.appendChild(i)),i}}Pl.GROUP_CLASS="dlist-rating-group";class Ml extends In{_doDisposeContent(t){t.getElementsByClassName(Ml.BOX_CLASS)[0].onchange=null}_doPrepare(t,e){e[jt]=this.$_getSelect(t,e)}_getStyleTarget(t){}_doMeasure(t,e,i,s){const r=this._model,n=e[jt];let o=r.boxWidth;if(this._setClass(n,t.row),isNaN(o)&&!isNaN(t._explicitWidth)&&(o=t._explicitWidth*r.getFitWidth()),isNaN(o)||Re.setWidth(n,o),this._setContext(t,n,r),r.itemsChanged&&(Re.clearChildren(n),r.isGrouped?this.$_buildGroups(t.doc,r,n):this.$_buildOptions(t.doc,r,n)),n.value=t.value(),Ve.TESTING){const o=n.offsetWidth;return{width:o,height:n.offsetHeight}}}_doRender(t,e,i,s){}_doUnprepare(t,e){e[jt]=null}setValue(t,e){}$_getSelect(t,e){let i=e.getElementsByClassName(Ml.BOX_CLASS)[0];if(!i){const s=t.doc.createElement("div");i=t.doc.createElement("select"),i.className=Ml.BOX_CLASS,i.onchange=t=>{var e={id:i.id,field:i[Bt],selectedIndex:i.selectedIndex,selectedValue:i.value};console.log("select changed",e,t)},s.appendChild(i),e.appendChild(s)}return i}$_buildOptions(e,t,i){var s=t._values,r=s?s.length:0;if(0<r){var n=t._labels,o=n?n.length:0;for(let t=0;t<r;t++){const a=e.createElement("option");a.value=s[t],a.text=(o>t?n:s)[t],i.add(a)}}}$_buildGroups(e,t,i){var s,t=t._groups;t.length;for(s of t){var r=s.values,n=s.labels,o=r?r.length:0,a=n?n.length:0;const h=e.createElement("optgroup");if(h.label=s.group,0<o){for(let t=0;t<o;t++){const l=e.createElement("option");l.value=r[t],l.text=(a>t?n:r)[t],h.appendChild(l)}i.add(h)}}}}Ml.BOX_CLASS="dlist-select-box";class Il extends In{_doDisposeContent(){this._shape=a.destroy(this._shape)}_doPrepare(t,e){this._shape=this.$_getShape(t,e)}_getStyleTarget(t){return this._shape&&this._shape.styleTarget()}_doMeasure(t,e,i,s){const r=this.model();var n,o=r.getShapeWidth()||t._explicitWidth,a=r.getShapeHeight()||t._explicitHeight;this._shape&&(n=this._shape.dom(),this._setClass(n,t.row),t=r.hint||"",this._shape.resize(o,a),Re.resize(n,o,a),Re.setAttr(n,"aria-label",t),Re.setAttr(n,"aria-hidden",r.decorative||!t))}_doRender(t,e,i,s){}_doUnprepare(t,e){e[Xt]=null}setValue(t,e){}$_getShape(t,e){const i=t.manager().owner().shapes();var s=this._model.getShapeName();const r=e.getElementsByClassName(Il.SVG_CLASS)[0];let n;return r&&e[Wt]===s?r&&(n=i.createStock(r,s,Il.SVG_CLASS)||i.createCustom(s,r,null)):(r&&r.remove(),n=i.createStock(t.doc,s,Il.SVG_CLASS)||i.createCustom(s,null,null),n&&(n instanceof Ms&&n.setShape(i.getCustom(s)),n.appendTo(e),e[Wt]=s,this._shape=n)),n}}Il.SVG_CLASS="dlist-shape-svg";class Nl extends Il{_doPrepare(t,e){this._shape=e[Xt]=null}_getStyleTarget(t){return t.style}_doMeasure(t,e,i,s){const r=this.model();return{width:r.getShapeWidth()||t._explicitWidth,height:r.getShapeHeight()||t._explicitHeight}}}class Ol extends Bn{_doMeasure(t,e,i,s){var r=this._model,n=this._values=this._getValues(t,r.baseValue);let o=he(r.chartWidth,t._explicitWidth),a=he(r.chartHeight,t._explicitHeight);return this._setClass(this._svg.svg,t.row),isNaN(o)?o=this._measureChart(t,this._svg,n.values):this._wPoint=NaN,isNaN(a)&&(a=Math.min(Ol.DEF_HEIGHT,s)),{width:o,height:a}}_doRender(t,e,i,s){this._svg.setSize(i,s),this._svg.clear(),this._values.values.length&&this._renderChart(t,this._svg,this._values,i,s)}setValue(t,e){}_measureChart(t,e,i){return(this._wPoint=Math.max(1,he(this._model.pointWidth,1)))*i.length}}Ol.DEF_HEIGHT=30;class Bl extends Ol{_getSvgClass(){return Bl.SVG_CLASS}_renderChart(t,i,s,e,r){var n=this._model,o=s.values,a=s.hasBelow,h=he(n.maxValue,s.max),l=o.length,d=he(this._wPoint,e/l),_=d*this._model.pointSize;let c=0;if(!a){let e=he(n.minValue,n.baseValue);isNaN(e)&&(e=s.min,0<n.minPadding&&(e-=(h-e)*n.minPadding));for(let t=0;t<l;t++){var u=o[t],g=c+d/2,p=r-(o[t]-e)*r/(h-e),p=i.rect(g-_/2,p,_,r,null).style;0===t&&n.firstStyle&&Object.assign(p,n.firstStyle),t===l-1&&n.lastStyle&&Object.assign(p,n.lastStyle),u===s.max&&n.maxStyle&&Object.assign(p,n.maxStyle),u===s.min&&n.minStyle&&Object.assign(p,n.minStyle),c+=d}}}}Bl.SVG_CLASS="dlist-sparkbar-svg";class Fl extends Ol{_getSvgClass(){return Fl.SVG_CLASS}_renderChart(t,e,i,s,r){var n=this._model,o=i.values,a=he(n.maxValue,i.max),h=o.length,l=he(this._wPoint,s/h);const d=[];let _=0,c=n.minValue;isNaN(c)&&(c=i.min,0<n.minPadding&&(c-=(a-c)*n.minPadding));for(let t=0;t<h;t++){var u=_+l/2,g=r-(o[t]-c)*r/(a-c);d.push(u,g),_+=l}e.polyline(d)}}Fl.SVG_CLASS="dlist-sparkline-svg";class zl extends Bl{_doPrepare(t,e){}_getStyleTarget(t){return t.style}_doMeasure(t,e,i,s){return{width:10,height:10}}_doRender(t,e,i,s){}}class Hl extends Fl{_doPrepare(t,e){}_getStyleTarget(t){return t.style}_doMeasure(t,e,i,s){return{width:10,height:10}}_doRender(t,e,i,s){}}class Wl extends Bn{_getSvgClass(){return Wl.SVG_CLASS}_doMeasure(t,e,i,s){const r=this.model();var n=t._explicitWidth||r.getSvgWidth(),o=t._explicitHeight||r.getSvgHeight();if(this._svg){const h=this._svg,l=r.shapes;var a=h.svg;h.clear(),Array.isArray(l)?l.forEach(t=>h.path(t)):l&&h.path(l),h.setViewSize(r.getVboxWidth(),r.getVboxHeight()),h.setSize(r.getSvgWidth(),r.getSvgHeight()),this._setClass(a,t.row);t=r.hint||"";Re.resize(a,n,o),Re.setAttr(a,"aria-label",t),Re.setAttr(a,"aria-hidden",r.decorative||!t)}}_doRender(t,e,i,s){}setValue(t,e){}}Wl.SVG_CLASS="dlist-svg-svg";class Gl extends On{getValue(t){t=t.getElementsByClassName(Gl.BOX_CLASS)[0];return t instanceof HTMLInputElement&&!!t.checked}_doDisposeContent(t){t=t.getElementsByClassName(Gl.CLASS_NAME)[0];if(t){const e=t.firstElementChild.children[1];e.onclick=null}}_doPrepare(t,e){e[Yt]=this.$_getSwitch(t,e)}_getStyleTarget(t){}_doMeasure(t,e,i,s){const r=this._model,n=e[Yt].firstElementChild,o=n.firstElementChild,a=n.children[1];var h=q.pickNum(r.boxSize,Gl.DEF_SIZE),l=1.7*h,e=h;if(this._setClass(n,t.row),this._setContext(t,o,r),a.id=r.id+"_span",o.checked=r.isTrue(this._value),n.style.setProperty("--switch-size",h+"px"),n.style.setProperty("--switch-on",.7*h+"px"),r.style&&r.style.backgroundColor&&n.style.setProperty("--switch-color",r.style.backgroundColor),a.style.width=l+"px",a.style.height=e+"px",Ve.TESTING)return{width:l,height:e}}_doRender(t,e,i,s){}_doUnprepare(t,e){e[Yt]=null}setValue(t,e){}$_getSwitch(t,e){let i=e.getElementsByClassName(Gl.CLASS_NAME)[0];if(!i){i=t.doc.createElement("div"),i.className=Gl.CLASS_NAME;const s=t.doc.createElement("div");s.className=Gl.SWITCH_CLASS,Object.assign(s.style,{});const r=t.doc.createElement("input");r.className=Gl.BOX_CLASS,r.type="checkbox",r.style.display="none";const n=t.doc.createElement("div");n.className=Gl.SPAN_CLASS,Object.assign(n.style,{position:"relative",display:"block"}),n.onclick=function(t){const e=t.target.parentElement.getElementsByClassName(Gl.BOX_CLASS)[0];e.checked=!e.checked},n[Kt]=!0,s.appendChild(r),s.appendChild(n),i.appendChild(s),e.appendChild(i)}return i}}Gl.CLASS_NAME="dlist-switch",Gl.SWITCH_CLASS="dlist-switch-switch",Gl.BOX_CLASS="dlist-switch-box",Gl.SPAN_CLASS="dlist-switch-span",Gl.SWITCH_SIZE="--dl-switch-size",Gl.SWITCH_COLOR="--dl-switch-color",Gl.DEF_SIZE=24;class Ul extends vl{_doPrepare(t,e){e[Gt]=this.$_getLabel(t,e),super._doPrepare(t,e)}$_getLabel(t,e){let i=e.getElementsByClassName(Ul.LABEL_CLASS)[0];return i||(i=t.createElement("div"),i.className=Ul.LABEL_CLASS,t=t.doc.createElement("label"),i.appendChild(t),e.appendChild(i)),i}}Ul.LABEL_CLASS="dlist-label-label";class ql extends In{_doPrepare(t,e){e[Xt]=this.$_getShape(t,e)}_getStyleTarget(t){return t[Xt].style}_doMeasure(t,e,i,s){var r=this.model();const n=e[Xt],o=n.firstElementChild;this._setClass(o,t.row),o.textContent=r.letter,o.setAttribute("x",50+100*(r.offsetX||0)+"%"),o.setAttribute("y",50+100*(r.offsetY||0)+"%");r=o.getBoundingClientRect();if(n.style.width=r.width+"px",n.style.height=r.height+"px",Ve.TESTING)return{width:20,height:30}}_doRender(t,e,i,s){}_doUnprepare(t,e){e[Xt]=null}setValue(t,e){}$_getShape(t,e){let i=e.getElementsByClassName(ql.SVG_CLASS)[0];if(!i){const s=t.doc.createElementNS(Fi,"text");s.setAttribute("x","50%"),s.setAttribute("y","50%"),s.setAttribute("dominant-baseline","middle"),s.setAttribute("text-anchor","middle"),i=t.doc.createElementNS(Fi,"svg"),i.classList.add(ql.SVG_CLASS),i.appendChild(s),e.appendChild(i)}return i}}ql.SVG_CLASS="dlist-letter-svg";class jl extends In{_doPrepare(t,e){e[Gt]=this.$_getSpan(t,e)}_getStyleTarget(t){return t[Gt].style}_doMeasure(t,e,i,s){var r=this.model(),n=this._wLine=r.thickness||0,o=e[Gt];const a=t.layout._parent;e=this._horz="horizontal"===r.dir||"vertical"!==r.dir&&a.canContainVspace(),i=e?he(t._explicitWidth,i):he(t._explicitWidth,n),s=e?he(t._explicitHeight,n):he(t._explicitHeight,s);const h=o.style;return this._setClass(o,t.row),h.borderWidth=e?`0 0 ${n}px 0`:`0 ${n}px 0 0`,h.borderColor=r.lineColor,h.borderStyle=r.lineStyle,{width:i,height:s}}_doRender(t,e,i,s){var r=e[Gt],e=this._wLine;this._horz?s!==e&&(Re.setHeight(r,e),Re.moveY(r,(s-e)/2)):i!==e&&(Re.setWidth(r,e),Re.moveX(r,(i-e)/2))}_doUnprepare(t,e){e[Gt]=null}setValue(t,e){}$_getSpan(t,e){let i=e.getElementsByClassName(jl.SPAN_CLASS)[0];return i||(i=t.createElement("span"),i.className=jl.SPAN_CLASS,Object.assign(i.style,{display:"block",position:"absolute",boxSizing:"border-box",width:"100%",height:"100%"}),e.appendChild(i)),i}}jl.SPAN_CLASS="dlist-line-span";class Yl extends In{_doPrepare(t,e){e[Xt]=this.$_getSVG(t,e)}_getStyleTarget(t){return t[Xt].style}_doMeasure(e,i,t,s){const r=this.model(),n=i[Xt];var o=r.getSpinnerWidth()||e._explicitWidth,a=r.getSpinnerHeight()||e._explicitHeight;if(this._setClass(n,e.row),n){i=n._sts_,e=r.hint||"";let t;t=r.spinnerType===D.SPOKES?"dlist-spinner-spoke":"dlist-spinner-default",i&&n.classList.remove(i),n.classList.add(t),n._sts_=t,Re.setAttr(n,"aria-label",e),Re.setAttr(n,"aria-hidden",!e),Re.clearChildren(n),Re.resize(n,o,a)}}_doRender(t,e,i,s){var r=this.model(),e=e[Xt];Re.resize(e,i,s),Hi.render(t.doc,e,{type:r.spinnerType,width:i,height:s,itemCount:r.itemCount,duration:r.duration})}_doUnprepare(t,e){e[Xt]=null}setValue(t,e){}$_getSVG(t,e){let i=e.getElementsByClassName(Yl.SVG_CLASS)[0];return i||(t=t.doc,i=zi.create(t),i.classList.add(Yl.SVG_CLASS),e.appendChild(i)),i}}Yl.SVG_CLASS="dlist-spinner-svg";class Ql extends Yl{_doMeasure(t,e,i,s){const r=this.model();return{width:r.getSpinnerWidth()||t._explicitWidth,height:r.getSpinnerHeight()||t._explicitHeight}}_doRender(t,e,i,s){}}const Zl="①".charCodeAt(0);class Xl extends Nn{_doPrepare(t,e){e[Gt]=this.$_getDiv(t,e)}_doMeasure(t,e,i,s){const r=this._model,n=t.manager().data(),o=n&&n.fieldByName(r.field||t.layout.getField());var a=o&&n instanceof Co&&n.isSorted(o),h=this._orderVis=this.$_getOrderVisible(t,r);const{span:l,dir:d,order:_}=this.$_getSpans(e);let c=0,u=0;return this._setClass(l,t.row),l.textContent=r.label||(o?o.displayText():r.field||this._value),a?(Re.show(d),d.textContent=a.dir===f.ASCENDING?"↓":"↑",c=d.offsetWidth,h?(Re.show(_),_.textContent=String.fromCharCode(Zl+a.order),c+=_.offsetWidth):Re.hide(_)):(Re.hide(d),Re.hide(_)),c+=l.offsetWidth,u=Math.max(l.offsetHeight,d.offsetHeight),h&&(u=Math.max(u,_.offsetHeight)),{width:this._wSpans=c,height:u}}_doRender(t,e,i,s){var{span:r,dir:n,order:e}=this.$_getSpans(e);let o;switch(t.align()){case c.LEFT:o=0;break;case c.RIGHT:o=Math.max(0,i=this._wSpans);break;default:o=(i-this._wSpans)/2}Re.move(r,o,(s-r.offsetHeight)/2),o+=r.offsetWidth,Re.move(n,o,(s-n.offsetHeight)/2),this._orderVis&&(o+=n.offsetWidth,Re.move(e,o,(s-e.offsetHeight)/2))}_doUnprepare(t,e){e[Gt]=null}setValue(t,e){}$_getDiv(e,t){function i(){const t=e.doc.createElement("span");return t.style.position="absolute",s.appendChild(t),t}let s=t.getElementsByClassName(Xl.FIELD_CLASS)[0];return s||(s=e.createElement("div"),s.className=Xl.FIELD_CLASS,Re.setStyle(i(),{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}),i().className=Xl.DIR_CLASS,i().className=Xl.ORDER_CLASS,t.appendChild(s)),s}$_getSpans(t){t=t[Gt].children;return{span:t[0],dir:t[1],order:t[2]}}$_getOrderVisible(t,e){e=e.orderVisibility;if(e===k.VISIBLE)return!0;if(e===k.HIDDEN)return!1;const i=t.manager().layoutContainer;return!(!i||!i[Xl.IS_FIELD_ORDER_VISIBLE])&&i[Xl.IS_FIELD_ORDER_VISIBLE]()}}Xl.FIELD_CLASS="dlist-field-field",Xl.DIR_CLASS="dlist-field-dir",Xl.ORDER_CLASS="dlist-field-order",Xl.IS_FIELD_ORDER_VISIBLE="isFieldOrderVisible";const Kl={width:"",color:"transparent",borderRadius:"5px"},Jl=Object.assign(Kl,{backgroundColor:"#e0e0e0",backgroundImage:"linear-gradient(90deg, #e0e0e0, #efefef 50%, #e0e0e0)",backgroundRepeat:"no-repeat"});class td extends In{setAnimation(t){this._ani=t}_doPrepare(t,e){e[Gt]=this.$_getDiv(t,e)}_doMeasure(t,e,i,s){this._model;const r=e[Gt];if(this._setClass(r,t.row),r.style.width=isNaN(t._explicitWidth)?"":t._explicitWidth+"px",r.textContent="Hello",Ve.TESTING){const r=e[Gt];return{width:Math.ceil(r.offsetWidth),height:Math.ceil(r.offsetHeight)}}}_doRender(t,e,i,s){const r=e[Gt],n=this._ani;if(r.style.maxWidth=i+"px",n){const r=e[Gt];i=n.container.getBoundingClientRect(),e=r.getBoundingClientRect();r.style.backgroundSize=`50px ${i.height}px`,r.animate([{backgroundPositionX:i.x-e.x+"px"},{backgroundPositionX:i.x+i.width-e.x+"px"}],{duration:he(n.duration,n.duration||1200),iterations:1/0})}}_doUnprepare(t,e){e[Gt]=null}setValue(t,e){}$_getDiv(t,e){let i=e.getElementsByClassName(td.DUMMY_CLASS)[0];return i||(i=t.createElement("div"),i.className=td.DUMMY_CLASS,Object.assign(i.style,vl.SPAN_STYLE),Object.assign(i.style,t.manager().isSkeleton()?Jl:Kl),i.style.display="inline-blick",e.appendChild(i)),i}}td.DUMMY_CLASS="dlist-dummy-dummy";class ed extends Nn{_doPrepare(t,e){e=e[Ut]=this.$_getHtml(t,e);this._setClass(e,t.row)}_getStyleTarget(t){return t[Ut].style}needBounds(){return!0}_doMeasure(t,e,i,s){e=e[Ut];return{width:Math.ceil(e.offsetWidth),height:Math.ceil(e.offsetHeight)}}_doRender(t,e,i,s){}_doUnprepare(t,e){e[Ut]=null}setValue(t,e){}$_getHtml(t,e){var i=this.model();let s=e.getElementsByClassName(ed.HTML_CLASS)[0];s&&s.$_tid_!==i.tid&&(e.removeChild(s),s=null),s||(s=t.doc.createElement("div"),s.className=ed.HTML_CLASS,s.$_tid_=i.tid,e.appendChild(s)),s.style.width="";let r=i.html;return r||!i.domid||(e=t.manager().owner().getTemplateHtml(i.domid))instanceof HTMLElement&&(e=ie.parse(i.useInner?e.innerHTML:e.outerHTML),r=e instanceof ie?t.inflate(e):e),s.innerHTML=r,s}}ed.HTML_CLASS="dlist-html-html";class id extends ml{_initInput(t){t.style.backgroundColor="white"}_prepareInput(t){this._value instanceof Date&&!isNaN(+this._value)?t.style.height="":t.style.height="1.8em"}_getDefaultValue(){return new Date}_textToValue(t){return new Date(t)}setValue(t,e){}}const sd={button:_l,check:cl,date:class extends id{_getInputType(){return"date"}_valueToText(t){return t instanceof Date?t.getFullYear()+"-"+q.pad(t.getMonth()+1)+"-"+q.pad(t.getDate()):t}},datetime:class extends id{_getInputType(){return"datetime-local"}_valueToText(t){return t instanceof Date?t.getFullYear()+"-"+q.pad(t.getMonth()+1)+"-"+q.pad(t.getDate())+"T"+q.pad(t.getHours())+":"+q.pad(t.getMinutes()):t}},dummy:td,field:Xl,gauge:gl,html:ed,icon:pl,image:fl,input:class extends ml{_getInputType(){return"text"}},label:Ul,letter:ql,line:jl,link:Sl,meter:Cl,number:class extends ml{_getInputType(){return"number"}},progress:xl,qrcode:Ll,radio:Tl,radiogroup:kl,rating:Pl,select:Ml,shape:Il,spacer:Fn,sparkbar:Bl,sparkline:Fl,spinner:Yl,svg:Wl,switch:Gl,text:yl,time:class extends id{_getInputType(){return"time"}_valueToText(t){return t instanceof Date?q.pad(t.getHours())+":"+q.pad(t.getMinutes()):t}_textToValue(t){t=t?t.split(":"):null;let e=this._value;return e instanceof Date||(e=new Date),t&&(0<t.length&&e.setHours(+t[0]),1<t.length&&e.setMinutes(+t[1]),2<t.length&&e.setSeconds(+t[2])),e}}};class rd{constructor(){this._impls={},this._renderer=new bi,this._default=new yl(this._renderer)}static setTesting(){sd.qrcode=Dl,sd.shape=Nl,sd.sparkbar=zl,sd.sparkline=Hl,sd.svg=Wl,sd.text=bl,sd.spinner=Ql}setTesting(){this._renderer=new bi,this._default=new bl(this._renderer)}borrow(t){if(t){var e=t.type();const i=this._impls[e]||(this._impls[e]=[]),s=i.pop()||this.$_createImpl(e);if(s)return s.setModel(t),s}return this._default}free(e){if(e!==this._default){const s=e.model();var i=s?s.type():this.$_getType(e.constructor);let t=this._impls[i];t=t||(this._impls[i]=[]),t.push(e)}}$_getType(t){for(var e in sd)if(t===sd[e])return e}$_createImpl(t){return new sd[t]}}class nd extends Vn{constructor(t){super(t.control),this._handler=()=>{this.list.scrollBy(this._delta);var t=this.list.listView().bodyView().itemViews();let e=-1,i;if(this._delta<0){const s=t[0];s instanceof ro&&(e=s.row(),i="start")}else{const r=t[t.length-1];r instanceof ro&&(e=r.row(),i="end")}this._edge=i,this._scrollCallback(t,e,i)},this._body=t.bodyView(),this._vertical=this._body.isVertical()}get list(){return this.control}checkScroll(t,e,i,s){var r=this._vertical?e:t,e=this._vertical?this._body.y:this._body.x,t=e+(this._vertical?this._body.height:this._body.width);let n=0;if(r<=e+7?0<this._body.scrollPos()&&(n=-10):t-7<=r&&(this._body.isScrollEnded()||(n=10)),0!==n)return this._timer||(this._scrollCallback=i,this._endScrollCallback=s,this._delta=n,this._timer=setInterval(this._handler,30)),!0;this.$_ended(!1)}_doEnded(){this.$_ended(!0)}$_ended(t){if(this._timer)try{t&&this._endScrollCallback&&this._endScrollCallback(this._edge)}finally{clearInterval(this._timer),this._timer=void 0,this._scrollCallback=void 0,this._endScrollCallback=void 0}}}class od extends Vn{constructor(t){super(t.control),this._view=t}_doStart(t,e,i,s,r){return this._off=this._view.dom.offsetTop,!0}_doDrag(t,e,i,s,r){r=this._view.calcPosition(r-this._off);return this.control.setScrollIndex(r,0),!0}_doCanceled(){}_canAccept(t,e,i){return!0}_doCompleted(t,e,i){}_doEnded(){}}class ad extends Vn{constructor(t){super(t)}canSwipe(){return!0}_doStart(t,e,i,s,r){return!0}_doDrag(t,e,i,s,r){const n=this.control;return n.isVertical()?Math.abs(i-r)>Math.abs(e-s)&&n.scrollBy(i-r):Math.abs(e-s)>Math.abs(i-r)&&n.scrollBy(e-s),!0}_canAccept(t,e,i){return!0}_doEnded(){this.control.releaseLock()}}class hd extends Vn{constructor(t){super(t)}_showFeedback(t,e){}_moveFeedback(t,e){}_hideFeedback(){}_doStart(t,e,i,s,r){var n=this.control.getBounds(),o=this.control.listView().bodyView().getClientRect();return this._xOff=o.x-n.x,this._yOff=o.y-n.y,!0}_doDrag(t,e,i,s,r){const n=this.control,o=n.listView().bodyView(),a=o.itemViewAt(s-this._xOff,r-this._yOff);if(a)return isNaN(a.gindex())?n.resizeSelection(a.row()):n.resizeSelection(a.gindex()),!0}_doCanceled(){}_canAccept(t,e,i){return!0}_doCompleted(t,e,i){}_doEnded(){}}class ld extends Vn{constructor(t){super(t.control),this._view=t}_doStart(t,e,i,s,r){return!0}_doDrag(t,e,i,s,r){return this._view.scrollBy(s-e),!0}_doCanceled(){}_canAccept(t,e,i){return!0}_doCompleted(t,e,i){}_doEnded(){}}class dd extends Vn{constructor(t){super(t),this._nextPage=-1,this._listView=t.listView()}_doStart(t,e,i,s,r){return this._dx=s-e,this.$_preparePageMove(this._dx),!0}_doDrag(t,e,i,s,r){return this._dx=s-e,this.$_movePage(this._dx),!0}_doCanceled(){this.$_cancelPageMove()}_canAccept(t,e,i){return!0}_doCompleted(t,e,i){this.$_commitPageMove(this._dx)}_doSwipe(t){return this.$_swipePageMove(t)}_doEnded(){this.$_endPageMove(this._dx)}$_preparePageMove(t){const e=this._listView,i=e.bodyView();let s=e.getSpareBody();this._bodyPos=i.x,this.control.lock(()=>{e.addChild(s),s.setPage(e.owner().page()+(t<0?1:-1),i,!1),s.moveX(0)}),this._nextPage=-1,e.pageMoving=!0}$_unpreparePageMove(){const t=this._listView,e=t.bodyView(),i=t.getSpareBody();e.moveX(this._bodyPos),t.removeChild(i),i.setPage(-1),e.$_removeEndEffect(),t.pageMoving=!1,0<=this._nextPage&&(t.owner().setPage(this._nextPage),this.control.updateNow())}$_movePage(t){if(0!==t){const s=this._listView,r=s.owner(),n=s.bodyView(),o=s.getSpareBody();var e=r.page(),i=n.width,t=n.x+t;n.moveX(t),(t=n.x)<this._bodyPos?(o.setPage(e+1,n,!1),o.moveX(t+i+1)):t>this._bodyPos&&(o.setPage(e-1,n,!1),o.moveX(t-i-1))}}$_cancelPageMove(){}$_commitPageMove(t){const e=this._listView;var i=e.bodyView();const s=e.owner();var r=e.getSpareBody(),n=s.page(),o=this._bodyPos,a=i.width;(r.page>n&&r.x<=o+.55*a||r.page<n&&i.x>=o+.45*a)&&(this._nextPage=r.page)}$_swipePageMove(t){const e=this._listView;var i=e.bodyView();const s=e.owner();var r=s.page(),n=this._bodyPos,o=i.width,i=e.getSpareBody().x;return t===u.LEFT&&i<n+o?(this._nextPage=r+1,!0):t===u.RIGHT&&n<i+o?(this._nextPage=r-1,!0):void 0}$_endPageMove(t){const e=this._listView;if(e.canAnimate()){const n=e.getSpareBody(),o=e.bodyView();var i=0<=this._nextPage,s=e.width,r=i?0:n.x<0?-s:s;const a=n.dom.animate([{left:n.x+"px"},{left:r+"px"}],{duration:100,fill:"none"});a.addEventListener("finish",()=>{this.$_unpreparePageMove()}),r=i?o.x<0?-s:s:0,o.dom.animate([{left:o.x+"px"},{left:r+"px"}],{duration:100,fill:"none"})}else this.$_unpreparePageMove()}}class _d extends Vn{constructor(t){super(t),this._nextRow=-1,this._bodyView=t.listView().bodyView(),this._singleView=this._bodyView.singleView(),this._spareView=this._bodyView.spareSingleView()}_doStart(t,e,i,s,r){return this._dx=s-e,this.$_prepareSingleMove(),!0}_doDrag(t,e,i,s,r){return this._dx=s-e,this.$_moveSingle(s-e),!0}_doCanceled(){this.$_cancelMoveSingle()}_canAccept(t,e,i){return!0}_doCompleted(t,e,i){this.$_commitMoveSingle(this._dx)}_doSwipe(t){return this.$_swipeMoveSingle(t)}_doEnded(){this.$_endSingleMove(this._dx)}$_prepareSingleMove(){const t=this._bodyView,e=this._singleView,i=this._spareView;this._singlePos=e.x,this.control.lock(()=>{t.insertBefore(i,e),i.moveX(0),i.setDimmed(1)}),this._nextRow=-1,t.singleMoving=!0}$_unprepareSingleMove(){const t=this._bodyView,e=this._singleView,i=this._spareView;e.moveX(this._singlePos),t.removeChild(i),i.setRow(-1,e),t.$_removeEndEffect(),t.singleMoving=!1,0<=this._nextRow&&(t.owner().setScrollIndex(this._nextRow),e.setRow(this._nextRow,e),this.control.updateNow())}$_moveSingle(t){if(0!==t){const s=this._singleView,r=this._spareView;var e=s.row(),i=s.width,t=s.x+t;s.moveX(t),(t=s.x)<this._singlePos?(r.setRow(e+1,s),r.moveX(t+i+1),r.setDimmed(q.clamp((r.x-.55*i)/(.45*i),0,1))):(r.setRow(e-1,s),r.moveX(t-i-1),r.setDimmed(q.clamp((.45*i-t)/(.45*i),0,1)))}}$_cancelMoveSingle(){}$_getNextRow(){const t=this._singleView,e=this._spareView;var i=t.row(),s=this._singlePos,r=t.width;return e.row()>i&&e.x<=s+.55*r||e.row()<i&&t.x>=s+.45*r?e.row():-1}$_commitMoveSingle(t){this._nextRow=this.$_getNextRow()}$_swipeMoveSingle(t){const e=this._bodyView,i=this._singleView;var s=i.row(),r=this._singlePos,n=i.width,o=e.spareSingleView().x;return i.setDimmed(0),t===u.LEFT&&o<r+n?(this._nextRow=s+1,!0):t===u.RIGHT&&r<o+n?(this._nextRow=s-1,!0):void 0}$_endSingleMove(t){const e=this._bodyView;if(e.canAnimate()){const n=this._singleView,o=this._spareView;var i=0<=this._nextRow,s=e.width,r=i?0:o.x<0?-s:s;n.setDimmed(0),o.dom.style.left=r+"px";const a=o.dom.animate([{left:o.x+"px"},{left:r+"px"}],{duration:100,fill:"none"});a&&(console.log("END ANIMATE"),a.addEventListener("finish",()=>{this.$_unprepareSingleMove()}),r=i?n.x<0?-s:s:0,n.dom.animate([{left:n.x+"px"},{left:r+"px"}],{duration:100,fill:"none"}))}else this.$_unprepareSingleMove()}}class cd extends Vn{constructor(t){super(t.control),this._view=t}_doStart(t,e,i,s,r){return!0}_doDrag(t,e,i,s,r){return this._view.scrollBy(r-i),!0}_doCanceled(){}_canAccept(t,e,i){return!0}_doCompleted(t,e,i){}_doEnded(){this.control.releaseLock()}}let ud="y",gd="top",pd="height",fd="moveY";class wd extends nd{constructor(t){super(t),this._off=0,this._scrolling=!1,this._callback=(e,t,i)=>{i="start"===i;if(this._scrolling=!0,this.$_resetItems(e),0<=t){let t;t=i?e[0]:e[e.length-1],this._body.canMoveTo(this._row,t)?this.$_setTarget(t,i,!0):this.$_swapViews(-1,i,!0)}else this.$_swapViews(-1,i,!0)},this._endCallback=t=>{this._target&&setTimeout(()=>{this.list.makeRowVisible(this._target)},0)},this._vertical||(ud="x",gd="left",pd="width",fd="moveX"),this.$_resetItems(this._body.itemViews()),this._targetFeedback=this.$_createTargetFeedback(t.doc)}$_createTargetFeedback(t){const e=t.createElement("div");return e.className="dlist-row-move-target",Object.assign(e.style,{position:"absolute",boxSizing:"border-box"}),e}setRequest(t){t=this._body.getRowView(this._row=t.row);return this._target=this._pts=void 0,this._hRow=t.height,this._pRow=t[ud],this._rowFeedback=this.$_createFeedback(t),this}_doStart(t,e,i,s,r){const n=this._body;var o=this.control.toElement(n,s,r);return this._off=o[ud]-this._pRow,this.control.setLock(),this.$_resetItems(n.itemViews()),Re.setVisible(this._targetFeedback,!1),n.addFeedback(this._targetFeedback),this.$_moveFeedback(this._rowFeedback,s,r),!0}_doDrag(t,e,i,s,r){const n=this._body;var o=this._vertical,a=this._off,i=o?r<i:s<e,e=this._hRow;if(this.$_moveFeedback(this._rowFeedback,s,r),this.checkScroll(s,r,this._callback,this._endCallback))return!0;this._scrolling&&(this._scrolling=!1,this.$_resetItems(n.itemViews()),this.$_swapViews(this._row,i,!1)),s+=o?0:i?-a:e-a,r+=o?i?-a:e-a:0;r=this.control.toElement(n,s,r),r=this.$_itemViewAt(r[ud]+n.scrollOff());let h=r&&r.view;return h&&h.row()!==this._row&&(!n.canMoveTo(this._row,h)||i&&r.pos>h.height/2||!i&&r.pos<h.height/2)&&(h=null),h&&this.$_setTarget(h,i,!1),Re.setVisible(this._targetFeedback,!!this._target),!0}_doCanceled(){}_canAccept(t,e,i){return 0<=this._target&&this._target!==this._row}_doCompleted(t,e,i){const s=this.control.data();s instanceof wo&&(console.log("MOVE",this._row,this._target),s.moveRow(this._row,this._target))}_doEnded(){super._doEnded(),this._views.forEach(t=>t.visible=!0),this._rowFeedback.remove(),this._rowFeedback=null,this._targetFeedback.remove(),this.control.releaseLock(),this.control.invalidateLayout()}$_resetItems(t){const e=this._pts=[0];(this._views=t).forEach(t=>{e.push(e[e.length-1]+t[pd])})}$_itemViewAt(i){var s=this._pts;for(let t=0,e=s.length-1;t<e;t++)if(i>=s[t]&&i<s[t+1])return{view:this._views[t],pos:i-s[t]}}$_createFeedback(t){t=t.dom.cloneNode(!0);return Object.assign(t.style,{boxShadow:"0px 0px 5px"}),this._body.listView().addFeedback(t),t}$_moveFeedback(t,e,i){this._vertical?Re.move(this._rowFeedback,0,i-this._off):Re.move(this._rowFeedback,e-this._off,0)}$_swapViews(e,t,i){const s=[],r=this._views,n=r.slice(0),o=-this._body.scrollOff();let a=0,h;if(h=r.findIndex(t=>t.row()===this._row),0<=h){const l=n.splice(h,1)[0];i||(h=r.findIndex(t=>t.row()===e),0<=h&&n.splice(h,0,l)),l.move(-1e5,-1e4)}return s.push(a),n.forEach(t=>{t.aniTag=t[ud],t.row()===e&&Re.setRect(this._targetFeedback,t.getBounds()),t[fd](a+o),a+=t.height,s.push(a)}),this._prevUp=t,this._views=n,this._pts=s,this._target=e,n}$_setTarget(t,e,i){if(t.row()===this._row||this._target&&e===this._prevUp&&t.row()===this._target)i&&this.$_swapViews(t.row(),e,i);else{const r=this.$_swapViews(t.row(),e,i);i||r.forEach(e=>{var t=r.findIndex(t=>t.row()===e.row()),i=e.aniTag,s=e[ud];e instanceof ro&&0<=t&&s!==i&&Re.animate(e.dom,gd,de(i),de(s))})}}}class md extends nd{constructor(t){super(t),this._callback=(t,e)=>{this._views=t.filter(t=>t instanceof ro),this.$_checkRow(e)},this._vertical,this._views=this._body.itemViews().filter(t=>t instanceof ro)}setRequest(t){return this}_doStart(t,e,i,s,r){return!0}_doDrag(t,e,i,s,r){if(this.checkScroll(s,r,this._callback,null))return!0;for(const n of this._views)if(n.rowCell.displayOfDom(t)===er.CHECK){this.$_checkRow(n.row());break}return!0}_doCanceled(){}_canAccept(t,e,i){return!0}_doCompleted(t,e,i){}_doEnded(){super._doEnded()}$_checkRow(t){if(0<=t&&t!==this._prev){switch(this._body._owner.current()._rowBar.check().dragMode()){case Ks.CHECK:this.list.checkRow(t,!0);break;case Ks.UNCHECK:this.list.checkRow(t,!1);break;case Ks.TOGGLE:this.list.toggleChecked(t)}this._prev=t}}}class vd{constructor(){this._handler=()=>{this._off<=0||this._control.listView().bodyView().isScrollEnded()?(clearInterval(this._timer),this._timer=null):(this._control.scrollBy(Math.min(this._step*this._dir,this._off)),this._off-=this._step)}}run(t,e,i){var s=t.listView().bodyView().getItemView(0),s=t.isVertical()?s.height:s.width;this._control=t,this._dir=e,this._step=i,this._off=0<e?s-t.scrollOff():t.scrollOff(),this._timer=setInterval(this._handler,20)}}class yd extends class extends class{constructor(t){this._touchIds=[],this._touches=[],this._tapped=0,this._firstTime=0,this._secondTime=0,this._control=t}get control(){return this._control}get dragTracker(){return this._dragTracker}setDragTracker(t){t!=this._dragTracker&&(this._dragTracker&&this._dragTracker.cancel(),this._dragTracker=t)}get dragging(){return this._dragTracker&&this._dragTracker.dragging}touchX(){return this._touchX}touchY(){return this._touchY}touchStart(i){clearTimeout(this._longTimer);const s=this._touchElement=q.cast(i.target,Element);if(s){var r=i.changedTouches;let t,e;if(0<r.length&&(t=r[0],e=this.$_touchPoint(t),this._dragTracker&&this.$_stopDragTracker(s,e.x,e.y),this._prevX=e.x,this._prevY=e.y),1<i.touches.length||0<this._touchIds.length){for(let t=0;t<r.length;t++)this._touchIds.push(r[t].identifier);this._touchId=this._touchId||r[0].identifier}else t&&(this._touchIds.push(this._touchId=t.identifier),0===this._tapped?(this._firstTime=i.timeStamp,this._touchX=e.x,this._touchY=e.y):this._secondTime=i.timeStamp,this._touches=[{x:e.x,y:e.y,t:i.timeStamp}],this._longTimer=setTimeout(()=>{this._touchId=void 0,this._tapped=0,this._doLongPressed(s,this._touchX,this._touchY)},this._control.longPressDelay));return this._doTouchStart(s)}}_stopEvent(t){t.cancelable&&t.preventDefault(),t.stopImmediatePropagation()}$_doDrag(t,e,i,s){if(!this.$_drag(e,this._prevX,this._prevY,i,s))return this.$_stopDragTracker(e,i,s,!0),this._stopEvent(t),!0}touchMove(t){var e,i,s=this.$_findTouch(t);s&&({x:e,y:i}=this.$_touchPoint(s),s=document.elementFromPoint?document.elementFromPoint(e,i):t.target,e<0||e>=this._control.dom().offsetWidth||i<0||i>=this._control.dom().offsetHeight?this.dragging&&this.$_stopDragTracker(s,e,i,!0):this.dragging?this.$_doDrag(t,s,e,i):(!this._dragTracker&&3<Math.abs(this._prevX-e)||3<Math.abs(this._prevY-i))&&(clearTimeout(this._longTimer),this._tapped=0,this.$_startDrag(s,this._prevX,this._prevY,e,i)&&(this._clearTouchEffects(),e!==this._prevX||i!==this._prevY?this.$_doDrag(t,s,e,i):this._stopEvent(t))),this._prevX=e,this._prevY=i,this._touches.push({x:e,y:i,t:t.timeStamp}),this._doTouchMove(s)),this.dragging&&this._stopEvent(t)}touchEnd(e){const i=q.cast(e.target,Element);if(clearTimeout(this._longTimer),this._clearTouchEffects(),void 0===this._touchId)this.$_clearTouches();else{var s=this.$_findTouch(e);if(s)if(this.$_checkSwipe(i,e))this._touchId=void 0,this._tapped=0;else{var{x:r,y:s}=this.$_touchPoint(s);let t=document.elementFromPoint(r,s);i&&i.contains(t)&&(t=i),this.dragging?(this._touchId=void 0,this._tapped=0,this.$_stopDragTracker(t,r,s)):0===this._tapped?(this._tapped=1,this._doTap(t,this._touchX,this._touchY,r,s)):1===this._tapped&&(this._touchId=void 0,e.timeStamp-this._firstTime<300?(this._tapped=0,this._doDoubleTap(t,this._touchX,this._touchY,r,s)):(this._firstTime=this._secondTime,this._touchX=this._prevX,this._touchY=this._prevY,this._doTap(t,this._touchX,this._touchY,r,s)))}else this.dragging&&this.$_stopDragTracker(i,this._prevX,this._prevY)}this._dragTracker=null,e.touches.length<=0&&this.$_clearTouches(),this.$_removeTouches(e.changedTouches),this._doTouchEnd(i)&&this._stopEvent(e)}touchCancel(t){console.log("CANCEL"),clearTimeout(this._longTimer),this._clearTouchEffects()}touchLeave(t){console.log("LEAVE"),clearTimeout(this._longTimer),this._clearTouchEffects(),this.dragging&&(t=q.cast(t.target,Element),this.$_stopDragTracker(t,this._prevX,this._prevY))}click(t){t=q.cast(t.target,Element);t&&this._doClick(t)}keyPress(t){this._doKeyPress(t)}requestDrag(t){t=this.getTrackerFromRequest(t);t&&this.setDragTracker(t)}getTrackerFromRequest(t){}_doClick(t){}_doTouchStart(t){return!1}_doTouchMove(t){}_doTouchEnd(t){return!0}_doTap(t,e,i,s,r){}_doDoubleTap(t,e,i,s,r){}_doLongPressed(t,e,i){}_doKeyPress(t){}_doSwipe(t,e,i,s,r){return!1}_getDragTracker(t,e,i){return null}$_startDrag(t,e,i,s,r){return this.setDragTracker(this._getDragTracker(t,s-e,r-i)),!!this._dragTracker&&this._dragTracker.start(t,e,i,s,r)}$_drag(t,e,i,s,r){return this._dragTracker.drag(t,e,i,s,r)}$_stopDragTracker(t,e,i,s=!1){this.dragging&&(s?this._dragTracker.cancel():this._dragTracker.drop(null,e,i),this._dragTracker=null)}$_touchPoint(t){var e=this._control.dom().getBoundingClientRect();return{x:t.pageX-e.left,y:t.pageY-e.top}}$_clearTouches(){this._touchIds=[]}$_removeTouches(e){for(let t=e.length-1;0<=t;t--){var i=this._touchIds.indexOf(e[t].identifier);0<=i&&this._touchIds.splice(i,1)}}$_findTouch(t){var i=t.changedTouches;for(let t=0,e=i.length;t<e;t++){var s=i[t];if(s.identifier===this._touchId)return s}}$_checkSwipe(i,t){var s=this._touches,r=s.length;if(!(r<2)){var n=s[r-1];let e=s[r-2];if(n.t-e.t<=100)for(let t=r-3;0<=t&&(e=s[t],!(100<n.t-e.t));t--);var o=e.x,a=e.y,h=n.x,l=n.y,d=Math.sqrt(Math.pow(o-h,2)+Math.pow(a-l,2))/Math.max(16,n.t-e.t);if(.1<d){const _=this._dragTracker;r=Math.log(.1/d)/Math.log(.998),d=d*(1-Math.pow(.998,1+r))/(1-.998);let t=Math.round(180*Math.atan2(l-a,h-o)/Math.PI),e;if(t<0&&(t=360+t),e=45<t&&t<=135?u.DOWN:135<t&&t<=225?u.LEFT:225<t&&t<=315?u.UP:u.RIGHT,this.dragging){if(_.swipe(e))return!0;this.$_stopDragTracker(i,this._prevX,this._prevY)}return this._doSwipe(i,_,e,1.6*r,1.3*d)}return!1}}_clearTouchEffects(){}}{constructor(t){super(t),this._listControl=t}get control(){return this._listControl}get listView(){return this._listControl.listView()}}{constructor(t){super(t),this._clickRow=-1}$_isClickable(t,e){return t instanceof HTMLAnchorElement||(!!(t instanceof HTMLInputElement||t instanceof HTMLSelectElement||t instanceof HTMLLabelElement||t[Kt])||(t instanceof HTMLButtonElement&&e instanceof Wn||(!!(e instanceof qs&&e.enabled())||(!!(e instanceof Hs&&e.clickable())||void 0))))}_doTouchStart(t){const e=this.control;var i=e.fullMode();const s=e.listView(),r=s.bodyView();var n=r.getRow(t),o=r instanceof el?r.getGroupItem(t):null,a=e.elementOfDom(t);return clearTimeout(this._touchTimer),s.menuView()&&s.menuView().clearTouched(),e.releaseLock(),this._clickDom=t,this._clickRow=n,this._clickItem=o,this._flingScroller=this._flingScroller&&this._flingScroller.destroy(),!(s.isMenuView(t)||!s.hideMenu(!0))||!this.$_isClickable(t,a)&&((!e.editPageView()||!e.editPageView().visible)&&(a instanceof sa||r.clearCommands(!0),!(a instanceof Ln)&&(a instanceof Sa?s.menuView().setTouched(a):a instanceof Io||e.isSingleRow()||(i?this.$_rowTouched(this._clickRow):this._touchTimer=setTimeout(()=>{this.$_rowTouched(this._clickRow)},50)),!i)))}_doTouchMove(t){this.dragging&&(this._clearTouchEffects(),this.control.listView().isInPanel(t)||this.control.closePanel(!0))}_doTouchEnd(t){var e=this.control.elementOfDom(t);return e instanceof Sa&&this.listView.menuView().clearTouched(),!this.$_isClickable(t,e)}_clearTouchEffects(){clearTimeout(this._touchTimer),this.$_rowTouched(-1)}_processClick(e){const i=this.control,t=i.listView(),s=i.rowPageView(),r=t.bodyView(),n=i.elementOfDom(e);var o=t.activePanel();const a=t.getLayoutView(e);let h=!a&&t.getPanel(e),l=!!o;if(n instanceof Sa||!t.isMenuView(e))if(n instanceof Hs&&n.clickable()){var{x:d,y:_}=i.toElement(n,this.touchX(),this.touchY());n.click(e,d,_)}else if(n instanceof oa)l=h.clickButton(n,i);else if(n instanceof qs)n.enabled()&&n.click(i);else if(n instanceof Sa)t.menu().clickItem(i.wrapperOrThis(),n.model())?i.closeMenu(!0):n.model().type===tn.RADIO?t.menuView().resetRadios():n.refresh();else if(n instanceof io)n.parent instanceof al?i.dataGroup().toggle(i.getDataGroupOfRow(n.parent.row(),!0),!1):n.parent instanceof ro||n.parent instanceof so&&i.groupModel().toggle(n.parent.model().group,!1);else if(n instanceof js)n.enabled()&&n.click();else if(n instanceof Pn)n.click(i.rowBar(),e);else if(n instanceof Mn)n.click(i.editBar(),e);else if(a)a.clickable()&&a.click(e,NaN,NaN);else if(h)l=h.click(e,NaN,NaN);else{let t=!1;if(s){const c=s.getRenderer(e);c&&(c.clicked(i,-1,null),t=!0)}if(!t){d=0<=this._clickRow&&r.getRow(e)===this._clickRow?this._clickRow:-1;const u=r.getRenderer(d,e);u?(_=e[Bt],t=u.clicked(i,d,_)):r instanceof el&&this._clickItem&&this._clickItem===r.getGroupItem(e)&&(i.$_groupItemClicked(this._clickItem),t=!0),!t&&0<=d&&i.$_rowClicked(d)}}else t.menu().autoHide&&t.hideMenu(!0);l&&t.activePanel()!==o&&(l=!1),l&&i.closePanel(!0)}_doTap(t,e,i,s,r){if(t===this._clickDom){const o=this.control,a=o.listView(),h=a.bodyView();var n=o.elementOfDom(t);n instanceof sa||h.clearCommands(!0),this.$_isClickable(t,n)||this._processClick(t)}}_doClick(t){if(t===this._clickDom){const e=this.control,i=e.listView(),s=i.bodyView();s.clearCommands(!0),this._processClick(t)}}_doLongPressed(e,t,i){const s=this.control,r=this.listView.bodyView();var n=r.getRow(e);if(0<=n&&n===this._clickRow){const o=e===this._clickDom&&r.getRenderer(n,e);let t=!1;o&&(e=e[Bt],t=o.longPressed(this.control,n,e)),t||s.$_rowLongPressed(n)}}_doSwipe(t,e,i,s,r){const n=this.control;if(!(n.elementOfDom(t)instanceof qs)){const a=n.listView(),h=n.rowPageView();var o=this._clickRow;const l=n.fitRowWhenScroll?1:.3;if(a.isInPanel(t)||n.closePanel(!0),h&&h.layoutBack().contains(t)){const d=i===u.UP?1:-1;return this._flingScroller=new $n(r,s,l,(t,e)=>!0===h.scrollBy(-t*d)).run(),!0}if(a.bodyView().containsDom(t))if(n.isVertical()){if(i===u.UP||i===u.DOWN){const _=i===u.UP?1:-1;if(!n.fullMode()&&(!e||e.canSwipe()))return this._flingScroller=new $n(r,s,l,(t,e)=>!0!==n.scrollBy(t*_),()=>{n.fitRowWhenScroll&&0<a.scrollOff()&&(new vd).run(n,_,l)}).run(),!0}else if(0<=o)return n.swipeRow(o),!0}else if(i===u.LEFT||i===u.RIGHT){const c=i===u.LEFT?1:-1;if(!n.fullMode()&&(!this.dragTracker||this.dragTracker.canSwipe()))return J.log("FLING HORZ",i,r,s),this._flingScroller=new $n(r,s,l,(t,e)=>!0!==n.scrollBy(t*c),()=>{n.fitRowWhenScroll&&0<a.scrollOff()&&(new vd).run(n,c,l)}).run(),!0}else if(0<=o)return n.swipeRow(o),!0}}_doKeyPress(t){const e=t.target;var i=t.key;const s=this.control,r=s.elementOfDom(t.target);"Enter"===i&&e instanceof HTMLInputElement&&(e.blur(),r instanceof ma&&r.canEnter()?r.search():r instanceof pa&&r.search()&&s.closePanel(!0),this.$_moveToNextInput(e))}getTrackerFromRequest(t){var e=this.listView;return t instanceof kn?(this._rowMoveTracker||(this._rowMoveTracker=new wd(e)),this._rowMoveTracker.setRequest(t)):t instanceof Tn?(this._checkTracker||(this._checkTracker=new md(e)),this._checkTracker.setRequest(t)):void 0}_getDragTracker(t,e,i){const s=this.control;var r=s.current(),n=s.rowPageView();const o=s.listView(),a=o.scrollBarView(),h=o.pageScrollerView(),l=s.elementOfDom(t);let d;return l instanceof Ln?d=this.getTrackerFromRequest(l.getDragRequest(t,r)):l instanceof qs&&l.enabled()||(a&&a.isView(t)?d=this._scrollBarTracker||(this._scrollBarTracker=new od(a)):h&&h.isView(t)?d=this._pageScrollTracker||(this._pageScrollTracker=new ld(h)):n?d=this._rowPageTracker||(this._rowPageTracker=new cd(n)):o.bodyView().containsDom(t)&&(s.isSingleRow()&&Math.abs(e)>=Math.abs(i)?o.canMoveSingle(e,!0)&&(d=this._singleRowTracker||(this._singleRowTracker=new _d(s))):s.current().row().swipeAction()===m.PAGE&&Math.abs(e)>=Math.abs(i)?o.canMovePage(e,!0)&&(d=this._pageMoveTracker||(this._pageMoveTracker=new dd(s))):0<=o.bodyView().getRow(t)&&s.dragSelectable?d=this._rowSelectTracker||(this._rowSelectTracker=new hd(s)):s.fullMode()||(d=this._bodyTracker||(this._bodyTracker=new ad(s))))),d}$_rowTouched(t){this.control.$_rowTouched(t)}$_moveToNextInput(t){}}const bd={rowStyle:{padding:"5px 6px"}};(Vl=Vl=Vl||{}).Developer="dev",Vl.Evaluation="evl",Vl.Limited="lim",Vl.Enterprise="ent";class Sd{constructor(t,e){this.label=t,"string"==typeof e?this.className=e:e&&(this.style=Object.assign({},e))}getStyle(){return this.style}run(t,e,i){this._canRun(t,e,i)&&(this.enableCallback&&!1===this.enableCallback(t,this.label,e,i)||this._doRun(t,e,i))}_canRun(t,e,i){return!0}}class Cd extends Sd{constructor(t,e){super(e.label||t,e.style),this.className=e.className,this.enableCallback=e.enableCallback,this._runner=e.run}_doRun(t,e,i){this._runner(t,e,i)}}class xd{constructor(){this._commandMap={"@info":new Ed,"@edit":new Vd,"@create":new $d,"@delete":new Ad,"@moveup":new Ld,"@movedown":new Dd},this.row=-1}registeredCommands(){return Object.keys(this._commandMap)}register(t,e,i){t||lt(Z.requireCommandName),!i&&t in this._commandMap&&dt(Z.commandNameDuplicated,t),q.isObject(e)&&"function"==typeof e.run&&(this._commandMap[t]=new Cd(t,e))}unregister(t){}get(t){const e=this._commandMap[t];return"function"==typeof e?new e:e}update(t,e){if(e){t=this._commandMap[t];return t&&q.assignStyleAndProps(t,e)}}}class Rd extends Sd{constructor(t,e){super(t),this.className=e}}class Ed extends Rd{constructor(){super(Ed.LABEL,"dlist-command-info")}_doRun(t,e,i){t.showInfoPage(i,{},!0)}}Ed.LABEL="자세히";class Vd extends Rd{constructor(){super(Vd.LABEL,"dlist-command-edit")}_doRun(t,e,i){t.showEditPage(i,{},!0)}}Vd.LABEL="수정";class $d extends Rd{constructor(){super($d.LABEL,"dlist-command-create")}_doRun(t,e,i){t.showEditPage(-1,{},!0)}}$d.LABEL="추가";class Ad extends Rd{constructor(){super(Ad.LABEL,"dlist-command-delete"),this.confirm=!1}_doRun(t,e,i){e&&0<=i&&i<e.rowCount()&&(!this.confirm||window.confirm(this.confirmMessage||Ad.MESSAGE))&&e.deleteRow(i,!1)}}Ad.LABEL="삭제",Ad.MESSAGE="정말로 삭제하시겠습니까?";class Ld extends Rd{constructor(){super(Ld.LABEL,"dlist-command-moveup")}_doRun(t,e,i){alert("Move Up!")}}Ld.LABEL="↑";class Dd extends Rd{constructor(){super(Dd.LABEL,"dlist-command-movedown")}_doRun(t,e,i){alert("Move Down!")}}Dd.LABEL="↓";class kd extends a{constructor(t,e){super(),this._owner=t,this._fields=e||[],this._current=-1}_doDestory(){this._owner=null}fields(){return this._fields}count(){return this._fields.length}isEmpty(){return 0===this._fields.length}current(){return this._current}getCurrrentField(){return this.isEmpty()?null:this._fields[this._current]}moveFirst(){return this.isEmpty()?null:(0!==this._current&&(this._current=0,this._owner.searchIndexChanged(this)),this._fields[this._current])}movePrev(){return this.isEmpty()?null:(this._current!==(this._fields.length+this._current-1)%this._fields.length&&(this._current=(this._fields.length+this._current-1)%this._fields.length,this._owner.searchIndexChanged(this)),this._fields[this._current])}moveNext(){return this.isEmpty()?null:(this._current!==(this._current+1)%this._fields.length&&(this._current=(this._current+1)%this._fields.length,this._owner.searchIndexChanged(this)),this._fields[this._current])}moveLast(){return this.isEmpty()?null:(this._current!==this._fields.length-1&&(this._current=this._fields.length-1,this._owner.searchIndexChanged(this)),this._fields[this._current])}clear(){this._owner.clearSearch(this)}}class Td{constructor(t){this._owner=t}search(t,e,i){let s;return t=Object.assign({},this._owner.searchOptions(),t),this.filtering=t.filtering,i instanceof gr?s=this.$_searchData(i,t,e):i instanceof Ne&&(s=this.$_searchGroup(i,t,e)),s}$_search(t,e,i,s,r){const n=this._owner.getSearchLayout(s);var o=n.getSimples();if(o)for(var a of o){a.row=s,a.dv=t;var h=a.getValue();!function(t,e,i){if(t==e)return!0;let s=q.toStr(t),r=q.toStr(e);return s&&r?(i.matchCase||(s=s&&s.toLowerCase(),r=r&&r.toLowerCase()),i.matchWholeWord?s===r:0<=r.indexOf(s)):void 0}(i,h,e)||(a={dv:t,row:s,value:h,field:a instanceof es?a.field:void 0,layout:a},r.push(a))}}$_searchData(e,i,s){var r=e.rowCount(),n=i.fromRow||0,o=[];if(i.searchAll){var a=isNaN(i.toRow)||i.toRow<0?n:i.toRow;if(a<=n){for(let t=n;t<r;t++)this.$_search(e,i,s,t,o);for(let t=0;t<n;t++)this.$_search(e,i,s,t,o)}else for(let t=n;t<a;t++)this.$_search(e,i,s,t,o)}else{let t=n;for(;this.$_search(e,i,s,t,o),!(0<o.length)&&(t=(t+1)%r,t!==n););}return new kd(this._owner,o)}$_searchGroup(e,i,s){var r=e.data(),n=e.itemCount(),o=Math.max(0<=i.fromRow?e.visIndexOfRow(i.fromRow):-1,e.firstVisRow().vindex),a=[];if(i.searchAll){var h=isNaN(i.toRow)||i.toRow<0?o:Math.max(o,e.visIndexOfRow(i.toRow));if(h<=o){for(let t=o;t<n;t++){var l=e.getItem(t).row();0<=l&&this.$_search(r,i,s,l,a)}for(let t=0;t<o;t++){var d=e.getItem(t).row();0<=d&&this.$_search(r,i,s,d,a)}}else for(let t=o;t<h;t++){var _=e.getItem(t).row();0<=_&&this.$_search(r,i,s,_,a)}}else{let t=o;do{var c=e.getItem(t).row();if(0<=c&&this.$_search(r,i,s,c,a),0<a.length)break}while(t=(t+1)%n,t!==o)}return new kd(this._owner,a)}}class Pd extends kh{isSkeleton(){return!0}_createBodyView(t,e,i){return new Id(t)}}class Md extends so{dv(){}row(){return-1}model(){}group(){}gindex(){return-1}vindex(){return-1}getItemStyle(t){}getItemClass(){return Md.CLASS_NAME}_doMeasure(t,e,i){e=super._doMeasure(t,e,i);if(this._layoutView instanceof Hn){var s,i=this._layoutView.simplesByRenderer(Ui.TYPE),r={container:this.dom,duration:1e3};for(s of i)s.rendererImpl().setAnimation(r)}return e}_doApplyStyles(t){this.dom.className=this.getItemClass()}}Md.CLASS_NAME="dlist-skeleton-row";class Id extends Bh{constructor(){super(...arguments),this._rowViews=[],this._rowPool=[]}isRowEnded(){return!0}isScrollEnded(){return!0}footerView(){}bottomRow(){return this._topRow}itemViewCount(){return 0}rowViewCount(){return 0}getItemView(t){}itemViews(){return[]}itemViewAt(t,e){}lastItemView(){}getItemViewPoints(){}validateViews(){}getPreLength(){return 0}getPrePos(t,e){}getExpander(t){}scrollToEnd(t){}checkItemViewOrders(){}isRowVisible(t,e){return!1}makeRowVisible(t){}_itemPoints(){}_rowViewOfDom(t){}_createRowsDeleingAnimation(t){}_doRenderSelection(t,e,i,s,r,n){}_doScrollNear(t,e,i,s,r,n){}_doScrollFar(t,e,i,s,r,n){}_doPrepareRender(t,e){super._doPrepareRender(t,e),this._rowPool=this._rowPool.concat(this._rowViews),this._rowViews=[],this._itemLayer.clear()}_doMeasureVert(t,e,i){const s=this._listView;const r=this._rowPool,n=this._rowViews;let o=0,a=i,h=0;for(;0<a&&o<1e4;){const d=r.pop()||new Md(t);var l=s.owner().getSkeletonLayout();d.setLayout(l),this._itemLayer.addChild(d),l=d.measure(t,s,e,i),n.push(d),a-=l.height,h=Math.max(h,l.width),o++}return{width:h,height:i-a}}_doMeasureHorz(t,e,i){}_doRenderVert(t,e,i){var s=this._rowViews,r=s.length;const n=this._rowPts=[0];let o=n[0],a=0;for(;a<r&&o<i;){const l=s[a++];var h=l.mh;l.move(0,o),l.resize(l.mw,h).render(t),o+=h,n.push(o)}}_doRenderHorz(t,e,i){}}class Nd extends Hs{constructor(t,e,i){super(t,!1,i),this._animated=0,this._layoutChanged=!1,this._hHeader=0,this._hLayout=0,this._scrollPos=0,this._model=e,this.appendDom(this._layoutBack=this.$_createLayoutBack(t)),this.addChild(this._headerView=new Oo(t,e.header())),this.setVisible(!1)}_doDestory(){super._doDestory()}model(){return this._model}setModel(t){this._model=t}row(){return this._row}layoutBack(){return this._layoutBack}setRow(t,e){this._dv=t,this._row=e}refresh(t,e,i,s=!1){var r=this.doc;t=he(t,this.width),e=he(e,this.height),(this._silent=s)&&this._doSilentRefresh();try{this.measure(r,i,t,e),this.resize(t,e),this.render(r)}finally{s&&(this._silent=!1)}}_doSilentRefresh(){}$_getDuration(){var t=this._model.effectDuration();return.1<=t?1e3*t:Nd.SHOW_DURATION}show(t,e,i){if(!this.visible){var s=q.now(),r=this.$_getDuration();if(!(0<this._animated&&s-this._animated<r)&&(this._scrollPos=0,this._internalVisible(!0),this.refresh(e.width,e.height,t),this._doShow(),i&&this.canAnimate())){const n=this.dom.animate(function(t,e){switch(e){case C.RIGHT:return[{left:-t.width+"px"},{left:"0"}];case C.LEFT:return[{left:t.width+"px"},{left:"0"}];case C.DOWN:return[{top:-t.height+"px"},{top:"0"}];default:return[{top:t.height+"px"},{top:"0"}]}}(e,this._showDirection=this._model.getShowDirection()),{duration:r,fill:"none"});this._animated=q.now(),n.addEventListener("finish",()=>{this._animated=0})}}}_doShow(){}hide(t,e){if(this.visible){var i=q.now(),s=this.$_getDuration();if(!(0<this._animated&&i-this._animated<s))if(this._doHide(),e&&this.canAnimate()){const r=this.dom.animate(function(t,e){switch(e){case C.RIGHT:return[{left:"0"},{left:t.width+"px"}];case C.LEFT:return[{left:"0"},{left:-t.width+"px"}];case C.DOWN:return[{top:"0"},{top:t.height+"px"}];default:return[{top:"0"},{top:-t.height+"px"}]}}(t,this._model.getHideDirection(this._showDirection)),{duration:s,fill:"none"});this._animated=q.now(),r.addEventListener("finish",()=>{this._animated=0,this.setVisible(!1),this.control.invalidateLayout()})}else this.setVisible(!1)}}_doHide(){}getRenderer(t){return this._layoutView instanceof Hn&&this._layoutView.getRenderer(t)}scrollBy(t){return this.setScrollPos(this._scrollPos-t),0===this._scrollPos||this._scrollPos>=this._hLayout-this.height+this._hHeader}setScrollPos(t){var e=this._hHeader;const i=this._layoutBack;(t=Math.max(0,Math.min(t,this._hLayout-(this.height-e))))!==this._scrollPos&&(t=this._scrollPos=t,i.style.top=e-t+"px")}$_createLayoutBack(t){const e=t.createElement("div");return e.className="dlist-row-page-back",Object.assign(e.style,{position:"absolute",boxSizing:"border-box"}),e}_doPrepareRender(t,e){var i,s;this._layoutManager=e,this._silent&&this._layout||({layout:i,rowProps:s,rowStyle:e}=this._getLayout(this._dv,this._row),this._headerView.setModel(this._model.header()),this._layoutChanged=!this._layout||i.tid!==this._layout.tid,this._layout=i,this._rowStyle=e,this._layoutChanged&&this._layoutView&&(this._layoutBack.removeChild(this._layoutView.dom),this._layoutView=null),this._layoutView?this._layoutView.refreshModels(this._layout):(this._layoutView=this._layoutManager.createLayoutView(t,this._layout),this._layoutBack.appendChild(this._layoutView.dom),this._layoutView.dom.style.overflow="hidden",this._layoutView.build(t,this._layoutManager)))}_doApplyStyles(t){var e=this._rowStyle&&this._rowStyle.default;e&&Object.assign(this._layoutBack.style,e)}_doMeasure(t,e,i){const s=this._headerView,r=this._layoutView;var n=this._padding=Re.getPadding(this._layoutBack);let o=0,a=e,h=i;s.setVisible(s.model().visible())&&(s.setLayout(s.model().layout()),h-=o=s.measure(t,this._layoutManager,a,h).height),a-=n.left+n.right,h-=n.top+n.bottom,this._layout.setRow(this._dv,this._row,-1),r._explicitWidth=a,r.prepareLayout(t,this._layoutManager);const l=r.measureLayout(t,this._layoutManager,a,h);return l.width+=n.left+n.right,l.height+=n.top+n.bottom,{width:e,height:Math.max(i,l.height+o)}}_doRender(t,e,i){var s=this._padding;const r=this._layoutView;let n=this._headerView;var o;let a=0;i=Math.max(i,n.mh+r.mh+s.top+s.bottom),n&&n.visible?(o=this._hHeader=n.mh,n.resize(e,o).move(0,a),i-=o,a+=o,n.render(t)):this._hHeader=0,i=this._hLayout=Math.max(0,i),Re.resize(this._layoutBack,e,i),Re.move(this._layoutBack,0,a),r.resize(e-s.left-s.right,i-s.top-s.bottom),r.render(t)}_doAfterRender(){this._layoutManager=null}}Nd.SHOW_DURATION=300;class Od extends Nd{constructor(t,e){super(t,e,Od.CLASS_NAME),this._model=e}_getLayout(t,e){return this._model.getLayout(t,e)}}Od.CLASS_NAME="dlist-row-info-page";class Bd extends Nd{constructor(t,e){super(t,e,Bd.CLASS_NAME),this._changeHandler=t=>{const e=this.model(),i=this._layoutView;if(i instanceof Hn){const s=i.childOfDom(t.target);s instanceof Gn&&(t=s.getEditValue(this.control),e.valueChanged(this._ctx,t.field,t.value,s.value()))}},this._ctx={getValue:t=>this.getFieldValue(t),setValue:(t,e)=>{this.setFieldValue(t,e)},isVisible:t=>this.isFieldVisible(t),setVisible:(t,e)=>{this.setFieldVisible(t,e)}}}model(){return this._model}setModel(t){this._model=t}getValues(t){if(this._layoutView instanceof Hn)return this._layoutView.getValues(t)}getFieldValue(t){const e=this._layoutView;if(e instanceof Hn){const i=e.simpleById(t,!0);if(i instanceof Gn){t=i.getEditValue(this.control);return void 0!==t?t.value:void 0}}}setFieldValue(t,e){const i=this._layoutView;if(i instanceof Hn){const s=i.simpleById(t,!0);s instanceof Gn&&s.setEditValue(this.control,e)}this.refresh(this.width,this.height,this.control._listView,!0)}isFieldVisible(t){const e=this._layoutView;if(e instanceof Hn){t=e.simpleById(t,!0);return t&&t.visible}}setFieldVisible(t,e){const i=this._layoutView;if(i instanceof Hn){const s=i.simpleById(t,!0);s&&(s.layout.visible=e,this.refresh(this.width,this.height,this.control._listView,!0))}}commit(t){return this._model.commit(this._ctx,t)}_getLayout(t,e){return this._model.getLayout(t,e)}_doShow(){const t=this.dom;this.$_clearHandlers(),t.addEventListener("change",this._changeHandler)}_doHide(){this.$_clearHandlers()}_doSilentRefresh(){this._layoutView instanceof Hn&&this._layoutView.saveEditValues(this.control)}$_clearHandlers(){const t=this.dom;t.removeEventListener("change",this._changeHandler)}}Bd.CLASS_NAME="dlist-row-edit-page";class Fd extends a{constructor(t){super(),this._body=t,this._view=t.singleView(),this._spare=t.spareSingleView()}_doDestory(){this._body=null}run(t,e){return this.$_prepare(this._model=t),this._endCallback=e,this._doRun(),this}stop(){this.$_unprepare()}$_prepare(t){this._body.control.lock(()=>{this._body.addChild(this._spare)}),this._doPrepare(t)}$_unprepare(){this._doUnprepare(),this._body.removeChild(this._spare)}}class zd extends Fd{constructor(){super(...arguments),this._handler=()=>{var t=this._model.changeDuration(),e=q.now(),i=e-this._started;let s=this._width-this._pos;t<=i||s<=0?(this.$_stop(),this._endCallback(this._view.row())):(s*=(e-this._prev)/(t-i),this._prev=e),s&&(this._pos+=s,this._view.moveX(-this._pos),this._spare.moveX(this._width-this._pos))}}_doPrepare(t){this._nextRow=(this._view.row()+1)%this._view.rowView().dv().rowCount(),this._width=this._view.width,this._pos=0,this._spare.setRow(this._nextRow,this._view),this._view.moveX(0),this._spare.moveX(this._width)}_doUnprepare(){this.$_stop()}_doRun(){this._started=this._prev=q.now(),this._timer=setInterval(this._handler,20)}$_stop(){this._timer&&(clearTimeout(this._timer),this._timer=void 0,this._view.setRow(this._nextRow,null),this._view.moveX(0))}}class Hd extends Fd{_doPrepare(t){}_doUnprepare(){}_doRun(){}}class Wd extends Hd{}class Gd extends a{constructor(t){super(),this._rowHandler=()=>{var t=q.now();t>=this._prev+this._model.duration()&&(this._doStartChange(this._model),this._prev=t)},this._owner=t,this._body=t.bodyView()}_doDestory(){this._owner=this._body=null}start(t){this.stop(),this._doStart(t)&&(this._model=t,this._prev=q.now(),this._rowTimer=setInterval(this._rowHandler,10))}stop(){this._rowTimer&&(clearTimeout(this._rowTimer),this._rowTimer=void 0,this._doStop(),this._model=void 0)}_showNext(){this._prev=q.now()}}class Ud extends Gd{constructor(){super(...arguments),this._scrollHandler=()=>{let t=this._body.scrollPos()!==this._startRow?0:this.$_getScrollAmount();var e=this._model.changeDuration(),i=q.now(),s=i-this._started;e<=s||t<=0?(this.$_stopChange(),this._showNext()):(t*=(i-this._prev2)/(e-s),this._prev2=i),t&&this._owner.scrollBy(t)}}_doStart(t){return!0}_doStop(){}_doStartChange(t){this.$_stopChange(),this._started=this._prev2=q.now(),this._startRow=this._body.scrollPos(),this._scrollTimer=setInterval(this._scrollHandler,20)}$_getScrollAmount(){return this._body.getItemView(0).height-this._body.scrollOff()}$_stopChange(){this._scrollTimer&&(clearTimeout(this._scrollTimer),this._scrollTimer=void 0)}}class qd extends Gd{constructor(){super(...arguments),this._endCallback=t=>{this._showNext(),this._owner.setScrollIndex(t,0)}}_doStart(t){return!0}_doStop(){this.$_stopChange()}_doStartChange(t){this.$_stopChange();var e=this._model.changeEffect(),i=this._body;let s;switch(e){case an.SLIDE:s=new zd(i);break;case an.FLIP:s=new Wd(i)}(this._changer=s)&&s.run(this._model,this._endCallback)}$_stopChange(){this._changer&&(this._changer.stop(),this._changer=null)}}class jd{constructor(t){this._row=-1,this._args={context:this,control:void 0,row:-1,field:void 0,values:void 0},this._stocks={value:t=>(this._dv.checkField(t),this._values||(this._values=this._data.internalRowValues(this._row)),this._values[t]),no:()=>this._row+1,row:()=>this._row,detail_count:()=>this._dg?this._dg.getDetailCount(this._row):0,is_landscape:()=>this._owner.isLandscape(),is_portrait:()=>this._owner.isPortrait()},this._owner=t}inflateParam(t,e,i){var s=i.name;if(this.templateParams){const r=this.templateParams[s];if("function"==typeof r){const n=this._args;return n.control=this._owner.wrapperOrThis(),n.row=t,n.field=e,n.values=this._values=this._values||Object.freeze(this._dv.internalRowValues(t)),r(n)}if(void 0!==r)return r}i=this._owner.getRowParams(t);if(i){const o=i[s];if("function"!=typeof o)return o;{const a=this._args;return a.control=this._owner.wrapperOrThis(),a.row=t,a.field=e,a.values=this._values=this._values||Object.freeze(this._dv.internalRowValues(t)),o(a)}}}inflateStock(t,e,i){const s=this._stocks[i.name];return s?s(e):this._dv.containsField(i.name)?this._stocks.value(i.name):(console.error("Invalid stock param: "+i.source),i.source)}setData(t){this._data=t,this._dg=t instanceof Rh?t:null}setRow(t){var e;return this._data instanceof Rh?(e=this._data.getSourceRow(t),this._dv=e.dv,this._row=e.row):(this._dv=this._data,this._row=t),this._values=void 0,this}}class Yd{constructor(t){this._owner=t,this._rowInflater=new jd(t)}prepareRender(){this._rowInflater.setData(this._owner.data())}getRowInflater(t){return this._rowInflater.setRow(t)}getRowLayout(t,e,i){const s=this._owner;var r=s.getRowTemplate(e);return{layout:ms.Instance.layoutFromTemplate(t||s.wrapperOrThis(),e,!1,i,r,this._rowInflater.setRow(e)),rowProps:r.rowProps,rowStyle:r.rowStyle}}getGroupItemLayout(t){const e=this._owner.groupModel();let i,s;t instanceof Me?(s=e.getHeaderTemplate(t),i=!t.group.expanded()):t instanceof Ie&&(s=e.getFooterTemplate(t));var r=this._owner._templates.get(s)||Vs.get(s)||Es.get(s);return{layout:ms.Instance.layoutFromTemplate(e,t,i,!1,r,e)}}inflate(t,e){return t.inflate(this._owner.wrapperOrThis(),void 0,e,this._rowInflater)}}class Qd{constructor(){this.matchCase=!1,this.matchWholeWord=!1,this.useRegExp=!1,this.dataOnly=!0,this.ignoreFormat=!0,this.searchAll=!0,this.fromRow=0,this.toRow=-1,this.circular=!0,this.filtering=!1}assign(t){q.assign(this,t)}}class Zd extends Ee{constructor(t,e,i){super(t,e,Zd.CLASS_NAME),this._alwaysFirstGroupHeader=!0,this._searchOptions=new Qd,this.fitRowWhenScroll=!1,this.fitRowWhenClick=!0,this.skeletonVisible=!1,this.alwaysEmptyPage=!1,this._renderMode=d.DEFAULT,this._flags=_r.Instance,this._templates=new ht,this._runTextFormatter=ge(""),this._runBoolFormatter=pe(Zd.BOOLEAN_FORMAT),this._runNumberFormatter=fe(Zd.NUMBER_FORMAT),this._runDateFormatter=we(Zd.DATE_FORMAT),this._imageList=[],this._imageList2={},this._imageSizes={},this._imageLoaded=t=>{t=t.target;N&&(this._imageSizes[t._src_]={width:t.naturalWidth,height:t.naturalHeight}),this.bodyView().animating()||this.invalidateLayout(!0),(this._infoPageView&&this._infoPageView.visible||this._editPageView&&this._editPageView.visible)&&setTimeout(()=>{const t=this._infoPageView;t&&t.visible&&t.refresh(NaN,NaN,this._listView,!0);const e=this._editPageView;e&&e.visible&&e.refresh(NaN,NaN,this._listView,!0),this.listView().refreshPanel()},0)},this._menus={},this._layoutNeeded=!0,this._dataLoading=!1,this._dataAppending=!1,this._dataChanged=!1,this._topRow=-1,this._scrollIndex=0,this._scrollOff=0,this._lastRowRevealed=!1,this._focusedRow=-1,this._rowClickArgs={control:this.wrapperOrThis(),row:-1,cancel:!1},this.dragSelectable=!1,this.autoClearSelection=!1,this._renderMode=i,this._fullMode=i===d.FULL,this._preMode=i===d.PRE,this._noCache=this._fullMode||this._preMode,this.addElement(this._listView=this._defaultListView=new Gh(t,this))}_doDestory(){super._doDestory(),this._shapes=this._shapes.destroy()}optionItemChanged(t){this.invalidateLayout()}autoScrollChanged(t){t instanceof Xn&&!this._singleRow?t.enabled()?this._rowScroller||(this._rowScroller=new Ud(this),this._rowScroller.start(this._current.row().autoScroll())):this._rowScroller&&(this._rowScroller.stop(),this._rowScroller=void 0):t instanceof th&&this._singleRow&&(t.enabled()?this._singleScroller||(this._singleScroller=new qd(this),this._singleScroller.start(this._current.singleRow().autoScroll())):(this._singleScroller.stop(),this._singleScroller=void 0))}getTemplateHtml(t){const e=this._htmlTempls[t];return e&&e.cloneNode(!0)}sectionChanged(t){this.invalidateLayout()}sectionLayoutChanged(t){this.invalidateLayout()}onDataReset(t){}onDataValueUpdated(t,e,i,s,r){}onDataRowUpdated(t,e,i){}onDataRowsUpdated(t,e){}onDataRowAdded(t,e){}onDataRowsAdded(t,e,i){}onDataCleared(t,e){}onDataLoaded(t,e){}onDataRowDeleted(t,e,i){this._current.row().deleteAnimation()&&!this.isTesting()&&this.bodyView().$_addDeletingRows(i)}onDataRowsDeleted(t,e,i){this._current.row().deleteAnimation()&&!this.isTesting()&&this.bodyView().$_addDeletingRows(i)}onDataRangeDeleted(t,e,i){}onDataRowMoved(t,e,i){}onDataRowsMoved(t,e,i,s){}onDataCountChanged(t,e,i){this.isPaging()&&(this._pageModel.$_reset(),this.invalidateLayout())}onDataStateChanged(t,e){}onDataStatesChanged(t,e){}onDataChanged(t){this._dataChanged=!0,this._noCache,this.invalidateLayout()}onDataFlagChanged(t,e,i,s){dr.isCheckedFlag(s)?this.onRowCheck&&this.onRowCheck({control:this.wrapperOrThis(),row:i}):dr.isDetailedFlag(s)?this.onRowDetail&&this.onRowDetail({control:this.wrapperOrThis(),row:i}):(s=dr.isUserFlag(s),this.onRowFlagChange&&this.onRowFlagChange({control:this.wrapperOrThis(),row:i,flag:s})),this.invalidateLayout()}onDataFlagsChanged(t,e,i,s){dr.isCheckedFlag(s)?this.onRowsCheck&&this.onRowsCheck({control:this.wrapperOrThis(),rows:i}):dr.isDetailedFlag(s)?this.onRowsDetail&&this.onRowsDetail({control:this.wrapperOrThis(),rows:i}):(s=dr.isUserFlag(s),this.onRowsFlagChange&&this.onRowsFlagChange({control:this.wrapperOrThis(),rows:i,flag:s})),this.invalidateLayout()}onDataFlagAllChanged(t,e,i){dr.isCheckedFlag(i)?this.onAllRowsCheck&&this.onAllRowsCheck({control:this.wrapperOrThis()}):dr.isDetailedFlag(i)?this.onAllRowsDetail&&this.onAllRowsDetail({control:this.wrapperOrThis()}):(i=dr.isUserFlag(i),this.onAllRowsFlagChange&&this.onAllRowsFlagChange({control:this.wrapperOrThis(),flag:i})),this.invalidateLayout()}onDataViewFilterChanged(t){this.invalidateLayout()}onDataViewSortChanged(t){this.invalidateLayout()}onGroupExpanded(t,e){this.invalidateLayout()}onGroupChecked(t,e){this.invalidateLayout()}onDataGroup2Expanded(t,e){this.invalidateLayout()}onPageChanged(t,e,i){this.setScrollIndex(0,0),this.invalidateLayout(),this._listView.pageChanged(e)}pageIndexClick(t){this.setPage(t)}preMode(){return this._preMode}fullMode(){return this._fullMode}noCache(){return this._noCache}description(){return this._description}setDescription(t){t!==this._description&&(this._description=t,this.invalidate())}renderMode(){return this._renderMode}rowInfos(){return this._current.dataRowInfos()}groupExpander(){return this._current.rowGroup().expander()}dataExpander(){return this._current.dataGroup().expander()}rowBar(){return this._current._rowBar}editBar(){return this._current._editBar}scrollIndicator(){return this._current._scrollIndicator}indexBar(){return this._current._indexBar}scrollBar(){return this._current._scrollBar}pageNavigator(){return this._current._pageNavigator}pageScroller(){return this._current._pageScroller}commandBox(){return this._current._commandBox}selectionMask(){return this._current._selectionMask}options(){return this._defaults}portrait(){return this._portrait}landscape(){return this._landscape}current(){return this._current}data(){return this._data}setData(t){var e;return t!=this._data&&(e=this._groupModel,this._data&&(e&&this._data.removeListener(e),this._data.removeListener(this)),this._flags=_r.Instance,this._data&&this._data.removeFlags(this),this._data=t,this._defRowTempl=new Kd(this),this._data&&(this._data.addListener(this),e&&this._data.addListener(e),this._flags=this._data.addFlags(this)),this._dataGroup?this._data instanceof Rh?this._dataGroup.refresh(this._data):this.$_destroyGroupModel(this._dataGroup):this._rowGroup&&(this._data instanceof Rh?this.$_destroyGroupModel(this._rowGroup):this._rowGroup.refresh(this._data)),this.invalidateLayout()),t}isRowGrouped(){return this._rowGroup&&0<this._rowGroup.levels()}isDataGrouped(){return this._dataGroup&&0<this._dataGroup.levels()}isGrouped(){return this._groupModel&&0<this._groupModel.levels()}isPaging(){return!!this._pageModel}pageSize(){return this._pageModel?this._pageModel.size():NaN}pageCount(){return this._pageModel?this._pageModel.pageCount():NaN}page(){return this._pageModel?this._pageModel.page():NaN}setPage(t){if(!this.isPaging())throw new Error("Control is not a paging mode.");this._pageModel.setPage(t)}isVertical(){return this._current.orientation()===n.VERTICAL}isLandscape(){return this.orientation()===o.LANDSCAPE}setDataLoading(t){return t!=this._dataLoading&&(this._dataLoading=t,this.invalidateLayout(),!0)}isDataLoading(){return this._dataLoading}setDataAppending(t,e){return this._dataAppending!==t&&(this._dataAppending=t,e&&t?this.scrollToEnd(-1):this.invalidateLayout(),!0)}isDataAppending(){return this._dataAppending}isDataEmpty(){return!this._data||this._data.source().rowCount()<1}isEmpty(){return!this._data||this._data.rowCount()<1}shouldShowEmptyPage(){return this.isDataEmpty()||this.alwaysEmptyPage&&this.isEmpty()}isDataChanged(){return this._dataChanged}scrollIndex(){return this._scrollIndex}setScrollIndex(t,e){this.isEmpty()||(t=Math.max(0,he(t,0)))===this._scrollIndex&&this._scrollOff===e||(this._reqScrollIndex=Math.max(0,t),this._reqScrollOff=he(e,0),this.invalidateLayout())}scrollOff(){return this._scrollOff}topRow(){return this._topRow}setTopRow(t){t=this._rowGroup?this._rowGroup.visIndexOfRow(t):t;this.setScrollIndex(t,0)}textFormatter(){return this._textFormatter}setTextFormatter(t){t!==this._textFormatter&&(this._textFormatter=t,this._runTextFormatter=void 0,this.invalidateLayout())}boolFormatter(){return this._boolFormatter}setBoolFormatter(t){t!==this._boolFormatter&&(this._boolFormatter=t,this._runBoolFormatter=void 0,this.invalidateLayout())}numberFormatter(){return this._numberFormatter}setNumberFormatter(t){t!==this._numberFormatter&&(this._numberFormatter=t,this._runNumberFormatter=void 0,this.invalidateLayout())}dateFormatter(){return this._dateFormatter}setDateFormatter(t){t!==this._dateFormatter&&(this._dateFormatter=t,this._runDateFormatter=void 0,this.invalidateLayout())}textFormat(){return this._textFormat}setTextFormat(t){t!==this._textFormat&&(this._textFormat=t,this._runTextFormatter=void 0,this.invalidateLayout())}boolFormat(){return this._boolFormat}setBoolFormat(t){t!==this._boolFormat&&(this._boolFormat=t,this._runBoolFormatter=void 0,this.invalidateLayout())}numberFormat(){return this._numberFormat}setNumberFormat(t){t!==this._numberFormat&&(this._numberFormat=t,this._runNumberFormatter=void 0,this.invalidateLayout())}dateFormat(){return this._dateFormat}setDateFormat(t){t!==this._dateFormat&&(this._dateFormat=t,this._runDateFormatter=void 0,this.invalidateLayout())}groupModel(){return this._rowGroup||this._dataGroup}rowGroup(){return this._rowGroup}dataGroup(){return this._dataGroup}pageModel(){return this._pageModel}get layoutViewManager(){return this._listView}get alwaysFirstGroupHeader(){return this._alwaysFirstGroupHeader}set alwaysFirstGroupHeader(t){t!==this._alwaysFirstGroupHeader&&(this._alwaysFirstGroupHeader=t,this.isRowGrouped()&&this.invalidateLayout())}focusedRow(){return this._focusedRow}rowCommands(){return this._rowCommands}commandRow(){return this.bodyView().commandRow()}setCommandRow(t,e){var i;0<=t?(this.makeRowVisible(t)&&this.updateNow(),i=this._current.getRowCommands(),this.bodyView().setCommands(t,i,e)):this.bodyView().clearCommands(e)}listView(){return this._listView}bodyView(){return this._listView.bodyView()}rowPageView(){return this._rowPageView}infoPageView(){return this._infoPageView}editPageView(){return this._editPageView}leafRowCount(){return this._dataGroup?this._dataGroup.leafRowCount():this._data?this._data.rowCount():0}checkedRowCount(){return this._flags.checkedCount()}lineSeparator(){return Array.isArray(this._lineSeparator)?this._lineSeparator.slice(0):this._lineSeparator}setLineSeparator(t){t!==this._lineSeparator&&(this._lineSeparator=Array.isArray(t)?t.slice(0):t,this._lineSepReg=q.makeLineSeparator(this._lineSeparator),this.invalidateLayout())}shapes(){return this._shapes}lineSepReg(){return this._lineSepReg}searchOptions(){return this._searchOptions}setSearchOptions(t){this._searchOptions.assign(t)}searchResult(){return this._searchResult}useImage(t){if(t&&!this._imageList2[t]){const e=new Image;e.src=t,e._src_=t,e.onload=this._imageLoaded,this._imageList2[t]=e}}getImageSize(t){return this._imageSizes[t]}registerShape(t,e,i,s){this._shapes.registerCustom(t,e,i,s)}registerShapes(t){this._shapes.registerCustoms(t)}registerIconSet(t,e){t&&e?(e instanceof se||!q.isObject(e)||(e=new se(e)),this._iconSets[t]=e):t&&delete this._iconSets[t]}getIcon(t,e){const i=this._iconSets[t];if(i)return{width:i.width,height:i.height,url:i.getUrl(e)}}registerTemplate(t,e,i){return i?xs(null,Vs,t,e):xs(this,this._templates,t,e)}getStockTemplate(t){return Es.get(t)}getUserTemplate(t){return this._templates.get(t)||Vs.get(t)}getTemplate(t){return this._templates.get(t)||Vs.get(t)||Es.get(t)}getRowTemplate(t){t=this._current.getRowTemplate(t);return this._templates.get(t)||Vs.get(t)||Es.get(t)||this._defRowTempl}getDefaultRowTemplate(){var t=this._current.getDefaultRowTemplate();return this._templates.get(t)||Vs.get(t)||Es.get(t)||this._defRowTempl}getRowInflater(t){return this._layoutPool.getRowInflater(t)}getRowParams(t){return this._current.getRowParams()}inflateField(t,e){return this._layoutPool.inflate(t,e)}getRowLayout(t){return this._layoutPool.getRowLayout(null,t,this.isRowDetailed(t))}getSearchLayout(t){return this._layoutPool.getRowLayout(null,t,this.isRowDetailed(t)).layout}getSkeletonLayout(){return this._layoutPool.getRowLayout(ws,0,!1)}searchIndexChanged(t){t=t.getCurrrentField();this.makeRowVisible(t.row),this.invalidateLayout()}getGroupItemLayout(t){return this._layoutPool.getGroupItemLayout(t)}getRowStyle(t){return{itemDef:this._current.getRowStyle(),levelDef:void 0,dynamic:void 0}}borrowRenderer(t){return this._rendererPool.borrow(t)}freeRenderer(t){this._rendererPool.free(t)}getTextFormatter(){return this._runTextFormatter}getBoolFormatter(){return this._runBoolFormatter}getNumberFormatter(){return this._runNumberFormatter}getDateFormatter(){return this._runDateFormatter}getRowCount(){return this._pageModel?this._pageModel.rowCount():this._data?this._data.visRowCount():0}getStartRow(){return this._pageModel?this._pageModel.startRow():0}getEndRow(){return this._pageModel?this._pageModel.endRow():this.data?this._data.visRowCount()-1:0}getRowAt(t){return this._pageModel?this._pageModel.getRow(t):t}clearGroupBy(){if(this.isGrouped()){const t=this._groupModel;this._data&&this._data.removeListener(t),t.removeListener(this),t.clear(),t.destroy(),this._groupModel=this._rowGroup=this._dataGroup=null,this.invalidateLayout()}}$_destroyGroupModel(t){t&&(this._data&&this._data.removeListener(t),t.removeListener(this),t.clear(),t.destroy(),this._groupModel=null,t===this._rowGroup&&(this._rowGroup=null),t===this._dataGroup&&(this._dataGroup=null))}$_destroyPageModel(){this._pageModel&&(this._pageModel.removeListener(this),this._pageModel=this._pageModel.destroy())}rowGroupBy(e){this.current().orientation()===n.HORIZONTAL&&lt(Z.canNotHorzGrouping),this._data||lt(Z.dataMustSet),e&&0!==e.length||lt(Z.requireGroupingInfos),this._data instanceof Rh&&lt(Z.canNotRowGrouping),this.$_destroyPageModel(),this.$_destroyGroupModel(this._dataGroup);let t=this._rowGroup;var i=this.isRowGrouped();const s=this._current;for(let t=0;t<e.length;t++){var r=e[t];"string"==typeof r&&(e[t]={field:r})}e.forEach(t=>{t.header=t.header||s.rowGroup().header(),t.footer=t.footer||s.rowGroup().footer()}),t?t.clear():(t=this._rowGroup=new He,this._data&&this._data.addListener(t),t.addListener(this)),t.build(this._data,this._current.rowGroup(),e),0==t.levels()?this.$_destroyGroupModel(t):this._groupModel=t,this.isRowGrouped()!==i&&this.invalidateLayout()}dataGroupBy(t){this.current().orientation()===n.HORIZONTAL&&lt(Z.canNotHorzGrouping),this._data||lt(Z.dataMustSet),this._data instanceof Rh||lt(Z.canNotDataGrouping),this.$_destroyPageModel(),this.$_destroyGroupModel(this._rowGroup);let e=this._dataGroup;var i=this.isDataGrouped();e?e.clear():(e=this._dataGroup=new ri,this._data&&this._data.addListener(e),e.addListener(this)),e.build(this._data,this._current.dataGroup(),t),this._groupModel=e,this.isDataGrouped()!==i&&this.invalidateLayout()}isMaster(t){return this._data.isMaster(t)}setPaging(t){this.$_destroyPageModel(),t&&(this._pageModel=new ni(this._rowGroup||this._dataGroup||this._data,t),this._pageModel.addListener(this),this.invalidateLayout())}getPageRows(t){return this._pageModel.getPageRows(t)}isSingleRow(){return this._singleRow}getSummary(t){return this._data&&this._data.getSummary(t)}scrollBy(t){if(this._fullMode||this.isEmpty())return!1;if(0===(t=0<t?Math.ceil(t):Math.floor(t)))return!1;const e=this._listView;this.setLock();try{var i=e.scrollBy(t);return!0===i&&(this._scrollIndex=e.scrollPos(),this._scrollOff=e.scrollOff(),this._topRow=e.topRow()),this.$_checkRowEnded(),!0===i}finally{this.releaseLock(!1),this._reqScrollIndex=this._reqScrollOff=NaN}}scrollToEnd(t){if(!(this.isEmpty()||t>=this._data.rowCount())){t=he(t,-1);const e=this._listView;this.setLock();try{e.scrollToEnd(t),this._scrollIndex=e.scrollPos(),this._scrollOff=e.scrollOff(),this._topRow=e.topRow(),this.$_checkRowEnded()}finally{this.releaseLock(!1),this._reqScrollIndex=this._reqScrollOff=NaN}}}findView(t,e){return this.bodyView().findSimpleLayoutView(t,e)}findElement(t,e){return this.bodyView().findDom(t,e)}isRowCheckable(t){return this._flags.isCheckable(t)}isRowChecked(t){return this._flags.isChecked(t)}checkRow(t,e){return this._flags.setChecked(t,e)}toggleChecked(t){this._flags.setChecked(t,!this._flags.isChecked(t))}checkAll(t){return this._flags.checkAll(t)}isRowSearched(t){if(this._searchResult&&!this._searchModel.filtering)return this._flags.isSearched(t)}isRowDetailed(t){return this._flags.isDetailed(t)}setRowDetailed(t,e,i,s){this._flags.setDetailed(t,e,i),s&&this.bodyView().$_setDetailingRow(t)}$_getFlags(){return this._flags}getSelection(){return this._selection}clearSelection(){if(this._selection)return this._selection=null,this.onSelectionClear&&this.onSelectionClear({control:this.wrapperOrThis()}),this.invalidateLayout(),!0}selectRows(t,e){const i=this._data;this.clearSelection(),e=void 0===e?t:e,i&&0<=t&&t<i.rowCount()&&0<=e&&e<i.rowCount()&&(this._selection=new Wa(this.isGrouped()?this._groupModel:i,t,e),this.onSelectionAdd&&this.onSelectionAdd({control:this.wrapperOrThis(),startRow:this._selection.start,endRow:this._selection.end}),this.invalidateLayout())}resizeSelection(t){var e;this._selection&&(e=this._selection.end,this._selection.resize(t)&&(this.onSelectionResize&&this.onSelectionResize({control:this.wrapperOrThis(),newEnd:t,oldEnd:e}),this.invalidateLayout()))}swipeRow(t){let e=!1;var i;if(this.onRowSwipe&&(i={control:this.wrapperOrThis(),row:t},this.onRowSwipe(i),e=i.cancel),!e)switch(this._current.row().swipeAction()){case m.COMMAND:this.setCommandRow(t,!0);break;case m.PAGE:case m.TAP:case m.INFO:case m.EDIT:case m.ROW_BAR:case m.EDIT_BAR:}}closePanel(t){this._listView.closePanel(t)}showPanel(t,e){this._listView.showPanel(t,e)}togglePanel(t,e){this._listView.togglePanel(this.current().$_getPanel(t),e)}showFormPanel(t,e){t&&this.current().formPanel()._setActionTemplate(t),this.showPanel(this.current().formPanel(),e)}showButtonPanel(t){this.showPanel(this.current().buttonPanel(),t)}showSearchPanel(t,e){this.showPanel(this.current().searchPanel(),e)}showFilterPanel(t,e){const i=this.current().filterPanel();i.setModel(t),this.showPanel(i,e)}registerMenu(t,e){t&&(q.isObject(e)?this._menus[t]=e:this.unregisterMenu(t))}unregisterMenu(t){delete this._menus[t]}showMenu(t,e){(t="string"==typeof t?this._menus[t]:t||this._menus[this._current.menu()])&&t.items&&0<t.items.length&&this._listView.showMenu(new ba(this,t),e)}closeMenu(t){this._listView.hideMenu(t)}toggleMenu(t,e){this._listView.hideMenu(e)||this.showMenu(t,e)}clearSearch(t){if(this._searchResult&&(!t||t===this._searchResult)&&(this._flags.clearSearched(),this.invalidateLayout(),this._searchResult=this._searchResult.destroy(),this._searchFilter)){const e=this._data;e instanceof Co&&e.removeFilter(this._searchFilter,!0),this._searchFilter=null}}search(t,e){if(this.clearSearch(null),this._data){var i=this._groupModel||this._data;const s=this._searchModel=new Td(this),r=e?s.search(t,e,i):null,n=r&&r.fields();if(n&&0<n.length)for(const o of n)this._flags.setSearched(o.row,!0);if(this._searchResult=r,s.filtering){const a=this._data;this._searchFilter=Zd.SEARCH_FILTER+q.irandom(1e4),a instanceof Co&&(n&&n.forEach(t=>t.drow=a._rows[t.row]),i=this._flags.getSearchedRows(),a.setDataTags(i,1),i={name:this._searchFilter,filter:(t,e)=>a.isDataTag(t,1)},a.addFilter(i,!0,!0),n&&n.forEach(t=>t.row=t.drow.newIdx))}return r&&r.moveNext(),this.invalidateLayout(),r}return null}isRowPageVisible(){return this._rowPageView&&this._rowPageView.visible}closeRowPage(t,e){let i=this._rowPageView;if(i&&i.visible){if(i instanceof Bd&&t)try{var s=i.getValues(this._listView);if(!i.commit(s))return}catch(t){return console.error(t),void alert(t.message||t)}this._rowPageView=null,i.hide(this._listView.getOffsetBounds(),e)}}isInfoPageVisible(){return this._infoPageView&&this._infoPageView.visible}showInfoPage(i,s,r){if(this._rowPageView)console.warn("이미 Row Info View가 표시되고 있습니다.");else{let t=this._infoPageView,e;var n;if(this._data instanceof Rh?(n=this._data.getSourceRow(i),e=n.dv,i=n.row):e=this._data,e&&0<=i&&i<e.rowCount()){const o=this._current.infoPage();t?t.setModel(o):(t=this._infoPageView=new Od(this.doc(),o),this.addElement(t)),o.setModel(s),t.setRow(e,i),t.show(this._listView,this._listView.getOffsetBounds(),r),this._rowPageView=t}}}isEditPageVisible(){return this._editPageView&&this._editPageView.visible}showEditPage(i,s,r){if(this._rowPageView)console.warn("이미 Row Edit View가 표시되고 있습니다.");else{let t=this._editPageView,e;var n;if(this._data instanceof Rh?(n=this._data.getSourceRow(i),e=n.dv,i=n.row):e=this._data,e&&i<e.rowCount()){const o=0<=i?this._current.editPage():this._current.addPage();t?t.setModel(o):(t=this._editPageView=new Bd(this.doc(),o),this.addElement(t)),o.setModel(s),t.setRow(e,i),t.show(this._listView,this._listView.getOffsetBounds(),r),this._rowPageView=t}}}makeRowVisible(t){const e=this._data;if(e&&0<=t&&t<e.rowCount()){t=this.bodyView().makeRowVisible(t);if(t&&(t.pos!==this._scrollIndex||t.off!==this._scrollOff))return this.setScrollIndex(t.pos,t.off),!0}}makeGroupItemVisible(t){if(t instanceof ke){t=this._listView.makeItemVisible(t);if(t)return this.setScrollIndex(t.pos,t.off),!0}}setFocusedRow(t){var e=this._focusedRow;const i=this._data;i&&0<=t&&t<i.rowCount()?e!==t&&(this._focusedRow=t):0<=e&&(this._focusedRow=-1),this._focusedRow!==e&&(this.bodyView().setFocusedRow(this._focusedRow),this._listView.focusedRowChanged(this._focusedRow,e),this.onFocusedRowChange&&(e={control:this.wrapperOrThis(),row:this._focusedRow,oldRow:e},this.onFocusedRowChange(e)))}getEditValues(){if(this._rowPageView===this._editPageView)return this._editPageView.getValues(this._listView)}addTooltipView(t){this._listView.addTooltipView(t)}removeTooltipView(t){this._listView.removeTooltipView(t)}showToast(t){(t="string"==typeof t?{message:t}:t)&&(t.message||t.html)&&this._listView.showToast(t)}getDataGroupOfRow(t,e){const i=this._dataGroup;return i&&i.itemOfRow(t,e).group}_prepareRenderers(e){var i=e.children;const s=this._htmlTempls={};for(let t=i.length-1;0<=t;t--){var r=i[t];e.removeChild(r),r instanceof HTMLElement&&r.id&&(s[r.id]=r)}}invalidateLayout(t=!1){this.invalidate(t),this._layoutNeeded=!0}_windowResized(){this.invalidateLayout()}_creatDefaultTool(){return new yd(this)}_doInitModel(){this._defaults=new Ah(this,this,null,!1).load(bd),this._current=this._portrait=new Ah(this,this,this._defaults,!1),this._landscape=new Ah(this,this,this._defaults,!0),this._layoutPool=new Yd(this),this._iconSets={},this._shapes=new Uo(this),this._rendererPool=new rd,this._defRowTempl=new Kd(this),this._rowCommands=new xd}_doInitView(t){this._current=this.orientation()===o.LANDSCAPE?this._landscape:this._portrait}_doOrientationChanged(t){this.closePanel(!1),this._current=t===o.LANDSCAPE?this._landscape:this._portrait,this._orientationChanged&&this._orientationChanged(t),this.invalidateLayout()}_doControlObjectChanged(t,e){this.invalidateLayout()}_doBeforeRender(){this._layoutNeeded&&(this._current.prepareRender(),this._defRowTempl.clear(),this._layoutPool.prepareRender()),this._singleRow=this._current.singleRow().visible();var t=this._listView;this.isDataLoading()&&this.skeletonVisible?(this._skeletonListView||(this._skeletonListView=new Pd(this.doc(),this)),this._listView=this._skeletonListView):this._singleRow?this._listView=this._defaultListView:this.isRowGrouped()?(this._groupedListView||(this._groupedListView=new Kh(this.doc(),this)),this._listView=this._groupedListView):this.isDataGrouped()?(this._dataListView||(this._dataListView=new dl(this.doc(),this)),this._listView=this._dataListView):this._listView=this._defaultListView,t&&this._listView!==t&&this.removeElement(t),this.addElement(this._listView),this._listView.visible=!0,void 0===this._runTextFormatter&&(this._runTextFormatter=this._textFormatter||ge(this._textFormat)),void 0===this._runBoolFormatter&&(this._runBoolFormatter=this._boolFormatter||pe(this._boolFormat)),void 0===this._runNumberFormatter&&(this._runNumberFormatter=this._numberFormatter||fe(this._numberFormat)),void 0===this._runDateFormatter&&(this._runDateFormatter=this._dateFormatter||we(this._dateFormat));const e=this._current.row().borderLine();this.rowBorder={style:e.style()||this.getCssVar("--dl-row-border-line"),masterStyle:e.masterStyle()||this.getCssVar("--dl-master-border-line"),skipLast:e.skipLast(),skipGroupLast:e.skipGroupLast(),leafOnly:e.leafOnly()}}_doRender(t){this._rowPageView?this.$_renderRowList(t):this._fullMode?this.$_renderFull(t):this.$_renderDefault(t)}$_renderRowList(t){}$_renderFull(t){var e=(t,e,i)=>{this._listView.measure(t,{scrollPos:0,scrollOff:0},e,i)},i=t=>{const e=this._listView;e.resizeByMeasure().move(0,0),e.render(t)};try{var s=this.doc();const r=q.watch();e(s,t.width,Number.MAX_SAFE_INTEGER),J.log("ListControl measured in "+r.elapsedText(!0)),i(s),this._setSize(NaN,this._listView.height),J.log("ListControl rendered in "+r.elapsedText())}finally{this._layoutNeeded=!1}}$_renderDefault(t){var e=(t,e,i)=>{let s=this._scrollIndex,r=this._scrollOff;isNaN(this._reqScrollIndex)||(s=this._reqScrollIndex,r=he(this._reqScrollOff,0));var n={scrollPos:s,scrollOff:r};this._listView.measure(t,n,e,i)},i=t=>{const e=this._listView;var i=this._scrollIndex;e.resizeByMeasure().move(0,0),e.render(t),this._scrollIndex=e.scrollPos(),this._scrollOff=e.scrollOff(),this._topRow=e.topRow(),this._scrollIndex!=i&&this.onScroll&&this.onScroll({control:this,top:this._scrollIndex})};try{var s=this.doc(),r=+new Date;e(s,t.width,t.height);var n=+new Date;J.log("ListControl measured in "+(n-r)+"ms."),i(s),J.log("ListControl rendered in "+(+new Date-n)+"ms."),this.$_checkRowEnded()}finally{this._layoutNeeded=!1,this._reqScrollIndex=this._reqScrollOff=NaN}}_doAfterRender(){this._dataChanged=!1,this.$_clearUsedImages(),this._current.unprepareRender()}$_rowTouched(t){this._current.row().touchEffect()&&this.bodyView().setTouchedRow(t)}$_performRowClick(t,e){switch(e){case"select":this.selectRows(t);break;case _.CHECK:this.isRowCheckable(t)&&this.checkRow(t,!this.isRowChecked(t));break;case _.COMMAND:break;case _.EXPAND:if(this.isDataGrouped()){const r=this._dataGroup;r&&r.toggle(r.itemOfRow(t,!0).group,!1)}break;case _.DETAIL:this.setRowDetailed(t,!this.isRowDetailed(t),!1,!0);break;case _.DETAILEX:this.setRowDetailed(t,!this.isRowDetailed(t),!0,!0);break;case _.LINK:const s=this._current.row().link();var i=s.getLink(this.wrapperOrThis(),this._data,t);i&&(s.target()?window.open(i,s.target()):location.href=i);break;case _.INFO:this.showInfoPage(t,null,!0);break;case _.EDIT:this.showEditPage(t,null,!0);break;case _.MOVE:this.activeTool().requestDrag(new kn(t))}}$_rowClicked(e){if(0<=e){const s=this._current;if(this.fitRowWhenClick&&this.makeRowVisible(e),s.row().focusable()&&this.setFocusedRow(e),this.onRowClick){const r=this._rowClickArgs;if(r.control=this.wrapperOrThis(),r.row=e,r.cancel=!1,this.onRowClick(r),r.cancel)return}let t=s.row().clickAction();var i;this.isDataGrouped()&&(!this._data.isMaster(e)||(i=s.row().masterClickAction())&&(t=i)),this.$_performRowClick(e,t)}}$_rowLongPressed(e){if(0<=e){const s=this._current;if(this.onRowLongPress){const r=this._rowClickArgs;if(r.control=this.wrapperOrThis(),r.row=e,r.cancel=!1,this.onRowLongPress(r),r.cancel)return}let t=s.row().pressAction();var i;this.isDataGrouped()&&(!this._data.isMaster(e)||(i=s.row().masterPressAction())&&(t=i)),this.$_performRowClick(e,t)}}$_groupItemClicked(t){t instanceof Te?this.$_rowClicked(t.row()):(this.fitRowWhenClick&&this.makeGroupItemVisible(t),this._listView.clickItem(t))}$_clearUsedImages(){const e=this._imageList;for(let t=e.length-1;0<=t;t--){const i=e[t];i.parentElement&&!i.complete||(i.onload=null,e.splice(t,1))}const t=this._imageList2;for(const s in t){const r=t[s];r.complete&&(r.onload=null,delete t[s],N&&delete this._imageSizes[s])}}$_checkRowEnded(){var t=this.bodyView().isRowEnded();t&&!this._lastRowRevealed&&setTimeout(()=>{this.onLastRowRevealed&&this.onLastRowRevealed({control:this.wrapperOrThis()})},0),this._lastRowRevealed=t}}Zd.CLASS_NAME="dlist-control",Zd.SEARCH_FILTER="@_dlist_search_filter_",Zd.NUMBER_FORMAT="",Zd.BOOLEAN_FORMAT="False:True",Zd.DATE_FORMAT="yyyy.MM.dd HH:mm";let Xd=1;class Kd{constructor(t){this.id=Xd++,this.detailId=Xd++,this.collapsedId=Xd++,this._rowStyle=new ue,this._layouts={},this._control=t}get rowProps(){}get rowStyle(){return this._rowStyle}get layout(){function e(t){var e,t=t&&t.fields()||[];const i=[],s={layout:ds.TYPE,children:i};for(e of t)i.push({field:e.name});return s.style={backgroundColor:"#efefef"},new je(null,s,null)}const i=this._control.data();if(i instanceof Rh){var s=i.getSource(this.target);let t=this._layouts[s.hash];return t||(t=e(s),this._layouts[s.hash]=t),t}return this._layout||(this._layout=e(i)),this._layout}get detailed(){return null}clear(){this._layout=null}}class Jd extends i{get control(){return this.$_c.wrapper()}get cellStyle(){return this.$_c.cellStyle()}set cellStyle(t){this.$_c.setCellStyle(t)}get cellStyleCallback(){return this.$_c.cellStyleCallback()}set cellStyleCallback(t){this.$_c.setCellStyleCallback(t)}get style(){return this.$_c.style()}set style(t){this.$_c.setStyle(t)}get styleCallback(){return this.$_c.styleCallback()}set styleCallback(t){this.$_c.setStyleCallback(t)}}class t_ extends Jd{get display(){return this.$_c.display()}set display(t){this.$_c.setDisplay(t)}get rowOffset(){return this.$_c.rowOffset()}set rowOffset(t){this.$_c.setRowOffset(t)}get minWidth(){return this.$_c.minWidth()}set minWidth(t){this.$_c.setMinWidth(t)}get fitWidth(){return this.$_c.fitWidth()}set fitWidth(t){this.$_c.setFitWidth(t)}get prefix(){return this.$_c.prefix()}set prefix(t){this.$_c.setPrefix(t)}get suffix(){return this.$_c.suffix()}set suffix(t){this.$_c.setSuffix(t)}}class e_ extends Jd{get size(){return this.$_c.size()}set size(t){this.$_c.setSize(t)}get masterVisible(){return this.$_c.masterVisible()}set masterVisible(t){this.$_c.setMasterVisible(t)}get dragMode(){return this.$_c.dragMode()}set dragMode(t){this.$_c.setDragMode(t)}}class i_ extends Jd{get label(){return this.$_c.label()}set label(t){this.$_c.setLabel(t)}get hint(){return this.$_c.hint()}set hint(t){this.$_c.setHint(t)}get imageUrl(){return this.$_c.imageUrl()}set imageUrl(t){this.$_c.setImageUrl(t)}get width(){return this.$_c.width()}set width(t){this.$_c.setWidth(t)}get height(){return this.$_c.height()}set height(t){this.$_c.setHeight(t)}get className(){return this.$_c.className()}set className(t){this.$_c.setClassName(t)}get letter(){return this.$_c.letter()}set letter(t){this.$_c.setLetter(t)}get onClick(){return this.$_c.onClick()}set onClick(t){this.$_c.setOnClick(t)}}class s_ extends Jd{get imageUrl(){return this.$_c.imageUrl()}set imageUrl(t){this.$_c.setImageUrl(t)}get width(){return this.$_c.width()}set width(t){this.$_c.setWidth(t)}get height(){return this.$_c.height()}set height(t){this.$_c.setHeight(t)}get clickable(){return this.$_c.clickable()}set clickable(t){this.$_c.setClickable(t)}get onClick(){return this.$_c.onClick()}set onClick(t){this.$_c.setOnClick(t)}get urlCallback(){return this.$_c.urlCallback()}set urlCallback(t){this.$_c.setUrlCallback(t)}}class r_ extends Jd{get size(){return this.$_c.size()}set size(t){this.$_c.setSize(t)}get shape(){return this.$_c.shape()}set shape(t){this.$_c.setShape(t)}get clickable(){return this.$_c.clickable()}set clickable(t){this.$_c.setClickable(t)}get shapeCallback(){return this.$_c.shapeCallback()}set shapeCallback(t){this.$_c.setShapeCallback(t)}get onClick(){return this.$_c.onClick()}set onClick(t){this.$_c.setOnClick(t)}}class n_ extends Jd{get letter(){return this.$_c.letter()}set letter(t){this.$_c.setLetter(t)}}class o_ extends i_{get position(){return this.$_c.position()}set position(t){this.$_c.setPosition(t)}}class a_ extends Jd{}class h_ extends i{get visible(){return this.$_c.visible()}set visible(t){this.$_c.setVisible(t)}get style(){return this.$_c.style()}set style(t){this.$_c.setStyle(t)}_doAssignProps(t){if("boolean"==typeof t)return this.visible=t,!0}}class l_ extends h_{get mode(){return this.$_c.mode()}set mode(t){this.$_c.setMode(t)}get position(){return this.$_c.position()}set position(t){this.$_c.setPosition(t)}get size(){return this.$_c.size()}set size(t){this.$_c.setSize(t)}get gapLeft(){return this.$_c.gapLeft()}set gapLeft(t){this.$_c.setGapLeft(t)}get gapRight(){return this.$_c.gapRight()}set gapRight(t){this.$_c.setGapRight(t)}get gapTop(){return this.$_c.gapTop()}set gapTop(t){this.$_c.setGapTop(t)}get gapBottom(){return this.$_c.gapBottom()}set gapBottom(t){this.$_c.setGapBottom(t)}}class d_ extends l_{constructor(t){super(),t.setWrapper(this),this._order=t.order().createWrapper(t_),this._check=t.check().createWrapper(e_),this._shape=t.shape().createWrapper(r_),this._letter=t.letter().createWrapper(n_),this._image=t.image().createWrapper(s_),this._button=t.button().createWrapper(i_),this._move=t.move().createWrapper(a_)}get display(){return this.$_c.display()}set display(t){this.$_c.setDisplay(t)}get order(){return this._order}get check(){return this._check}get shape(){return this._shape}get letter(){return this._letter}get image(){return this._image}get button(){return this._button}get move(){return this._move}}class __ extends i_{get confirmMessage(){return this.$_c.confirmMessage()}set confirmMessage(t){this.$_c.setConfirmMessage(t)}}class c_ extends i_{get editHeader(){return this.$_c.editHeader()}set editHeader(t){this.$_c.setEditHeader(t)}get editTemplate(){return this.$_c.editTemplate()}set editTemplate(t){this.$_c.setEditTemplate(t)}}class u_ extends c_{get appending(){return this.$_c.appending}set appending(t){this.$_c.appending=t}}class g_ extends i_{get infoHeader(){return this.$_c.infoHeader()}set infoHeader(t){this.$_c.setInfoHeader(t)}get infoTemplate(){return this.$_c.infoTemplate()}set infoTemplate(t){this.$_c.setInfoTemplate(t)}}class p_ extends i_{get target(){return this.$_c.target()}set target(t){this.$_c.setTarget(t)}get url(){return this.$_c.url()}set url(t){this.$_c.setUrl(t)}get urlCallback(){return this.$_c.urlCallback()}set urlCallback(t){this.$_c.setUrlCallback(t)}}class f_ extends l_{constructor(t){super(),t.setWrapper(this),this._delete=t.delete().createWrapper(__),this._add=t.add().createWrapper(u_),this._edit=t.edit().createWrapper(c_),this._info=t.info().createWrapper(g_),this._link=t.link().createWrapper(p_),this._custom=t.custom().createWrapper(i_),this._move=t.move().createWrapper(a_)}get action(){return this.$_c.action()}set action(t){this.$_c.setAction(t)}get delete(){return this._delete}setDelete(t){this._delete.assignProps(t)}get add(){return this._add}get edit(){return this._edit}get info(){return this._info}get link(){return this._link}get custom(){return this._custom}get move(){return this._move}}class w_ extends h_{get onLetterClick(){return this.$_c.onLetterClick()}set onLetterClick(t){this.$_c.setOnLetterClick(t)}get length(){return this.$_c.length()}set length(t){this.$_c.setLength(t)}get floating(){return this.$_c.floating()}set floating(t){this.$_c.setFloating(t)}get width(){return this.$_c.width()}set width(t){this.$_c.setWidth(t)}get minWidth(){return this.$_c.minWidth()}set minWidth(t){this.$_c.setMinWidth(t)}get maxWidth(){return this.$_c.maxWidth()}set maxWidth(t){this.$_c.setMaxWidth(t)}get spaceCharacter(){return this.$_c.spaceCharacter()}set spaceCharacter(t){this.$_c.setSpaceCharacter(t)}get caseSensitive(){return this.$_c.caseSensitive()}set caseSensitive(t){this.$_c.setCaseSensitive(t)}get letters(){return this.$_c.letters()}set letters(t){this.$_c.setLetters(t)}get indexField(){return this.$_c.indexField()}set indexField(t){this.$_c.setIndexField(t)}get autoScroll(){return this.$_c.autoScroll()}set autoScroll(t){this.$_c.setAutoScroll(t)}}class m_ extends h_{get position(){return this.$_c.position()}set position(t){this.$_c.setPosition(t)}get mode(){return this.$_c.mode()}set mode(t){this.$_c.setMode(t)}get barWidth(){return this.$_c.barWidth()}set barWidth(t){this.$_c.setBarWidth(t)}get showSelection(){return this.$_c.showSelection()}set showSelection(t){this.$_c.setShowSelection(t)}get clickable(){return this.$_c.clickable()}set clickable(t){this.$_c.setClickable(t)}get tooltipVisible(){return this.$_c.tooltipVisible()}set tooltipVisible(t){this.$_c.setTooltipVisible(t)}get tooltipValue(){return this.$_c.tooltipValue()}set tooltipValue(t){this.$_c.setTooltipValue(t)}get firstTooltip(){return this.$_c.firstTooltip()}set firstTooltip(t){this.$_c.setFirstTooltip(t)}get lastTooltip(){return this.$_c.lastTooltip()}set lastTooltip(t){this.$_c.setLastTooltip(t)}get tooltipStyle(){return this.$_c.tooltipStyle()}set tooltipStyle(t){this.$_c.setTooltipStyle(t)}}class v_ extends h_{get floating(){return this.$_c.floating()}set floating(t){this.$_c.setFloating(t)}get barWidth(){return this.$_c.barWidth()}set barWidth(t){this.$_c.setBarWidth(t)}get thumbWidth(){return this.$_c.thumbWidth()}set thumbWidth(t){this.$_c.setThumbWidth(t)}get minThumbLength(){return this.$_c.minThumbLength()}set minThumbLength(t){this.$_c.setMinThumbLength(t)}}class y_ extends i{get action(){return this.$_c.action()}get label(){return this.$_c.label()}get className(){return this.$_c.className()}set className(t){this.$_c.setClassName(t)}get disabledClass(){return this.$_c.disabledClass()}set disabledClass(t){this.$_c.setDisabledClass(t)}get hint(){return this.$_c.hint()}set hint(t){this.$_c.setHint(t)}get disabled(){return this.$_c.disabled()}}class b_ extends h_{constructor(t){super(),t.setWrapper(this),this._first=t.first().createWrapper(y_),this._prev=t.prev().createWrapper(y_),this._next=t.next().createWrapper(y_),this._last=t.last().createWrapper(y_)}get position(){return this.$_c.position()}set position(t){this.$_c.setPosition(t)}get first(){return this._first}get prev(){return this._prev}get next(){return this._next}get last(){return this._last}get width(){return this.$_c.width()}set width(t){this.$_c.setWidth(t)}get height(){return this.$_c.height()}set height(t){this.$_c.setHeight(t)}get itemGap(){return this.$_c.itemGap()}set itemGap(t){this.$_c.setItemGap(t)}get itemGap2(){return this.$_c.itemGap2()}set itemGap2(t){this.$_c.setItemGap2(t)}}class S_ extends i{get className(){return this.$_c.className()}set className(t){this.$_c.setClassName(t)}get hint(){return this.$_c.hint()}set hint(t){this.$_c.setHint(t)}}class C_ extends S_{get visible(){return this.$_c.visible()}set visible(t){this.$_c.setVisible(t)}}class x_ extends h_{constructor(t){super(),t.setWrapper(this),this._first=t.first().createWrapper(C_),this._last=t.last().createWrapper(C_),this._index=t.index().createWrapper(S_),this._current=t.current().createWrapper(S_)}get position(){return this.$_c.position()}set position(t){this.$_c.setPosition(t)}get itemGap(){return this.$_c.itemGap()}set itemGap(t){this.$_c.setItemGap(t)}get autoScroll(){return this.$_c.autoScroll()}set autoScroll(t){this.$_c.setAutoScroll(t)}get first(){return this._first}get last(){return this._last}get index(){return this._index}get current(){return this._current}get width(){return this.$_c.width()}set width(t){this.$_c.setWidth(t)}get height(){return this.$_c.height()}set height(t){this.$_c.setHeight(t)}}class R_ extends h_{get orientation(){return this.$_c.orientation()}set orientation(t){this.$_c.setOrientation(t)}get mode(){return this.$_c.mode()}set mode(t){this.$_c.setMode(t)}get minCellWidth(){return this.$_c.minCellWidth()}set minCellWidth(t){this.$_c.setMinCellWidth(t)}get minCellHeight(){return this.$_c.minCellHeight()}set minCellHeight(t){this.$_c.setMinCellHeight(t)}}class E_ extends h_{get showHandle(){return this.$_c.showHandle()}set showHandle(t){this.$_c.setShowHandle(t)}}class V_ extends i{get rootUrl(){return this.$_c.rootUrl()}set rootUrl(t){this.$_c.setRootUrl(t)}get linkField(){return this.$_c.linkField()}set linkField(t){this.$_c.setLinkField(t)}get linkCallback(){return this.$_c.linkCallback()}set linkCallback(t){this.$_c.setLinkCallback(t)}get target(){return this.$_c.target()}set target(t){this.$_c.setTarget(t)}}class $_ extends i{get enabled(){return this.$_c.enabled()}set enabled(t){this.$_c.setEnabled(t)}get mode(){return this.$_c.mode()}set mode(t){this.$_c.setMode(t)}get backward(){return this.$_c.backward()}set backward(t){this.$_c.setBackward(t)}get duration(){return this.$_c.duration()}set duration(t){this.$_c.setDuration(t)}get changeDuration(){return this.$_c.changeDuration()}set changeDuration(t){this.$_c.setChangeDuration(t)}}class A_ extends $_{get rowsPerScroll(){return this.$_c.rowsPerScroll()}set rowsPerScroll(t){this.$_c.setRowsPerScroll(t)}}class L_ extends i{constructor(t){super(),t.setWrapper(this),this._link=t.link().createWrapper(V_),this._borderLine=t.borderLine().createWrapper(J_),this._focusMask=t.focusMask().createWrapper(tc),this._autoScroll=t.autoScroll().createWrapper(A_)}get template(){return this.$_c.template()}set template(t){this.$_c.setTemplate(t)}get largeTemplate(){return this.$_c.largeTemplate()}set largeTemplate(t){this.$_c.setLargeTemplate(t)}get templateCallback(){return this.$_c.templateCallback()}set templateCallback(t){this.$_c.setTemplateCallback(t)}get templateParams(){return this.$_c.templateParams()}set templateParams(t){this.$_c.setTemplateParams(t)}get style(){return this.$_c.style()}set style(t){this.$_c.setStyle(t)}get height(){return this.$_c.height()}set height(t){this.$_c.setHeight(t)}get minHeight(){return this.$_c.minHeight()}set minHeight(t){this.$_c.setMinHeight(t)}get maxHeight(){return this.$_c.maxHeight()}set maxHeight(t){this.$_c.setMinHeight(t)}get clickAction(){return this.$_c.clickAction()}set clickAction(t){this.$_c.setClickAction(t)}get masterClickAction(){return this.$_c.masterClickAction()}set masterClickAction(t){this.$_c.setMasterClickAction(t)}get pressAction(){return this.$_c.pressAction()}set pressAction(t){this.$_c.setPressAction(t)}get masterPressAction(){return this.$_c.masterPressAction()}set masterPressAction(t){this.$_c.setMasterPressAction(t)}get swipeAction(){return this.$_c.swipeAction()}set swipeAction(t){this.$_c.setSwipeAction(t)}get commands(){return this.$_c.commands()}set commands(t){this.$_c.setCommands(t)}get link(){return this._link}get borderLine(){return this._borderLine}get focusMask(){return this._focusMask}get autoScroll(){return this._autoScroll}get focusable(){return this.$_c.focusable()}set focusable(t){this.$_c.setFocusable(t)}get touchEffect(){return this.$_c.touchEffect()}set touchEffect(t){this.$_c.setTouchEffect(t)}get deleteAnimation(){return this.$_c.deleteAnimation()}set rowDeleteAnimation(t){this.$_c.setDeleteAnimation(t)}}class D_ extends i{get control(){return this.$_c.owner().wrapper()}get visible(){return this.$_c.visible()}set visible(t){this.$_c.setVisible(t)}_doAssignProps(t){if("boolean"==typeof t)return this.visible=t,!0}}class k_ extends D_{get template(){return this.$_c.template()}set template(t){this.$_c.setTemplate(t)}get layoutParams(){return this.$_c.layoutParams()}set layoutParams(t){this.$_c.setLayoutParams(t)}get style(){return this.$_c.style()}set style(t){this.$_c.setStyle(t)}get layoutStyle(){return this.$_c.layoutStyle()}set layoutStyle(t){this.$_c.setLayoutStyle(t)}}class T_ extends k_{get buttons(){const t=this.$_c.buttons();return t&&t.map(t=>Object.assign({},t))}set buttons(t){this.$_c.setButtons(t)}get buttonGap(){return this.$_c.buttonGap()}set buttonGap(t){this.$_c.setButtonGap(t)}get clickAction(){return this.$_c.clickAction()}set clickAction(t){this.$_c.setClickAction(t)}getButton(t){t=this.$_c.getButton(t);return t&&Object.assign({},t)}setButton(t){this.$_c.setButton(t)}removeButton(t){this.$_c.removeButton(t)}showButton(t){this.$_c.setButtonVisible(t,!0)}hideButton(t){this.$_c.setButtonVisible(t,!1)}setButtonEnabled(t,e){this.$_c.setButtonEnabled(t,e)}getButtonState(t){return this.$_c.getButtonState(t)}setButtonState(t,e){this.$_c.setButtonState(t,e)}}class P_ extends T_{get caption(){return this.$_c.caption()}set caption(t){this.$_c.setCaption(t)}get captionAlign(){return this.$_c.captionAlign()}set captionAlign(t){this.$_c.setCaptionAlign(t)}get captionColor(){return this.$_c.captionColor()}set captionColor(t){this.$_c.setCaptionColor(t)}get showCheck(){return this.$_c.showCheck()}set showCheck(t){this.$_c.setShowCheck(t)}get autoCheck(){return this.$_c.autoCheck()}set autoCheck(t){this.$_c.setAutoCheck(t)}}class M_ extends T_{}class I_ extends k_{get showOrder(){return this.$_c.showOrder()}set showOrder(t){this.$_c.setShowOrder(t)}}class N_ extends D_{get position(){return this.$_c.position()}set position(t){this.$_c.setPosition(t)}get resetVisible(){return this.$_c.resetVisible()}set resetVisible(t){this.$_c.setResetVisible(t)}get optionsVisible(){return this.$_c.optionsVisible()}set optionsVisible(t){this.$_c.setOptionsVisible(t)}get alwaysResult(){return this.$_c.alwaysResult()}set alwaysResult(t){this.$_c.setAlwaysResult(t)}}class O_ extends D_{get position(){return this.$_c.position()}set position(t){this.$_c.setPosition(t)}get clearWhenClose(){return this.$_c.clearWhenClose()}set clearWhenClose(t){this.$_c.setClearWhenClose(t)}}class B_ extends D_{get fields(){return this.$_c.fields()}set fields(t){this.$_c.setFields(t)}}class F_ extends i{get position(){return this.$_c.position()}set position(t){this.$_c.setPosition(t)}get showMode(){return this.$_c.showMode()}set showMode(t){this.$_c.setShowMode(t)}get size(){return this.$_c.size()}set size(t){this.$_c.setSize(t)}get minSize(){return this.$_c.minSize()}set minSize(t){this.$_c.setMinSize(t)}get maxSize(){return this.$_c.maxSize()}set maxSize(t){this.$_c.setMaxSize(t)}get style(){return this.$_c.style()}set style(t){this.$_c.setStyle(t)}}class z_ extends F_{get buttons(){return this.$_c.buttons()}set buttons(t){this.$_c.setButtons(t)}get buttonGap(){return this.$_c.buttonGap()}set buttonGap(t){this.$_c.setButtonGap(t)}}class H_ extends z_{get buttonPosition(){return this.$_c.buttonPosition()}set buttonPosition(t){this.$_c.setButtonPosition(t)}get cancelLabel(){return this.$_c.cancelLabel()}set cancelLabel(t){this.$_c.setCancelLabel(t)}get okLabel(){return this.$_c.okLabel()}set okLabel(t){this.$_c.setOkLabel(t)}}class W_ extends H_{get template(){return this.$_c.template()}set template(t){this.$_c.setTemplate(t)}}class G_ extends z_{get arrange(){return this.$_c.arrange()}set arrange(t){this.$_c.setArrange(t)}get align(){return this.$_c.align()}set align(t){this.$_c.setAlign(t)}}class U_ extends H_{get display(){return this.$_c.display()}set display(t){this.$_c.setDisplay(t)}get matchCaseLabel(){return this.$_c.matchCaseLabel()}set matchCaseLabel(t){this.$_c.setMatchCaseLabel(t)}get wholeWordLabel(){return this.$_c.wholeWordLabel()}set wholeWordLabel(t){this.$_c.setWholeWordLabel(t)}get regExpLabel(){return this.$_c.regExpLabel()}set regExpLabel(t){this.$_c.setRegExpLabel(t)}get searchNextLabel(){return this.$_c.searchNextLabel()}set searchNextLabel(t){this.$_c.setSearchNextLabel(t)}get searchAllLabel(){return this.$_c.searchAllLabel()}set searchAllLabel(t){this.$_c.setSearchAllLabel(t)}get lineGap(){return this.$_c.lineGap()}set lineGap(t){this.$_c.setLineGap(t)}get alwaysResult(){return this.$_c.alwaysResult()}set alwaysResult(t){this.$_c.setAlwaysResult(t)}}class q_ extends H_{get autoApply(){return this.$_c.autoApply()}set autoApply(t){this.$_c.setAutoApply(t)}}class j_ extends i{get visible(){return this.$_c.visible}set visible(t){this.$_c.setVisible(t)}get collapsedVisible(){return this.$_c.collapsedVisible}set collapsedVisible(t){this.$_c.setCollapsedVisible(t)}get template(){return this.$_c.template}set template(t){this.$_c.setTemplate(t)}get clickAction(){return this.$_c.clickAction()}set clickAction(t){this.$_c.setClickAction(t)}}class Y_ extends j_{}class Q_ extends i{constructor(t){super(),t.setWrapper(this)}get theme(){return this.$_c.theme()}set theme(t){this.$_c.setTheme(t)}get rowIndents(){return this.$_c.rowIndents()}set rowIndents(t){this.$_c.setRowIndents(t)}get indent(){return this.$_c.indent()}set indent(t){this.$_c.setIndent(t)}}class Z_ extends Q_{constructor(t){super(t),this._header=t.header().createWrapper(j_),this._footer=t.footer().createWrapper(Y_),this._expander=t.expander().createWrapper(o_)}get header(){return this._header}get footer(){return this._footer}get expander(){return this._expander}get groupIndent(){return this.$_c.groupIndent()}set groupIndent(t){this.$_c.setGroupIndent(t)}get endMargin(){return this.$_c.endMargin()}set endMargin(t){this.$_c.setEndMargin(t)}}class X_ extends Q_{constructor(t){super(t),this._expander=t.expander().createWrapper(o_)}get expander(){return this._expander}}class K_ extends i{getInfo(t){return this.$_c.getInfo(t)}setInfo(t,e){this.$_c.setInfo(t,e)}setInfos(t){this.$_c.setInfos(t)}setMaster(t){this.$_c.setMaster(t)}}class J_ extends i{get visible(){return this.$_c.visible()}set visible(t){this.$_c.setVisible(t)}get style(){return this.$_c.style()}set style(t){this.$_c.setStyle(t)}get masterStyle(){return this.$_c.masterStyle()}set masterStyle(t){this.$_c.setMasterStyle(t)}get nearIndent(){return this.$_c.nearIndent()}set nearIndent(t){this.$_c.setNearIndent(t)}get farIndent(){return this.$_c.farIndent()}set farIndent(t){this.$_c.setFarIndent(t)}get skipLast(){return this.$_c.skipLast()}set skipLast(t){this.$_c.setSkipLast(t)}get skipGroupLast(){return this.$_c.skipGroupLast()}set skipGroupLast(t){this.$_c.setSkipGroupLast(t)}get leafOnly(){return this.$_c.leafOnly()}set leafOnly(t){this.$_c.setLeafOnly(t)}}class tc extends i{get visible(){return this.$_c.visible()}set visible(t){this.$_c.setVisible(t)}get nearIndent(){return this.$_c.nearIndent()}set nearIndent(t){this.$_c.setNearIndent(t)}get farIndent(){return this.$_c.farIndent()}set farIndent(t){this.$_c.setFarIndent(t)}}class ec extends P_{}class ic extends i{constructor(t){super(),t.setWrapper(this),this._header=this._createHeader(t)}get header(){return this._header}get fitSize(){return this.$_c.fitSize()}set fitSize(t){this.$_c.setFitSize(t)}get style(){return this.$_c.style()}set style(t){this.$_c.setStyle(t)}get effectDuration(){return this.$_c.effectDuration()}set effectDuration(t){this.$_c.setEffectDuration(t)}get template(){return this.$_c.template()}set template(t){this.$_c.setTemplate(t)}get showDirection(){return this.$_c.showDirection()}set showDirection(t){this.$_c.setShowDirection(t)}get hideDirection(){return this.$_c.hideDirection()}set hideDirection(t){this.$_c.setHideDirection(t)}get allFields(){return this.$_c.allFields()}set allFields(t){this.$_c.setAllFields(t)}get fields(){return this.$_c.fields()}set fields(t){this.$_c.setFields(t)}get templateVars(){return this.$_c.templateVars()}set templateVars(t){this.$_c.setTemplateVars(t)}get templateParams(){return this.$_c.templateParams2()}set templateParams(t){this.$_c.setTemplateParams2(t)}}class sc extends ec{}class rc extends ic{constructor(t){super(t)}get viewType(){return this.$_c.viewType()}set viewType(t){this.$_c.setViewType(t)}_createHeader(t){return t.header().createWrapper(sc)}}class nc extends ec{}class oc extends ic{constructor(t){super(t)}get viewType(){return this.$_c.viewType()}set viewType(t){this.$_c.setViewType(t)}_createHeader(t){return t.header().createWrapper(nc)}}class ac extends $_{get changeEffect(){return this.$_c.changeEffect()}set changeEffect(t){this.$_c.setChangeEffect(t)}}class hc extends i{constructor(t){super(),t.setWrapper(this),this._autoScroll=t.autoScroll().createWrapper(ac)}get visible(){return this.$_c.visible()}set visible(t){this.$_c.setVisible(t)}get noShrink(){return this.$_c.noShrink()}set noShrink(t){this.$_c.setNoShrink(t)}get maskEffect(){return this.$_c.maskEffect()}set maskEffect(t){this.$_c.setMaskEffect(t)}get showPrev(){return this.$_c.showPrev()}set showPrev(t){this.$_c.setShowPrev(t)}get showNext(){return this.$_c.showNext()}set showNext(t){this.$_c.setShowNext(t)}get rowChangeDir(){return this.$_c.rowChangeDir()}set rowChangeDir(t){this.$_c.setRowChangeDir(t)}get rowNavigator(){return this.$_c.rowNavigator()}set rowNavigator(t){this.$_c.setRowNavigator(t)}get rowBorderVisible(){return this.$_c.rowBorderVisible()}set rowBorderVisible(t){this.$_c.setRowBorderVisible(t)}get autoScroll(){return this._autoScroll}_doAssignProps(t){if("boolean"==typeof t)return this.$_c.setVisible(t),!0}}class lc extends i{get visible(){return this.$_c.visible()}set visible(t){this.$_c.setVisible(t)}get endSpace(){return this.$_c.endSpace()}set endSpace(t){this.$_c.setEndSpace(t)}get rowTemplate(){return this.$_c.rowTemplate()}set rowTemplate(t){this.$_c.setRowTemplate(t)}get indicatorVisible(){return this.$_c.indicatorVisible()}set indicatorVisible(t){this.$_c.setIndicatorVisible(t)}get indicatorType(){return this.$_c.indicatorType()}set indicatorType(t){this.$_c.setIndicatorType(t)}get indicatorSize(){return this.$_c.indicatorSize()}set indicatorSize(t){this.$_c.setIndicatorSize(t)}get indicatorMargin(){return this.$_c.indicatorMargin()}set indicatorMargin(t){this.$_c.setIndicatorMargin(t)}get layoutParams(){return this.$_c.layoutParams()}set layoutParams(t){this.$_c.setLayoutParams(t)}_doAssignProps(t){if("boolean"==typeof t)return this.$_c.setVisible(t),!0}}class dc extends i{get template(){return this.$_c.template()}set template(t){this.$_c.setTemplate(t)}get templateParams(){return this.$_c.templateParams2()}set templateParams(t){this.$_c.setTemplateParams2(t)}}class _c extends dc{get messageVisible(){return this.$_c.messageVisible()}set messageVisible(t){this.$_c.setMessageVisible(t)}get message(){return this.$_c.message()}set message(t){this.$_c.setMessage(t)}get loadVisible(){return this.$_c.loadVisible()}set loadVisible(t){this.$_c.setLoadVisible(t)}get loadLabel(){return this.$_c.loadLabel()}set loadLabel(t){this.$_c.setLoadLabel(t)}get onLoadClick(){return this.$_c.onLoadClick()}set onLoadClick(t){this.$_c.setOnLoadClick(t)}}class cc extends dc{}class uc extends i{constructor(t){super()}}class gc extends uc{get visible(){return this.$_c.visible()}set visible(t){this.$_c.setVisible(t)}get position(){return this.$_c.position()}set position(t){this.$_c.setPosition(t)}get data(){return this._data}set data(t){t!==this._data&&(this._data=t,this.$_c.setData(t&&t.$_d))}get rows(){return this.$_c.rows()}set rows(t){this.$_c.setRows(t)}}class pc extends uc{constructor(t){super(t),this._rowBar=new d_(t._rowBar),this._editBar=new f_(t._editBar),this._indexBar=t._indexBar.createWrapper(w_),this._scrollIndicator=t._scrollIndicator.createWrapper(m_),this._scrollBar=t._scrollBar.createWrapper(v_),this._pageNavigator=new b_(t._pageNavigator),this._pageScroller=new x_(t._pageScroller),this._commandBox=t._commandBox.createWrapper(R_),this._selectionMask=t._selectionMask.createWrapper(E_),this._row=new L_(t.row()),this._headRows=t.headRows().setWrapper(new gc(t.headRows())),this._header=t._header.createWrapper(P_),this._footer=t._footer.createWrapper(M_),this._searchBar=t._searchBar.createWrapper(N_),this._searchResultBar=t._searchResultBar.createWrapper(O_),this._fieldBar=t._fieldBar.createWrapper(B_),this._fieldHeader=t._fieldHeader.createWrapper(I_),this._formPanel=t._formPanel.createWrapper(W_),this._buttonPanel=t._buttonPanel.createWrapper(G_),this._searchPanel=t._searchPanel.createWrapper(U_),this._filterPanel=t._filterPanel.createWrapper(q_),this._rowGroup=new Z_(t._rowGroup),this._dataGroup=new X_(t._dataGroup),this._rowInfos=t._dataRowInfos.createWrapper(K_),this._infoPage=new rc(t._infoPage),this._editPage=new oc(t._editPage),this._addPage=new oc(t._addPage),this._singleRow=new hc(t._singleRow),this._attachedRow=t._attachedRow.createWrapper(lc),this._emptyPage=t._emptyPage.createWrapper(_c),this._loadingPage=t._loadingPage.createWrapper(cc)}get isLandScape(){return this.$_c.isLandscape()}get orientation(){return this.$_c.orientation()}set orientation(t){this.$_c.setOrientation(t)}get largeSize(){return this.$_c.largeSize()}set largeSize(t){this.$_c.setLargeSize(t)}get rowWidth(){return this.$_c.rowWidth()}set rowWidth(t){this.$_c.setRowWidth(t)}get minRowWidth(){return this.$_c.minRowWidth()}set minRowWidth(t){this.$_c.setMinRowWidth(t)}get maxRowWidth(){return this.$_c.maxRowWidth()}set maxRowWidth(t){this.$_c.setMaxRowWidth(t)}get rowCount(){return this.$_c.rowCount()}set rowCount(t){this.$_c.setRowCount(t)}get levelIndent(){return this.$_c.levelIndent()}set levelIndent(t){this.$_c.setLevelIndent(t)}get menu(){return this.$_c.menu()}set menu(t){this.$_c.setMenu(t)}get rowBar(){return this._rowBar}get editBar(){return this._editBar}get indexBar(){return this._indexBar}get scrollIndicator(){return this._scrollIndicator}get scrollBar(){return this._scrollBar}get pageNavigator(){return this._pageNavigator}get pageScroller(){return this._pageScroller}get commandBox(){return this._commandBox}get row(){return this._row}get header(){return this._header}get footer(){return this._footer}get searchBar(){return this._searchBar}get searchResultBar(){return this._searchResultBar}get fieldBar(){return this._fieldBar}get fieldHeader(){return this._fieldHeader}get formPanel(){return this._formPanel}get buttonPanel(){return this._buttonPanel}get searchPanel(){return this._searchPanel}get filterPanel(){return this._filterPanel}get rowGroup(){return this._rowGroup}get dataGroup(){return this._dataGroup}get rowInfos(){return this._rowInfos}get singleRow(){return this._singleRow}get attachedRow(){return this._attachedRow}get emptyPage(){return this._emptyPage}get loadingPage(){return this._loadingPage}get infoPage(){return this._infoPage}get editPage(){return this._editPage}get addView(){return this._addPage}assign(t){t&&(this.assignProps(t),t.rowInfos&&this._rowInfos.setInfos(t.rowInfos))}}class fc extends pc{constructor(t,e,i,s){super(t),this._owner=e,this._portrait=i,this._landscape=s}get portrait(){return this._portrait}get landscape(){return this._landscape}get current(){return this._owner.current}}function wc(t){return t&&{_idx:t.header().index,level:t.level(),field:t.field(),value:t.value(),expanded:t.expanded()}}class mc extends i{constructor(t,e,i=d.DEFAULT){super();const s=new Zd(t,e,i).setWrapper(this).$_c;this._current=this._portrait=s.portrait().setWrapper(new pc(s.portrait())),this._landscape=s.landscape().setWrapper(new pc(s.landscape())),this._options=s.options().setWrapper(new fc(s.options(),this,this._portrait,this._landscape)),s._orientationChanged=t=>{this._current=this.$_c.current().isWrapper(this._landscape)?this._landscape:this._portrait}}destory(){this.$_c=this.$_c.destroy()}get onScroll(){return this.$_c.onScroll}set onScroll(t){this.$_c.onScroll=t}get onRowClick(){return this.$_c.onRowClick}set onRowClick(t){this.$_c.onRowClick=t}get onRowLongPress(){return this.$_c.onRowLongPress}set onRowLongPress(t){this.$_c.onRowLongPress=t}get onRowSwipe(){return this.$_c.onRowSwipe}set onRowSwipe(t){this.$_c.onRowSwipe=t}get onButtonClick(){return this.$_c.onButtonClick}set onButtonClick(t){this.$_c.onButtonClick=t}get onRowCheck(){return this.$_c.onRowCheck}set onRowCheck(t){this.$_c.onRowCheck=t}get onRowsCheck(){return this.$_c.onRowsCheck}set onRowsCheck(t){this.$_c.onRowsCheck=t}get onAllRowsCheck(){return this.$_c.onAllRowsCheck}set onAllRowsCheck(t){this.$_c.onAllRowsCheck=t}get onRowDetail(){return this.$_c.onRowDetail}set onRowDetail(t){this.$_c.onRowDetail=t}get onRowsDetail(){return this.$_c.onRowsDetail}set onRowsDetail(t){this.$_c.onRowsDetail=t}get onAllRowsDetail(){return this.$_c.onAllRowsDetail}set onAllRowsDetail(t){this.$_c.onAllRowsDetail=t}get onRowFlagChange(){return this.$_c.onRowFlagChange}set onRowFlagChange(t){this.$_c.onRowFlagChange=t}get onRowsFlagChange(){return this.$_c.onRowsFlagChange}set onRowsFlagChange(t){this.$_c.onRowsFlagChange=t}get onAllRowsFlagChange(){return this.$_c.onAllRowsFlagChange}set onAllRowsFlagChange(t){this.$_c.onAllRowsFlagChange=t}get onSelectionAdd(){return this.$_c.onSelectionAdd}set onSelectionAdd(t){this.$_c.onSelectionAdd=t}get onSelectionClear(){return this.$_c.onSelectionClear}set onSelectionClear(t){this.$_c.onSelectionClear=t}get onSelectionResize(){return this.$_c.onSelectionResize}set onSelectionResize(t){this.$_c.onSelectionResize=t}get onLastRowRevealed(){return this.$_c.onLastRowRevealed}set onLastRowRevealed(t){this.$_c.onLastRowRevealed=t}get onBeforeGroupExpand(){return this.$_c.onBeforeGroupExpand}set onBeforeGroupExpand(t){this.$_c.onBeforeGroupExpand=t}get onGroupExpand(){return this.$_c.onGroupExpand}set onGroupExpand(t){this.$_c.onGroupExpand=t}get onBeforeGroupCollapse(){return this.$_c.onBeforeGroupCollapse}set onBeforeGroupCollapse(t){this.$_c.onBeforeGroupCollapse=t}get onGroupCollapse(){return this.$_c.onGroupCollapse}set onGroupCollapse(t){this.$_c.onGroupCollapse=t}get onBeforePageChange(){return this.$_c.onBeforePageChange}set onBeforePageChange(t){this.$_c.onBeforePageChange=t}get onPageChange(){return this.$_c.onPageChange}set onPageChange(t){this.$_c.onPageChange=t}get onFocusedRowChange(){return this.$_c.onFocusedRowChange}set onFocusedRowChange(t){this.$_c.onFocusedRowChange=t}get onEditFieldChange(){return this.$_c.onEditFieldChange}set onEditFieldChange(t){this.$_c.onEditFieldChange=t}get onEditCommit(){return this.$_c.onEditCommit}set onEditCommit(t){this.$_c.onEditCommit=t}get orientation(){return this.$_c.orientation()}get syncOrientation(){return this.$_c.syncOrientation()}set syncOrientation(t){this.$_c.setSyncOrientation(t)}get screenOrientation(){return this.$_c.screenOrientation()}get syncScreenOrientation(){return this.$_c.syncScreenOrientation()}set screenSyncOrientation(t){this.$_c.setScreenSyncOrientation(t)}get renderMode(){return this.$_c.renderMode()}get description(){return this.$_c.description()}set description(t){this.$_c.setDescription(t)}get data(){return this._data}set data(t){t!==this._data&&(this._data=t,this.$_c.setData(t?t.$_d:null))}get textFormatter(){return this.$_c.textFormatter()}set textFormatter(t){this.$_c.setTextFormatter(t)}get boolFormatter(){return this.$_c.boolFormatter()}set boolFormatter(t){this.$_c.setBoolFormatter(t)}get numberFormatter(){return this.$_c.numberFormatter()}set numberFormatter(t){this.$_c.setNumberFormatter(t)}get dateFormatter(){return this.$_c.dateFormatter()}set dateFormatter(t){this.$_c.setDateFormatter(t)}get textFormat(){return this.$_c.textFormat()}set textFormat(t){this.$_c.setTextFormat(t)}get boolFormat(){return this.$_c.boolFormat()}set boolFormat(t){this.$_c.setBoolFormat(t)}get numberFormat(){return this.$_c.numberFormat()}set numberFormat(t){this.$_c.setNumberFormat(t)}get dateFormat(){return this.$_c.dateFormat()}set dateFormat(t){this.$_c.setDateFormat(t)}get options(){return this._options}setOptions(t){return t&&this._options.assign(t),this}get portrait(){return this._portrait}setPortrait(t){return t&&this._portrait.assign(t),this}get landscape(){return this._landscape}setLandscape(t){return t&&this._landscape.assign(t),this}get current(){return this._current}get isEmpty(){return this.$_c.isEmpty()}get topRow(){return this.$_c.topRow()}set topRow(t){this.$_c.setTopRow(t)}get isRowGrouped(){return this.$_c.isRowGrouped()}get isDataGrouped(){return this.$_c.isRowGrouped()}get isPaging(){return this.$_c.isPaging()}get isSingleRow(){return this.$_c.isSingleRow()}get pageSize(){return this.$_c.pageSize()}get pageCount(){return this.$_c.pageCount()}get page(){return this.$_c.page()}set page(t){this.$_c.setPage(t)}get registeredRowCommands(){return this.$_c.rowCommands().registeredCommands()}get commandRow(){return this.$_c.commandRow()}get checkedRowCount(){return this.$_c.checkedRowCount()}get lineSeparator(){return this.$_c.lineSeparator()}set lineSeparator(t){this.$_c.setLineSeparator(t)}get searchOptions(){return Object.assign({},this.$_c.searchOptions())}set searchOptions(t){this.$_c.setSearchOptions(t)}get fitRowWhenScroll(){return this.$_c.fitRowWhenScroll}set fitRowWhenScroll(t){this.$_c.fitRowWhenScroll=t}get fitRowWhenClick(){return this.$_c.fitRowWhenClick}set fitRowWhenClick(t){this.$_c.fitRowWhenClick=t}get scrollIndex(){return this.$_c.scrollIndex()}set scrollIndex(t){this.$_c.setScrollIndex(t,0)}get focusedRow(){return this.$_c.focusedRow()}get dataLoading(){return this.$_c.isDataLoading()}setDataLoading(t){return this.$_c.setDataLoading(t)}get dataAppending(){return this.$_c.isDataAppending()}setDataAppending(t,e=!0){return this.$_c.setDataAppending(t,e)}get skeletonVisible(){return this.$_c.skeletonVisible}set skeletonVisible(t){this.$_c.skeletonVisible=t}get alwaysEmptyPage(){return this.$_c.alwaysEmptyPage}set alwaysEmptyPage(t){this.$_c.alwaysEmptyPage=t}setConfig(t){for(let t=0,e=arguments.length;t<e;t++){var i=arguments[t];if(!re(i))return;var s=i.props;if(re(s)){const o=this.$_c;var r=s.rowCommands;const a=s.icons;var n=s.menus;if(s.shapes&&o.registerShapes(s.shapes),s.templates&&this.registerTemplates(s.templates),r)for(const h in r)h.startsWith("@")?o.rowCommands().update(h,r[h]):o.rowCommands().register(h,r[h],!0);if(a&&(Array.isArray(a)?a.forEach(t=>o.registerIconSet(t.name,t)):q.isObject(a)&&o.registerIconSet(a.name,a)),n)for(const l in n)this.$_c.registerMenu(l,n[l]);this.assignProps(s)}this.setOptions(i.options),this.setPortrait(i.portrait),this.setLandscape(i.landscape)}return this}registerTemplate(t,e){return e=e||t.name||Rs(),this.$_c.registerTemplate(e,t,!1),e}registerTemplates(t){if(re(t))for(var e in t)this.registerTemplate(t[e],e)}registerSharedTemplate(t,e){return e=e||t.name||Rs(),this.$_c.registerTemplate(e,t,!0),e}registerSharedTemplates(t){if(re(t))for(var e in t)this.registerSharedTemplate(t[e],e)}registerShape(t){t&&this.$_c.registerShape(t.name,t.d,t.width,t.height)}registerShapes(t){const e={};Array.isArray(t)&&t.forEach(t=>{t.name&&(e[t.name]=t)}),this.$_c.registerShapes(e)}registerIconSet(t,e){if(!t)throw new Error("IconSet의 이름이 지정돼야 합니다.");this.$_c.registerIconSet(t,e)}rowGroupBy(t){t&&!Array.isArray(t)&&(t=[t]),this.$_c.rowGroupBy(t)}groupOfRow(t){const e=this.$_c._group;return e?wc(e.groupOfRow(t)):null}parentOfGroup(t){if(t){const e=this.$_c._group;if(e){t=e.getItem(t._idx);return t&&wc(t.group.parent)}}}childrenOfGroup(t){if(t){const e=this.$_c._group;if(e){const i=e.getItem(t._idx);if(i)return i.group.children.map(t=>wc(t))}}}expandGroup(t){return this.$_c._group,!1}collapseGroup(t){return this.$_c._group,!1}dataGroupBy(t){this.$_c.dataGroupBy(t)}setPaging(t){return this.$_c.setPaging(t),this}clearSelection(){this.$_c.clearSelection()}selectRows(t,e){this.$_c.selectRows(t,e)}isRowSelected(t){const e=this.$_c.getSelection();return e&&e.isRowSelected(t)}getSelectedRows(){const t=this.$_c.getSelection();return t&&t.getSelectedRows()}isRowChecked(t){return this.$_c.isRowChecked(t)}getCheckedRows(t=!0){return this.$_c.$_getFlags().getCheckedRows(t)}checkRow(t,e){return this.$_c.checkRow(t,e)}toggleChecked(t){this.$_c.toggleChecked(t)}checkRows(t,e){return this.$_c.$_getFlags().checkRows(t,e)}checkRowRange(t,e,i){return this.$_c.$_getFlags().checkRange(t,e,i)}checkAllRows(t){return this.$_c.$_getFlags().checkAll(t)}checkAll(t){if(!this.$_c.isDataGrouped())return this.checkAllRows(t)}isRowCheckable(t){return this.$_c.isRowCheckable(t)}setCheckable(t,e){const i=this.$_c.$_getFlags();return i&&i.setCheckable(t,e)}isRowDetailed(t){return this.$_c.isRowDetailed(t)}getDetailedRows(t){return this.$_c.$_getFlags().getDetailedRows(t)}setRowDetailed(t,e,i=!1){this.$_c.setRowDetailed(t,e,i,!1)}setRowsDetailed(t,e,i){return this.$_c.$_getFlags().detailRows(e,i)}setRowRangeDetailed(t,e,i,s){return this.$_c.$_getFlags().detailRange(e,i,s)}setAllRowsDetailed(t){return this.$_c.$_getFlags().detailAll(t)}isRowFlagged(t,e){return this.$_c.$_getFlags().hasUserFlag(t,e)}getFlaggedRows(t,e){return this.$_c.$_getFlags().getUserFlaggedRows(t,e)}setRowFlagAll(t,e){return this.$_c.$_getFlags().setUserFlagAll(t,e)}setRowFlag(t,e,i){return this.$_c.$_getFlags().setUserFlag(t,e,i)}setRowsFlag(t,e,i){return this.$_c.$_getFlags().setUserFlags(t,e,i)}setRowRangeFlag(t,e,i,s){return this.$_c.$_getFlags().setUserFlagRange(t,e,i,s)}registerRowCommand(t,e,i=!1){this.$_c.rowCommands().register(t,e,i)}unregisterRowCommands(t){this.$_c.rowCommands().unregister(t)}getRowCommand(t){return this.$_c.rowCommands().get(t)}updateRowCommand(t,e){this.$_c.rowCommands().update(t,e)}setCommandRow(t,e=!0){this.$_c.setCommandRow(t,e)}closePanel(t=!0){this.$_c.closePanel(t)}showFormPanel(t=!0){this.$_c.showFormPanel(null,t)}showButtonPanel(t=!0){this.$_c.showButtonPanel(t)}showSearchPanel(t,e=!0){this.$_c.showSearchPanel(t,e)}showFilterPanel(t,e=!0){this.$_c.showFilterPanel(t,e)}showMenu(t,e=!0){this.$_c.showMenu(t,e)}closeMenu(t=!0){this.$_c.closeMenu(t)}showInfoPage(t,e,i=!0){this.$_c.showInfoPage(t,e,i)}closeInfoPage(){this.$_c.isInfoPageVisible()&&this.$_c.closeRowPage(!1,!0)}showEditPage(t,e,i=!0){this.$_c.showEditPage(t,e,i)}closeEditPage(t,e=!0){this.$_c.isEditPageVisible()&&this.$_c.closeRowPage(t,e)}getEditValues(){return this.$_c.getEditValues()}search(t,e){const i=this.$_c.search(e,t);return i?i.fields():void 0}makeRowVisible(t){this.$_c.makeRowVisible(t)}setFocusedRow(t){this.$_c.setFocusedRow(t)}scrollToEnd(t){this.$_c.scrollToEnd(t)}showToast(t){this.$_c.showToast(t)}}class vc extends a{isRowUpdated(t){throw tt}isRowDeleted(t){throw tt}getValue(t,e,i=0){throw tt}getValues(t,e,i=0){throw tt}findRow(t,e,i){throw tt}findRows(t,e,i){throw tt}findDistinctRows(t,e,i){throw tt}}class yc extends vc{createLinkView(t,e){return new Cc(t,this,e)}}class bc extends yc{constructor(t,e,i){super(),t instanceof wo?this.$_d=t:this.$_d=new wo(t,e,i,this)}$_doDestory(){this.$_d=this.$_d.destroy()}get onValueUpdate(){return this.$_d.onValueUpdate}set onValueUpdate(t){this.$_d.onValueUpdate=t}get onRowUpdate(){return this.$_d.onRowUpdate}set onRowUpdate(t){this.$_d.onRowUpdate=t}get onRowsUpdate(){return this.$_d.onRowsUpdate}set onRowsUpdate(t){this.$_d.onRowsUpdate=t}get onRowAdd(){return this.$_d.onRowAdd}set onRowAdd(t){this.$_d.onRowAdd=t}get onRowsAdd(){return this.$_d.onRowsAdd}set onRowsAdd(t){this.$_d.onRowsAdd=t}get onRowsClear(){return this.$_d.onRowsClear}set onRowsClear(t){this.$_d.onRowsClear=t}get onRowDelete(){return this.$_d.onRowDelete}set onRowDelete(t){this.$_d.onRowDelete=t}get onRowsDelete(){return this.$_d.onRowsDelete}set onRowsDelete(t){this.$_d.onRowsDelete=t}get onRowRangeDelete(){return this.$_d.onRowRangeDelete}set onRowRangeDelete(t){this.$_d.onRowRangeDelete=t}get onRowMove(){return this.$_d.onRowMove}set onRowMove(t){this.$_d.onRowMove=t}get onRowsMove(){return this.$_d.onRowsMove}set onRowsMove(t){this.$_d.onRowsMove=t}get onRowStateChange(){return this.$_d.onRowStateChange}set onRowStateChange(t){this.$_d.onRowStateChange=t}get onRowStatesChange(){return this.$_d.onRowStatesChange}set onRowStatesChange(t){this.$_d.onRowStatesChange=t}get onRowCountChange(){return this.$_d.onRowCountChange}set onRowCountChange(t){this.$_d.onRowCountChange=t}get onDataChange(){return this.$_d.onDataChange}set onDataChange(t){this.$_d.onDataChange=t}get title(){return this.$_d.title()}get fieldCount(){return this.$_d.fieldCount()}get fields(){return this.$_d.fields().map(t=>t.proxy())}get readonly(){return this.$_d.readOnly()}get softDeleting(){return this.$_d.softDeleting()}get restorable(){return this.$_d.restorable()}get validator(){return this.$_d.validator()}getField(t){return this.$_d.getField(t).proxy()}createView(t,e){return new Sc(t,this,e)}setRowCount(t,e=0){this.$_d.setRowCount(t)}isEmpty(t){return this.$_d.isEmpty(t)}getValues(t,e,i=!0){return this.$_d.getValues(t,e,i)}loadData(t){return this.$_d.loadData(t),this}insertRow(t,e){return this.$_d.insertRow(t,e)}appendRow(t){return this.$_d.appendRow(t)}insertRows(t,e){return this.$_d.insertRows(t,e)}appendRows(t){return this.$_d.appendRows(t)}deleteAll(t=!1){return this.$_d.deleteAll(t)}deleteRow(t,e=!1){this.$_d.deleteRow(t,e)}deleteRows(t,e=!1){return this.$_d.deleteRows(t,e)}deleteRange(t,e,i=!1){return this.$_d.deleteRange(t,e,i)}updateRow(t,e,i=!1){return this.$_d.updateRow(t,e,i)}updateRows(t,e,i=!1){return this.$_d.updateRows(t,e,i)}updateRange(t,e,i,s=!1){return this.$_d.updateRange(t,e,i,s)}restoreRow(t){return this.$_d.restoreRow(t)}restoreRows(t){return this.$_d.restoreRows(t)}moveRow(t,e){return this.$_d.moveRow(t,e)}moveRows(t,e,i){return this.$_d.moveRows(t,e,i)}get name(){return this.$_d.name()}get source(){return this}get rowCount(){return this.$_d.rowCount()}isRowUpdated(t){return this.$_d.getRowState(t)===Zs.UPDATED}isRowDeleted(t){return this.$_d.getRowState(t)===Zs.DELETED}getValue(t,e,i=!0){if(e){var s=q.getFieldProp(e);return s?this.$_d.getProp(t,s.field,s.props,i):this.$_d.getValue(t,e,i)}}findRow(t,e=0,i=-1){return this.$_d.findRow(t,e,i)}findRows(t,e=0,i=-1){return this.$_d.findRows(t,e,i)}findDistinctRows(t,e=0,i=-1){return this.$_d.findDistinctRows(t,e,i)}}class Sc extends yc{constructor(t,e,i){super(),this.$_d=new Co(t,e.$_d,i,this),this._source=e}$_doDestory(){this.$_d=this.$_d.destroy()}get onSortChange(){return this.$_d.onSortChange}set onSortChange(t){this.$_d.onSortChange=t}get onFilterChange(){return this.$_d.onFilterChange}set onFilterChange(t){this.$_d.onFilterChange=t}get source(){return this._source}get fields(){return this.$_d.fields().map(t=>t.proxy())}get autoSort(){return this.$_d.autoSort()}set autoSort(t){this.$_d.setAutoSort(t)}snapshot(t){return new bc(this.$_d.snapshot(t))}build(t=!1){return this.$_d.build(t),this}sort(t,e=!1){return this.$_d.sort(t,e),this}addSort(t,e,i,s=!1){return this.$_d.addSort(t,e,i,s),this}appendSort(t,e,i=!1){return this.$_d.appendSort(t,e,i),this}removeSort(t,e=!1){return this.$_d.removeSort(t,e),this}toggleSort(t,e=!1){return this.$_d.toggleSort(t,e),this}select(t,e,i=!0,s=!1){return this.$_d.addFilter({name:t,filter:e,enabled:i},!1,s),this}selectAfter(t,e,i=!0,s=!1){return this.$_d.addFilter({name:t,filter:e,enabled:i},!0,s),this}slice(t,e,i=!0,s=!1){return this.$_d.addFilter({name:t,filter:e,enabled:i},!1,s),this}sliceAfter(t,e,i=!0,s=!1){return this.$_d.addFilter({name:t,filter:e,enabled:i},!0,s),this}dedupe(t,e,i=!0,s=!1){return this.$_d.addFilter({name:t,filter:e,enabled:i},!1,s),this}dedupeAfter(t,e,i=!0,s=!1){return this.$_d.addFilter({name:t,filter:e,enabled:i},!0,s),this}addFilter(t,e=!1){return this.$_d.addFilter(t,!1,e),this}addPostFilter(t,e=!1){return this.$_d.addFilter(t,!0,e),this}addFilterSet(t,e=!1){return this.$_d.addFilterSet(t,!1,e),this}addPostFilterSet(t,e=!1){return this.$_d.addFilterSet(t,!0,e),this}removeFilter(t,e=!1){return this.$_d.removeFilter(t,e),this}removeFilters(t,e=!1){return this.$_d.removeFilters(t,e),this}clearFilters(t=!1){return this.$_d.clearFilters(t),this}enableFilter(t,e,i=!0){return this.$_d.enableFilter(t,e,i),this}enableFilters(t,e,i=!0){return this.$_d.enableFilters(t,e,i),this}enableAllFilters(t,e=0){return this.$_d.enableAllFilters(t,!0),this}get name(){return this.$_d.name()}get rowCount(){return this.$_d.rowCount()}getValue(t,e,i){if(e){var s=q.getFieldProp(e);return s?this.$_d.getProp(t,s.field,s.props,i):this.$_d.getValue(t,e,i)}}getValues(t,e,i=!0){return this.$_d.getValues(t,e,i)}isRowUpdated(t){return this.$_d.getRowState(t)===Zs.UPDATED}isRowDeleted(t){return this.$_d.getRowState(t)===Zs.DELETED}findRow(t,e=0,i=-1){return this.$_d.findRow(t,e,i)}findRows(t,e=0,i=-1){return this.$_d.findRows(t,e,i)}findDistinctRows(t,e=0,i=-1){return this.$_d.findDistinctRows(t,e,i)}deleteRow(t,e=!1){this.$_d.deleteRow(t,e)}deleteRows(t,e=!1){this.$_d.deleteRows(t,e)}appendRows(t){return this.source.appendRows(t)}}class Cc extends vc{constructor(t,e,i){function s(t){return Array.isArray(t)?t.map(t=>r(t)):[r(t)]}function r(t){return t?{data:t.data.$_d,keyFields:t.keyFields,masterFields:t.masterFields,details:t.details?s(t.details):null}:null}super(),this.$_d=new Rh(t,e.$_d,s(i),this)}$_doDestory(){this.$_d=this.$_d.destroy()}isMaster(t){return this.$_d.isMaster(t)}isLeaf(t){return this.$_d.isLeaf(t)}get name(){return this.$_d.name()}get source(){return this._data.source}get rowCount(){return this.$_d.rowCount()}getValue(t,e,i){if(e){var s=q.getFieldProp(e);return s?this.$_d.getProp(t,s.field,s.props,i):this.$_d.getValue(t,e,i)}}getValues(t){return this.$_d.getRowValues(t)}isRowUpdated(t){return this.$_d.getRowState(t)===Zs.UPDATED}isRowDeleted(t){return this.$_d.getRowState(t)===Zs.DELETED}findRow(t,e,i){return this.$_d.findRow(t,e,i)}findRows(t,e,i){return this.$_d.findRows(t,e,i)}findDistinctRows(t,e,i){return this.$_d.findDistinctRows(t,e,i)}getDataViews(){return this.$_d.getDataViews().map(t=>t.wrapper())}deleteRow(t,e=!1){this.$_d.deleteRow(t,e)}deleteRows(t,e=!1){this.$_d.deleteRows(t,e)}}class xc{static getVersion(){return"0.9.11"}static setLocale(t,e){e&&X(t,e),t=t,Z=Y[Q=t],Z=Z||Y.ko,Z}static registerLocale(t,e){X(t,e)}static setLogging(t){J.setLogging(t)}static setBounding(t){Ve.BOUNDING=t}static destroy(){Es.destroy(),Vs.destroy()}static registerTemplate(t,e){return xs(null,Vs,t,e)}static unregisterTemplates(t){if("string"!=typeof t)return Vs.removeAll(t);Vs.remove(t)}static createData(t,e,i){return new bc(t,e,i)}static createDataView(t,e,i){return e instanceof bc||lt(Z.dataMustSet),new Sc(t,e,i)}static createDataLink(t,e,i){return e instanceof yc||lt(Z.dataMustSet),new Cc(t,e,i)}static createList(t,e,i=d.DEFAULT){return new mc(t,e,i)}}return xc.DListRenderMode=d,xc.DListRowBarDisplay=er,xc.DListRowBorderIndent=zr,xc.DListControlObjectPosition=vs,xc.DListScrollIndicatorMode=Kr,xc.DListRowIndents=E,xc.DListDataSource=vc,xc.DListData=bc,xc.DListDataView=Sc,xc.DListControl=mc,xc});
